(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))g(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&g(h)}).observe(document,{childList:!0,subtree:!0});function x(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function g(u){if(u.ep)return;u.ep=!0;const d=x(u);fetch(u.href,d)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e,t){const x=new Set(e.split(","));return g=>x.has(g)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const x=e.indexOf(t);x>-1&&e.splice(x,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return x=>t[x]||(t[x]=e(x))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,x)=>x?x.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let x=0;x<e.length;x++)e[x](...t)},def=(e,t,x,g=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:g,value:x})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let x=0;x<e.length;x++){const g=e[x],u=isString(g)?parseStringStyle(g):normalizeStyle(g);if(u)for(const d in u)t[d]=u[d]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(x=>{if(x){const g=x.split(propertyDelimiterRE);g.length>1&&(t[g[0].trim()]=g[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let x=0;x<e.length;x++){const g=normalizeClass(e[x]);g&&(t+=g+" ")}else if(isObject(e))for(const x in e)e[x]&&(t+=x+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString=e=>isString(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((x,[g,u],d)=>(x[stringifySymbol(g,d)+" =>"]=u,x),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(x=>stringifySymbol(x))}:isSymbol(t)?stringifySymbol(t):isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t,stringifySymbol=(e,t="")=>{var x;return isSymbol(e)?`Symbol(${(x=e.description)!=null?x:t})`:e};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const x=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=x}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let x,g;for(x=0,g=this.effects.length;x<g;x++)this.effects[x].stop();for(x=0,g=this.cleanups.length;x<g;x++)this.cleanups[x]();if(this.scopes)for(x=0,g=this.scopes.length;x<g;x++)this.scopes[x].stop(!0);if(!this.detached&&this.parent&&!t){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(t,x,g,u){this.fn=t,this.trigger=x,this.scheduler=g,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,u)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let t=0;t<this._depsLength;t++){const x=this.deps[t];if(x.computed&&(triggerComputed(x.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=shouldTrack,x=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=x,shouldTrack=t}}stop(){this.active&&(preCleanupEffect(this),postCleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function triggerComputed(e){return e.value}function preCleanupEffect(e){e._trackId++,e._depsLength=0}function postCleanupEffect(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)cleanupDepEffect(e.deps[t],e);e.deps.length=e._depsLength}}function cleanupDepEffect(e,t){const x=e.get(t);x!==void 0&&t._trackId!==x&&(e.delete(t),e.size===0&&e.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(e,t,x){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const g=e.deps[e._depsLength];g!==t?(g&&cleanupDepEffect(g,e),e.deps[e._depsLength++]=t):e._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(e,t,x){pauseScheduling();for(const g of e.keys()){let u;g._dirtyLevel<t&&(u??(u=e.get(g)===g._trackId))&&(g._shouldSchedule||(g._shouldSchedule=g._dirtyLevel===0),g._dirtyLevel=t),g._shouldSchedule&&(u??(u=e.get(g)===g._trackId))&&(g.trigger(),(!g._runnings||g.allowRecurse)&&g._dirtyLevel!==2&&(g._shouldSchedule=!1,g.scheduler&&queueEffectSchedulers.push(g.scheduler)))}resetScheduling()}const createDep=(e,t)=>{const x=new Map;return x.cleanup=e,x.computed=t,x},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(e,t,x){if(shouldTrack&&activeEffect){let g=targetMap.get(e);g||targetMap.set(e,g=new Map);let u=g.get(x);u||g.set(x,u=createDep(()=>g.delete(x))),trackEffect(activeEffect,u)}}function trigger(e,t,x,g,u,d){const h=targetMap.get(e);if(!h)return;let y=[];if(t==="clear")y=[...h.values()];else if(x==="length"&&isArray(e)){const o=Number(g);h.forEach((l,s)=>{(s==="length"||!isSymbol(s)&&s>=o)&&y.push(l)})}else switch(x!==void 0&&y.push(h.get(x)),t){case"add":isArray(e)?isIntegerKey(x)&&y.push(h.get("length")):(y.push(h.get(ITERATE_KEY)),isMap(e)&&y.push(h.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(e)||(y.push(h.get(ITERATE_KEY)),isMap(e)&&y.push(h.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&y.push(h.get(ITERATE_KEY));break}pauseScheduling();for(const o of y)o&&triggerEffects(o,4);resetScheduling()}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...x){const g=toRaw(this);for(let d=0,h=this.length;d<h;d++)track(g,"get",d+"");const u=g[t](...x);return u===-1||u===!1?g[t](...x.map(toRaw)):u}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...x){pauseTracking(),pauseScheduling();const g=toRaw(this)[t].apply(this,x);return resetScheduling(),resetTracking(),g}}),e}function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,x=!1){this._isReadonly=t,this._isShallow=x}get(t,x,g){const u=this._isReadonly,d=this._isShallow;if(x==="__v_isReactive")return!u;if(x==="__v_isReadonly")return u;if(x==="__v_isShallow")return d;if(x==="__v_raw")return g===(u?d?shallowReadonlyMap:readonlyMap:d?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(g)?t:void 0;const h=isArray(t);if(!u){if(h&&hasOwn(arrayInstrumentations,x))return Reflect.get(arrayInstrumentations,x,g);if(x==="hasOwnProperty")return hasOwnProperty}const y=Reflect.get(t,x,g);return(isSymbol(x)?builtInSymbols.has(x):isNonTrackableKeys(x))||(u||track(t,"get",x),d)?y:isRef(y)?h&&isIntegerKey(x)?y:y.value:isObject(y)?u?readonly(y):reactive(y):y}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,x,g,u){let d=t[x];if(!this._isShallow){const o=isReadonly(d);if(!isShallow(g)&&!isReadonly(g)&&(d=toRaw(d),g=toRaw(g)),!isArray(t)&&isRef(d)&&!isRef(g))return o?!1:(d.value=g,!0)}const h=isArray(t)&&isIntegerKey(x)?Number(x)<t.length:hasOwn(t,x),y=Reflect.set(t,x,g,u);return t===toRaw(u)&&(h?hasChanged(g,d)&&trigger(t,"set",x,g):trigger(t,"add",x,g)),y}deleteProperty(t,x){const g=hasOwn(t,x);t[x];const u=Reflect.deleteProperty(t,x);return u&&g&&trigger(t,"delete",x,void 0),u}has(t,x){const g=Reflect.has(t,x);return(!isSymbol(x)||!builtInSymbols.has(x))&&track(t,"has",x),g}ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,x){return!0}deleteProperty(t,x){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,x=!1,g=!1){e=e.__v_raw;const u=toRaw(e),d=toRaw(t);x||(hasChanged(t,d)&&track(u,"get",t),track(u,"get",d));const{has:h}=getProto(u),y=g?toShallow:x?toReadonly:toReactive;if(h.call(u,t))return y(e.get(t));if(h.call(u,d))return y(e.get(d));e!==u&&e.get(t)}function has(e,t=!1){const x=this.__v_raw,g=toRaw(x),u=toRaw(e);return t||(hasChanged(e,u)&&track(g,"has",e),track(g,"has",u)),e===u?x.has(e):x.has(e)||x.has(u)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e,t=!1){!t&&!isShallow(e)&&!isReadonly(e)&&(e=toRaw(e));const x=toRaw(this);return getProto(x).has.call(x,e)||(x.add(e),trigger(x,"add",e,e)),this}function set(e,t,x=!1){!x&&!isShallow(t)&&!isReadonly(t)&&(t=toRaw(t));const g=toRaw(this),{has:u,get:d}=getProto(g);let h=u.call(g,e);h||(e=toRaw(e),h=u.call(g,e));const y=d.call(g,e);return g.set(e,t),h?hasChanged(t,y)&&trigger(g,"set",e,t):trigger(g,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:x,get:g}=getProto(t);let u=x.call(t,e);u||(e=toRaw(e),u=x.call(t,e)),g&&g.call(t,e);const d=t.delete(e);return u&&trigger(t,"delete",e,void 0),d}function clear(){const e=toRaw(this),t=e.size!==0,x=e.clear();return t&&trigger(e,"clear",void 0,void 0),x}function createForEach(e,t){return function(g,u){const d=this,h=d.__v_raw,y=toRaw(h),o=t?toShallow:e?toReadonly:toReactive;return!e&&track(y,"iterate",ITERATE_KEY),h.forEach((l,s)=>g.call(u,o(l),o(s),d))}}function createIterableMethod(e,t,x){return function(...g){const u=this.__v_raw,d=toRaw(u),h=isMap(d),y=e==="entries"||e===Symbol.iterator&&h,o=e==="keys"&&h,l=u[e](...g),s=x?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",o?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:a,done:f}=l.next();return f?{value:a,done:f}:{value:y?[s(a[0]),s(a[1])]:s(a),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(){const e={get(d){return get(this,d)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(d){return get(this,d,!1,!0)},get size(){return size(this)},has,add(d){return add.call(this,d,!0)},set(d,h){return set.call(this,d,h,!0)},delete:deleteEntry,clear,forEach:createForEach(!1,!0)},x={get(d){return get(this,d,!0)},get size(){return size(this,!0)},has(d){return has.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},g={get(d){return get(this,d,!0,!0)},get size(){return size(this,!0)},has(d){return has.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{e[d]=createIterableMethod(d,!1,!1),x[d]=createIterableMethod(d,!0,!1),t[d]=createIterableMethod(d,!1,!0),g[d]=createIterableMethod(d,!0,!0)}),[e,x,t,g]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const x=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(g,u,d)=>u==="__v_isReactive"?!e:u==="__v_isReadonly"?e:u==="__v_raw"?g:Reflect.get(hasOwn(x,u)&&u in g?x:g,u,d)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,x,g,u){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=u.get(e);if(d)return d;const h=getTargetType(e);if(h===0)return e;const y=new Proxy(e,h===2?g:x);return u.set(e,y),y}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;class ComputedRefImpl{constructor(t,x,g,u){this.getter=t,this._setter=x,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>t(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=g}get value(){const t=toRaw(this);return(!t._cacheable||t.effect.dirty)&&hasChanged(t._value,t._value=t.effect.run())&&triggerRefValue(t,4),trackRefValue(t),t.effect._dirtyLevel>=2&&triggerRefValue(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function computed$1(e,t,x=!1){let g,u;const d=isFunction(e);return d?(g=e,u=NOOP):(g=e.get,u=e.set),new ComputedRefImpl(g,u,d||!u,x)}function trackRefValue(e){var t;shouldTrack&&activeEffect&&(e=toRaw(e),trackEffect(activeEffect,(t=e.dep)!=null?t:e.dep=createDep(()=>e.dep=void 0,e instanceof ComputedRefImpl?e:void 0)))}function triggerRefValue(e,t=4,x,g){e=toRaw(e);const u=e.dep;u&&triggerEffects(u,t)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,x){this.__v_isShallow=x,this.dep=void 0,this.__v_isRef=!0,this._rawValue=x?t:toRaw(t),this._value=x?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const x=this.__v_isShallow||isShallow(t)||isReadonly(t);t=x?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=x?t:toReactive(t),triggerRefValue(this,4))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,x)=>unref(Reflect.get(e,t,x)),set:(e,t,x,g)=>{const u=e[t];return isRef(u)&&!isRef(x)?(u.value=x,!0):Reflect.set(e,t,x,g)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const x=stack.length?stack[stack.length-1].component:null,g=x&&x.appContext.config.warnHandler,u=getComponentTrace();if(g)callWithErrorHandling(g,x,11,[e+t.map(d=>{var h,y;return(y=(h=d.toString)==null?void 0:h.call(d))!=null?y:JSON.stringify(d)}).join(""),x&&x.proxy,u.map(({vnode:d})=>`at <${formatComponentName(x,d.type)}>`).join(`
`),u]);else{const d=[`[Vue warn]: ${e}`,...t];u.length&&d.push(`
`,...formatTrace(u)),console.warn(...d)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const x=t[0];x&&x.vnode===e?x.recurseCount++:t.push({vnode:e,recurseCount:0});const g=e.component&&e.component.parent;e=g&&g.vnode}return t}function formatTrace(e){const t=[];return e.forEach((x,g)=>{t.push(...g===0?[]:[`
`],...formatTraceEntry(x))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const x=t>0?`... (${t} recursive calls)`:"",g=e.component?e.component.parent==null:!1,u=` at <${formatComponentName(e.component,e.type,g)}`,d=">"+x;return e.props?[u,...formatProps(e.props),d]:[u+d]}function formatProps(e){const t=[],x=Object.keys(e);return x.slice(0,3).forEach(g=>{t.push(...formatProp(g,e[g]))}),x.length>3&&t.push(" ..."),t}function formatProp(e,t,x){return isString(t)?(t=JSON.stringify(t),x?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?x?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),x?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),x?t:[`${e}=`,t])}function callWithErrorHandling(e,t,x,g){try{return g?e(...g):e()}catch(u){handleError(u,t,x)}}function callWithAsyncErrorHandling(e,t,x,g){if(isFunction(e)){const u=callWithErrorHandling(e,t,x,g);return u&&isPromise(u)&&u.catch(d=>{handleError(d,t,x)}),u}if(isArray(e)){const u=[];for(let d=0;d<e.length;d++)u.push(callWithAsyncErrorHandling(e[d],t,x,g));return u}}function handleError(e,t,x,g=!0){const u=t?t.vnode:null;if(t){let d=t.parent;const h=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${x}`;for(;d;){const l=d.ec;if(l){for(let s=0;s<l.length;s++)if(l[s](e,h,y)===!1)return}d=d.parent}const o=t.appContext.config.errorHandler;if(o){pauseTracking(),callWithErrorHandling(o,null,10,[e,h,y]),resetTracking();return}}logError(e,x,u,g)}function logError(e,t,x,g=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,x=queue.length;for(;t<x;){const g=t+x>>>1,u=queue[g],d=getId(u);d<e||d===e&&u.pre?t=g+1:x=g}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t,x=isFlushing?flushIndex+1:0){for(;x<queue.length;x++){const g=queue[x];if(g&&g.pre){if(e&&g.id!==e.uid)continue;queue.splice(x,1),x--,g()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((x,g)=>getId(x)-getId(g));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const x=activePostFlushCbs[postFlushIndex];x.active!==!1&&x()}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const x=getId(e)-getId(t);if(x===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return x};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,t.i,t.i?15:14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,x){if(!t||e._n)return e;const g=(...u)=>{g._d&&setBlockTracking(-1);const d=setCurrentRenderingInstance(t);let h;try{h=e(...u)}finally{setCurrentRenderingInstance(d),g._d&&setBlockTracking(1)}return h};return g._n=!0,g._c=!0,g._d=!0,g}function invokeDirectiveHook(e,t,x,g){const u=e.dirs,d=t&&t.dirs;for(let h=0;h<u.length;h++){const y=u[h];d&&(y.oldValue=d[h].value);let o=y.dir[g];o&&(pauseTracking(),callWithAsyncErrorHandling(o,x,8,[e.el,y,e,t]),resetTracking())}}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction(e)?extend({name:e.name},t,{setup:e}):e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,x=currentInstance){const g=e.__wdc||(e.__wdc=()=>{let u=x;for(;u;){if(u.isDeactivated)return;u=u.parent}return e()});if(injectHook(t,g,x),x){let u=x.parent;for(;u&&u.parent;)isKeepAlive(u.parent.vnode)&&injectToKeepAliveRoot(g,t,x,u),u=u.parent}}function injectToKeepAliveRoot(e,t,x,g){const u=injectHook(t,e,g,!0);onUnmounted(()=>{remove(g[t],u)},x)}function injectHook(e,t,x=currentInstance,g=!1){if(x){const u=x[e]||(x[e]=[]),d=t.__weh||(t.__weh=(...h)=>{pauseTracking();const y=setCurrentInstance(x),o=callWithAsyncErrorHandling(t,x,e,h);return y(),resetTracking(),o});return g?u.unshift(d):u.push(d),d}}const createHook=e=>(t,x=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...g)=>t(...g),x)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(e,t,x,g){let u;const d=x;if(isArray(e)||isString(e)){u=new Array(e.length);for(let h=0,y=e.length;h<y;h++)u[h]=t(e[h],h,void 0,d)}else if(typeof e=="number"){u=new Array(e);for(let h=0;h<e;h++)u[h]=t(h+1,h,void 0,d)}else if(isObject(e))if(e[Symbol.iterator])u=Array.from(e,(h,y)=>t(h,y,void 0,d));else{const h=Object.keys(e);u=new Array(h.length);for(let y=0,o=h.length;y<o;y++){const l=h[y];u[y]=t(e[l],l,y,d)}}else u=[];return u}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:x,setupState:g,data:u,props:d,accessCache:h,type:y,appContext:o}=e;let l;if(t[0]!=="$"){const T=h[t];if(T!==void 0)switch(T){case 1:return g[t];case 2:return u[t];case 4:return x[t];case 3:return d[t]}else{if(hasSetupBinding(g,t))return h[t]=1,g[t];if(u!==EMPTY_OBJ&&hasOwn(u,t))return h[t]=2,u[t];if((l=e.propsOptions[0])&&hasOwn(l,t))return h[t]=3,d[t];if(x!==EMPTY_OBJ&&hasOwn(x,t))return h[t]=4,x[t];shouldCacheAccess&&(h[t]=0)}}const s=publicPropertiesMap[t];let a,f;if(s)return t==="$attrs"&&track(e.attrs,"get",""),s(e);if((a=y.__cssModules)&&(a=a[t]))return a;if(x!==EMPTY_OBJ&&hasOwn(x,t))return h[t]=4,x[t];if(f=o.config.globalProperties,hasOwn(f,t))return f[t]},set({_:e},t,x){const{data:g,setupState:u,ctx:d}=e;return hasSetupBinding(u,t)?(u[t]=x,!0):g!==EMPTY_OBJ&&hasOwn(g,t)?(g[t]=x,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(d[t]=x,!0)},has({_:{data:e,setupState:t,accessCache:x,ctx:g,appContext:u,propsOptions:d}},h){let y;return!!x[h]||e!==EMPTY_OBJ&&hasOwn(e,h)||hasSetupBinding(t,h)||(y=d[0])&&hasOwn(y,h)||hasOwn(g,h)||hasOwn(publicPropertiesMap,h)||hasOwn(u.config.globalProperties,h)},defineProperty(e,t,x){return x.get!=null?e._.accessCache[t]=0:hasOwn(x,"value")&&this.set(e,t,x.value,null),Reflect.defineProperty(e,t,x)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,x)=>(t[x]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),x=e.proxy,g=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:u,computed:d,methods:h,watch:y,provide:o,inject:l,created:s,beforeMount:a,mounted:f,beforeUpdate:T,updated:m,activated:v,deactivated:S,beforeDestroy:w,beforeUnmount:E,destroyed:_,unmounted:P,render:R,renderTracked:A,renderTriggered:C,errorCaptured:L,serverPrefetch:V,expose:I,inheritAttrs:M,components:O,directives:N,filters:j}=t;if(l&&resolveInjections(l,g,null),h)for(const W in h){const D=h[W];isFunction(D)&&(g[W]=D.bind(x))}if(u){const W=u.call(x,x);isObject(W)&&(e.data=reactive(W))}if(shouldCacheAccess=!0,d)for(const W in d){const D=d[W],X=isFunction(D)?D.bind(x,x):isFunction(D.get)?D.get.bind(x,x):NOOP,Q=!isFunction(D)&&isFunction(D.set)?D.set.bind(x):NOOP,H=computed({get:X,set:Q});Object.defineProperty(g,W,{enumerable:!0,configurable:!0,get:()=>H.value,set:F=>H.value=F})}if(y)for(const W in y)createWatcher(y[W],g,x,W);if(o){const W=isFunction(o)?o.call(x):o;Reflect.ownKeys(W).forEach(D=>{provide(D,W[D])})}s&&callHook(s,e,"c");function B(W,D){isArray(D)?D.forEach(X=>W(X.bind(x))):D&&W(D.bind(x))}if(B(onBeforeMount,a),B(onMounted,f),B(onBeforeUpdate,T),B(onUpdated,m),B(onActivated,v),B(onDeactivated,S),B(onErrorCaptured,L),B(onRenderTracked,A),B(onRenderTriggered,C),B(onBeforeUnmount,E),B(onUnmounted,P),B(onServerPrefetch,V),isArray(I))if(I.length){const W=e.exposed||(e.exposed={});I.forEach(D=>{Object.defineProperty(W,D,{get:()=>x[D],set:X=>x[D]=X})})}else e.exposed||(e.exposed={});R&&e.render===NOOP&&(e.render=R),M!=null&&(e.inheritAttrs=M),O&&(e.components=O),N&&(e.directives=N)}function resolveInjections(e,t,x=NOOP){isArray(e)&&(e=normalizeInject(e));for(const g in e){const u=e[g];let d;isObject(u)?"default"in u?d=inject(u.from||g,u.default,!0):d=inject(u.from||g):d=inject(u),isRef(d)?Object.defineProperty(t,g,{enumerable:!0,configurable:!0,get:()=>d.value,set:h=>d.value=h}):t[g]=d}}function callHook(e,t,x){callWithAsyncErrorHandling(isArray(e)?e.map(g=>g.bind(t.proxy)):e.bind(t.proxy),t,x)}function createWatcher(e,t,x,g){const u=g.includes(".")?createPathGetter(x,g):()=>x[g];if(isString(e)){const d=t[e];isFunction(d)&&watch(u,d)}else if(isFunction(e))watch(u,e.bind(x));else if(isObject(e))if(isArray(e))e.forEach(d=>createWatcher(d,t,x,g));else{const d=isFunction(e.handler)?e.handler.bind(x):t[e.handler];isFunction(d)&&watch(u,d,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:x,extends:g}=t,{mixins:u,optionsCache:d,config:{optionMergeStrategies:h}}=e.appContext,y=d.get(t);let o;return y?o=y:!u.length&&!x&&!g?o=t:(o={},u.length&&u.forEach(l=>mergeOptions(o,l,h,!0)),mergeOptions(o,t,h)),isObject(t)&&d.set(t,o),o}function mergeOptions(e,t,x,g=!1){const{mixins:u,extends:d}=t;d&&mergeOptions(e,d,x,!0),u&&u.forEach(h=>mergeOptions(e,h,x,!0));for(const h in t)if(!(g&&h==="expose")){const y=internalOptionMergeStrats[h]||x&&x[h];e[h]=y?y(e[h],t[h]):t[h]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let x=0;x<e.length;x++)t[e[x]]=e[x];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const x=extend(Object.create(null),e);for(const g in t)x[g]=mergeAsArray(e[g],t[g]);return x}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(g,u=null){isFunction(g)||(g=extend({},g)),u!=null&&!isObject(u)&&(u=null);const d=createAppContext(),h=new WeakSet;let y=!1;const o=d.app={_uid:uid$1++,_component:g,_props:u,_container:null,_context:d,_instance:null,version,get config(){return d.config},set config(l){},use(l,...s){return h.has(l)||(l&&isFunction(l.install)?(h.add(l),l.install(o,...s)):isFunction(l)&&(h.add(l),l(o,...s))),o},mixin(l){return d.mixins.includes(l)||d.mixins.push(l),o},component(l,s){return s?(d.components[l]=s,o):d.components[l]},directive(l,s){return s?(d.directives[l]=s,o):d.directives[l]},mount(l,s,a){if(!y){const f=createVNode(g,u);return f.appContext=d,a===!0?a="svg":a===!1&&(a=void 0),s&&t?t(f,l):e(f,l,a),y=!0,o._container=l,l.__vue_app__=o,getComponentPublicInstance(f.component)}},unmount(){y&&(e(null,o._container),delete o._container.__vue_app__)},provide(l,s){return d.provides[l]=s,o},runWithContext(l){const s=currentApp;currentApp=o;try{return l()}finally{currentApp=s}}};return o}}let currentApp=null;function provide(e,t){if(currentInstance){let x=currentInstance.provides;const g=currentInstance.parent&&currentInstance.parent.provides;g===x&&(x=currentInstance.provides=Object.create(g)),x[e]=t}}function inject(e,t,x=!1){const g=currentInstance||currentRenderingInstance;if(g||currentApp){const u=currentApp?currentApp._context.provides:g?g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides:void 0;if(u&&e in u)return u[e];if(arguments.length>1)return x&&isFunction(t)?t.call(g&&g.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,x,g=!1){const u={},d=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,u,d);for(const h in e.propsOptions[0])h in u||(u[h]=void 0);x?e.props=g?u:shallowReactive(u):e.type.props?e.props=u:e.props=d,e.attrs=d}function updateProps(e,t,x,g){const{props:u,attrs:d,vnode:{patchFlag:h}}=e,y=toRaw(u),[o]=e.propsOptions;let l=!1;if((g||h>0)&&!(h&16)){if(h&8){const s=e.vnode.dynamicProps;for(let a=0;a<s.length;a++){let f=s[a];if(isEmitListener(e.emitsOptions,f))continue;const T=t[f];if(o)if(hasOwn(d,f))T!==d[f]&&(d[f]=T,l=!0);else{const m=camelize(f);u[m]=resolvePropValue(o,y,m,T,e,!1)}else T!==d[f]&&(d[f]=T,l=!0)}}}else{setFullProps(e,t,u,d)&&(l=!0);let s;for(const a in y)(!t||!hasOwn(t,a)&&((s=hyphenate(a))===a||!hasOwn(t,s)))&&(o?x&&(x[a]!==void 0||x[s]!==void 0)&&(u[a]=resolvePropValue(o,y,a,void 0,e,!0)):delete u[a]);if(d!==y)for(const a in d)(!t||!hasOwn(t,a))&&(delete d[a],l=!0)}l&&trigger(e.attrs,"set","")}function setFullProps(e,t,x,g){const[u,d]=e.propsOptions;let h=!1,y;if(t)for(let o in t){if(isReservedProp(o))continue;const l=t[o];let s;u&&hasOwn(u,s=camelize(o))?!d||!d.includes(s)?x[s]=l:(y||(y={}))[s]=l:isEmitListener(e.emitsOptions,o)||(!(o in g)||l!==g[o])&&(g[o]=l,h=!0)}if(d){const o=toRaw(x),l=y||EMPTY_OBJ;for(let s=0;s<d.length;s++){const a=d[s];x[a]=resolvePropValue(u,o,a,l[a],e,!hasOwn(l,a))}}return h}function resolvePropValue(e,t,x,g,u,d){const h=e[x];if(h!=null){const y=hasOwn(h,"default");if(y&&g===void 0){const o=h.default;if(h.type!==Function&&!h.skipFactory&&isFunction(o)){const{propsDefaults:l}=u;if(x in l)g=l[x];else{const s=setCurrentInstance(u);g=l[x]=o.call(null,t),s()}}else g=o}h[0]&&(d&&!y?g=!1:h[1]&&(g===""||g===hyphenate(x))&&(g=!0))}return g}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,x=!1){const g=x?mixinPropsCache:t.propsCache,u=g.get(e);if(u)return u;const d=e.props,h={},y=[];let o=!1;if(!isFunction(e)){const s=a=>{o=!0;const[f,T]=normalizePropsOptions(a,t,!0);extend(h,f),T&&y.push(...T)};!x&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}if(!d&&!o)return isObject(e)&&g.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(d))for(let s=0;s<d.length;s++){const a=camelize(d[s]);validatePropName(a)&&(h[a]=EMPTY_OBJ)}else if(d)for(const s in d){const a=camelize(s);if(validatePropName(a)){const f=d[s],T=h[a]=isArray(f)||isFunction(f)?{type:f}:extend({},f),m=T.type;let v=!1,S=!0;if(isArray(m))for(let w=0;w<m.length;++w){const E=m[w],_=isFunction(E)&&E.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(S=!1)}else v=isFunction(m)&&m.name==="Boolean";T[0]=v,T[1]=S,(v||hasOwn(T,"default"))&&y.push(a)}}const l=[h,y];return isObject(e)&&g.set(e,l),l}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,x)=>{if(t._n)return t;const g=withCtx((...u)=>normalizeSlotValue(t(...u)),x);return g._c=!1,g},normalizeObjectSlots=(e,t,x)=>{const g=e._ctx;for(const u in e){if(isInternalKey(u))continue;const d=e[u];if(isFunction(d))t[u]=normalizeSlot(u,d,g);else if(d!=null){const h=normalizeSlotValue(d);t[u]=()=>h}}},normalizeVNodeSlots=(e,t)=>{const x=normalizeSlotValue(t);e.slots.default=()=>x},assignSlots=(e,t,x)=>{for(const g in t)(x||g!=="_")&&(e[g]=t[g])},initSlots=(e,t,x)=>{const g=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const u=t._;u?(assignSlots(g,t,x),x&&def(g,"_",u,!0)):normalizeObjectSlots(t,g)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,x)=>{const{vnode:g,slots:u}=e;let d=!0,h=EMPTY_OBJ;if(g.shapeFlag&32){const y=t._;y?x&&y===1?d=!1:assignSlots(u,t,x):(d=!t.$stable,normalizeObjectSlots(t,u)),h=t}else t&&(normalizeVNodeSlots(e,t),h={default:1});if(d)for(const y in u)!isInternalKey(y)&&h[y]==null&&delete u[y]};function setRef(e,t,x,g,u=!1){if(isArray(e)){e.forEach((f,T)=>setRef(f,t&&(isArray(t)?t[T]:t),x,g,u));return}if(isAsyncWrapper(g)&&!u)return;const d=g.shapeFlag&4?getComponentPublicInstance(g.component):g.el,h=u?null:d,{i:y,r:o}=e,l=t&&t.r,s=y.refs===EMPTY_OBJ?y.refs={}:y.refs,a=y.setupState;if(l!=null&&l!==o&&(isString(l)?(s[l]=null,hasOwn(a,l)&&(a[l]=null)):isRef(l)&&(l.value=null)),isFunction(o))callWithErrorHandling(o,y,12,[h,s]);else{const f=isString(o),T=isRef(o);if(f||T){const m=()=>{if(e.f){const v=f?hasOwn(a,o)?a[o]:s[o]:o.value;u?isArray(v)&&remove(v,d):isArray(v)?v.includes(d)||v.push(d):f?(s[o]=[d],hasOwn(a,o)&&(a[o]=s[o])):(o.value=[d],e.k&&(s[e.k]=o.value))}else f?(s[o]=h,hasOwn(a,o)&&(a[o]=h)):T&&(o.value=h,e.k&&(s[e.k]=h))};h?(m.id=-1,queuePostRenderEffect(m,x)):m()}}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const x=getGlobalThis();x.__VUE__=!0;const{insert:g,remove:u,patchProp:d,createElement:h,createText:y,createComment:o,setText:l,setElementText:s,parentNode:a,nextSibling:f,setScopeId:T=NOOP,insertStaticContent:m}=e,v=(K,J,oe,de=null,ue=null,ve=null,we=void 0,ge=null,ke=!!J.dynamicChildren)=>{if(K===J)return;K&&!isSameVNodeType(K,J)&&(de=Se(K),F(K,ue,ve,!0),K=null),J.patchFlag===-2&&(ke=!1,J.dynamicChildren=null);const{type:be,ref:Re,shapeFlag:Ie}=J;switch(be){case Text:S(K,J,oe,de);break;case Comment:w(K,J,oe,de);break;case Static:K==null&&E(J,oe,de,we);break;case Fragment:O(K,J,oe,de,ue,ve,we,ge,ke);break;default:Ie&1?R(K,J,oe,de,ue,ve,we,ge,ke):Ie&6?N(K,J,oe,de,ue,ve,we,ge,ke):(Ie&64||Ie&128)&&be.process(K,J,oe,de,ue,ve,we,ge,ke,xe)}Re!=null&&ue&&setRef(Re,K&&K.ref,ve,J||K,!J)},S=(K,J,oe,de)=>{if(K==null)g(J.el=y(J.children),oe,de);else{const ue=J.el=K.el;J.children!==K.children&&l(ue,J.children)}},w=(K,J,oe,de)=>{K==null?g(J.el=o(J.children||""),oe,de):J.el=K.el},E=(K,J,oe,de)=>{[K.el,K.anchor]=m(K.children,J,oe,de,K.el,K.anchor)},_=({el:K,anchor:J},oe,de)=>{let ue;for(;K&&K!==J;)ue=f(K),g(K,oe,de),K=ue;g(J,oe,de)},P=({el:K,anchor:J})=>{let oe;for(;K&&K!==J;)oe=f(K),u(K),K=oe;u(J)},R=(K,J,oe,de,ue,ve,we,ge,ke)=>{J.type==="svg"?we="svg":J.type==="math"&&(we="mathml"),K==null?A(J,oe,de,ue,ve,we,ge,ke):V(K,J,ue,ve,we,ge,ke)},A=(K,J,oe,de,ue,ve,we,ge)=>{let ke,be;const{props:Re,shapeFlag:Ie,transition:Le,dirs:He}=K;if(ke=K.el=h(K.type,ve,Re&&Re.is,Re),Ie&8?s(ke,K.children):Ie&16&&L(K.children,ke,null,de,ue,resolveChildrenNamespace(K,ve),we,ge),He&&invokeDirectiveHook(K,null,de,"created"),C(ke,K,K.scopeId,we,de),Re){for(const tt in Re)tt!=="value"&&!isReservedProp(tt)&&d(ke,tt,null,Re[tt],ve,de);"value"in Re&&d(ke,"value",null,Re.value,ve),(be=Re.onVnodeBeforeMount)&&invokeVNodeHook(be,de,K)}He&&invokeDirectiveHook(K,null,de,"beforeMount");const We=needTransition(ue,Le);We&&Le.beforeEnter(ke),g(ke,J,oe),((be=Re&&Re.onVnodeMounted)||We||He)&&queuePostRenderEffect(()=>{be&&invokeVNodeHook(be,de,K),We&&Le.enter(ke),He&&invokeDirectiveHook(K,null,de,"mounted")},ue)},C=(K,J,oe,de,ue)=>{if(oe&&T(K,oe),de)for(let ve=0;ve<de.length;ve++)T(K,de[ve]);if(ue){let ve=ue.subTree;if(J===ve){const we=ue.vnode;C(K,we,we.scopeId,we.slotScopeIds,ue.parent)}}},L=(K,J,oe,de,ue,ve,we,ge,ke=0)=>{for(let be=ke;be<K.length;be++){const Re=K[be]=ge?cloneIfMounted(K[be]):normalizeVNode(K[be]);v(null,Re,J,oe,de,ue,ve,we,ge)}},V=(K,J,oe,de,ue,ve,we)=>{const ge=J.el=K.el;let{patchFlag:ke,dynamicChildren:be,dirs:Re}=J;ke|=K.patchFlag&16;const Ie=K.props||EMPTY_OBJ,Le=J.props||EMPTY_OBJ;let He;if(oe&&toggleRecurse(oe,!1),(He=Le.onVnodeBeforeUpdate)&&invokeVNodeHook(He,oe,J,K),Re&&invokeDirectiveHook(J,K,oe,"beforeUpdate"),oe&&toggleRecurse(oe,!0),(Ie.innerHTML&&Le.innerHTML==null||Ie.textContent&&Le.textContent==null)&&s(ge,""),be?I(K.dynamicChildren,be,ge,oe,de,resolveChildrenNamespace(J,ue),ve):we||D(K,J,ge,null,oe,de,resolveChildrenNamespace(J,ue),ve,!1),ke>0){if(ke&16)M(ge,Ie,Le,oe,ue);else if(ke&2&&Ie.class!==Le.class&&d(ge,"class",null,Le.class,ue),ke&4&&d(ge,"style",Ie.style,Le.style,ue),ke&8){const We=J.dynamicProps;for(let tt=0;tt<We.length;tt++){const qe=We[tt],ht=Ie[qe],ct=Le[qe];(ct!==ht||qe==="value")&&d(ge,qe,ht,ct,ue,oe)}}ke&1&&K.children!==J.children&&s(ge,J.children)}else!we&&be==null&&M(ge,Ie,Le,oe,ue);((He=Le.onVnodeUpdated)||Re)&&queuePostRenderEffect(()=>{He&&invokeVNodeHook(He,oe,J,K),Re&&invokeDirectiveHook(J,K,oe,"updated")},de)},I=(K,J,oe,de,ue,ve,we)=>{for(let ge=0;ge<J.length;ge++){const ke=K[ge],be=J[ge],Re=ke.el&&(ke.type===Fragment||!isSameVNodeType(ke,be)||ke.shapeFlag&70)?a(ke.el):oe;v(ke,be,Re,null,de,ue,ve,we,!0)}},M=(K,J,oe,de,ue)=>{if(J!==oe){if(J!==EMPTY_OBJ)for(const ve in J)!isReservedProp(ve)&&!(ve in oe)&&d(K,ve,J[ve],null,ue,de);for(const ve in oe){if(isReservedProp(ve))continue;const we=oe[ve],ge=J[ve];we!==ge&&ve!=="value"&&d(K,ve,ge,we,ue,de)}"value"in oe&&d(K,"value",J.value,oe.value,ue)}},O=(K,J,oe,de,ue,ve,we,ge,ke)=>{const be=J.el=K?K.el:y(""),Re=J.anchor=K?K.anchor:y("");let{patchFlag:Ie,dynamicChildren:Le,slotScopeIds:He}=J;He&&(ge=ge?ge.concat(He):He),K==null?(g(be,oe,de),g(Re,oe,de),L(J.children||[],oe,Re,ue,ve,we,ge,ke)):Ie>0&&Ie&64&&Le&&K.dynamicChildren?(I(K.dynamicChildren,Le,oe,ue,ve,we,ge),(J.key!=null||ue&&J===ue.subTree)&&traverseStaticChildren(K,J,!0)):D(K,J,oe,Re,ue,ve,we,ge,ke)},N=(K,J,oe,de,ue,ve,we,ge,ke)=>{J.slotScopeIds=ge,K==null?J.shapeFlag&512?ue.ctx.activate(J,oe,de,we,ke):j(J,oe,de,ue,ve,we,ke):Y(K,J,ke)},j=(K,J,oe,de,ue,ve,we)=>{const ge=K.component=createComponentInstance(K,de,ue);if(isKeepAlive(K)&&(ge.ctx.renderer=xe),setupComponent(ge,!1,we),ge.asyncDep){if(ue&&ue.registerDep(ge,B,we),!K.el){const ke=ge.subTree=createVNode(Comment);w(null,ke,J,oe)}}else B(ge,K,J,oe,ue,ve,we)},Y=(K,J,oe)=>{const de=J.component=K.component;if(shouldUpdateComponent(K,J,oe))if(de.asyncDep&&!de.asyncResolved){W(de,J,oe);return}else de.next=J,invalidateJob(de.update),de.effect.dirty=!0,de.update();else J.el=K.el,de.vnode=J},B=(K,J,oe,de,ue,ve,we)=>{const ge=()=>{if(K.isMounted){let{next:Re,bu:Ie,u:Le,parent:He,vnode:We}=K;{const Rt=locateNonHydratedAsyncRoot(K);if(Rt){Re&&(Re.el=We.el,W(K,Re,we)),Rt.asyncDep.then(()=>{K.isUnmounted||ge()});return}}let tt=Re,qe;toggleRecurse(K,!1),Re?(Re.el=We.el,W(K,Re,we)):Re=We,Ie&&invokeArrayFns(Ie),(qe=Re.props&&Re.props.onVnodeBeforeUpdate)&&invokeVNodeHook(qe,He,Re,We),toggleRecurse(K,!0);const ht=renderComponentRoot(K),ct=K.subTree;K.subTree=ht,v(ct,ht,a(ct.el),Se(ct),K,ue,ve),Re.el=ht.el,tt===null&&updateHOCHostEl(K,ht.el),Le&&queuePostRenderEffect(Le,ue),(qe=Re.props&&Re.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(qe,He,Re,We),ue)}else{let Re;const{el:Ie,props:Le}=J,{bm:He,m:We,parent:tt}=K,qe=isAsyncWrapper(J);if(toggleRecurse(K,!1),He&&invokeArrayFns(He),!qe&&(Re=Le&&Le.onVnodeBeforeMount)&&invokeVNodeHook(Re,tt,J),toggleRecurse(K,!0),Ie&&te){const ht=()=>{K.subTree=renderComponentRoot(K),te(Ie,K.subTree,K,ue,null)};qe?J.type.__asyncLoader().then(()=>!K.isUnmounted&&ht()):ht()}else{const ht=K.subTree=renderComponentRoot(K);v(null,ht,oe,de,K,ue,ve),J.el=ht.el}if(We&&queuePostRenderEffect(We,ue),!qe&&(Re=Le&&Le.onVnodeMounted)){const ht=J;queuePostRenderEffect(()=>invokeVNodeHook(Re,tt,ht),ue)}(J.shapeFlag&256||tt&&isAsyncWrapper(tt.vnode)&&tt.vnode.shapeFlag&256)&&K.a&&queuePostRenderEffect(K.a,ue),K.isMounted=!0,J=oe=de=null}},ke=K.effect=new ReactiveEffect(ge,NOOP,()=>queueJob(be),K.scope),be=K.update=()=>{ke.dirty&&ke.run()};be.i=K,be.id=K.uid,toggleRecurse(K,!0),be()},W=(K,J,oe)=>{J.component=K;const de=K.vnode.props;K.vnode=J,K.next=null,updateProps(K,J.props,de,oe),updateSlots(K,J.children,oe),pauseTracking(),flushPreFlushCbs(K),resetTracking()},D=(K,J,oe,de,ue,ve,we,ge,ke=!1)=>{const be=K&&K.children,Re=K?K.shapeFlag:0,Ie=J.children,{patchFlag:Le,shapeFlag:He}=J;if(Le>0){if(Le&128){Q(be,Ie,oe,de,ue,ve,we,ge,ke);return}else if(Le&256){X(be,Ie,oe,de,ue,ve,we,ge,ke);return}}He&8?(Re&16&&le(be,ue,ve),Ie!==be&&s(oe,Ie)):Re&16?He&16?Q(be,Ie,oe,de,ue,ve,we,ge,ke):le(be,ue,ve,!0):(Re&8&&s(oe,""),He&16&&L(Ie,oe,de,ue,ve,we,ge,ke))},X=(K,J,oe,de,ue,ve,we,ge,ke)=>{K=K||EMPTY_ARR,J=J||EMPTY_ARR;const be=K.length,Re=J.length,Ie=Math.min(be,Re);let Le;for(Le=0;Le<Ie;Le++){const He=J[Le]=ke?cloneIfMounted(J[Le]):normalizeVNode(J[Le]);v(K[Le],He,oe,null,ue,ve,we,ge,ke)}be>Re?le(K,ue,ve,!0,!1,Ie):L(J,oe,de,ue,ve,we,ge,ke,Ie)},Q=(K,J,oe,de,ue,ve,we,ge,ke)=>{let be=0;const Re=J.length;let Ie=K.length-1,Le=Re-1;for(;be<=Ie&&be<=Le;){const He=K[be],We=J[be]=ke?cloneIfMounted(J[be]):normalizeVNode(J[be]);if(isSameVNodeType(He,We))v(He,We,oe,null,ue,ve,we,ge,ke);else break;be++}for(;be<=Ie&&be<=Le;){const He=K[Ie],We=J[Le]=ke?cloneIfMounted(J[Le]):normalizeVNode(J[Le]);if(isSameVNodeType(He,We))v(He,We,oe,null,ue,ve,we,ge,ke);else break;Ie--,Le--}if(be>Ie){if(be<=Le){const He=Le+1,We=He<Re?J[He].el:de;for(;be<=Le;)v(null,J[be]=ke?cloneIfMounted(J[be]):normalizeVNode(J[be]),oe,We,ue,ve,we,ge,ke),be++}}else if(be>Le)for(;be<=Ie;)F(K[be],ue,ve,!0),be++;else{const He=be,We=be,tt=new Map;for(be=We;be<=Le;be++){const nt=J[be]=ke?cloneIfMounted(J[be]):normalizeVNode(J[be]);nt.key!=null&&tt.set(nt.key,be)}let qe,ht=0;const ct=Le-We+1;let Rt=!1,gt=0;const dt=new Array(ct);for(be=0;be<ct;be++)dt[be]=0;for(be=He;be<=Ie;be++){const nt=K[be];if(ht>=ct){F(nt,ue,ve,!0);continue}let vt;if(nt.key!=null)vt=tt.get(nt.key);else for(qe=We;qe<=Le;qe++)if(dt[qe-We]===0&&isSameVNodeType(nt,J[qe])){vt=qe;break}vt===void 0?F(nt,ue,ve,!0):(dt[vt-We]=be+1,vt>=gt?gt=vt:Rt=!0,v(nt,J[vt],oe,null,ue,ve,we,ge,ke),ht++)}const Ct=Rt?getSequence(dt):EMPTY_ARR;for(qe=Ct.length-1,be=ct-1;be>=0;be--){const nt=We+be,vt=J[nt],Qt=nt+1<Re?J[nt+1].el:de;dt[be]===0?v(null,vt,oe,Qt,ue,ve,we,ge,ke):Rt&&(qe<0||be!==Ct[qe]?H(vt,oe,Qt,2):qe--)}}},H=(K,J,oe,de,ue=null)=>{const{el:ve,type:we,transition:ge,children:ke,shapeFlag:be}=K;if(be&6){H(K.component.subTree,J,oe,de);return}if(be&128){K.suspense.move(J,oe,de);return}if(be&64){we.move(K,J,oe,xe);return}if(we===Fragment){g(ve,J,oe);for(let Ie=0;Ie<ke.length;Ie++)H(ke[Ie],J,oe,de);g(K.anchor,J,oe);return}if(we===Static){_(K,J,oe);return}if(de!==2&&be&1&&ge)if(de===0)ge.beforeEnter(ve),g(ve,J,oe),queuePostRenderEffect(()=>ge.enter(ve),ue);else{const{leave:Ie,delayLeave:Le,afterLeave:He}=ge,We=()=>g(ve,J,oe),tt=()=>{Ie(ve,()=>{We(),He&&He()})};Le?Le(ve,We,tt):tt()}else g(ve,J,oe)},F=(K,J,oe,de=!1,ue=!1)=>{const{type:ve,props:we,ref:ge,children:ke,dynamicChildren:be,shapeFlag:Re,patchFlag:Ie,dirs:Le,cacheIndex:He}=K;if(Ie===-2&&(ue=!1),ge!=null&&setRef(ge,null,oe,K,!0),He!=null&&(J.renderCache[He]=void 0),Re&256){J.ctx.deactivate(K);return}const We=Re&1&&Le,tt=!isAsyncWrapper(K);let qe;if(tt&&(qe=we&&we.onVnodeBeforeUnmount)&&invokeVNodeHook(qe,J,K),Re&6)he(K.component,oe,de);else{if(Re&128){K.suspense.unmount(oe,de);return}We&&invokeDirectiveHook(K,null,J,"beforeUnmount"),Re&64?K.type.remove(K,J,oe,xe,de):be&&!be.hasOnce&&(ve!==Fragment||Ie>0&&Ie&64)?le(be,J,oe,!1,!0):(ve===Fragment&&Ie&384||!ue&&Re&16)&&le(ke,J,oe),de&&z(K)}(tt&&(qe=we&&we.onVnodeUnmounted)||We)&&queuePostRenderEffect(()=>{qe&&invokeVNodeHook(qe,J,K),We&&invokeDirectiveHook(K,null,J,"unmounted")},oe)},z=K=>{const{type:J,el:oe,anchor:de,transition:ue}=K;if(J===Fragment){ie(oe,de);return}if(J===Static){P(K);return}const ve=()=>{u(oe),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(K.shapeFlag&1&&ue&&!ue.persisted){const{leave:we,delayLeave:ge}=ue,ke=()=>we(oe,ve);ge?ge(K.el,ve,ke):ke()}else ve()},ie=(K,J)=>{let oe;for(;K!==J;)oe=f(K),u(K),K=oe;u(J)},he=(K,J,oe)=>{const{bum:de,scope:ue,update:ve,subTree:we,um:ge,m:ke,a:be}=K;invalidateMount(ke),invalidateMount(be),de&&invokeArrayFns(de),ue.stop(),ve&&(ve.active=!1,F(we,K,J,oe)),ge&&queuePostRenderEffect(ge,J),queuePostRenderEffect(()=>{K.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},le=(K,J,oe,de=!1,ue=!1,ve=0)=>{for(let we=ve;we<K.length;we++)F(K[we],J,oe,de,ue)},Se=K=>{if(K.shapeFlag&6)return Se(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const J=f(K.anchor||K.el),oe=J&&J[TeleportEndKey];return oe?f(oe):J};let _e=!1;const me=(K,J,oe)=>{K==null?J._vnode&&F(J._vnode,null,null,!0):v(J._vnode||null,K,J,null,null,null,oe),J._vnode=K,_e||(_e=!0,flushPreFlushCbs(),flushPostFlushCbs(),_e=!1)},xe={p:v,um:F,m:H,r:z,mt:j,mc:L,pc:D,pbc:I,n:Se,o:e};let Z,te;return{render:me,hydrate:Z,createApp:createAppAPI(me,Z)}}function resolveChildrenNamespace({type:e,props:t},x){return x==="svg"&&e==="foreignObject"||x==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:x}function toggleRecurse({effect:e,update:t},x){e.allowRecurse=t.allowRecurse=x}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,x=!1){const g=e.children,u=t.children;if(isArray(g)&&isArray(u))for(let d=0;d<g.length;d++){const h=g[d];let y=u[d];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=u[d]=cloneIfMounted(u[d]),y.el=h.el),!x&&y.patchFlag!==-2&&traverseStaticChildren(h,y)),y.type===Text&&(y.el=h.el)}}function getSequence(e){const t=e.slice(),x=[0];let g,u,d,h,y;const o=e.length;for(g=0;g<o;g++){const l=e[g];if(l!==0){if(u=x[x.length-1],e[u]<l){t[g]=u,x.push(g);continue}for(d=0,h=x.length-1;d<h;)y=d+h>>1,e[x[y]]<l?d=y+1:h=y;l<e[x[d]]&&(d>0&&(t[g]=x[d-1]),x[d]=g)}}for(d=x.length,h=x[d-1];d-- >0;)x[d]=h,h=t[h];return x}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),INITIAL_WATCHER_VALUE={};function watch(e,t,x){return doWatch(e,t,x)}function doWatch(e,t,{immediate:x,deep:g,flush:u,once:d,onTrack:h,onTrigger:y}=EMPTY_OBJ){if(t&&d){const A=t;t=(...C)=>{A(...C),R()}}const o=currentInstance,l=A=>g===!0?A:traverse(A,g===!1?1:void 0);let s,a=!1,f=!1;if(isRef(e)?(s=()=>e.value,a=isShallow(e)):isReactive(e)?(s=()=>l(e),a=!0):isArray(e)?(f=!0,a=e.some(A=>isReactive(A)||isShallow(A)),s=()=>e.map(A=>{if(isRef(A))return A.value;if(isReactive(A))return l(A);if(isFunction(A))return callWithErrorHandling(A,o,2)})):isFunction(e)?t?s=()=>callWithErrorHandling(e,o,2):s=()=>(T&&T(),callWithAsyncErrorHandling(e,o,3,[m])):s=NOOP,t&&g){const A=s;s=()=>traverse(A())}let T,m=A=>{T=_.onStop=()=>{callWithErrorHandling(A,o,4),T=_.onStop=void 0}},v;if(isInSSRComponentSetup)if(m=NOOP,t?x&&callWithAsyncErrorHandling(t,o,3,[s(),f?[]:void 0,m]):s(),u==="sync"){const A=useSSRContext();v=A.__watcherHandles||(A.__watcherHandles=[])}else return NOOP;let S=f?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const w=()=>{if(!(!_.active||!_.dirty))if(t){const A=_.run();(g||a||(f?A.some((C,L)=>hasChanged(C,S[L])):hasChanged(A,S)))&&(T&&T(),callWithAsyncErrorHandling(t,o,3,[A,S===INITIAL_WATCHER_VALUE?void 0:f&&S[0]===INITIAL_WATCHER_VALUE?[]:S,m]),S=A)}else _.run()};w.allowRecurse=!!t;let E;u==="sync"?E=w:u==="post"?E=()=>queuePostRenderEffect(w,o&&o.suspense):(w.pre=!0,o&&(w.id=o.uid),E=()=>queueJob(w));const _=new ReactiveEffect(s,NOOP,E),P=getCurrentScope(),R=()=>{_.stop(),P&&remove(P.effects,_)};return t?x?w():S=_.run():u==="post"?queuePostRenderEffect(_.run.bind(_),o&&o.suspense):_.run(),v&&v.push(R),R}function instanceWatch(e,t,x){const g=this.proxy,u=isString(e)?e.includes(".")?createPathGetter(g,e):()=>g[e]:e.bind(g,g);let d;isFunction(t)?d=t:(d=t.handler,x=t);const h=setCurrentInstance(this),y=doWatch(u,d.bind(g),x);return h(),y}function createPathGetter(e,t){const x=t.split(".");return()=>{let g=e;for(let u=0;u<x.length&&g;u++)g=g[x[u]];return g}}function traverse(e,t=1/0,x){if(t<=0||!isObject(e)||e.__v_skip||(x=x||new Set,x.has(e)))return e;if(x.add(e),t--,isRef(e))traverse(e.value,t,x);else if(isArray(e))for(let g=0;g<e.length;g++)traverse(e[g],t,x);else if(isSet(e)||isMap(e))e.forEach(g=>{traverse(g,t,x)});else if(isPlainObject(e)){for(const g in e)traverse(e[g],t,x);for(const g of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,g)&&traverse(e[g],t,x)}return e}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...x){if(e.isUnmounted)return;const g=e.vnode.props||EMPTY_OBJ;let u=x;const d=t.startsWith("update:"),h=d&&getModelModifiers(g,t.slice(7));h&&(h.trim&&(u=x.map(s=>isString(s)?s.trim():s)),h.number&&(u=x.map(looseToNumber)));let y,o=g[y=toHandlerKey(t)]||g[y=toHandlerKey(camelize(t))];!o&&d&&(o=g[y=toHandlerKey(hyphenate(t))]),o&&callWithAsyncErrorHandling(o,e,6,u);const l=g[y+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[y])return;e.emitted[y]=!0,callWithAsyncErrorHandling(l,e,6,u)}}function normalizeEmitsOptions(e,t,x=!1){const g=t.emitsCache,u=g.get(e);if(u!==void 0)return u;const d=e.emits;let h={},y=!1;if(!isFunction(e)){const o=l=>{const s=normalizeEmitsOptions(l,t,!0);s&&(y=!0,extend(h,s))};!x&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return!d&&!y?(isObject(e)&&g.set(e,null),null):(isArray(d)?d.forEach(o=>h[o]=null):extend(h,d),isObject(e)&&g.set(e,h),h)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:x,proxy:g,withProxy:u,propsOptions:[d],slots:h,attrs:y,emit:o,render:l,renderCache:s,props:a,data:f,setupState:T,ctx:m,inheritAttrs:v}=e,S=setCurrentRenderingInstance(e);let w,E;try{if(x.shapeFlag&4){const P=u||g,R=P;w=normalizeVNode(l.call(R,P,s,a,T,f,m)),E=y}else{const P=t;w=normalizeVNode(P.length>1?P(a,{attrs:y,slots:h,emit:o}):P(a,null)),E=t.props?y:getFunctionalFallthrough(y)}}catch(P){blockStack.length=0,handleError(P,e,1),w=createVNode(Comment)}let _=w;if(E&&v!==!1){const P=Object.keys(E),{shapeFlag:R}=_;P.length&&R&7&&(d&&P.some(isModelListener)&&(E=filterModelListeners(E,d)),_=cloneVNode(_,E,!1,!0))}return x.dirs&&(_=cloneVNode(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(x.dirs):x.dirs),x.transition&&(_.transition=x.transition),w=_,setCurrentRenderingInstance(S),w}const getFunctionalFallthrough=e=>{let t;for(const x in e)(x==="class"||x==="style"||isOn(x))&&((t||(t={}))[x]=e[x]);return t},filterModelListeners=(e,t)=>{const x={};for(const g in e)(!isModelListener(g)||!(g.slice(9)in t))&&(x[g]=e[g]);return x};function shouldUpdateComponent(e,t,x){const{props:g,children:u,component:d}=e,{props:h,children:y,patchFlag:o}=t,l=d.emitsOptions;if(t.dirs||t.transition)return!0;if(x&&o>=0){if(o&1024)return!0;if(o&16)return g?hasPropsChanged(g,h,l):!!h;if(o&8){const s=t.dynamicProps;for(let a=0;a<s.length;a++){const f=s[a];if(h[f]!==g[f]&&!isEmitListener(l,f))return!0}}}else return(u||y)&&(!y||!y.$stable)?!0:g===h?!1:g?h?hasPropsChanged(g,h,l):!0:!!h;return!1}function hasPropsChanged(e,t,x){const g=Object.keys(t);if(g.length!==Object.keys(e).length)return!0;for(let u=0;u<g.length;u++){const d=g[u];if(t[d]!==e[d]&&!isEmitListener(x,d))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},x){for(;t;){const g=t.subTree;if(g.suspense&&g.suspense.activeBranch===e&&(g.el=e.el),g===e)(e=t.vnode).el=x,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e,e<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,x,g,u,d){return setupBlock(createBaseVNode(e,t,x,g,u,d,!0))}function createBlock(e,t,x,g,u){return setupBlock(createVNode(e,t,x,g,u,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:x})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!x}:e:null);function createBaseVNode(e,t=null,x=null,g=0,u=null,d=e===Fragment?0:1,h=!1,y=!1){const o={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:x,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:g,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return y?(normalizeChildren(o,x),d&128&&e.normalize(o)):x&&(o.shapeFlag|=isString(x)?8:16),isBlockTreeEnabled>0&&!h&&currentBlock&&(o.patchFlag>0||d&6)&&o.patchFlag!==32&&currentBlock.push(o),o}const createVNode=_createVNode;function _createVNode(e,t=null,x=null,g=0,u=null,d=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const y=cloneVNode(e,t,!0);return x&&normalizeChildren(y,x),isBlockTreeEnabled>0&&!d&&currentBlock&&(y.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=y:currentBlock.push(y)),y.patchFlag=-2,y}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:y,style:o}=t;y&&!isString(y)&&(t.class=normalizeClass(y)),isObject(o)&&(isProxy(o)&&!isArray(o)&&(o=extend({},o)),t.style=normalizeStyle(o))}const h=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,x,g,u,h,d,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,x=!1,g=!1){const{props:u,ref:d,patchFlag:h,children:y,transition:o}=e,l=t?mergeProps(u||{},t):u,s={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&normalizeKey(l),ref:t&&t.ref?x&&d?isArray(d)?d.concat(normalizeRef(t)):[d,normalizeRef(t)]:normalizeRef(t):d,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?h===-1?16:h|16:h,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:o,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return o&&g&&setTransitionHooks(s,o.clone(s)),s}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let x=0;const{shapeFlag:g}=e;if(t==null)t=null;else if(isArray(t))x=16;else if(typeof t=="object")if(g&65){const u=t.default;u&&(u._c&&(u._d=!1),normalizeChildren(e,u()),u._c&&(u._d=!0));return}else{x=32;const u=t._;!u&&!isInternalObject(t)?t._ctx=currentRenderingInstance:u===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},x=32):(t=String(t),g&64?(x=16,t=[createTextVNode(t)]):x=8);e.children=t,e.shapeFlag|=x}function mergeProps(...e){const t={};for(let x=0;x<e.length;x++){const g=e[x];for(const u in g)if(u==="class")t.class!==g.class&&(t.class=normalizeClass([t.class,g.class]));else if(u==="style")t.style=normalizeStyle([t.style,g.style]);else if(isOn(u)){const d=t[u],h=g[u];h&&d!==h&&!(isArray(d)&&d.includes(h))&&(t[u]=d?[].concat(d,h):h)}else u!==""&&(t[u]=g[u])}return t}function invokeVNodeHook(e,t,x,g=null){callWithAsyncErrorHandling(e,t,7,[x,g])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,x){const g=e.type,u=(t?t.appContext:e.appContext)||emptyAppContext,d={uid:uid++,vnode:e,type:g,parent:t,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(u.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(g,u),emitsOptions:normalizeEmitsOptions(g,u),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:g.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:x,suspenseId:x?x.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=t?t.root:d,d.emit=emit.bind(null,d),e.ce&&e.ce(d),d}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(x,g)=>{let u;return(u=e[x])||(u=e[x]=[]),u.push(g),d=>{u.length>1?u.forEach(h=>h(d)):u[0](d)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",x=>currentInstance=x),setInSSRSetupState=t("__VUE_SSR_SETTERS__",x=>isInSSRComponentSetup=x)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,x=!1){t&&setInSSRSetupState(t);const{props:g,children:u}=e.vnode,d=isStatefulComponent(e);initProps(e,g,d,t),initSlots(e,u,x);const h=d?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),h}function setupStatefulComponent(e,t){const x=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:g}=x;if(g){const u=e.setupContext=g.length>1?createSetupContext(e):null,d=setCurrentInstance(e);pauseTracking();const h=callWithErrorHandling(g,e,0,[e.props,u]);if(resetTracking(),d(),isPromise(h)){if(h.then(unsetCurrentInstance,unsetCurrentInstance),t)return h.then(y=>{handleSetupResult(e,y,t)}).catch(y=>{handleError(y,e,0)});e.asyncDep=h}else handleSetupResult(e,h,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,x){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,x)}let compile;function finishComponentSetup(e,t,x){const g=e.type;if(!e.render){if(!t&&compile&&!g.render){const u=g.template||resolveMergedOptions(e).template;if(u){const{isCustomElement:d,compilerOptions:h}=e.appContext.config,{delimiters:y,compilerOptions:o}=g,l=extend(extend({isCustomElement:d,delimiters:y},h),o);g.render=compile(u,l)}}e.render=g.render||NOOP}{const u=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),u()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=x=>{e.exposed=x||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,x){if(x in t)return t[x];if(x in publicPropertiesMap)return publicPropertiesMap[x](e)},has(t,x){return x in t||x in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,x=!1){let g=getComponentName(t);if(!g&&t.__file){const u=t.__file.match(/([^/\\]+)\.\w+$/);u&&(g=u[1])}if(!g&&e&&e.parent){const u=d=>{for(const h in d)if(d[h]===t)return h};g=u(e.components||e.parent.type.components)||u(e.appContext.components)}return g?classify(g):x?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,x)=>{t.insertBefore(e,x||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,x,g)=>{const u=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):x?doc.createElement(e,{is:x}):doc.createElement(e);return e==="select"&&g&&g.multiple!=null&&u.setAttribute("multiple",g.multiple),u},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,x,g,u,d){const h=x?x.previousSibling:t.lastChild;if(u&&(u===d||u.nextSibling))for(;t.insertBefore(u.cloneNode(!0),x),!(u===d||!(u=u.nextSibling)););else{templateContainer.innerHTML=g==="svg"?`<svg>${e}</svg>`:g==="mathml"?`<math>${e}</math>`:e;const y=templateContainer.content;if(g==="svg"||g==="mathml"){const o=y.firstChild;for(;o.firstChild;)y.appendChild(o.firstChild);y.removeChild(o)}t.insertBefore(y,x)}return[h?h.nextSibling:t.firstChild,x?x.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,x){const g=e[vtcKey];g&&(t=(t?[t,...g]:[...g]).join(" ")),t==null?e.removeAttribute("class"):x?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,x){const g=e.style,u=isString(x);let d=!1;if(x&&!u){if(t)if(isString(t))for(const h of t.split(";")){const y=h.slice(0,h.indexOf(":")).trim();x[y]==null&&setStyle(g,y,"")}else for(const h in t)x[h]==null&&setStyle(g,h,"");for(const h in x)h==="display"&&(d=!0),setStyle(g,h,x[h])}else if(u){if(t!==x){const h=g[CSS_VAR_TEXT];h&&(x+=";"+h),g.cssText=x,d=displayRE.test(x)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=d?g.display:"",e[vShowHidden]&&(g.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,x){if(isArray(x))x.forEach(g=>setStyle(e,t,g));else if(x==null&&(x=""),t.startsWith("--"))e.setProperty(t,x);else{const g=autoPrefix(e,t);importantRE.test(x)?e.setProperty(hyphenate(g),x.replace(importantRE,""),"important"):e[g]=x}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const x=prefixCache[t];if(x)return x;let g=camelize(t);if(g!=="filter"&&g in e)return prefixCache[t]=g;g=capitalize(g);for(let u=0;u<prefixes.length;u++){const d=prefixes[u]+g;if(d in e)return prefixCache[t]=d}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,x,g,u,d=isSpecialBooleanAttr(t)){g&&t.startsWith("xlink:")?x==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,x):x==null||d&&!includeBooleanAttr(x)?e.removeAttribute(t):e.setAttribute(t,d?"":isSymbol(x)?String(x):x)}function patchDOMProp(e,t,x,g){if(t==="innerHTML"||t==="textContent"){if(x==null)return;e[t]=x;return}const u=e.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){const h=u==="OPTION"?e.getAttribute("value")||"":e.value,y=x==null?"":String(x);(h!==y||!("_value"in e))&&(e.value=y),x==null&&e.removeAttribute(t),e._value=x;return}let d=!1;if(x===""||x==null){const h=typeof e[t];h==="boolean"?x=includeBooleanAttr(x):x==null&&h==="string"?(x="",d=!0):h==="number"&&(x=0,d=!0)}try{e[t]=x}catch{}d&&e.removeAttribute(t)}function addEventListener(e,t,x,g){e.addEventListener(t,x,g)}function removeEventListener(e,t,x,g){e.removeEventListener(t,x,g)}const veiKey=Symbol("_vei");function patchEvent(e,t,x,g,u=null){const d=e[veiKey]||(e[veiKey]={}),h=d[t];if(g&&h)h.value=g;else{const[y,o]=parseName(t);if(g){const l=d[t]=createInvoker(g,u);addEventListener(e,y,l,o)}else h&&(removeEventListener(e,y,h,o),d[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let g;for(;g=e.match(optionsModifierRE);)e=e.slice(0,e.length-g[0].length),t[g[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const x=g=>{if(!g._vts)g._vts=Date.now();else if(g._vts<=x.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(g,x.value),t,5,[g])};return x.value=e,x.attached=getNow(),x}function patchStopImmediatePropagation(e,t){if(isArray(t)){const x=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{x.call(e),e._stopped=!0},t.map(g=>u=>!u._stopped&&g&&g(u))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,x,g,u,d)=>{const h=u==="svg";t==="class"?patchClass(e,g,h):t==="style"?patchStyle(e,x,g):isOn(t)?isModelListener(t)||patchEvent(e,t,x,g,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,g,h))?(patchDOMProp(e,t,g),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,g,h,d,t!=="value")):(t==="true-value"?e._trueValue=g:t==="false-value"&&(e._falseValue=g),patchAttr(e,t,g,h))};function shouldSetAsProp(e,t,x,g){if(g)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(x));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const u=e.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return isNativeOn(t)&&isString(x)?!1:t in e}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:x}=t;return t.mount=g=>{const u=normalizeContainer(g);if(!u)return;const d=t._component;!isFunction(d)&&!d.render&&!d.template&&(d.template=u.innerHTML),u.innerHTML="";const h=x(u,!1,resolveRootNamespace(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),h},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _imports_0$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAUCAYAAABS66VXAAAAAXNSR0IArs4c6QAAB8lJREFUaAXtmWeMVUUUgN0FlBYFVESkiCjEjmIEO0TFYAsSoxgLGo2gouIPSwAVE2MCRmNBglGavYGGhFiwoqKIIiVKsYIQRUFRBOnr9929s953uW/3vd0V12RP8r0zc+bMmZl7p733dtkllrKysgNgInwJ26AyuT3UCxrn6ZVVoGwTzIF7YfdQr17/j54AL+4C+BMKlZPSw6PizYVWxm85dEvHqM/X4SfAC3MnKWaSbMB/1/SQsB0DxYg7V+N0nKw8frtBE9ihXf2xl8TljfLUbxCXN8gqL8ZGnNI4VsNi6hXrSxv2eYf+xvbm6MyxFttOVf60U/7cSUyEymQ9hTNhNPSHtvmCU9YVBsJYmAtboDIZlC9WsFO5M2yOg/yMbh7KgsZ2RFw+QRvpU2E13BbnL43Lbwx1qquJc14ca1h1Y2TVI6YT8ErwWf8AW8ErgOP4EO6yHrofKMOz4tSmjTZcgMpkV0XPjOAzsL0MH8PCkpKSrRk+O5jwW4JRJltIA01R3cE2LoPDICnaH00aMtK+EFfPL7A3XAejoDKxnT2hR2VOdaxsDP25BspgBXwC7ij7wHHgbnon/CfiROmaavktXniflK1aWeJsoOL7wqR5GO0D8AUG6RISWZo6bbBfAj/CCbAIbsB+P7G3kM4nj1DwJfiw67wwnk50cjAshjMY2/JkpylvQb5D0raz006UklSjc1P5Wsky+I0M2JeXvAiXVhH8KspdSWOp/x31nyftznQevAD5pDUF7WANJMfTgxh3YHOVboY58GKYdJQ1I38yHAkese6ks2AaPvon5Wj8R2DYF/T7DJ4LfpQ1IW8sL+37wTaYDa/gsxGdlIPJ+B7sS84k0QnbWpRkCm25+K4AF707kgtqYlzPnd2F3xGexubijQT75STWYntFA/ndUGdDb/PIynLFJ4VpGV1RWMsJGvL8TcpH+ZrAyfPxe/B+4ou1r75o5c1kPfLpO8rpkVdZ2T1xvXBHic056gNyTkbjh/M/x4HMAoi+0qPDHSXtY/5TcIIYq4+GDFmMrZU+QcifHfuNDLZ8Gr/Qx+H6kO8AP8X1k8p7jjuyPtPiAid/hWDzDjlfA7odrIAsmVzViq4I+h8ketGmq2A6M36V7aNdkV9Ab0bTXluRMg3/86EH9IK3wCPtTFBmwkNwEXgvOAVegsPhXEjKa2QuAGO5c0yH7tAflA/BI/BiMJY76dPgqrcPtSV3EciF9CgcA8fCJGgHI6BQuRZHd75xcHzMJehIPHqKEl7QXlS4JaPSBl7kyAx7dU0+YOWJclXxaX4UDIB7K6yFJd6mj1OCK2NxxZ0KB2ij7FdUzjcjfCzyxR4FT5mJ5X38XwwZ/PYgfRZ01kbZetQQ00Hw+Yu04zo62GpBOzk3wVDa3Gg82rkBNRCcOIVK1G+cRxPnOysRxy8z0ZiLnihUXAcVD5t0kK0hUVNNB+1XP/gDXk3F827iRHE1FztRUqGiu4U2z+ZIaNtjKEyepqQ9/5WqnlUYf3SMWYFYjVCe9wdC8xhUlbH0KVTs++YwSaxEeh1tO8MrxqW9Cgn9DuPIca9q8DnOZuiEs9cj4N+UXgT3BbnCp5SPmdQ/Yh/8ga8D/Vn+j7lmKeI5QdwlWtYsUjRJTiTGVNi7prHqQv2iJ8pO6rQ3b6UVhPtDZEh96Dc2ZatWlkni7uGL9dfiB2EheHx45t8EBQuxXJ3GcsLZv7lgrG5wK/zvJGuiuF3+W1Jo7HPowBY4BDzX03IQhnegphMl9MevrofB7jCOXWooOhJe+g8kCpkoyVj2z53kSWJdFwXig1iLUVkTJbpbUGb7xYpHRSNiN6St6Ngg7WQvAZ+h4viUcLyU53I/t8fZMI6cUieKL6JJwnouDY2i0Z8SthonidmdIOnL1Q6TAD8vVV4uZ9KHr/M0vBK/HynrhS7mHD4Y/0OptwY82q4A5Sswnuf6ifi48ldBC3BHSYovQOmCn5PLWPpdCYqxrOvL6YmP414J+vSELPkE4zoYhP8y9CxYAaXQBo6A7TyPyei0LMTgghpB3XFo+zc01pYp9kkZgs8YtBNqf9A3yNI4cT0+7qj6dAqFzvJZkBb/JJwBd4Pf8Ys+Z6nTCQbAA/Ax+N9FWu6r6EicwGFw7DQsXZbM4zMp9vOrck1+R5lN/WilocfHMbOUD8/nVdnvKPMojxYd+qGsILHt8eRY4rj9KfNHyXwSvXQK07+jHIIt60/dtdijb3Nof2tZBVkyP26/PYVZv8dYJ/qv53Ucj0t1vBn502KiIpy/JeHXpXeZ2Y9FxsQH5Z7xzuQe4MppDVXJGxkObvV3wLMZZUmTK+Mb2AjuftaZB4o7kfkPzCDazbv7dISW4E7gePwFczNauRrehdPB+9Hv4GV5A7jqlUVgLCeXsfT7DSwfT6ywS/osZkFf2BP8Bmcs7yqfQ45QbyrPcH+MF4IruR244lfDEvCoVUL775mhnv/CH0lyCHTVhujzIGW2p89yfNz9BoM7agNwl/MZuPvp4w90wUftaeOups8CV0hjsLFCZTuODjxHsPUtNEDs90xOgPpMnX4CpcwkV+SZMLPAnjrLT8nw7Z1hy2eaQMGgfIX19rr3BHzpkbDKTXeHg6AtlEI+mc0Ey5lY1B+Ac/t8FbBvgWXwBXWXVuJXX1QHn8Df+VMSDHa6i1IAAAAASUVORK5CYII=",_imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAC91JREFUeF7tnQuy2zYMRd2VJV5ZmpU5WVn76CdlFD9LBAmA4Od4ppNOwu8FjgFQsvTPjQ8KoMCpAv+gDQqgwLkCAIJ3oMCFAgCCe6AAgOADKFCnABGkTjd6LaIAgDQ29OPx+H4y5bu///Xa9n6/f/m7xltYajoAcTD3AYLk9N+2Kc7A0KwgwfJ7G+AJDgBp5PzaF0AUeh5A+OEIQc0K9yiT4PkFNDUSfvYBkALtOgZCsos92gCMRK2tDYBkxNqg6C1CFJj4tOnPLSX712KwWccAkDeWPUDhUTf06EvP6HK/34HlxToAsgkycaQoBZLIclBseUAWjBYlwCRYlq5ZlgQEKEoYebZdNqosBQhgFIPx2mE5UJYABDDUYLwb4OcKRf3UgACGCxhfosrMoEwLyOPxSEeW+/WLJp6y8CTTHhNPB8gWNR4LO2vk1qdLu6YBhHQqkosvc08DyhSAkE51Bce+mCmuoQwNCFGjSzCmKuKHBYSoMQQc+yLT1fj7UCveFjscIESNEd3sz5qHq02GAoQTqqHh+FObjHTdZBhASKmmgONPypXu7xrhl47dA0JKNRUYwxXwXQNCSjU1HEOkXN0CAhxLwNE9JF0CQr2xFBxdQ9IdIMCxJBzdXi/pChDgWBqOLiHpBhDgAI6DAun2+S6OgbsABDiA450C9/s93D/DFwAcwHGhQPg9XKGAAAdwCBQIhSQMEOAQuAZNwgv3EEC4CIjnVygQcidwc0CAo8I16BJ2MTECkP+wNwooFGgaSZoC8vgoPD6e9brKE9MVPkDXjALpB4pNXkXXDBCKcpzeUIFmJ1tNAAEOQ9dgqKYnW60Aoe7AsT0UcK9H3AGh7vDwC8Y8KOBaj7gCQmqFIzdQwLUecQMEOBq4BlO41yOegFB34MAtFXBJtVwAIXq09Avm2hXwuD3eHBBuJcFhAxUwP9XyAIQX1wR6CFPfTFMtU0BIrXDPDhQwPdWyBoTCvAMPYQl2UcQMEKIHbtmTAlYFuwkgwNGTa7CWTQGTgh1AYv3peMs2PwOwt4W6YLcChNpDbtzTZz4RieUiCluqC3Y1IBhVaKrPZqKwj6ZFml421tYiFoAQPWT2FMGxDwUkMlEFrYp0fx1PBQhGFJhna1LzTcZPBeT6XrWs0X4fTwsI0UNmw6pvMW7bkYkraFWlfxq3GhCih8AsiuhxSLX4EpJLfdqyNopoAMFwQsPVGicNT5olFDnfrCqKVAFC9Mhb49BCddQIIEVaXzWuskMtIEQPud2qDHNIsXiWmFzrXMviC4fFgFA45mzw5d8BpFgytw7FtqgBhN97lNmv2CjH4UmxysTOtS6tB2sAIb3KWeHvfweQMr28WxelWUWAUJxX2Q5AqmRz61RkDwBxs8OfgYsM8rocUix7A5WkWaWAkF6V2wtAyjXz7iFOs8SAkF5V2wxAqqVz6yi2CYC42YAUy1/a+hmkaVYJIKRXdfYQf1u9G54apE50QS9RmgUgAiWVTQBEKaBTd5FdRIBQf6hMJDLE2QxEEJX2V51FdgEQN/2pQfyl1c0gqUOkgFB/1NtC9E1FBKkXWNEzW4dkAeHmRIX8n10BRC2h2wBZ20gA4eZEnX2yRrganhpEJ36md9Y2AOKqPxHEX17dDLk6RAIIP9jR2SD7LUUE0Qms7H1Zh0gAoUDXWQBAdPp59wYQb4W1eS4RJNRClw9zuIwgnGCZGI4IYiKj2yCX9skBwgmW3i4AotfQcwQA8VRXMDaACESKbHJ1kpWLIJxg6S0HIHoNvUc4LdRzgHCCpTcNgOg19B4BQLwVvhgfQALFF059epJFBBEqqGgGIArxGnUtB4QjXjPTAIiZlG4DAYibtPmBASSvUXQLAAm0AIAEii+c+tRGpzUIKZZQ2nwzAMlrFN2iChCuotuYDUBsdPQcBUA81c2MDSCB4gunBhChUB7NAMRDVdsxAcRWz6LRAKRIrpjGZ/djXRXp1CA2tgIQGx1dRwEQV3kvBweQOO3FMwOIWCrzhgBiLqn5gFU1yPf0mm7zpaw3IID0b3MACbSRCpC0bp6N7G49AHGX+HwCNSD70IDiZkUAcZM2P7AZIFs0Salv+u9HfmpaCBXgZkWhUB7NTAEhmniY6AYgLrLKBnUBBFBk4gtblQOyhXN+ky5U+KKZKyCAojfQ7VYRQQDERPjnILkHJFvNtBXxaTjqkzJRqyMIj/0pE/qsdfZFLTbTfI7CaVexmtVPNQGQYq3fd2gVRY6zA4rMeJoHx3HDokxjSasmtci7hQDKtXk0gHC7icT15W2iIfm2XUORr3j+lpc2yT0XC0B8HOTykfs+U1KfnOha//oDTrI8XfU5NqC4S5ydAECyEsU2CIOEE6+n4dVvmOIkqw1AYaCsXMTnThcl7ygEkDaA7LMASkO9LQChUG9osG2qXx+h//f9fk/H7M0/C0WU7JdRNoJQqDf3z+OEWQN6rW57subst9Vn9ZUCQprl5YmycbOGlA1T3mryaJK9BUgKCFfUy33LowegGKqaqz/SVFJAqEMMDaMc6ud2Ntm8Ppksmoi+bESAUIcoXdqnu8jA1lNPBIlIvxJAqEOsvc1mPJGhbab6HOXxeAz/QzpJeiVOsTZRqEMsvcx+rGagzBBFPAChDrF3ausRU32S7k5N11HcPhO8XEn8ZSJOsbYoQprl5namA4sdoGbWCQDJHu/uupQCQhSp8ai4Pm6gjFyHSNOrohpkiyAAEufsmplNQRk8ghRpURRBSLM0Phret8gxrlY7cpFeEj2KIwhRJNzJLRagBmXg9Kp478URZJZzcAtPG3yMYmeZ4Li/eM+1gHCaNTgd2/KLbqsfObVK+y1Nr6pSLNKsOch42UX2m3V0OGp//18VQSjWp4QkbeoZUbY/902mx5im08vRP9kvgXcb1ADCke/oLrPO+qvgqE6xdl0fH3F3km+XdVxlzZ2GAUIUWdPhRtp1NRzqCEItMpKfLLvWcECIIsv6XvcbV8FhEkGIIt07ycoL7AYQosjKbtjp3msuDL5upfqY93UgTrQ69ZJ1l6WOHmYp1pZmEUXWdcbedm4Chykg1CK9+ci667FIrXb1zFIsosi6DtnZzs2ih3kE2SDh6SedecxCyzF/xZ1pBNkNQcG+kEv2tVXT6OESQUi1+vKYhVZjDocbIBTsC7llJ1u1LMyPW3JJsUi1OvGadZbhEj1cIwip1jreGbxTNzjcAeFUK9h15p/e/NTqVTLXFItUa34PjdyhV93RrAY5TsTRb6QrTTm3a2q1K9YkglCPTOmgkZtqAkeTGuQlinCVPdKt5pjbve4ISbEO9QiQzOGoIbtoUXeEAsLJVohfzTKp+L0eVhtuVoO8Lpii3cqEy4zTHI7mNQiQLOPM1httVpSHXAe5UotIYu1L040XBkd4BOH4dzpntt5QKBxdAAIk1j41zXjhcHQDCJBM49RWG+kCjq4AOVwn4YHYVm425jjdwNElIFs0AZIxnVu76pCj3KtFh10HySk5wRuNclvk3/9WoDs4uo0gh3SL21Lmxyi91SqlVenP7j7dRhAg6c5XPBbU9MbDmg10D8hWkxBJaqzbd5+uivEzqYYAhGjSt6dXrK7LeuPdPoYChGhS4Yp9dem63pgCECDpy+MLVjNESvW6n+EiyHEDHAUXuGds02FSqqkAIZrEer1g9u5PqXJ7GDqCEE1y5g379+FqjSlOsXLm3lKub7fbLb3tik+MAkPWGksAwnFwDBHbrNNEjaOK06RY71yDIr4JMFOCsSs3NSBEFFdApgZjKUAAxRSUJcBYEhBAUYGyFBhLAwIoRaAsCQaAHHxkK+bT3/wocp15Gy8NxTKnWDX+uzAs+w+Wuv3xUo09tX2WOMWqFWmRC49EiwsHARAhPRNFlicQadu9/sxVaJImzQCkUuaBgAGIShunbgCiEO/Y9fF4pPu/9nvAIu4H22uI3x/reP4/EUJvXADRa3g5wgs4e9sE0Ovn9QbLs6d8JADSBwicbUcEaSAwU4ytABFkbPuxemcFAMRZYIYfWwEAGdt+rN5ZAQBxFpjhx1YAQMa2H6t3VuB/l01AFC/bcCwAAAAASUVORK5CYII=",_withScopeId$2=e=>(pushScopeId("data-v-d7c2b5cc"),e=e(),popScopeId(),e),_hoisted_1$2=_withScopeId$2(()=>createBaseVNode("div",{id:"container"},null,-1)),_hoisted_2$2={class:"vd-info"},_hoisted_3$2={class:"vd-title"},_hoisted_4$2={class:"vd-duration"},_hoisted_5$1=_withScopeId$2(()=>createBaseVNode("img",{src:_imports_0,alt:"",class:"icon-time"},null,-1)),_hoisted_6$1={key:0,class:"vd-split"},_hoisted_7$1={class:"vd-intro"},_sfc_main$2=defineComponent({__name:"ThePlayer",props:{playingVideo:{}},setup(e){return(t,x)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$2,createBaseVNode("div",_hoisted_2$2,[createBaseVNode("p",_hoisted_3$2,toDisplayString(t.playingVideo.Title),1),createBaseVNode("div",_hoisted_4$2,[_hoisted_5$1,createTextVNode(toDisplayString(t.playingVideo.Duration),1)])]),t.playingVideo.Description?(openBlock(),createElementBlock("div",_hoisted_6$1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$1,toDisplayString(t.playingVideo.Description),1)],64))}}),_export_sfc=(e,t)=>{const x=e.__vccOpts||e;for(const[g,u]of t)x[g]=u;return x},ThePlayer=_export_sfc(_sfc_main$2,[["__scopeId","data-v-d7c2b5cc"]]),videoList=[{VideoId:0,Source:"https://player.alicdn.com/video/aliyunmedia.mp4",CoverURL:"https://img.alicdn.com/imgextra/i2/O1CN01TYyG5e1kLXQkUVz0g_!!6000000004667-0-tps-1920-1080.jpg",Title:"阿里云视频云介绍1",Duration:"04:22",Description:"移动互联网时代，视频应用已经成为每家企业的标配，可对技术团队来说，选择自己开发，还是直接使用云计算平台的视频解决方案，如何确保视频交付使用后的效果，以及视频内容安全、性价比等问题，是不是正一个个的困扰着您？"},{VideoId:1,Source:"https://player.alicdn.com/video/editor.mp4",CoverURL:"https://img.alicdn.com/imgextra/i2/O1CN01SBVeGt1vL2mF2VIaW_!!6000000006155-0-tps-1280-720.jpg",Title:"阿里云视频云介绍2",Duration:"02:39",Description:"在这个14亿人的国家里，每天有100亿个视频被播放，每分钟有10万条视频被上传，每秒有数十万条微博会被讨论和转发。你知道，在这一切的背后，究竟发生着什么吗？"},{VideoId:2,Source:"https://player.alicdn.com/video/apsaravideo4k.mp4",CoverURL:"https://img.alicdn.com/imgextra/i1/O1CN01EikXU21SoFAcBcwd9_!!6000000002293-0-tps-4096-2160.jpg",Title:"阿里云视频云介绍3",Duration:"03:12",Description:"重大体育赛事总是吸引着全球观众的目光，而如何高效完美地将精彩赛事的视频呈现给全球观众，是一个很大的挑战。现在有了阿里云视频服务（ApsaraVideo），它能为您提供从音视频采编、上传、转码、存储、媒资管理、分发、到播放的一站式服务。"},{VideoId:3,Source:"https://player.alicdn.com/video/aliyunmedia.mp4",CoverURL:"https://img.alicdn.com/imgextra/i2/O1CN01TYyG5e1kLXQkUVz0g_!!6000000004667-0-tps-1920-1080.jpg",Title:"阿里云视频云介绍4",Duration:"04:22",Description:"移动互联网时代，视频应用已经成为每家企业的标配，可对技术团队来说，选择自己开发，还是直接使用云计算平台的视频解决方案，如何确保视频交付使用后的效果，以及视频内容安全、性价比等问题，是不是正一个个的困扰着您？"},{VideoId:4,Source:"https://player.alicdn.com/video/editor.mp4",CoverURL:"https://img.alicdn.com/imgextra/i2/O1CN01SBVeGt1vL2mF2VIaW_!!6000000006155-0-tps-1280-720.jpg",Title:"阿里云视频云介绍5",Duration:"02:39",Description:"在这个14亿人的国家里，每天有100亿个视频被播放，每分钟有10万条视频被上传，每秒有数十万条微博会被讨论和转发。你知道，在这一切的背后，究竟发生着什么吗？"}],_withScopeId$1=e=>(pushScopeId("data-v-0fb80f5d"),e=e(),popScopeId(),e),_hoisted_1$1=_withScopeId$1(()=>createBaseVNode("div",{class:"containHeader"},"视频列表",-1)),_hoisted_2$1={class:"play-content"},_hoisted_3$1=["onClick"],_hoisted_4$1={class:"img-wrap"},_hoisted_5=["src"],_hoisted_6={class:"video-time"},_hoisted_7=_withScopeId$1(()=>createBaseVNode("div",{class:"play-cover"},null,-1)),_hoisted_8={class:"con-wrap"},_hoisted_9={class:"title"},_sfc_main$1=defineComponent({__name:"VideoList",emits:["update"],setup(e,{emit:t}){const x=t,g=u=>{x("update",u)};return(u,d)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$1,createBaseVNode("div",_hoisted_2$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(videoList),h=>(openBlock(),createElementBlock("div",{class:"item clearfix",key:h.VideoId,onClick:y=>g(h)},[createBaseVNode("div",_hoisted_4$1,[createBaseVNode("img",{src:h.CoverURL},null,8,_hoisted_5),createBaseVNode("span",_hoisted_6,toDisplayString(h.Duration),1),_hoisted_7]),createBaseVNode("div",_hoisted_8,[createBaseVNode("p",_hoisted_9,toDisplayString(h.Title),1)])],8,_hoisted_3$1))),128))])],64))}}),VideoList=_export_sfc(_sfc_main$1,[["__scopeId","data-v-0fb80f5d"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aliplayerMin={exports:{}};/*! aliyun-aliplayer - v2.26.1-beta.4 - 2024-09-13 18.00.07 */(function(module,exports){(function(e){module.exports=e()})(function(){return function e(t,x,g){function u(y,o){if(!x[y]){if(!t[y]){var l=typeof commonjsRequire=="function"&&commonjsRequire;if(!o&&l)return l(y,!0);if(d)return d(y,!0);throw(o=new Error("Cannot find module '"+y+"'")).code="MODULE_NOT_FOUND",o}l=x[y]={exports:{}},t[y][0].call(l.exports,function(s){return u(t[y][1][s]||s)},l,l.exports,e,t,x,g)}return x[y].exports}for(var d=typeof commonjsRequire=="function"&&commonjsRequire,h=0;h<g.length;h++)u(g[h]);return u}({1:[function(e,t,x){},{}],2:[function(e,t,x){(function(g){(function(){var u,d;u=this,d=function(){var h,y=Math;if(typeof window<"u"&&window.crypto&&(h=window.crypto),typeof self<"u"&&self.crypto&&(h=self.crypto),!(h=!(h=!(h=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:h)&&typeof window<"u"&&window.msCrypto?window.msCrypto:h)&&g!==void 0&&g.crypto?g.crypto:h)&&typeof e=="function")try{h=e("crypto")}catch{}var o=Object.create||function(P){return l.prototype=P,P=new l,l.prototype=null,P};function l(){}var s={},a=s.lib={},f=a.Base={extend:function(P){var R=o(this);return P&&R.mixIn(P),R.hasOwnProperty("init")&&this.init!==R.init||(R.init=function(){R.$super.init.apply(this,arguments)}),(R.init.prototype=R).$super=this,R},create:function(){var P=this.extend();return P.init.apply(P,arguments),P},init:function(){},mixIn:function(P){for(var R in P)P.hasOwnProperty(R)&&(this[R]=P[R]);P.hasOwnProperty("toString")&&(this.toString=P.toString)},clone:function(){return this.init.prototype.extend(this)}},T=a.WordArray=f.extend({init:function(P,R){P=this.words=P||[],this.sigBytes=R??4*P.length},toString:function(P){return(P||v).stringify(this)},concat:function(P){var R=this.words,A=P.words,C=this.sigBytes,L=P.sigBytes;if(this.clamp(),C%4)for(var V=0;V<L;V++){var I=A[V>>>2]>>>24-V%4*8&255;R[C+V>>>2]|=I<<24-(C+V)%4*8}else for(var M=0;M<L;M+=4)R[C+M>>>2]=A[M>>>2];return this.sigBytes+=L,this},clamp:function(){var P=this.words,R=this.sigBytes;P[R>>>2]&=4294967295<<32-R%4*8,P.length=y.ceil(R/4)},clone:function(){var P=f.clone.call(this);return P.words=this.words.slice(0),P},random:function(P){for(var R=[],A=0;A<P;A+=4)R.push(function(){if(h){if(typeof h.getRandomValues=="function")try{return h.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof h.randomBytes=="function")try{return h.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new T.init(R,P)}}),m=s.enc={},v=m.Hex={stringify:function(P){for(var R=P.words,A=P.sigBytes,C=[],L=0;L<A;L++){var V=R[L>>>2]>>>24-L%4*8&255;C.push((V>>>4).toString(16)),C.push((15&V).toString(16))}return C.join("")},parse:function(P){for(var R=P.length,A=[],C=0;C<R;C+=2)A[C>>>3]|=parseInt(P.substr(C,2),16)<<24-C%8*4;return new T.init(A,R/2)}},S=m.Latin1={stringify:function(P){for(var R=P.words,A=P.sigBytes,C=[],L=0;L<A;L++){var V=R[L>>>2]>>>24-L%4*8&255;C.push(String.fromCharCode(V))}return C.join("")},parse:function(P){for(var R=P.length,A=[],C=0;C<R;C++)A[C>>>2]|=(255&P.charCodeAt(C))<<24-C%4*8;return new T.init(A,R)}},w=m.Utf8={stringify:function(P){try{return decodeURIComponent(escape(S.stringify(P)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(P){return S.parse(unescape(encodeURIComponent(P)))}},E=a.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new T.init,this._nDataBytes=0},_append:function(P){typeof P=="string"&&(P=w.parse(P)),this._data.concat(P),this._nDataBytes+=P.sigBytes},_process:function(O){var R,A=this._data,C=A.words,L=A.sigBytes,V=this.blockSize,I=L/(4*V),M=(I=O?y.ceil(I):y.max((0|I)-this._minBufferSize,0))*V,O=y.min(4*M,L);if(M){for(var N=0;N<M;N+=V)this._doProcessBlock(C,N);R=C.splice(0,M),A.sigBytes-=O}return new T.init(R,O)},clone:function(){var P=f.clone.call(this);return P._data=this._data.clone(),P},_minBufferSize:0}),_=(a.Hasher=E.extend({cfg:f.extend(),init:function(P){this.cfg=this.cfg.extend(P),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(P){return this._append(P),this._process(),this},finalize:function(P){return P&&this._append(P),this._doFinalize()},blockSize:16,_createHelper:function(P){return function(R,A){return new P.init(A).finalize(R)}},_createHmacHelper:function(P){return function(R,A){return new _.HMAC.init(P,A).finalize(R)}}}),s.algo={});return s},typeof x=="object"?t.exports=x=d():u.CryptoJS=d()}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{crypto:1}],3:[function(e,t,x){var g,u;g=this,u=function(d){var h;return h=d.lib.WordArray,d.enc.Base64={stringify:function(y){for(var o=y.words,l=y.sigBytes,s=this._map,a=(y.clamp(),[]),f=0;f<l;f+=3)for(var T=(o[f>>>2]>>>24-f%4*8&255)<<16|(o[f+1>>>2]>>>24-(f+1)%4*8&255)<<8|o[f+2>>>2]>>>24-(f+2)%4*8&255,m=0;m<4&&f+.75*m<l;m++)a.push(s.charAt(T>>>6*(3-m)&63));var v=s.charAt(64);if(v)for(;a.length%4;)a.push(v);return a.join("")},parse:function(y){var o=y.length,l=this._map;if(!(s=this._reverseMap))for(var s=this._reverseMap=[],a=0;a<l.length;a++)s[l.charCodeAt(a)]=a;for(var f,T,m=l.charAt(64),v=(m&&(m=y.indexOf(m))!==-1&&(o=m),y),S=o,w=s,E=[],_=0,P=0;P<S;P++)P%4&&(f=w[v.charCodeAt(P-1)]<<P%4*2,T=w[v.charCodeAt(P)]>>>6-P%4*2,E[_>>>2]|=(f|T)<<24-_%4*8,_++);return h.create(E,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},d.enc.Base64},typeof x=="object"?t.exports=x=u(e("crypto-js/core")):u(g.CryptoJS)},{"crypto-js/core":2}],4:[function(e,t,x){var g,u;g=this,u=function(d){return d.enc.Utf8},typeof x=="object"?t.exports=x=u(e("crypto-js/core")):u(g.CryptoJS)},{"crypto-js/core":2}],5:[function(e,t,x){var g,u;g=this,u=function(d){return d.HmacSHA1},typeof x=="object"?t.exports=x=u(e("crypto-js/core"),e("crypto-js/sha1"),e("crypto-js/hmac")):u(g.CryptoJS)},{"crypto-js/core":2,"crypto-js/hmac":6,"crypto-js/sha1":7}],6:[function(e,t,x){var g,u;g=this,u=function(d){var h,y;h=d.lib.Base,y=d.enc.Utf8,d.algo.HMAC=h.extend({init:function(o,l){o=this._hasher=new o.init,typeof l=="string"&&(l=y.parse(l));for(var s=o.blockSize,a=4*s,o=((l=l.sigBytes>a?o.finalize(l):l).clamp(),this._oKey=l.clone()),l=this._iKey=l.clone(),f=o.words,T=l.words,m=0;m<s;m++)f[m]^=1549556828,T[m]^=909522486;o.sigBytes=l.sigBytes=a,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(s){var l=this._hasher,s=l.finalize(s);return l.reset(),l.finalize(this._oKey.clone().concat(s))}})},typeof x=="object"?t.exports=x=u(e("crypto-js/core")):u(g.CryptoJS)},{"crypto-js/core":2}],7:[function(e,t,x){var g,u;g=this,u=function(d){var h,y,o,l,s;return y=(h=d).lib,o=y.WordArray,l=y.Hasher,y=h.algo,s=[],y=y.SHA1=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,f){for(var T=this._hash.words,m=T[0],v=T[1],S=T[2],w=T[3],E=T[4],_=0;_<80;_++){s[_]=_<16?0|a[f+_]:(P=s[_-3]^s[_-8]^s[_-14]^s[_-16])<<1|P>>>31;var P=(m<<5|m>>>27)+E+s[_];P+=_<20?1518500249+(v&S|~v&w):_<40?1859775393+(v^S^w):_<60?(v&S|v&w|S&w)-1894007588:(v^S^w)-899497514,E=w,w=S,S=v<<30|v>>>2,v=m,m=P}T[0]=T[0]+m|0,T[1]=T[1]+v|0,T[2]=T[2]+S|0,T[3]=T[3]+w|0,T[4]=T[4]+E|0},_doFinalize:function(){var a=this._data,f=a.words,T=8*this._nDataBytes,m=8*a.sigBytes;return f[m>>>5]|=128<<24-m%32,f[14+(64+m>>>9<<4)]=Math.floor(T/4294967296),f[15+(64+m>>>9<<4)]=T,a.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var a=l.clone.call(this);return a._hash=this._hash.clone(),a}}),h.SHA1=l._createHelper(y),h.HmacSHA1=l._createHmacHelper(y),d.SHA1},typeof x=="object"?t.exports=x=u(e("crypto-js/core")):u(g.CryptoJS)},{"crypto-js/core":2}],8:[function(e,t,x){(function(g,u){(function(){var d,h;d=this,h=function(){function y(Z){return typeof Z=="function"}var o=Array.isArray||function(Z){return Object.prototype.toString.call(Z)==="[object Array]"},l=0,s=void 0,a=void 0,f=function(Z,te){E[l]=Z,E[l+1]=te,(l+=2)===2&&(a?a(_):I())},T=typeof window<"u"?window:void 0,m=T||{},m=m.MutationObserver||m.WebKitMutationObserver,v=typeof self>"u"&&g!==void 0&&{}.toString.call(g)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var Z=setTimeout;return function(){return Z(_,1)}}var E=new Array(1e3);function _(){for(var Z=0;Z<l;Z+=2)(0,E[Z])(E[Z+1]),E[Z]=void 0,E[Z+1]=void 0;l=0}function P(){try{var Z=Function("return this")().require("vertx");return(s=Z.runOnLoop||Z.runOnContext)!==void 0?function(){s(_)}:w()}catch{return w()}}var R,A,C,I=void 0;function L(Z,te){var K,J=this,oe=new this.constructor(O),de=(oe[M]===void 0&&le(oe),J._state);return de?(K=arguments[de-1],f(function(){return ie(de,oe,K,J._result)})):F(J,oe,Z,te),oe}function V(Z){var te;return Z&&typeof Z=="object"&&Z.constructor===this?Z:(D(te=new this(O),Z),te)}var I=v?function(){return g.nextTick(_)}:m?(A=0,v=new m(_),C=document.createTextNode(""),v.observe(C,{characterData:!0}),function(){C.data=A=++A%2}):S?((R=new MessageChannel).port1.onmessage=_,function(){return R.port2.postMessage(0)}):(T===void 0&&typeof e=="function"?P:w)(),M=Math.random().toString(36).substring(2);function O(){}var N=void 0,j=1,Y=2;function B(Z,te,K){f(function(J){var oe=!1,de=function(ue,ve,we,ge){try{ue.call(ve,we,ge)}catch(ke){return ke}}(K,te,function(ue){oe||(oe=!0,(te!==ue?D:Q)(J,ue))},function(ue){oe||(oe=!0,H(J,ue))},J._label);!oe&&de&&(oe=!0,H(J,de))},Z)}function W(Z,te,K){var J,oe;te.constructor===Z.constructor&&K===L&&te.constructor.resolve===V?(J=Z,(oe=te)._state===j?Q(J,oe._result):oe._state===Y?H(J,oe._result):F(oe,void 0,function(de){return D(J,de)},function(de){return H(J,de)})):K!==void 0&&y(K)?B(Z,te,K):Q(Z,te)}function D(Z,te){if(Z===te)H(Z,new TypeError("You cannot resolve a promise with itself"));else if(K=typeof te,te===null||K!="object"&&K!="function")Q(Z,te);else{K=void 0;try{K=te.then}catch(J){return void H(Z,J)}W(Z,te,K)}var K}function X(Z){Z._onerror&&Z._onerror(Z._result),z(Z)}function Q(Z,te){Z._state===N&&(Z._result=te,Z._state=j,Z._subscribers.length!==0)&&f(z,Z)}function H(Z,te){Z._state===N&&(Z._state=Y,Z._result=te,f(X,Z))}function F(Z,te,K,J){var oe=Z._subscribers,de=oe.length;Z._onerror=null,oe[de]=te,oe[de+j]=K,oe[de+Y]=J,de===0&&Z._state&&f(z,Z)}function z(Z){var te=Z._subscribers,K=Z._state;if(te.length!==0){for(var J,oe=void 0,de=Z._result,ue=0;ue<te.length;ue+=3)J=te[ue],oe=te[ue+K],J?ie(K,J,oe,de):oe(de);Z._subscribers.length=0}}function ie(Z,te,K,J){var oe=y(K),de=void 0,ue=void 0,ve=!0;if(oe){try{de=K(J)}catch(we){ve=!1,ue=we}if(te===de)return void H(te,new TypeError("A promises callback cannot return that same promise."))}else de=J;te._state===N&&(oe&&ve?D(te,de):ve===!1?H(te,ue):Z===j?Q(te,de):Z===Y&&H(te,de))}var he=0;function le(Z){Z[M]=he++,Z._state=void 0,Z._result=void 0,Z._subscribers=[]}_e.prototype._enumerate=function(Z){for(var te=0;this._state===N&&te<Z.length;te++)this._eachEntry(Z[te],te)},_e.prototype._eachEntry=function(Z,te){var K=this._instanceConstructor,J=K.resolve;if(J===V){var oe,de=void 0,ue=void 0,ve=!1;try{de=Z.then}catch(we){ve=!0,ue=we}de===L&&Z._state!==N?this._settledAt(Z._state,te,Z._result):typeof de!="function"?(this._remaining--,this._result[te]=Z):K===me?(oe=new K(O),ve?H(oe,ue):W(oe,Z,de),this._willSettleAt(oe,te)):this._willSettleAt(new K(function(we){return we(Z)}),te)}else this._willSettleAt(J(Z),te)},_e.prototype._settledAt=function(Z,te,K){var J=this.promise;J._state===N&&(this._remaining--,Z===Y?H(J,K):this._result[te]=K),this._remaining===0&&Q(J,this._result)},_e.prototype._willSettleAt=function(Z,te){var K=this;F(Z,void 0,function(J){return K._settledAt(j,te,J)},function(J){return K._settledAt(Y,te,J)})};var Se=_e;function _e(Z,te){this._instanceConstructor=Z,this.promise=new Z(O),this.promise[M]||le(this.promise),o(te)?(this.length=te.length,this._remaining=te.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(te),this._remaining!==0)||Q(this.promise,this._result)):H(this.promise,new Error("Array Methods must be provided an Array"))}xe.prototype.catch=function(Z){return this.then(null,Z)},xe.prototype.finally=function(Z){var te=this.constructor;return y(Z)?this.then(function(K){return te.resolve(Z()).then(function(){return K})},function(K){return te.resolve(Z()).then(function(){throw K})}):this.then(Z,Z)};var me=xe;function xe(Z){if(this[M]=he++,this._result=this._state=void 0,this._subscribers=[],O!==Z){if(typeof Z!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof xe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var te=this;try{Z(function(K){D(te,K)},function(K){H(te,K)})}catch(K){H(te,K)}}}return me.prototype.then=L,me.all=function(Z){return new Se(this,Z).promise},me.race=function(Z){var te=this;return o(Z)?new te(function(K,J){for(var oe=Z.length,de=0;de<oe;de++)te.resolve(Z[de]).then(K,J)}):new te(function(K,J){return J(new TypeError("You must pass an array to race."))})},me.resolve=V,me.reject=function(Z){var te=new this(O);return H(te,Z),te},me._setScheduler=function(Z){a=Z},me._setAsap=function(Z){f=Z},me._asap=f,me.polyfill=function(){var Z=void 0;if(u!==void 0)Z=u;else if(typeof self<"u")Z=self;else try{Z=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var te=Z.Promise;if(te){var K=null;try{K=Object.prototype.toString.call(te.resolve())}catch{}if(K==="[object Promise]"&&!te.cast)return}Z.Promise=me},me.Promise=me},typeof x=="object"&&t!==void 0?t.exports=h():d.ES6Promise=h()}).call(this)}).call(this,e("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:9}],9:[function(e,d,x){var g,u,d=d.exports={};function h(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}try{g=typeof setTimeout=="function"?setTimeout:h}catch{g=h}try{u=typeof clearTimeout=="function"?clearTimeout:y}catch{u=y}function o(w){if(g===setTimeout)return setTimeout(w,0);if((g===h||!g)&&setTimeout)return(g=setTimeout)(w,0);try{return g(w,0)}catch{try{return g.call(null,w,0)}catch{return g.call(this,w,0)}}}var l,s=[],a=!1,f=-1;function T(){a&&l&&(a=!1,l.length?s=l.concat(s):f=-1,s.length)&&m()}function m(){if(!a){for(var w=o(T),E=(a=!0,s.length);E;){for(l=s,s=[];++f<E;)l&&l[f].run();f=-1,E=s.length}l=null,a=!1,function(_){if(u===clearTimeout)return clearTimeout(_);if((u===y||!u)&&clearTimeout)return(u=clearTimeout)(_);try{u(_)}catch{try{return u.call(null,_)}catch{return u.call(this,_)}}}(w)}}function v(w,E){this.fun=w,this.array=E}function S(){}d.nextTick=function(w){var E=new Array(arguments.length-1);if(1<arguments.length)for(var _=1;_<arguments.length;_++)E[_-1]=arguments[_];s.push(new v(w,E)),s.length!==1||a||o(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=S,d.addListener=S,d.once=S,d.off=S,d.removeListener=S,d.removeAllListeners=S,d.emit=S,d.prependListener=S,d.prependOnceListener=S,d.listeners=function(w){return[]},d.binding=function(w){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(w){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],10:[function(e,t,x){t.exports={name:"aliyun-aliplayer",version:"2.26.1-beta.4",description:"阿里云 Web 播放器",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build"},devDependencies:{"@babel/core":"^7.15.0","@babel/preset-env":"^7.15.0","babel-plugin-es6-promise":"^1.1.1",babelify:"^10.0.0","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0"},dependencies:{"crypto-js":"^4.1.1"}}},{}],11:[function(o,t,x){var g=o("../ui/component"),u=(o("../lib/util"),o("../lib/dom")),d=o("../lib/event"),h=(o("../lib/ua"),o("../lang/index")),y=o("../player/base/event/eventtype"),o=g.extend({init:function(l,s){g.call(this,l,s),this.className=s.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var l=g.prototype.createEl.call(this,"div");return l.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+h.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+h.get("Cancel_Text")+"</a></div>",l},bindEvent:function(){var l=this,s=(l._player.on(y.Private.AutoStreamShow,function(a){var f,T=document.querySelector("#"+l.getId()+" .tip-text");l._player._getLowerQualityLevel&&(f=l._player._getLowerQualityLevel())&&(l._switchUrl=f,T.innerText=h.get("Auto_Stream_Tip_Text").replace("$$",f.item.desc),u.css(l.el(),"display","block"))}),l._player.on(y.Private.AutoStreamHide,function(a){document.querySelector("#"+l.getId()+" .tip-text"),u.css(l.el(),"display","none")}),document.querySelector("#"+l.getId()+" .prism-button-ok")),s=(d.on(s,"click",function(){l._player._changeStream&&l._switchUrl&&(l._player._changeStream(l._switchUrl.index,h.get("Quality_Change_Text")),l._player.trigger(y.Private.SettingListHide)),u.css(l.el(),"display","none")}),document.querySelector("#"+l.getId()+" .prism-button-cancel"));d.on(s,"click",function(){u.css(l.el(),"display","none"),l._player.trigger(y.Private.SettingListHide)})}});t.exports=o},{"../lang/index":25,"../lib/dom":34,"../lib/event":35,"../lib/ua":50,"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],12:[function(f,t,x){var g=f("../ui/component"),u=f("../lib/dom"),d=f("../lib/event"),h=f("../lib/ua"),y=f("../lib/function"),o=(f("../lang/index"),f("../lib/util")),l=f("../config"),s=f("../lib/playerutil"),a=f("../player/base/event/eventtype"),f=g.extend({init:function(T,m){g.call(this,T,m),this.className=m.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=T._liveshiftService},createEl:function(){var T=g.prototype.createEl.call(this);return T.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',T},bindEvent:function(){function T(w){m._progressDown=w}var m=this,v=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),S="//"+l.domain+l.path+l.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?S=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":l.domain?-1<l.domain.indexOf("localhost")&&(S="//"+l.domain+"/build/skins/default/img/dragcursor.png"):S=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+l.path+l.h5Version+"/skins/default/img/dragcursor.png":(l.path||"").substring(1)+l.h5Version+"/skins/default/img/dragcursor.png",v.src=S,d.on(this.cursorNode,"mousedown",function(w){m._onMouseDown(w)}),d.on(this.cursorNode,"touchstart",function(w){m._onMouseDown(w)}),d.on(this.progressNode,"mousemove",function(w){m._progressMove(w)}),d.on(this.progressNode,"touchmove",function(w){m._progressMove(w)}),d.on(this.progressNode,"mousedown",function(w){T(!0)}),d.on(this.progressNode,"touchstart",function(w){T(!0)}),d.on(this.progressNode,"mouseup",function(w){T(!1)}),d.on(this.progressNode,"touchend",function(w){T(!1)}),d.on(this._el,"click",function(w){m._onMouseClick(w)}),this._player.on(a.Private.HideProgress,function(w){m._hideProgress(w)}),this._player.on(a.Private.CancelHideProgress,function(w){m._cancelHideProgress(w)}),this._player.on(a.Private.ShowBar,function(){m._updateLayout()}),d.on(this.progressNode,a.Private.MouseOver,function(w){m._onMouseOver(w)}),d.on(this.progressNode,a.Private.MouseOut,function(w){m._onMouseOut(w)}),this.bindTimeupdate=y.bind(this,this._onTimeupdate),this._player.on(a.Player.TimeUpdate,this.bindTimeupdate),s.isLiveShift(this._player._options)&&m._liveshiftService.start(6e4,function(w){w={mediaId:m._player._options.vid||"",error_code:w.Code,error_msg:w.Message},m._player.logError(w),m._player.trigger(a.Player.Error,w)}),this._player.on(a.Private.LiveShiftQueryCompleted,function(){m._updateSeperator(),m._updateLayout()}),this._player.on(a.Private.LiveShiftSwitchToLive,function(){m._updateCursorPosition()}),this._player.on(a.Player.Pause,function(){m._liveshiftService.stop()}),h.IS_IPAD?this.interval=setInterval(function(){m._onProgress()},500):this._player.on(a.Video.Progress,function(){m._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var T=this.seperatorNode.offsetWidth,m=this.el().offsetWidth,v=m-T;T!=0&&v!=0&&(u.css(this.progressNode,"width",100*(v-10)/m+"%"),u.css(this.seperatorNode,"right",-1*(T+10)+"px"))},_progressMove:function(T){var m=this._getSeconds(T),v=this._liveshiftService.availableLiveShiftTime,m=(this.timeNode.innerText="-"+o.formatTime(v-m),v?m/v:0),v=1-this.timeNode.clientWidth/this.el().clientWidth,S=(v<m&&(m=v),this.timeNode&&(u.css(this.timeNode,"display","block"),u.css(this.timeNode,"left",100*m+"%")),this);!h.IS_PC&&S._progressDown&&(S.progressSeekTimer&&clearTimeout(S.progressSeekTimer),S.progressSeekTimer=setTimeout(function(){S._progressDown||S._onMouseClick(T)},200))},_hideProgress:function(T){d.off(this.cursorNode,"mousedown"),d.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(T){var m=this;d.on(this.cursorNode,"mousedown",function(v){m._onMouseDown(v)}),d.on(this.cursorNode,"touchstart",function(v){m._onMouseDown(v)})},_canSeekable:function(T){var m=!0;return m=typeof this._player.canSeekable=="function"?this._player.canSeekable(T):m},_onMouseOver:function(T){this._updateCursorPosition(this._getCurrentTime()),u.css(this.timeNode,"display","block")},_onMouseOut:function(T){u.css(this.timeNode,"display","none")},_getSeconds:function(E){if(E.touches&&E.touches[0]){for(var m,v=this.el().offsetLeft,S=this.el();S.offsetParent;){var S=S.offsetParent,w=u.getTranslateX(S);v+=S.offsetLeft+w}S.tagName&&S.tagName.toLowerCase()==="body"&&(v+=document.getElementsByTagName("html")[0].offsetLeft),(m=(E.touches?E.touches[0]:E).pageX-v)<0&&(m=0)}else m=E.offsetX,E.target!==this.cursorNode&&E.target.offsetParent!==this.cursorNode||(m+=this.cursorNode.offsetLeft),E.target!==this._el&&(E.target.offsetParent,this._el);var E=this.progressNode.offsetWidth,_=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=_?m/E*_:0)<0?0:sec)>_?_:sec},_onMouseClick:function(v){var m=this,v=this._getSeconds(v),w=this._liveshiftService.availableLiveShiftTime,S=w-v,E=this._player._options,w=(S<=E.liveShiftMinOffset&&(v=w-(S=E.liveShiftMinOffset)),this._player.trigger(a.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(S)),E=s.isHls(m._player._options.source);m._player._loadByUrlInner(w,v,!0),m._player.trigger(a.Private.Play_Btn_Hide),m._liveshiftService.seekTime=v,m._player.trigger(a.Private.EndStart,{toTime:v}),m._updateProgressBar(this.playedNode,v),m._updateCursorPosition(v),setTimeout(function(){m._progressDown||m._onMouseOut()},500),E&&setTimeout(function(){m._player.play()})},_onMouseDown:function(T){var m=this;T.preventDefault(),this._player.trigger(a.Private.SeekStart,{fromTime:this._getCurrentTime()}),d.on(this.controlNode,"mousemove",function(v){m._onMouseMove(v)}),d.on(this.controlNode,"touchmove",function(v){m._onMouseMove(v)}),d.on(this.controlNode,"mouseup",function(v){m._onMouseUp(v)}),d.on(this.controlNode,"touchend",function(v){m._onMouseUp(v)})},_onMouseUp:function(T){T.preventDefault(),d.off(this.controlNode,"mousemove"),d.off(this.controlNode,"touchmove"),d.off(this._player.tag,"mouseup"),d.off(this._player.tag,"touchend"),d.off(this.controlNode,"mouseup"),d.off(this.controlNode,"touchend"),this._onMouseClick(T)},_onMouseMove:function(T){T.preventDefault()},_onTimeupdate:function(T){this._player._seeking||(h.IS_ANDROID&&h.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(a.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var T=this._liveshiftService.seekTime,T=(T==-1&&(T=0),this._player.getCurrentTime()+T);return h.IS_ANDROID&&h.IS_UC&&(T-=this._basePtsUC||0),T},_onProgress:function(T){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(T,m){var v,S;this._player._switchSourcing!=1&&(S=0,this._liveshiftService.seekTime==-1?S=1:1<(S=(v=this._liveshiftService.availableLiveShiftTime)?m/v:0)&&(this._liveshiftService.seekTime=-(S=1)),this.liveShiftStartDisplay,T)&&u.css(T,"width",100*S+"%")},_updateCursorPosition:function(T){var m,v,S,w;this._player.el()&&this._player._switchSourcing!=1&&(S=0,w=1,m=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?S=1:1<(S=(v=this._liveshiftService.availableLiveShiftTime)?T/v:0)&&(this._liveshiftService.seekTime=-1),m!=0&&(w=1-(T=10/m),S-=T),S=S<0?0:S,this.cursorNode)&&(w<S?(u.css(this.cursorNode,"right","0px"),u.css(this.cursorNode,"left","auto")):(u.css(this.cursorNode,"right","auto"),u.css(this.cursorNode,"left",100*S+"%")))}});t.exports=f},{"../config":14,"../lang/index":25,"../lib/dom":34,"../lib/event":35,"../lib/function":37,"../lib/playerutil":47,"../lib/ua":50,"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],13:[function(h,t,x){var g=h("../ui/component"),u=h("../lib/util"),d=h("../player/base/event/eventtype"),h=g.extend({init:function(y,o){g.call(this,y,o),this.className=o.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=y._liveshiftService},createEl:function(){var y=g.prototype.createEl.call(this,"div");return y.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',y},bindEvent:function(){var y=this;this._player.on(d.Video.TimeUpdate,function(){var o,l=y._liveshiftService,s=document.querySelector("#"+y.id()+" .current-time");l.liveShiftStartDisplay&&l.availableLiveShiftTime>l.seekTime&&l.seekTime!=-1?(o=y._liveshiftService.getBaseTime(),o=u.formatTime(o+y._player.getCurrentTime()),s.innerText=o):l.currentTimeDisplay&&(s.innerText=l.currentTimeDisplay)}),this._player.on(d.Private.LiveShiftQueryCompleted,function(){y.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});t.exports=h},{"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],14:[function(e,t,x){e=e("../package.json"),t.exports={domain:"dev.g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:e.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":10}],15:[function(e,t,x){var g,u,d,h;e("./lib/patch-ssr").isSSR||(e("./lang/index").load(),g=e("./player/adaptiveplayer"),u=e("./lib/reloadInstanceUtil"),d=e("./lib/componentutil"),h=e("./config"),(e=function(y,o){return y=g.create(y,o),u.storeUserEvents(y),y}).getVersion=function(){return h.h5Version},d.register(e),(d=window.Aliplayer=e).players={},e.reloadInstance=u.reloadInstance,typeof Uint8Array>"u")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),t.exports=d},{"./config":14,"./lang/index":25,"./lib/componentutil":29,"./lib/patch-ssr":46,"./lib/reloadInstanceUtil":48,"./player/adaptiveplayer":67}],16:[function(e,t,x){var g=e("../player/base/event/eventtype"),u=e("../lib/constants"),d=e("../lang/index");t.exports=function(){function h(o){var l=this;o===void 0&&(o={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=o.player,this.player.on(g.Player.Init,function(){l.playerInitDone=!0})}var y=h.prototype;return y.start=function(){var o=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){o.playerInitDone&&o.check()},this.interval))},y.stop=function(){this.clearTimer()},y.check=function(){var o=!1,l=this.detectPrototype()||this.detectNativeFn();return(l||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",l),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),o=!0),o},y.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},y.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},y.displayError=function(){var o=this.player,l={mediaId:o._options&&o._options.vid?o._options.vid:"",error_code:u.ErrorCode.RecordNotAllowed,error_msg:d.get("Record_Not_Allowed")};o.logError(l),o.trigger(g.Player.Error,l)},y.setupErrorStyle=function(){this.hideRetry();var o=document.querySelector(".prism-ErrorMessage");o&&(o.style.opacity="1",o.style.visibility="visible")},y.hideRetry=function(){var o=document.querySelector("#"+this.player.id()+" .prism-button-retry");o&&(o.style.display="none")},y.destroyVideo=function(){this.player._drm&&this.player.destroy();var o=this.player.tag;o&&o.parentNode&&o.parentNode.removeChild(o)},y.detectPrototype=function(){var o=window,l=o.MediaSource;return l&&o.EventTarget&&l.__proto__.__proto__===o.EventTarget},y.detectNativeFn=function(){var o=window.MediaSource;return o&&!this.isNativeFn(o.prototype.addSourceBuffer)},y.isNativeFn=function(o){var l=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),s=typeof o;return o!==null&&(s=="object"||s=="function")&&l.test(o)},y.detectDeperateVideo=function(){var o=this.player.tag;if(o)return(o.getAttribute("id")||"").indexOf("360")!==-1},h}()},{"../lang/index":25,"../lib/constants":30,"../player/base/event/eventtype":70}],17:[function(d,t,x){var g=d("../lib/oo"),u=d("../lang/index"),d=g.extend({init:function(y,o){this._player=y,this._options=y.options()}}),h=(d.prototype.handle=function(y){var o,l;this._options.autoPlayDelay&&(o=(o=this._options.autoPlayDelayDisplayText)||u.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",o),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(l=this)._timeHandler=setTimeout(function(){l._player.trigger("info_hide"),l._options.autoPlayDelay=0,y&&y()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){h(l)}),this._player.on("pause",function(){h(l)}))},d.prototype.dispose=function(){h(this),this._player=null},function(y){y._timeHandler&&(clearTimeout(y._timeHandler),y._timeHandler=null)});t.exports=d},{"../lang/index":25,"../lib/oo":45}],18:[function(y,t,x){var g=y("../lib/event"),u=y("../lib/data"),d=y("../player/base/event/eventtype"),h=u.guid(),y={};function o(a){var f,T,m=this._options.keyFastForwardStep,v=this._options.isLive;switch(a&&a.keyCode){case 39:v||(a.preventDefault(),f=this.getDuration(),T=this.getCurrentTime()+m,this.seek(T=f<T?f:T),l.call(this,T),s.call(this,T));break;case 37:v||(a.preventDefault(),T=this.getCurrentTime()-m,this.seek(T=T<0?0:T),l.call(this,T),s.call(this,T));break;case 38:a.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:a.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(v)return;a.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(a){this.trigger(d.Private.UpdateProgress,{targetTime:a})}function s(a){this.trigger(d.Private.UpdateCursorPosition,{targetTime:a})}y.init=function(){var a;this._options.keyShortCuts&&((a=o.bind(this)).guid=h,g.on(window.document,"keydown",a))},y.dispose=function(){var a;this._options.keyShortCuts&&((a=o.bind(this)).guid=h,g.off(window.document,"keydown",a))},t.exports=y},{"../lib/data":32,"../lib/event":35,"../player/base/event/eventtype":70}],19:[function(y,t,x){var g=typeof Promise>"u"?y("es6-promise").Promise:Promise,u=y("../lib/constants").LicenseResultCode,d=y("../lib/io"),h=((y={})[u.ResourceIncorrect]="license resource init error",y[u.LicenseKeyInvalid]="invalid license key",y[u.DomainInvalid]="invalid domain",y[u.CertInvalid]="invalid cert content",y[u.NotFound]="license not found",y[u.Expired]="license expired",y),y=function(){function o(){}return o.getLicense=function(l,s,a){var f=this;return this.isWasmSupported()?s?l?this.instance?g.resolve(this.instance):new g(function(T,m){f.resolvers.push(T),f.rejecters.push(m),f.resolvers.length===1&&d.loadJS("https://dev.g.alicdn.com/apsara-media-components/amcom-web-license/0.4.0/index.js",function(){window.loadLicenseSource().then(function(v){var S=new v({business_id:2,domain_identity:l,license_key:s,region:a});return S.update().then(function(){f.instance=S,f.resolvers.forEach(function(w){w(S)})}).catch(function(w){console.error(w),f.rejecters.forEach(function(E){E(u.CertInvalid)})})}).catch(function(){f.rejecters.forEach(function(v){v(u.ResourceIncorrect)})}).finally(function(){f.resolvers=[],f.rejecters=[]})},function(){f.rejecters.forEach(function(v){v(u.ResourceIncorrect)})})}):g.reject(u.DomainInvalid):g.reject(u.LicenseKeyInvalid):g.reject(u.WasmNotSupported)},o.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},o.logError=function(l){h[l]&&console.error(h[l])},o}();y.instance=void 0,y.resolvers=[],y.rejecters=[],t.exports=y},{"../lib/constants":30,"../lib/io":42,"es6-promise":8}],20:[function(T,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var w,E=arguments[S];for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&(v[w]=E[w])}return v}).apply(this,arguments)}function u(v,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}var d=T("../lib/event"),h="box",y="content",o="top-left",l="top-right",s="bottom-left",a="bottom-right",f="percentage",T=function(){function v(E){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new m,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(E.logo),this._setElements(E.container,E.video)}var S,w=v.prototype;return w.dispose=function(){this._observer.dispose(),this._observer=void 0,d.off(this._video,"resize",this._handleVideoResize),d.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(E){E.logo&&E.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},w._setElements=function(E,_){this._container=E,this._video=_,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):d.on(_,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),d.on(document,"fullscreenchange",this._handleWindowResize)},w._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(E){return E.logo})||this._logoList.forEach(this._setupLogo.bind(this))},w._handleWindowResize=function(){var E=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){E._resizeDone=!0,E._logoList.forEach(E._placeLogo.bind(E))}))},w._setLogo=function(E){this._logoList=E.map(this._defauleValue)},w._setupLogo=function(E){var _=this,P=this._createLogo(E);(E.logo=P).onload=function(){_._placeLogo(E)}},w._createLogo=function(E){var _=document.createElement("img");return _.setAttribute("class","prism-logo"),_.src=E.src,_},w._placeLogo=function(E){var _=E.logo,P=this._calcSize(E),R=(P.width&&_.setAttribute("width",P.width+"px"),P.height&&_.setAttribute("height",P.height+"px"),this._calcMatrix(E));_.style.position="absolute",Object.keys(R).forEach(function(A){_.style[A]=R[A]+"px"}),this._container.appendChild(E.logo)},w._calcSize=function(E){return this._getPixel(E)},w._calcMatrix=function(E){var _=this._getPosition(E),P=this._getPixel(E,{width:E.offsetX,height:E.offsetY});return Object.keys(_).forEach(function(R){switch(R){case"top":_[R]+=P.height;break;case"bottom":_[R]-=P.height;break;case"left":_[R]+=P.width;break;case"right":_[R]-=P.width}}),_},w._getPosition=function(P){var _=P.origin,P=P.position,R=0,A=0;switch(_===y&&(R=Math.abs(this.videoSize.height-this.contentSize.height)/2,A=Math.abs(this.videoSize.width-this.contentSize.width)/2),P){case o:return{top:0+R,left:0+A};case l:return{top:0+R,right:0+A};case s:return{bottom:0+R,left:0+A};case a:return{bottom:0+R,right:0+A};default:return{top:0,left:0}}},w._formalize=function(E,_){var P=1,P=E.width/E.height>_.width/_.height?_.width/E.width:_.height/E.height;return{width:E.width*P,height:E.height*P}},w._getPixel=function(E,R){var R=R===void 0?{}:R,P=R.width,R=R.height,A=E.unit,C=E.origin;return isNaN(P)&&(P=E.width),isNaN(R)&&(R=E.height),A===f?{width:(E=C===h?this.videoSize:this.contentSize).width*P/100,height:E.height*R/100}:{width:P,height:R}},w._defauleValue=function(E){return g({},E,{position:E.position||o,offsetX:E.offsetX||0,offsetY:E.offsetY||0,origin:E.origin||h,unit:E.unit||f})},w=v,(S=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var E;return this._video?(E={width:this._video.videoWidth,height:this._video.videoHeight},{width:(E=this._formalize(E,this.videoSize)).width,height:E.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&u(w.prototype,S),Object.defineProperty(w,"prototype",{writable:!1}),v}(),m=(t.exports=T,function(){function v(){this._frame=void 0}var S=v.prototype;return S.observe=function(w,E){var _=document.createElement("iframe");return _.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",_.onload=function(){_.contentWindow.onresize=function(){E(w)}},w.appendChild(_),this._frame=_},S.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},v}())},{"../lib/event":35}],21:[function(e,t,x){var g=e("../lib/event"),u=e("../player/base/event/eventtype");t.exports=function(){function d(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var h=d.prototype;return h.autoResize=function(y,o,l){l===void 0&&(l="height"),typeof y!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=l,this.ratio=y,this.player=o,g.on(window,"resize",this.resize),this.resize())},h._resize=function(){var y,o,l;(y=this.player.fullscreenService)!=null&&y.isFullScreen||(y=(y=this.player)==null?void 0:y.el())&&(this.target==="height"?(l=(o=y.offsetWidth)/this.ratio,y.style.height=l+"px"):(o=(l=y.offsetHeight)*this.ratio,y.style.width=o+"px"),(y=this.player)!=null)&&y.trigger(u.Player.AutoResize,{width:o,height:l})},h.dispose=function(){g.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},d}()},{"../lib/event":35,"../player/base/event/eventtype":70}],22:[function(e,t,x){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or  the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4 is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod service，please close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occored when the m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout, please close or refresh",Error_Invalidate_Source:"Video shoud be mp4、mp3、m3u8、mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Region_Block_Text:"This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and m3u8 and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv、rmtp can't be supported on mobile，please use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_No_Authorization:"Aliplayer without Authorization",License_Click_To_Apply:"Click to apply",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],23:[function(e,t,x){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles and Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error, please try to refresh",Decode_Error:"Data decoding error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading, please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted, please try to refresh",Corss_Domain_Error:`Please ensure your domain has obtained IPC license and combined CNAME, \r
 or to set  cross-domain accessing available`,Url_Timeout_Error:"The video url is timeout, please try to refresh",Connetction_Error:"Sorry，the video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player，please use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],24:[function(e,t,x){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Forbidden_Text:"内部信息，严禁外传",Refresh:"刷新",Diagnosis:"诊断",Live_Finished:"直播已结束,谢谢观看",Play:"播放",Pause:"暂停",Snapshot:"截图",Replay:"重播",Live:"直播",Encrypt:"加密",Sound:"声音",Fullscreen:"全屏",Exist_Fullscreen:"退出全屏",Resolution:"清晰度",Next:"下一集",Brightness:"亮度",Default:"默认",Contrast:"对比度",Titles_Credits:"片头片尾",Skip_Titles:"跳过片头",Skip_Credits:"跳过片尾",Not_Support_Out_Site:"该视频暂不支持站外播放，请到淘TV观看",Watch_Now:"立即观看",Network_Error:"网络无法连接，请尝试检查网络后刷新试试",Video_Error:"视频播放异常，请刷新试试",Decode_Error:"播放数据解码错误",Live_Not_Start:"亲，直播还未开始哦，敬请期待",Live_Loading:"直播信息加载中，请刷新试试",Live_End:"亲，直播已结束",Live_Abrot:"当前直播信号中断，请刷新后重试",Corss_Domain_Error:`请确认您的域名已完成备案和CNAME绑定，\r
并处于启用状态，或资源允许跨越访问`,Url_Timeout_Error:"您所观看的视频地址连接超时，请刷新后重试",Connetction_Error:"抱歉,该视频由于连接错误暂时不能播放,请观看其它视频",Fetch_MTS_Error:"获取视频列表失败，请确认",Token_Expired_Error:"请求接口失败，请确认Token是否过期",Video_Lists_Empty_Error:"获取视频列表为空，请确认播放数据与格式",Encrypted_Failed_Error:"获取视频加密秘钥错误，请确认播放权限",Fetch_Failed_Permission_Error:"获取视频列表失败，请确认播放权限",Invalidate_Param_Error:"无输入视频，请确认输入参数",AutoPlayDelayDisplayText:"$$秒以后开始播放",Fetch_MTS_NOT_NotStream_Error:"此vid没有可播放视频",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Cant_Use_Flash_On_Mobile:"移动端不支持Flash播放器，请使用h5播放器",Flash_Not_Ready:"Flash Player插件未安装<a href='https://www.flash.cn/' target='_blank'>安装插件</a>，如果已经安装请检查是否被禁用"}},{}],25:[function(e,t,x){function g(){var f;return window[o]!==void 0&&window[o]||(f=(f=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<f.indexOf("zh")?"zh-cn":"en-us",window[o]=f),window[o]}function u(f,T,m){var v=a(f),w="",S=s(),w=f=="flash"?S=="en-us"?e("./flash/en-us"):S=="zh-cn"?e("./flash/zh-cn"):T[S]:S=="en-us"?e("./en-us"):S=="zh-cn"?e("./zh-cn"):T[S];m&&(w=Object.assign({},w,m[S])),h.set(v,JSON.stringify(w)),l(f,w),m&&e("../lib/constants").updateByLanguage()}var d=e("../config"),h=e("../lib/storage"),y=(e("../lib/io"),"aliplayer_lang_data"),o="aliplayer_lang",l=function(f,T){f=a(f),window[f]=T},s=function(){return g()},a=function(f){var T=s();return y+"_"+(f=f||"h5")+"_"+d.h5Version.replace(/\./g,"_")+"_"+T};t.exports.setCurrentLanguage=function(f,T,m,v){var S=window[o];if(!((f=f!==void 0&&f?f:g())=="en-us"||f=="zh-cn"||m&&m[f]))throw new Error("There is not language resource for "+f+", please specify the language resource by languageTexts property");window[o]=f,u(T,m,v),f!=S&&e("../lib/constants").updateByLanguage()},t.exports.getCurrentLanguage=g,t.exports.getLanguageData=function(f,T){return f=a(f),window[f]},t.exports.load=u,t.exports.get=function(f,T,m){if(T=a(T=T||"h5"),T=window[T],T){var v=T[f];if(m)for(var S in m)v=v.replace(new RegExp("@"+S+"@","g"),m[S]);return v}}},{"../config":14,"../lib/constants":30,"../lib/io":42,"../lib/storage":49,"./en-us":22,"./flash/en-us":23,"./flash/zh-cn":24,"./zh-cn":26}],26:[function(e,t,x){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Speed:"倍速",Speed_05X_Text:"0.5X",Speed_1X_Text:"正常",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"不能播放，切换为",Quality_Change_Text:"正在为您切换到 ",Quality_The_Url:"此地址",Refresh_Text:"刷新",Detection_Text:"查看建议",Cancel:"取消",Mute:"静音",Click_To_Unmute:"点击取消静音",Snapshot:"截图",Play_DateTime:"播放时间",AutoPlayDelayDisplayText:"$$秒以后开始播放",Error_Load_Abort_Text:"获取数据过程被中止",Error_Network_Text:"网络错误加载数据失败",Error_Decode_Text:"解码错误",Error_No_Decoder_Text:"不支持此编码格式",Error_Server_Network_NotSupport_Text:"服务器、网络错误或格式不支持",Error_Offline_Text:"网络不可用，请确定",Error_Play_Text:"播放出错啦",Error_Retry_Text:"请尝试退出重试或刷新",Error_AuthKey_Text:"可能鉴权过期、域名不在白名单或请求被拦截",Error_H5_Not_Support_Text:"不支持此格式的视频",Error_Not_Support_M3U8_Text:"浏览器不支持m3u8视频播放",Error_Not_Support_MP4_Text:"浏览器不支持mp4视频播放",Error_Not_Support_encrypt_Text:"播放私有加密视频，请设置属性encryptType为1",Error_Encrypt_Fetch_Failed_Text:"请求加密地址失败",Error_Vod_URL_Is_Empty_Text:"获取播放地址为空",Error_Vod_Fetch_Urls_Text:"点播接口异常，请尝试退出重试或刷新",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Error_Playauth_Decode_Text:"playauth解析错误",Error_Vid_Not_Same_Text:"不能更新地址，vid和播放中的不一致",Error_Playauth_Expired_Text:"凭证已过期，请尝试退出重试或刷新",Error_MTS_Fetch_Urls_Text:"MTS获取取数失败",Error_Load_M3U8_Failed_Text:"获取m3u8文件失败,可能是https证书、跨域问题或DNS解析失败",Error_Load_M3U8_Timeout_Text:"获取m3u8文件超时",Error_Liveshift_M3U8_Not_Found_Text:"没有更多时移视频了",Error_M3U8_Decode_Text:"获取m3u8文件解析失败",Error_TX_Decode_Text:"解析数据出错",Error_Manifest_Decode_Text:"Manifest解析出错",Error_Waiting_Timeout_Text:"缓冲数据超时，请尝试退出重试或刷新",Error_Invalidate_Source:"播放地址格式需要为mp4、mp3、m3u8、mpd或flv",Error_Empty_Source:"播放地址不能为空",Error_Vid_Empty_Source:"vid对应的视频地址还未获取到",Error_Mediaauth_Empty_Source:"mediaAuth对应的视频地址还未获取到",Error_Fetch_NotStream:"此vid没有可播放视频",Error_Fetch_Media_Not_Found:"数据不存在或已被删除",Error_Not_Found:"播放地址不存在",Error_Drm_License_Request_Failed:"DRM License 请求失败",Error_Drm_Not_Supported:"当前浏览器不支持 DRM 播放",Error_Drm_Load:"DRM 播放错误",Error_Drm_No_Sts:"DRM 播放需要使用STS(accessKeyId/accessKeySecret/securityToken)",Error_Region_Block_Text:"您所在的地区无法观看该视频",Error_SW_Conflict:"ServiceWorker冲突，请尝试禁用浏览器插件、重启浏览器并关闭其他网页",Error_SW_Register_Failed:"Service Worker注册失败",Error_SW_ScriptURL_Empty:"请传入 swScriptURL 参数",Error_SW_ScriptURL_Https:"swScriptURL参数请使用 https:// 协议的绝对地址",Error_SW_ScriptURL_Scope:"swScriptURL(子路径:@scope1@)和当前网页(子路径:@scope2@)必须在同一个子路径下",Error_SW_Version_Not_Match:"swScriptURL的版本号(@swVersion@)必须和播放器版本(@playerVersion@)号一致",Error_SW_ScriptURL_ILlegal:"请传入合法的swScriptURL(@detail@)",Error_SW_Https_required:"私有加密播放需要使用 https 环境",Tip_Err_Common:"您可联系售后支持，错误详情:<br />",Tip_Err_Common_Short:"错误详情:<br />",Tip_Drm_Request_Err:"请求出错，请先查看浏览器控制台，检查是否由域名解析、https证书、或网络问题引起。<br />若以上检查没问题，",Tip_Drm_Secure_Context:"DRM仅可以在https、localhost、127.0.0.1网页下访问，同时m3u8和切片也必须使用https。",Tip_Drm_Key_System_Unavailable:"1.此浏览器不支持Widevine或者当前的Widevine配置<br />2.浏览器弹出的请求被用户拒绝了<br />3.请打开浏览器设置，查找关于【受保护的内容】设置并允许",Tip_Drm_File_Not_Allowed:"请不要使用file://直接打开文件，需要使用https://访问文件",Tip_Drm_Playlist_Hierarchy:"HLS播放列表层级错误，主列表需要是 master playlist",Tip_Drm_Unsupported:"您的浏览器不支持 Widevine，如果是 Chrome，可以访问 chrome://components/，查找 Widevine Content Decryption Module，并点击更新。如果没有此模块，则该浏览器无法播放 DRM 视频。",Tip_Err_Decode:"解码错误指的是当前音/视频帧与浏览器不兼容，可以尝试以下方式：<br />1.chrome/edge 浏览器打开chrome://flags，搜索 Hardware-accelerated video decode，选择 disabled<br />2.如果解码错误仍然存在，请对视频进行转码处理，以修复问题帧<br />3.firefox浏览器请打开about:support，下拉找到【解码器支持信息】，如果没有AAC字样，代表不支持音频解码，请更换浏览器",Tip_Err_Rts_Http_Failed:"该错误指的是RTS拉流请求遇到了一个http错误，一般来说是https证书、DNS解析或者网络连通性问题，由于浏览器对JS的限制，播放器无法取得详细的错误信息，需要进一步排查，您可按照以下操作：<br>1.右键浏览器空白处，选择【检查】2.在新打开的界面中选择【控制台】3.查看红色报错：<br>如果有SSL字样，则代表您没有为拉流域名正确地配置https证书<br>如果有NOT RESOLVED字样，则代表您的域名DNS解析失败<br>您也使用<a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>阿里云直播诊断工具</a>进行自助排查",Tip_Err_Not_found:"如果是直播，可能是直播未开始/已停止/已断流；如果是点播，可能是视频不存在。",Tip_Err_Blocked:"如果您开启了网络代理，请关闭后重试。",Tip_Err_Splayer:"关于 H.265/H.266 播放的最佳实践，请参考",Tip_Err_Splayer_Doc:"此文档。",Tip_SW_Register:"1.请使用https访问网页<br>2.请确保传入的swScriptURL是以https://开头的完整地址，且可以正常访问",Live_End:"亲，直播已结束",Play_Before_Fullscreen:"播放后再全屏",Can_Not_Seekable:"不能seek到这里",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Request_Block_Text:"浏览器安全策略视频地址不能为http协议，与网站https协议不一致",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Maybe_Cors_Error:"网络请求失败，可能是https证书、跨域问题或DNS解析失败",Speed_Switch_To:"倍速切换到 ",Curent_Volume:"当前音量：",Volume_Mute:"设置为静音",Volume_UnMute:"设置为非静音",ShiftLiveTime_Error:"直播开始时间不能大于直播结束时间",Error_Not_Support_Format_On_Mobile:"移动端不支持flv、rmtp视频，请使用m3u8",Error_Not_Support_Mse_Flv:"当前浏览器不支持 flv 视频",Error_Not_Support_Mse_Dash:"当前浏览器不支持 dash 视频",Error_Not_Support_RTMP:"浏览器不支持 rtmp 视频",SessionId_Ticket_Invalid:"DRM视频播放，sessionId和ticket属性不能为空",Http_Error:"Http网络请求失败",Http_Timeout:"http请求超时",DRM_License_Expired:"DRM license超时，请刷新",Not_Support_DRM:"浏览器不支持DRM视频的播放或未受到用户许可",CC_Switch_To:"字幕切换到 ",AudioTrack_Switch_To:"音轨切换到 ",Subtitle:"字幕",AudioTrack:"音轨",Quality:"清晰度",Auto:"自动",Quality_Switch_To:"正在切换清晰度至 ",Fullscreen:"全屏",Setting:"设置",Volume:"音量",Play:"播放",Pause:"暂停",CloseSubtitle:"关闭字幕",OpenSubtitle:"打开字幕",ExistFullScreen:"退出全屏",Muted:"静音",Retry:"重试",SwitchToLive:"返回直播",iOSNotSupportVodEncription:"iOS17.1以下不支持阿里云视频私有加密播放",iOSVodEncriptionBlacklist:"请使用Safari/Chrome浏览器播放加密视频",UseChromeForVodEncription:"浏览器不支持点播加密播放，请使用最新Chrome/Edge浏览器",Record_Not_Allowed:"禁止录屏或小窗口播放，请关闭插件或更换浏览器",License_No_Authorization:"播放器SDK未激活",License_Click_To_Apply:"点击申请License",Rts_Err_Http_Signal_Error:"(RTS)信令请求失败",Rts_Err_Play_Failed:"(RTS)播放失败",Rts_Err_No_Data_For:"秒没有数据",Rts_Err_Browser_Not_Support:"(RTS)不支持此浏览器",Rts_Err_Not_Support_Webrtc:"(RTS)不支持webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)浏览器版本过低",Rts_Err_Not_Support_H264:"(RTS)不支持H264",Rts_Err_Create_Offer_Error:"(RTS)create offer失败",Rts_Err_Play_Url_Error:"(RTS)播放url协议错误",Rts_Err_Subscribe_Nonthing:"(RTS)参数设置错误",Rts_Err_Http_Request_Failed:"(RTS)HTTP请求失败",Rts_Err_Http_Answer_Failed:"(RTS)answer失败",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection异常",Splayer_Err_Env_Check:"(SP)当前环境不支持播放该视频",Splayer_Err_Coroutine:"(SP)Coroutine 错误",Splayer_Err_Decode:"(SP)解码错误",Splayer_Err_Buffering:"(SP)缓冲区错误",Splayer_Err_Parser_Not_Found:"(SP)不支持的媒体容器"}},{}],27:[function(e,t,x){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var u=new Uint8Array(256),d=0;d<g.length;d++)u[g.charCodeAt(d)]=d;var h=function(y){for(var o="",l=0;l<y.length;l+=16e3){var s=y.subarray(l,l+16e3);o+=String.fromCharCode.apply(null,s)}return o};t.exports={decode:function(y){for(var o,l,s,a,m=.75*y.length,f=y.length,T=0,m=(y[y.length-1]==="="&&(m--,y[y.length-2]==="=")&&m--,new ArrayBuffer(m)),v=new Uint8Array(m),S=0;S<f;S+=4)o=u[y.charCodeAt(S)],l=u[y.charCodeAt(S+1)],s=u[y.charCodeAt(S+2)],a=u[y.charCodeAt(S+3)],v[T++]=o<<2|l>>4,v[T++]=(15&l)<<4|s>>2,v[T++]=(3&s)<<6|63&a;return m},encode:function(y){for(var o=new Uint8Array(y),l=o.length,s="",a=0;a<l;a+=3)s=(s=(s=(s+=g[o[a]>>2])+g[(3&o[a])<<4|o[a+1]>>4])+g[(15&o[a+1])<<2|o[a+2]>>6])+g[63&o[a+2]];return l%3==2?s=s.substring(0,s.length-1)+"=":l%3==1&&(s=s.substring(0,s.length-2)+"=="),s},unpackPlayReady:function(y){if(y=function(T,m,v){if(!T)return"";v||T.byteLength%2==0||console.log("Data has an incorrect length, must be even."),v=T instanceof ArrayBuffer?T:((v=new Uint8Array(T.byteLength)).set(new Uint8Array(T)),v.buffer);for(var S=Math.floor(T.byteLength/2),w=new Uint16Array(S),E=new DataView(v),_=0;_<S;_++)w[_]=E.getUint16(2*_,m);return h(w)}(y,!0,!0),y.indexOf("PlayReadyKeyMessage")!=-1){for(var y=new DOMParser().parseFromString(y,"application/xml"),o=y.getElementsByTagName("HttpHeader"),l={},s=0;s<o.length;++s){var a=o[s].querySelector("name"),f=o[s].querySelector("value");l[a.textContent]=f.textContent}return{header:l,changange:y.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],28:[function(e,t,x){var g=e("./videox-muxer.min");function u(){}t.exports=function(d,h,y){h===void 0&&(h=u),y===void 0&&(y=u);var o=new g.Demuxer({progressive:!0});o.on("loadedmetadata",function(l){l===void 0&&(l={}),o.suspend(),o.destroy(),o=null,h(l)}),o.on("error",function(l){y(l),o.suspend(),o.destroy(),o=null}),o.load(d)}},{"./videox-muxer.min":53}],29:[function(e,t,x){var g=e("./oo"),u=e("../player/base/event/eventtype");t.exports.stopPropagation=function(d){window.event?window.event.cancelBubble=!0:d.stopPropagation()},t.exports.register=function(d){d.util={stopPropagation:t.exports.stopPropagation},d.Component=g.extend,d.EventType=u.Player}},{"../player/base/event/eventtype":70,"./oo":45}],30:[function(e,t,x){function g(){t.exports.VideoErrorCodeText={1:u.get("Error_Load_Abort_Text"),2:u.get("Error_Network_Text"),3:u.get("Error_Decode_Text"),4:u.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:u.get("OD"),640:u.get("FD"),960:u.get("LD"),1280:u.get("SD"),1920:u.get("HD"),2580:u.get("2K"),3840:u.get("4K")},t.exports.QualityLevels={OD:u.get("OD"),LD:u.get("LD"),FD:u.get("FD"),SD:u.get("SD"),HD:u.get("HD"),"2K":u.get("2K"),"4K":u.get("4K"),XLD:u.get("XLD"),FHD:u.get("FHD"),SQ:u.get("SQ"),HQ:u.get("HQ")},t.exports.SpeedLevels=[{key:.5,text:u.get("Speed_05X_Text")},{key:1,text:u.get("Speed_1X_Text")},{key:1.25,text:u.get("Speed_125X_Text")},{key:1.5,text:u.get("Speed_15X_Text")},{key:2,text:u.get("Speed_2X_Text")}]}var u=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.DASH_QUALITY_PROTOCOL="quality_index://",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.USER_EVENT_NAME="__user_events__",t.exports.PLAYER_SCOPE="__aliplayerMessage__",t.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},t.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},t.exports.PLAYER_SDK_CODE=9201,t.exports.FEATURE_ID_H265=30001,t.exports.FEATURE_ID_H266=30002,t.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.RegionBlockMessages=["black location","denied by region block"],t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.SelectedCC="selectedCC",t.exports.HWDetectHvc1="HWDetectHvc1",t.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",t.exports.HWDetectHev1="HWDetectHev1",t.exports.HWDetectHev1Hls="HWDetectHev1Hls",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},g(),t.exports.updateByLanguage=g},{"../lang/index":25}],31:[function(e,t,x){t.exports.get=function(g){for(var u=g+"",d=document.cookie.split(";"),h=0;h<d.length;h++){var y=d[h].trim();if(y.indexOf(u)==0)return unescape(y.substring(u.length+1,y.length))}return""},t.exports.set=function(g,u,y){var h=new Date,y=(h.setTime(h.getTime()+24*y*60*60*1e3),"expires="+h.toGMTString());document.cookie=g+"="+escape(u)+"; "+y}},{}],32:[function(e,t,x){var g=e("./object");t.exports.cache={},t.exports.guid=function(u,d){var h,y,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(d=d||o.length,u)for(h=0;h<u;h++)l[h]=o[0|Math.random()*d];else for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",h=0;h<36;h++)l[h]||(y=0|16*Math.random(),l[h]=o[h==19?3&y|8:y]);return l.join("")},t.exports.expando="vdata"+new Date().getTime(),t.exports.getData=function(u){var d=u[t.exports.expando];return d||(d=u[t.exports.expando]=t.exports.guid(),t.exports.cache[d]={}),t.exports.cache[d]},t.exports.hasData=function(u){var d="";return!(!(d=u?u[t.exports.expando]:d)||g.isEmpty(t.exports.cache[d]))},t.exports.removeData=function(u){var d="";if(d=u?u[t.exports.expando]:d){delete t.exports.cache[d];try{delete u[t.exports.expando]}catch{u.removeAttribute?u.removeAttribute(t.exports.expando):u[t.exports.expando]=null}}}},{"./object":44}],33:[function(e,t,x){var g,u=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=typeof self<"u"?self:this,g=function(){return h=[function(o,l,s){(function(a){l.b=function(m){for(var v=(m=m===void 0?{}:m).includes,m=m.excludes,m=m===void 0?[]:m,S=!1,w=!1,E=0,_=v===void 0?[]:v;E<_.length;E++)if(_[E]===!0){S=!0;break}for(var P=0,R=m;P<R.length;P++)if(R[P]===!0){w=!0;break}return S&&!w},l.c=function(m,v,S){return m=T.a[m],m!==void 0&&Object(f.compare)(m,v,S)},l.a=function(){return typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:this};var f=s(11),T=(s.n(f),s(4))}).call(l,s(10))},function(o,f,T){T.d(f,"c",function(){return m}),T.d(f,"d",function(){return v}),T.d(f,"b",function(){return S}),T.d(f,"f",function(){return w}),T.d(f,"a",function(){return E}),T.d(f,"e",function(){return _});var a,f=T(3),T=T(0),T=Object(T.a)(),m="InstallTrigger"in((T==null?void 0:T.window)||{})||/firefox/i.test(f.b),v=/trident/i.test(f.b)||/msie/i.test(f.b),S=/edge/i.test(f.b),w=/webkit/i.test(f.b)&&!S,E=((a=T==null?void 0:T.window)==null?void 0:a.chrome)!==void 0||/chrome/i.test(f.b),_=(((T=(a=T==null?void 0:T.window)==null?void 0:a.safari)==null?void 0:T.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(f.b)&&!E},function(o,l,s){s.d(l,"b",function(){return T}),s.d(l,"c",function(){return m}),s.d(l,"a",function(){return v});var a=s(1);function f(S){if(console){if(!a.d&&!a.b)return console[S];if(S==="log"||S==="clear")return function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];console[S].apply(console,w)}}return function(){}}var T=f("log"),m=f("table"),v=f("clear")},function(o,a,s){a.a=function(){for(var m,v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];return f!=null&&f.document?(m=f.document).createElement.apply(m,v):{}},s.d(a,"b",function(){return T});var a=s(0),f=Object(a.a)(),T=((s=f==null?void 0:f.navigator)==null?void 0:s.userAgent)||"xxxxx"},function(o,l,s){s.d(l,"a",function(){return a});for(var a={},f=0,T=(s(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];f<T.length;f++){var v=T[f].split("/"),m=v[0],v=v[1];a[m]=v}},function(o,a,s){s.d(a,"b",function(){return f}),s.d(a,"d",function(){return T}),s.d(a,"c",function(){return m}),s.d(a,"a",function(){return v}),s.d(a,"e",function(){return S});var a=s(3),f=/ipad/i.test(a.b),T=/macintosh/i.test(a.b),m=/iphone/i.test(a.b),v=/android/i.test(a.b),S=/windows/i.test(a.b)},function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.addListener=function(P){_.addListener(P)},l.removeListener=function(P){_.removeListener(P)},l.isLaunch=function(){return _.isLaunch()},l.launch=function(){_.launch()},l.stop=function(){_.stop()},l.setDetectDelay=function(P){_.setDetectDelay(P)};var a=s(7),f=s(8),T=(s.d(l,"DevtoolsDetector",function(){return a.a}),s.d(l,"checkers",function(){return f}),s(0)),m=(s.d(l,"match",function(){return T.b}),s.d(l,"specificVersionMatch",function(){return T.c}),s(1)),v=(s.d(l,"isFirefox",function(){return m.c}),s.d(l,"isIE",function(){return m.d}),s.d(l,"isEdge",function(){return m.b}),s.d(l,"isWebkit",function(){return m.f}),s.d(l,"isChrome",function(){return m.a}),s.d(l,"isSafari",function(){return m.e}),s(2)),S=(s.d(l,"log",function(){return v.b}),s.d(l,"table",function(){return v.c}),s.d(l,"clear",function(){return v.a}),s(17)),w=(s.d(l,"isMobile",function(){return S.a}),s(4)),E=(s.d(l,"versionMap",function(){return w.a}),s(5)),_=(s.d(l,"isIpad",function(){return E.b}),s.d(l,"isMac",function(){return E.d}),s.d(l,"isIphone",function(){return E.c}),s.d(l,"isAndroid",function(){return E.a}),s.d(l,"isWindows",function(){return E.e}),new a.a({checkers:[f.elementIdChecker,f.regToStringChecker,f.functionToStringChecker,f.depRegToStringChecker,f.dateToStringChecker,f.debuggerChecker]}));l.default=_},function(o,l,s){s.d(l,"a",function(){return T});var a=this&&this.__awaiter||function(v,S,w,E){return new(w=w||u)(function(_,P){function R(L){try{C(E.next(L))}catch(V){P(V)}}function A(L){try{C(E.throw(L))}catch(V){P(V)}}function C(L){var V;L.done?_(L.value):((V=L.value)instanceof w?V:new w(function(I){I(V)})).then(R,A)}C((E=E.apply(v,S||[])).next())})},f=this&&this.__generator||function(v,S){var w,E,_,P={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]},R={next:A(0),throw:A(1),return:A(2)};return typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function A(C){return function(L){var V=[C,L];if(w)throw new TypeError("Generator is already executing.");for(;P;)try{if(w=1,E&&(_=2&V[0]?E.return:V[0]?E.throw||((_=E.return)&&_.call(E),0):E.next)&&!(_=_.call(E,V[1])).done)return _;switch(E=0,(V=_?[2&V[0],_.value]:V)[0]){case 0:case 1:_=V;break;case 4:return P.label++,{value:V[1],done:!1};case 5:P.label++,E=V[1],V=[0];continue;case 7:V=P.ops.pop(),P.trys.pop();continue;default:if(!(_=0<(_=P.trys).length&&_[_.length-1])&&(V[0]===6||V[0]===2)){P=0;continue}if(V[0]===3&&(!_||V[1]>_[0]&&V[1]<_[3]))P.label=V[1];else if(V[0]===6&&P.label<_[1])P.label=_[1],_=V;else{if(!(_&&P.label<_[2])){_[2]&&P.ops.pop(),P.trys.pop();continue}P.label=_[2],P.ops.push(V)}}V=S.call(v,P)}catch(I){V=[6,I],E=0}finally{w=_=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}}},T=(m.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},m.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},m.prototype.isLaunch=function(){return!this._detectLoopStopped},m.prototype.setDetectDelay=function(v){this._detectLoopDelay=v},m.prototype.addListener=function(v){this._listeners.push(v)},m.prototype.removeListener=function(v){this._listeners=this._listeners.filter(function(S){return S!==v})},m.prototype._broadcast=function(v){for(var S=0,w=this._listeners;S<w.length;S++){var E=w[S];try{E(v.isOpen,v)}catch{}}},m.prototype._detectLoop=function(){return a(this,void 0,void 0,function(){var v,S,w,E,_,P=this;return f(this,function(R){switch(R.label){case 0:v=!1,S="",w=0,E=this._checkers,R.label=1;case 1:return w<E.length?[4,(_=E[w]).isEnable()]:[3,6];case 2:return R.sent()?(S=_.name,[4,_.isOpen()]):[3,4];case 3:v=R.sent(),R.label=4;case 4:if(v)return[3,6];R.label=5;case 5:return w++,[3,1];case 6:return v!=this._isOpen&&(this._isOpen=v,this._broadcast({isOpen:v,checkerName:S})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return P._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},m);function m(v){v=v.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=v.slice()}},function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0});var a=s(9),f=(s.d(l,"depRegToStringChecker",function(){return a.a}),s(12)),T=(s.d(l,"elementIdChecker",function(){return f.a}),s(13)),m=(s.d(l,"functionToStringChecker",function(){return T.a}),s(14)),v=(s.d(l,"regToStringChecker",function(){return m.a}),s(15)),S=(s.d(l,"debuggerChecker",function(){return v.a}),s(16));s.d(l,"dateToStringChecker",function(){return S.a})},function(o,l,s){s.d(l,"a",function(){return E});var a=s(1),f=s(2),T=s(0),m=this&&this.__awaiter||function(_,P,R,A){return new(R=R||u)(function(C,L){function V(O){try{M(A.next(O))}catch(N){L(N)}}function I(O){try{M(A.throw(O))}catch(N){L(N)}}function M(O){var N;O.done?C(O.value):((N=O.value)instanceof R?N:new R(function(j){j(N)})).then(V,I)}M((A=A.apply(_,P||[])).next())})},v=this&&this.__generator||function(_,P){var R,A,C,L={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},V={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function I(M){return function(O){var N=[M,O];if(R)throw new TypeError("Generator is already executing.");for(;L;)try{if(R=1,A&&(C=2&N[0]?A.return:N[0]?A.throw||((C=A.return)&&C.call(A),0):A.next)&&!(C=C.call(A,N[1])).done)return C;switch(A=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return L.label++,{value:N[1],done:!1};case 5:L.label++,A=N[1],N=[0];continue;case 7:N=L.ops.pop(),L.trys.pop();continue;default:if(!(C=0<(C=L.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){L=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))L.label=N[1];else if(N[0]===6&&L.label<C[1])L.label=C[1],C=N;else{if(!(C&&L.label<C[2])){C[2]&&L.ops.pop(),L.trys.pop();continue}L.label=C[2],L.ops.push(N)}}N=P.call(_,L)}catch(j){N=[6,j],A=0}finally{R=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},S=/ /,w=!1,E=(S.toString=function(){return w=!0,E.name},{name:"dep-reg-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return w=!1,Object(f.c)({dep:S}),Object(f.a)(),[2,w]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return[2,Object(T.b)({includes:[!0],excludes:[a.c,a.d]})]})})}})},function(o,l){var s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(s=window)}o.exports=s},function(o,l,s){var a;(l=typeof(a=function(){var f=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function T(_){var P=_.replace(/^v/,"").replace(/\+.*$/,""),R=function(C,L){return C.indexOf(L)===-1?C.length:C.indexOf(L)}(P,"-"),A=P.substring(0,R).split(".");return A.push(P.substring(R+1)),A}function m(_){return isNaN(Number(_))?_:Number(_)}function v(_){if(typeof _!="string")throw new TypeError("Invalid argument expected string");if(!f.test(_))throw new Error("Invalid argument not valid semver ('"+_+"' received)")}function S(_,P){[_,P].forEach(v);for(var R=T(_),A=T(P),C=0;C<Math.max(R.length-1,A.length-1);C++){var L=parseInt(R[C]||0,10),V=parseInt(A[C]||0,10);if(L>V)return 1;if(V>L)return-1}var I=R[R.length-1],M=A[A.length-1];if(I&&M){var O=I.split(".").map(m),N=M.split(".").map(m);for(C=0;C<Math.max(O.length,N.length);C++){if(O[C]===void 0||typeof N[C]=="string"&&typeof O[C]=="number")return-1;if(N[C]===void 0||typeof O[C]=="string"&&typeof N[C]=="number"||O[C]>N[C])return 1;if(N[C]>O[C])return-1}}else if(I||M)return I?-1:1;return 0}var w=[">",">=","=","<","<="],E={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return S.validate=function(_){return typeof _=="string"&&f.test(_)},S.compare=function(_,P,R){(function(C){if(typeof C!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof C);if(w.indexOf(C)===-1)throw new TypeError("Invalid operator, expected one of "+w.join("|"))})(R);var A=S(_,P);return E[R].indexOf(A)>-1},S})=="function"?a.apply(l,[]):a)!==void 0&&(o.exports=l)},function(o,m,s){s.d(m,"a",function(){return _});var a=s(1),f=s(2),T=s(0),m=s(3),v=this&&this.__awaiter||function(P,R,A,C){return new(A=A||u)(function(L,V){function I(N){try{O(C.next(N))}catch(j){V(j)}}function M(N){try{O(C.throw(N))}catch(j){V(j)}}function O(N){var j;N.done?L(N.value):((j=N.value)instanceof A?j:new A(function(Y){Y(j)})).then(I,M)}O((C=C.apply(P,R||[])).next())})},S=this&&this.__generator||function(P,R){var A,C,L,V={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},I={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(O){return function(N){var j=[O,N];if(A)throw new TypeError("Generator is already executing.");for(;V;)try{if(A=1,C&&(L=2&j[0]?C.return:j[0]?C.throw||((L=C.return)&&L.call(C),0):C.next)&&!(L=L.call(C,j[1])).done)return L;switch(C=0,(j=L?[2&j[0],L.value]:j)[0]){case 0:case 1:L=j;break;case 4:return V.label++,{value:j[1],done:!1};case 5:V.label++,C=j[1],j=[0];continue;case 7:j=V.ops.pop(),V.trys.pop();continue;default:if(!(L=0<(L=V.trys).length&&L[L.length-1])&&(j[0]===6||j[0]===2)){V=0;continue}if(j[0]===3&&(!L||j[1]>L[0]&&j[1]<L[3]))V.label=j[1];else if(j[0]===6&&V.label<L[1])V.label=L[1],L=j;else{if(!(L&&V.label<L[2])){L[2]&&V.ops.pop(),V.trys.pop();continue}V.label=L[2],V.ops.push(j)}}j=R.call(P,V)}catch(Y){j=[6,Y],C=0}finally{A=L=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},w=Object(m.a)("div"),E=!1,_=(Object.defineProperty(w,"id",{get:function(){return E=!0,_.name},configurable:!0}),{name:"element-id",isOpen:function(){return v(this,void 0,void 0,function(){return S(this,function(P){return E=!1,Object(f.b)(w),Object(f.a)(),[2,E]})})},isEnable:function(){return v(this,void 0,void 0,function(){return S(this,function(P){return[2,Object(T.b)({includes:[!0],excludes:[a.d,a.b,a.c]})]})})}})},function(o,l,s){s.d(l,"a",function(){return _});var a=s(1),f=s(2),T=s(5),m=s(0),v=this&&this.__awaiter||function(P,R,A,C){return new(A=A||u)(function(L,V){function I(N){try{O(C.next(N))}catch(j){V(j)}}function M(N){try{O(C.throw(N))}catch(j){V(j)}}function O(N){var j;N.done?L(N.value):((j=N.value)instanceof A?j:new A(function(Y){Y(j)})).then(I,M)}O((C=C.apply(P,R||[])).next())})},S=this&&this.__generator||function(P,R){var A,C,L,V={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},I={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(O){return function(N){var j=[O,N];if(A)throw new TypeError("Generator is already executing.");for(;V;)try{if(A=1,C&&(L=2&j[0]?C.return:j[0]?C.throw||((L=C.return)&&L.call(C),0):C.next)&&!(L=L.call(C,j[1])).done)return L;switch(C=0,(j=L?[2&j[0],L.value]:j)[0]){case 0:case 1:L=j;break;case 4:return V.label++,{value:j[1],done:!1};case 5:V.label++,C=j[1],j=[0];continue;case 7:j=V.ops.pop(),V.trys.pop();continue;default:if(!(L=0<(L=V.trys).length&&L[L.length-1])&&(j[0]===6||j[0]===2)){V=0;continue}if(j[0]===3&&(!L||j[1]>L[0]&&j[1]<L[3]))V.label=j[1];else if(j[0]===6&&V.label<L[1])V.label=L[1],L=j;else{if(!(L&&V.label<L[2])){L[2]&&V.ops.pop(),V.trys.pop();continue}V.label=L[2],V.ops.push(j)}}j=R.call(P,V)}catch(Y){j=[6,Y],C=0}finally{A=L=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}};function w(){}var E=0,_=(w.toString=function(){return E++,""},{name:"function-to-string",isOpen:function(){return v(this,void 0,void 0,function(){return S(this,function(P){return E=0,Object(f.b)(w),Object(f.a)(),[2,E===2]})})},isEnable:function(){return v(this,void 0,void 0,function(){return S(this,function(P){return[2,Object(m.b)({includes:[!0],excludes:[a.c,(T.b||T.c)&&a.a]})]})})}})},function(o,l,s){s.d(l,"a",function(){return E});var a=s(2),f=s(1),T=s(0),m=this&&this.__awaiter||function(_,P,R,A){return new(R=R||u)(function(C,L){function V(O){try{M(A.next(O))}catch(N){L(N)}}function I(O){try{M(A.throw(O))}catch(N){L(N)}}function M(O){var N;O.done?C(O.value):((N=O.value)instanceof R?N:new R(function(j){j(N)})).then(V,I)}M((A=A.apply(_,P||[])).next())})},v=this&&this.__generator||function(_,P){var R,A,C,L={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},V={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function I(M){return function(O){var N=[M,O];if(R)throw new TypeError("Generator is already executing.");for(;L;)try{if(R=1,A&&(C=2&N[0]?A.return:N[0]?A.throw||((C=A.return)&&C.call(A),0):A.next)&&!(C=C.call(A,N[1])).done)return C;switch(A=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return L.label++,{value:N[1],done:!1};case 5:L.label++,A=N[1],N=[0];continue;case 7:N=L.ops.pop(),L.trys.pop();continue;default:if(!(C=0<(C=L.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){L=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))L.label=N[1];else if(N[0]===6&&L.label<C[1])L.label=C[1],C=N;else{if(!(C&&L.label<C[2])){C[2]&&L.ops.pop(),L.trys.pop();continue}L.label=C[2],L.ops.push(N)}}N=P.call(_,L)}catch(j){N=[6,j],A=0}finally{R=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},S=/ /,w=!1,E=(S.toString=function(){return w=!0,E.name},{name:"reg-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return w=!1,Object(a.b)(S),Object(a.a)(),[2,w]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return[2,Object(T.b)({includes:[!0],excludes:[f.f]})]})})}})},function(o,l,s){s.d(l,"a",function(){return m});var a=this&&this.__awaiter||function(v,S,w,E){return new(w=w||u)(function(_,P){function R(L){try{C(E.next(L))}catch(V){P(V)}}function A(L){try{C(E.throw(L))}catch(V){P(V)}}function C(L){var V;L.done?_(L.value):((V=L.value)instanceof w?V:new w(function(I){I(V)})).then(R,A)}C((E=E.apply(v,S||[])).next())})},f=this&&this.__generator||function(v,S){var w,E,_,P={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]},R={next:A(0),throw:A(1),return:A(2)};return typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function A(C){return function(L){var V=[C,L];if(w)throw new TypeError("Generator is already executing.");for(;P;)try{if(w=1,E&&(_=2&V[0]?E.return:V[0]?E.throw||((_=E.return)&&_.call(E),0):E.next)&&!(_=_.call(E,V[1])).done)return _;switch(E=0,(V=_?[2&V[0],_.value]:V)[0]){case 0:case 1:_=V;break;case 4:return P.label++,{value:V[1],done:!1};case 5:P.label++,E=V[1],V=[0];continue;case 7:V=P.ops.pop(),P.trys.pop();continue;default:if(!(_=0<(_=P.trys).length&&_[_.length-1])&&(V[0]===6||V[0]===2)){P=0;continue}if(V[0]===3&&(!_||V[1]>_[0]&&V[1]<_[3]))P.label=V[1];else if(V[0]===6&&P.label<_[1])P.label=_[1],_=V;else{if(!(_&&P.label<_[2])){_[2]&&P.ops.pop(),P.trys.pop();continue}P.label=_[2],P.ops.push(V)}}V=S.call(v,P)}catch(I){V=[6,I],E=0}finally{w=_=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}}};function T(){return(performance||Date).now()}var m={name:"debugger-checker",isOpen:function(){return a(this,void 0,void 0,function(){var v;return f(this,function(S){return v=T(),(function(){}).constructor("debugger")(),[2,100<T()-v]})})},isEnable:function(){return a(this,void 0,void 0,function(){return f(this,function(v){return[2,!0]})})}}},function(o,l,s){s.d(l,"a",function(){return E});var a=s(1),f=s(2),T=s(0),m=this&&this.__awaiter||function(_,P,R,A){return new(R=R||u)(function(C,L){function V(O){try{M(A.next(O))}catch(N){L(N)}}function I(O){try{M(A.throw(O))}catch(N){L(N)}}function M(O){var N;O.done?C(O.value):((N=O.value)instanceof R?N:new R(function(j){j(N)})).then(V,I)}M((A=A.apply(_,P||[])).next())})},v=this&&this.__generator||function(_,P){var R,A,C,L={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},V={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function I(M){return function(O){var N=[M,O];if(R)throw new TypeError("Generator is already executing.");for(;L;)try{if(R=1,A&&(C=2&N[0]?A.return:N[0]?A.throw||((C=A.return)&&C.call(A),0):A.next)&&!(C=C.call(A,N[1])).done)return C;switch(A=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return L.label++,{value:N[1],done:!1};case 5:L.label++,A=N[1],N=[0];continue;case 7:N=L.ops.pop(),L.trys.pop();continue;default:if(!(C=0<(C=L.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){L=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))L.label=N[1];else if(N[0]===6&&L.label<C[1])L.label=C[1],C=N;else{if(!(C&&L.label<C[2])){C[2]&&L.ops.pop(),L.trys.pop();continue}L.label=C[2],L.ops.push(N)}}N=P.call(_,L)}catch(j){N=[6,j],A=0}finally{R=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},S=new Date,w=0,E=(S.toString=function(){return w++,""},{name:"date-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return w=0,Object(f.b)(S),Object(f.a)(),[2,w===2]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(_){return[2,Object(T.b)({includes:[a.a],excludes:[]})]})})}})},function(o,a,s){s.d(a,"a",function(){return f});var a=s(3),f=/mobile/i.test(a.b)}],y={},d.m=h,d.c=y,d.d=function(o,l,s){d.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:s})},d.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return d.d(l,"a",l),l},d.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},d.p="",d(d.s=6);function d(o){var l;return(y[o]||(l=y[o]={i:o,l:!1,exports:{}},h[o].call(l.exports,l,l.exports,d),l.l=!0,l)).exports}var h,y},typeof x=="object"&&typeof t=="object"?t.exports=g():typeof x=="object"?x.devtoolsDetector=g():e.devtoolsDetector=g()},{"es6-promise":8}],34:[function(e,t,x){var g=e("./object");t.exports.el=function(u){return document.getElementById(u)},t.exports.createEl=function(u,d){var h;return u=u||"div",d=d||{},h=document.createElement(u),g.each(d,function(y,o){y.indexOf("aria-")!==-1||y=="role"?h.setAttribute(y,o):h[y]=o}),h},t.exports.addClass=function(u,d){(" "+u.className+" ").indexOf(" "+d+" ")==-1&&(u.className=u.className===""?d:u.className+" "+d)},t.exports.removeClass=function(u,d){var h,y;if(u.className.indexOf(d)!=-1){for(y=(h=u.className.split(" ")).length-1;0<=y;y--)h[y]===d&&h.splice(y,1);u.className=h.join(" ")}},t.exports.hasClass=function(u,d){return u.className.indexOf(d)!=-1},t.exports.getClasses=function(u){return u.className?u.className.split(" "):[]},t.exports.getElementAttributes=function(u){var d,h,y={};if(u&&u.attributes&&0<u.attributes.length)for(var o,l=(o=u.attributes).length-1;0<=l;l--)d=o[l].name,h=o[l].value,typeof u[d]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+d+",")===-1||(h=h!==null),y[d]=h;return y},t.exports.insertFirst=function(u,d){d.firstChild?d.insertBefore(u,d.firstChild):d.appendChild(u)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(u,d,h){return!(!u||!u.style)&&(d&&h?(u.style[d]=h,!0):h||typeof d!="string"?!h&&typeof d=="object"&&(g.each(d,function(y,o){u.style[y]=o}),!0):u.style[d])},t.exports.getTransformName=function(u){for(var d=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],h=d[0],y=0,o=d.length;y<o;y++)if(u.style[d[y]]!==void 0){h=d[y];break}return h},t.exports.getTransformEventName=function(u,d){for(var h=["","Webkit","Moz","ms","O"],y=d.toLowerCase(),o=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],l=0,s=o.length;l<s;l++)if(u.style[o[l]]!==void 0){l!=0&&(y=h[l]+d);break}return y},t.exports.addCssByStyle=function(y){var d=document,h=d.createElement("style"),y=(h.setAttribute("type","text/css"),h.styleSheet?h.styleSheet.cssText=y:(y=d.createTextNode(y),h.appendChild(y)),d.getElementsByTagName("head"));(y.length?y[0]:d.documentElement).appendChild(h)},t.exports.getTranslateX=function(u){var d=0;if(u)try{var h=window.getComputedStyle(u),y=t.exports.getTransformName(u),d=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(h[y]).m41}catch(o){console.log(o)}return d},t.exports.getPointerPosition=function(o,d){var h={},s=t.exports.findPosition(o),y=o.offsetWidth,o=o.offsetHeight,l=s.top,s=s.left,a=d.pageY,f=d.pageX;return d.changedTouches&&(f=d.changedTouches[0].pageX,a=d.changedTouches[0].pageY),h.y=Math.max(0,Math.min(1,(l-a+o)/o)),h.x=Math.max(0,Math.min(1,(f-s)/y)),h},t.exports.findPosition=function(u){var d,h,y,o;return(d=u.getBoundingClientRect&&u.parentNode?u.getBoundingClientRect():d)?(u=document.documentElement,o=document.body,y=u.clientLeft||o.clientLeft||0,h=window.pageXOffset||o.scrollLeft,h=d.left+h-y,y=u.clientTop||o.clientTop||0,u=window.pageYOffset||o.scrollTop,o=d.top+u-y,{left:Math.round(h),top:Math.round(o)}):{left:0,top:0}}},{"./object":44}],35:[function(e,t,x){var g=e("./object"),u=e("./data"),d=e("./ua"),h=e("./fastclick");function y(o,l,s,a){g.each(s,function(f){o(l,f,a)})}t.exports.on=function(o,l,s){if(o){if(g.isArray(l))return y(t.exports.on,o,l,s);d.IS_MOBILE&&l=="click"&&h.attach(o);var a=u.getData(o);a.handlers||(a.handlers={}),a.handlers[l]||(a.handlers[l]=[]),s.guid||(s.guid=u.guid()),a.handlers[l].push(s),a.dispatcher||(a.disabled=!1,a.dispatcher=function(f){if(!a.disabled){f=t.exports.fixEvent(f);var T=a.handlers[f.type];if(T)for(var m=T.slice(0),v=0,S=m.length;v<S&&!f.isImmediatePropagationStopped();v++)m[v].call(o,f)}}),a.handlers[l].length==1&&(o.addEventListener?o.addEventListener(l,a.dispatcher,!1):o.attachEvent&&o.attachEvent("on"+l,a.dispatcher))}},t.exports.off=function(o,l,s){if(o&&u.hasData(o)){var a=u.getData(o);if(a.handlers){let S=function(w){a.handlers[w]=[],t.exports.cleanUpEvents(o,w)};var v=S;if(g.isArray(l))return y(t.exports.off,o,l,s);if(l){var f=a.handlers[l];if(f)if(s){if(s.guid)for(var T=0;T<f.length;T++)f[T].guid===s.guid&&f.splice(T--,1);t.exports.cleanUpEvents(o,l)}else S(l)}else for(var m in a.handlers)S(m)}}},t.exports.cleanUpEvents=function(o,l){var s=u.getData(o);s.handlers[l].length===0&&(delete s.handlers[l],o.removeEventListener?o.removeEventListener(l,s.dispatcher,!1):o.detachEvent&&o.detachEvent("on"+l,s.dispatcher)),g.isEmpty(s.handlers)&&(delete s.handlers,delete s.dispatcher,delete s.disabled),g.isEmpty(s)&&u.removeData(o)},t.exports.fixEvent=function(o){function l(){return!0}function s(){return!1}if(!o||!o.isPropagationStopped){var a,f,T,m=o||window.event;for(a in o={},m)a==="layerX"||a==="layerY"||a==="keyboardEvent.keyLocation"||a=="returnValue"&&m.preventDefault||(o[a]=m[a]);o.target||(o.target=o.srcElement||document),o.relatedTarget=o.fromElement===o.target?o.toElement:o.fromElement,o.preventDefault=function(){m.preventDefault&&m.preventDefault(),o.returnValue=!1,o.isDefaultPrevented=l,o.defaultPrevented=!0},o.isDefaultPrevented=s,o.defaultPrevented=!1,o.stopPropagation=function(){m.stopPropagation&&m.stopPropagation(),o.cancelBubble=!0,o.isPropagationStopped=l},o.isPropagationStopped=s,o.stopImmediatePropagation=function(){m.stopImmediatePropagation&&m.stopImmediatePropagation(),o.isImmediatePropagationStopped=l,o.stopPropagation()},o.isImmediatePropagationStopped=s,o.clientX!=null&&(f=document.documentElement,T=document.body,o.pageX=o.clientX+(f&&f.scrollLeft||T&&T.scrollLeft||0)-(f&&f.clientLeft||T&&T.clientLeft||0),o.pageY=o.clientY+(f&&f.scrollTop||T&&T.scrollTop||0)-(f&&f.clientTop||T&&T.clientTop||0)),o.which=o.charCode||o.keyCode,o.button!=null&&(o.button=1&o.button?0:4&o.button?1:2&o.button?2:0)}return o},t.exports.trigger=function(o,l){var s,a,f;if(o)return s=u.hasData(o)?u.getData(o):{},a=o.parentNode||o.ownerDocument,typeof l=="string"&&(f=null,!o.paramData&&o.paramData!=0||(f=o.paramData,o.paramData=null,o.removeAttribute(f)),l={type:l,target:o,paramData:f}),l=t.exports.fixEvent(l),s.dispatcher&&s.dispatcher.call(o,l),a&&!l.isPropagationStopped()&&l.bubbles!==!1?t.exports.trigger(a,l):a||l.defaultPrevented||(f=u.getData(l.target),l.target[l.type]&&(f.disabled=!0,typeof l.target[l.type]=="function"&&l.target[l.type](),f.disabled=!1)),!l.defaultPrevented},t.exports.one=function(o,l,s){if(o){let f=function(){t.exports.off(o,l,f),s.apply(this,arguments)};var a=f;if(g.isArray(l))return y(t.exports.one,o,l,s);f.guid=s.guid=s.guid||u.guid(),t.exports.on(o,l,f)}}},{"./data":32,"./fastclick":36,"./object":44,"./ua":50}],36:[function(e,t,x){function g(s,a){var f;if(a=a||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=a.touchBoundary||10,this.layer=s,this.tapDelay=a.tapDelay||200,this.tapTimeout=a.tapTimeout||700,!g.notNeeded(s)){for(var T=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],m=0,v=T.length;m<v;m++)this[T[m]]=function(S,w){return function(){return S.apply(w,arguments)}}(this[T[m]],this);d&&(s.addEventListener("mouseover",this.onMouse,!0),s.addEventListener("mousedown",this.onMouse,!0),s.addEventListener("mouseup",this.onMouse,!0)),s.addEventListener("click",this.onClick,!0),s.addEventListener("touchstart",this.onTouchStart,!1),s.addEventListener("touchmove",this.onTouchMove,!1),s.addEventListener("touchend",this.onTouchEnd,!1),s.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(s.removeEventListener=function(S,w,E){var _=Node.prototype.removeEventListener;S==="click"?_.call(s,S,w.hijacked||w,E):_.call(s,S,w,E)},s.addEventListener=function(S,w,E){var _=Node.prototype.addEventListener;S==="click"?_.call(s,S,w.hijacked||(w.hijacked=function(P){P.propagationStopped||w(P)}),E):_.call(s,S,w,E)}),typeof s.onclick=="function"&&(f=s.onclick,s.addEventListener("click",function(S){f(S)},!1),s.onclick=null)}}var u=0<=navigator.userAgent.indexOf("Windows Phone"),d=0<navigator.userAgent.indexOf("Android")&&!u,h=/iP(ad|hone|od)/.test(navigator.userAgent)&&!u,y=h&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=h&&/OS [6-7]_\d/.test(navigator.userAgent),l=0<navigator.userAgent.indexOf("BB10");g.prototype.needsClick=function(s){switch(s.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(s.disabled)return!0;break;case"input":if(h&&s.type==="file"||s.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(s.className)},g.prototype.needsFocus=function(s){switch(s.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!d;case"input":switch(s.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!s.disabled&&!s.readOnly;default:return/\bneedsfocus\b/.test(s.className)}},g.prototype.sendClick=function(s,a){var f;document.activeElement&&document.activeElement!==s&&document.activeElement.blur(),a=a.changedTouches[0],(f=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(s),!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),f.forwardedTouchEvent=!0,s.dispatchEvent(f)},g.prototype.determineEventType=function(s){return d&&s.tagName.toLowerCase()==="select"?"mousedown":"click"},g.prototype.focus=function(s){var a;h&&s.setSelectionRange&&s.type.indexOf("date")!==0&&s.type!=="time"&&s.type!=="month"&&s.type!=="email"?(a=s.value.length,s.setSelectionRange(a,a)):s.focus()},g.prototype.updateScrollParent=function(s){var a,f=s.fastClickScrollParent;if(!f||!f.contains(s)){a=s;do if(a.scrollHeight>a.offsetHeight){f=a,s.fastClickScrollParent=a;break}while(a=a.parentElement)}f&&(f.fastClickLastScrollTop=f.scrollTop)},g.prototype.getTargetElementFromEventTarget=function(s){return s.nodeType===Node.TEXT_NODE?s.parentNode:s},g.prototype.onTouchStart=function(s){var a,f,T;if(!(1<s.targetTouches.length)){if(a=this.getTargetElementFromEventTarget(s.target),f=s.targetTouches[0],h){if((T=window.getSelection()).rangeCount&&!T.isCollapsed)return!0;if(!y){if(f.identifier&&f.identifier===this.lastTouchIdentifier)return s.preventDefault(),!1;this.lastTouchIdentifier=f.identifier,this.updateScrollParent(a)}}this.trackingClick=!0,this.trackingClickStart=s.timeStamp,this.targetElement=a,this.touchStartX=f.pageX,this.touchStartY=f.pageY,s.timeStamp-this.lastClickTime<this.tapDelay&&s.preventDefault()}return!0},g.prototype.touchHasMoved=function(a){var a=a.changedTouches[0],f=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>f||Math.abs(a.pageY-this.touchStartY)>f},g.prototype.onTouchMove=function(s){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(s.target)||this.touchHasMoved(s))&&(this.trackingClick=!1,this.targetElement=null),!0},g.prototype.findControl=function(s){return s.control!==void 0?s.control:s.htmlFor?document.getElementById(s.htmlFor):s.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},g.prototype.onTouchEnd=function(s){var a,f,T,m=this.targetElement;if(!this.trackingClick)return!0;if(s.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(s.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=s.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(T=s.changedTouches[0],(m=document.elementFromPoint(T.pageX-window.pageXOffset,T.pageY-window.pageYOffset)||m).fastClickScrollParent=this.targetElement.fastClickScrollParent),(T=m.tagName.toLowerCase())==="label"){if(f=this.findControl(m)){if(this.focus(m),d)return!1;m=f}}else if(this.needsFocus(m))return 100<s.timeStamp-a||h&&window.top!==window&&T==="input"?this.targetElement=null:(this.focus(m),this.sendClick(m,s),h&&T==="select"||(this.targetElement=null,s.preventDefault())),!1;return!(!h||y||!(f=m.fastClickScrollParent)||f.fastClickLastScrollTop===f.scrollTop)||(this.needsClick(m)||(s.preventDefault(),this.sendClick(m,s)),!1)},g.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},g.prototype.onMouse=function(s){return!this.targetElement||!(!s.forwardedTouchEvent&&s.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(s.stopImmediatePropagation?s.stopImmediatePropagation():s.propagationStopped=!0,s.stopPropagation(),s.preventDefault(),1))},g.prototype.onClick=function(s){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):s.target.type==="submit"&&s.detail===0||((s=this.onMouse(s))||(this.targetElement=null),s)},g.prototype.destroy=function(){var s=this.layer;d&&(s.removeEventListener("mouseover",this.onMouse,!0),s.removeEventListener("mousedown",this.onMouse,!0),s.removeEventListener("mouseup",this.onMouse,!0)),s.removeEventListener("click",this.onClick,!0),s.removeEventListener("touchstart",this.onTouchStart,!1),s.removeEventListener("touchmove",this.onTouchMove,!1),s.removeEventListener("touchend",this.onTouchEnd,!1),s.removeEventListener("touchcancel",this.onTouchCancel,!1)},g.notNeeded=function(s){var a,f;return window.ontouchstart===void 0||(f=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!d||(a=document.querySelector("meta[name=viewport]"))&&(a.content.indexOf("user-scalable=no")!==-1||31<f&&document.documentElement.scrollWidth<=window.outerWidth))||l&&10<=(f=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=f[2]&&(a=document.querySelector("meta[name=viewport]"))&&(a.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:s.style.msTouchAction==="none"||s.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(a=document.querySelector("meta[name=viewport]"))&&(a.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||s.style.touchAction==="none"||s.style.touchAction==="manipulation"},g.attach=function(s,a){return new g(s,a)},t.exports=g},{}],37:[function(e,t,x){var g=e("./data");t.exports.bind=function(u,d,h){d.guid||(d.guid=g.guid());function y(){return d.apply(u,arguments)}return y.guid=h?h+"_"+d.guid:d.guid,y}},{"./data":32}],38:[function(e,t,x){function g(){g=function(){return o};var o={},l=Object.prototype,s=l.hasOwnProperty,a=Object.defineProperty||function(B,W,D){B[W]=D.value},A=typeof Symbol=="function"?Symbol:{},f=A.iterator||"@@iterator",T=A.asyncIterator||"@@asyncIterator",m=A.toStringTag||"@@toStringTag";function v(B,W,D){return Object.defineProperty(B,W,{value:D,enumerable:!0,configurable:!0,writable:!0}),B[W]}try{v({},"")}catch{v=function(W,D,X){return W[D]=X}}function S(B,ie,D,he){var Q,H,F,z,ie=ie&&ie.prototype instanceof _?ie:_,ie=Object.create(ie.prototype),he=new N(he||[]);return a(ie,"_invoke",{value:(Q=B,H=D,F=he,z="suspendedStart",function(le,Se){if(z==="executing")throw new Error("Generator is already running");if(z==="completed"){if(le==="throw")throw Se;return Y()}for(F.method=le,F.arg=Se;;){var _e=F.delegate;if(_e&&(_e=function me(xe,Z){var te=xe.iterator[Z.method];if(te===void 0){if(Z.delegate=null,Z.method==="throw"){if(xe.iterator.return&&(Z.method="return",Z.arg=void 0,me(xe,Z),Z.method==="throw"))return E;Z.method="throw",Z.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}return te=w(te,xe.iterator,Z.arg),te.type==="throw"?(Z.method="throw",Z.arg=te.arg,Z.delegate=null,E):(te=te.arg,te?te.done?(Z[xe.resultName]=te.value,Z.next=xe.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=void 0),Z.delegate=null,E):te:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,E))}(_e,F),_e)){if(_e===E)continue;return _e}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(z==="suspendedStart")throw z="completed",F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);if(z="executing",_e=w(Q,H,F),_e.type==="normal"){if(z=F.done?"completed":"suspendedYield",_e.arg===E)continue;return{value:_e.arg,done:F.done}}_e.type==="throw"&&(z="completed",F.method="throw",F.arg=_e.arg)}})}),ie}function w(B,W,D){try{return{type:"normal",arg:B.call(W,D)}}catch(X){return{type:"throw",arg:X}}}o.wrap=S;var E={};function _(){}function P(){}function R(){}var A={},C=(v(A,f,function(){return this}),Object.getPrototypeOf),C=C&&C(C(j([]))),L=(C&&C!==l&&s.call(C,f)&&(A=C),R.prototype=_.prototype=Object.create(A));function V(B){["next","throw","return"].forEach(function(W){v(B,W,function(D){return this._invoke(W,D)})})}function I(B,W){var D;a(this,"_invoke",{value:function(X,Q){function H(){return new W(function(F,z){(function ie(xe,le,Se,_e){var me,xe=w(B[xe],B,le);if(xe.type!=="throw")return(le=(me=xe.arg).value)&&typeof le=="object"&&s.call(le,"__await")?W.resolve(le.__await).then(function(Z){ie("next",Z,Se,_e)},function(Z){ie("throw",Z,Se,_e)}):W.resolve(le).then(function(Z){me.value=Z,Se(me)},function(Z){return ie("throw",Z,Se,_e)});_e(xe.arg)})(X,Q,F,z)})}return D=D?D.then(H,H):H()}})}function M(B){var W={tryLoc:B[0]};1 in B&&(W.catchLoc=B[1]),2 in B&&(W.finallyLoc=B[2],W.afterLoc=B[3]),this.tryEntries.push(W)}function O(B){var W=B.completion||{};W.type="normal",delete W.arg,B.completion=W}function N(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(M,this),this.reset(!0)}function j(B){if(B){var W,D=B[f];if(D)return D.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length))return W=-1,(D=function X(){for(;++W<B.length;)if(s.call(B,W))return X.value=B[W],X.done=!1,X;return X.value=void 0,X.done=!0,X}).next=D}return{next:Y}}function Y(){return{value:void 0,done:!0}}return a(L,"constructor",{value:P.prototype=R,configurable:!0}),a(R,"constructor",{value:P,configurable:!0}),P.displayName=v(R,m,"GeneratorFunction"),o.isGeneratorFunction=function(B){return B=typeof B=="function"&&B.constructor,!!B&&(B===P||(B.displayName||B.name)==="GeneratorFunction")},o.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,R):(B.__proto__=R,v(B,m,"GeneratorFunction")),B.prototype=Object.create(L),B},o.awrap=function(B){return{__await:B}},V(I.prototype),v(I.prototype,T,function(){return this}),o.AsyncIterator=I,o.async=function(B,W,D,X,Q){Q===void 0&&(Q=Promise);var H=new I(S(B,W,D,X),Q);return o.isGeneratorFunction(W)?H:H.next().then(function(F){return F.done?F.value:H.next()})},V(L),v(L,m,"Generator"),v(L,f,function(){return this}),v(L,"toString",function(){return"[object Generator]"}),o.keys=function(B){var W,D=Object(B),X=[];for(W in D)X.push(W);return X.reverse(),function Q(){for(;X.length;){var H=X.pop();if(H in D)return Q.value=H,Q.done=!1,Q}return Q.done=!0,Q}},o.values=j,N.prototype={constructor:N,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!B)for(var W in this)W.charAt(0)==="t"&&s.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=void 0)},stop:function(){this.done=!0;var B=this.tryEntries[0].completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var W=this;function D(ie,he){return H.type="throw",H.arg=B,W.next=ie,he&&(W.method="next",W.arg=void 0),!!he}for(var X=this.tryEntries.length-1;0<=X;--X){var Q=this.tryEntries[X],H=Q.completion;if(Q.tryLoc==="root")return D("end");if(Q.tryLoc<=this.prev){var F=s.call(Q,"catchLoc"),z=s.call(Q,"finallyLoc");if(F&&z){if(this.prev<Q.catchLoc)return D(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return D(Q.finallyLoc)}else if(F){if(this.prev<Q.catchLoc)return D(Q.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return D(Q.finallyLoc)}}}},abrupt:function(B,W){for(var D=this.tryEntries.length-1;0<=D;--D){var X=this.tryEntries[D];if(X.tryLoc<=this.prev&&s.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var Q=X;break}}var H=(Q=Q&&(B==="break"||B==="continue")&&Q.tryLoc<=W&&W<=Q.finallyLoc?null:Q)?Q.completion:{};return H.type=B,H.arg=W,Q?(this.method="next",this.next=Q.finallyLoc,E):this.complete(H)},complete:function(B,W){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&W&&(this.next=W),E},finish:function(B){for(var W=this.tryEntries.length-1;0<=W;--W){var D=this.tryEntries[W];if(D.finallyLoc===B)return this.complete(D.completion,D.afterLoc),O(D),E}},catch:function(B){for(var W=this.tryEntries.length-1;0<=W;--W){var D,X,Q=this.tryEntries[W];if(Q.tryLoc===B)return(D=Q.completion).type==="throw"&&(X=D.arg,O(Q)),X}throw new Error("illegal catch attempt")},delegateYield:function(B,W,D){return this.delegate={iterator:j(B),resultName:W,nextLoc:D},this.method==="next"&&(this.arg=void 0),E}},o}function u(o,l,s,a,f,T,m){try{var v=o[T](m),S=v.value}catch(w){return void s(w)}v.done?l(S):Promise.resolve(S).then(a,f)}function d(o){return function(){var l=this,s=arguments;return new Promise(function(a,f){var T=o.apply(l,s);function m(S){u(T,a,f,m,v,"next",S)}function v(S){u(T,a,f,m,v,"throw",S)}m(void 0)})}}var h,y=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=self,h=function(){function o(P,R){var A=(R=R===void 0?"mp4":R)==="hls",C="";switch(P=P===void 0?"":P){case"hvc1":C=A?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":C=A?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:C=""}return C}function l(P,R,A,C){R===void 0&&(R=!1),A===void 0&&(A="");var L=performance.now(),V=C;return new y(function(I){M=P,(O=R?100:0)===void 0&&(O=100),(N=document.createElement("video")).setAttribute("width",""+O),N.setAttribute("height",""+O),N.setAttribute("muted","muted"),N.setAttribute("crossorigin","anonymous"),N.setAttribute("preload","preload"),N.setAttribute("autoplay","autoplay"),N.setAttribute("webkit-playsinline","webkit-playsinline"),N.setAttribute("playsinline","playsinline"),N.setAttribute("x-webkit-airplay","x-webkit-airplay"),N.setAttribute("playsinline","playsinline"),N.src=M;var M,O,N,j=N,Y=setInterval(function(){var B,W,D,X,Q;(performance.now()-L>V||j.videoWidth!==0)&&(clearInterval(Y),B=j.videoWidth!==0,R?(j.setAttribute("controls","controls"),W=j,(D=A)===void 0&&(D=""),X=document.createElement("dv"),(Q=document.createElement("h3")).innerText=D,X.appendChild(W),X.appendChild(Q),document.body.appendChild(X)):(j.pause(),j=null),I(B))})})}var s={d:function(P,R){for(var A in R)s.o(R,A)&&!s.o(P,A)&&Object.defineProperty(P,A,{enumerable:!0,get:R[A]})},o:function(P,R){return Object.prototype.hasOwnProperty.call(P,R)}},a={},f=(s.d(a,{default:function(){return _}}),navigator.userAgent),m=/qqbrowser/i.test(f.toLowerCase()),v=/Edge/i.test(f),v=/Chrome/i.test(f)&&!v&&!m,T=/Safari/i.test(f)&&!v,m=f.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),v=m&&m[1],S=v&&Number(v.split(".")[0]),w=function(){var P=d(g().mark(function R(A){var C;return g().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,fetch(A);case 2:return C=L.sent,L.next=5,C.blob();case 5:return C=L.sent,L.abrupt("return",URL.createObjectURL(C));case 7:case"end":return L.stop()}},R)}));return function(R){return P.apply(this,arguments)}}(),E={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},_=function(P){return P===void 0&&(P={}),new y(function(){var R=d(g().mark(function A(C){var L,V,I,M,O,N,j,Y,B,W,D,X,Q;return g().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(M=Object.assign({},E,P),L=M.includeSystemHijack,V=M.showVideo,j=M.codecTags,I=M.format,M=M.timeout,O=performance.now(),N=-1<j.indexOf("hvc1"),j=-1<j.indexOf("hev1"),B=Y=!1,!(T&&S&&11<=S)){H.next=14;break}if(W=o("hvc1",I),H.t0=L,H.t0){H.next=9;break}return H.next=8,w(W);case 8:W=H.sent;case 9:return H.next=11,l(W,V,"hvc1",M);case 11:Y=H.sent,H.next=34;break;case 14:if(!N){H.next=24;break}if(D=o("hvc1",I),H.t1=L,H.t1){H.next=21;break}return H.next=20,w(D);case 20:D=H.sent;case 21:return H.next=23,l(D,V,"hvc1",M);case 23:Y=H.sent;case 24:if(!j){H.next=34;break}if(X=o("hev1",I),H.t2=L,H.t2){H.next=31;break}return H.next=30,w(X);case 30:X=H.sent;case 31:return H.next=33,l(X,V,"hev1",M);case 33:B=H.sent;case 34:Q=performance.now(),C({isHvc1Supported:Y,isHev1Supported:B,time:Math.ceil(Q-O)});case 36:case"end":return H.stop()}},A)}));return function(A){return R.apply(this,arguments)}}())};return a.default},typeof x=="object"&&typeof t=="object"?t.exports=h():typeof x=="object"?x.hevcDetector=h():e.hevcDetector=h()},{"es6-promise":8}],39:[function(e,t,x){function g(h){for(var y in h=typeof h=="string"?this.parseAttrList(h):h)h.hasOwnProperty(y)&&(this[y]=h[y])}var u=/^(\d+)x(\d+)$/,d=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;g.prototype={decimalInteger:function(h){return h=parseInt(this[h],10),h>Number.MAX_SAFE_INTEGER?1/0:h},hexadecimalInteger:function(h){if(this[h]){for(var y=(1&(y=(this[h]||"0x").slice(2)).length?"0":"")+y,o=new Uint8Array(y.length/2),l=0;l<y.length/2;l++)o[l]=parseInt(y.slice(2*l,2*l+2),16);return o}return null},hexadecimalIntegerAsNumber:function(h){return h=parseInt(this[h],16),h>Number.MAX_SAFE_INTEGER?1/0:h},decimalFloatingPoint:function(h){return parseFloat(this[h])},enumeratedString:function(h){return this[h]},decimalResolution:function(h){if(h=u.exec(this[h]),h!==null)return{width:parseInt(h[1],10),height:parseInt(h[2],10)}},parseAttrList:function(h){var y,o={};for(d.lastIndex=0;(y=d.exec(h))!==null;){var l=y[2];l.indexOf('"')===0&&l.lastIndexOf('"')===l.length-1&&(l=l.slice(1,-1)),o[y[1]]=l}return o}},t.exports=g},{}],40:[function(e,t,x){function g(){this.method=null,this.key=null,this.iv=null,this._uri=null}function u(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function d(){this.loaders={}}var h=e("../constants"),y=e("../playerutil"),o=e("./attrlist"),l=e("../io"),s=e("./urltoolkit"),a=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,f=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),m=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,v="RegionBlock";u.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=s.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},u.prototype.Seturl=function(S){this._url=S},u.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},u.prototype.GetbyteRange=function(){var S,w,E;return this._byteRange||(S=this._byteRange=[],this.rawByteRange&&((w=this.rawByteRange.split("@",2)).length===1?(E=this.lastByteRangeEndOffset,S[0]=E||0):S[0]=parseInt(w[1]),S[1]=parseInt(w[0])+S[0])),this._byteRange},u.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},u.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},u.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},d.prototype=((e={parseMasterPlaylist:function(S,w){var E=[];for(a.lastIndex=0;(R=a.exec(S))!=null;){var _={},P=_.attrs=new o(R[1]),R=(_.url=this.resolve(R[2],w),P.decimalResolution("RESOLUTION"));if(R&&(_.width=R.width,_.height=R.height),_.bitrate=P.decimalInteger("AVERAGE-BANDWIDTH")||P.decimalInteger("BANDWIDTH"),_.name=P.NAME,A=P.CODECS)for(var A=A.split(/[ ,]+/),C=0;C<A.length;C++){var L=A[C];L.indexOf("avc1")!==-1?_.videoCodec=this.avc1toavcoti(L):L.indexOf("hvc1")!==-1?_.videoCodec=L:_.audioCodec=L}E.push(_)}return E},parseMasterPlaylistMedia:function(S,w,E,_){var P=[],R=0;for(f.lastIndex=0;(C=f.exec(S))!=null;){var A={},C=new o(C[1]);C.TYPE===E&&(A.groupId=C["GROUP-ID"],A.name=C.NAME,A.type=E,A.default=C.DEFAULT==="YES",A.autoselect=C.AUTOSELECT==="YES",A.forced=C.FORCED==="YES",C.URI&&(A.url=this.resolve(C.URI,w)),A.lang=C.LANGUAGE,A.name||(A.name=A.lang),_&&(A.audioCodec=_),A.id=R++,P.push(A))}return P},avc1toavcoti:function(S){var w=S.split("."),E=2<w.length?(E=w.shift()+".",(E+=parseInt(w.shift()).toString(16))+("000"+parseInt(w.shift()).toString(16)).substr(-4)):S;return E},load:function(S,w,E){var _=this;l.get(S,function(P){var R,A,C,L=_.parseMasterPlaylist(P,S);L.length&&(R=_.parseMasterPlaylistMedia(P,S,"AUDIO",L[0].audioCodec),A=_.parseMasterPlaylistMedia(P,S,"SUBTITLES"),R.length)&&(C=!1,R.forEach(function(V){V.url||(C=!0)}),C===!1)&&L[0].audioCodec&&!L[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),R.unshift({type:"main",name:"main"})),w({levels:L,audioTracks:R,subtitles:A,url:S,string:P})},function(P,R,A){E&&((A=y.parseHttpHeaders(A)["x-tengine-error"])&&-1<h.RegionBlockMessages.indexOf(A)&&(P=v),E(P,R))})},loadMediaPlaylist:function(S,w,E){var _=this,P=(S=S||{}).string,R=S.url;P?(S=_.parseLevelPlaylist(P,R),w(S)):l.get(R,function(A){A=_.parseLevelPlaylist(A,R),w(A)},function(A){E&&E(A)})},resolve:function(S,w){return s.buildAbsoluteURL(w,S,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(S,w){var E=[];for(a.lastIndex=0;(R=a.exec(S))!=null;){var _={},P=_.attrs=new o(R[1]),R=(_.url=this.resolve(R[2],w),P.decimalResolution("RESOLUTION"));if(R&&(_.width=R.width,_.height=R.height),_.bitrate=P.decimalInteger("AVERAGE-BANDWIDTH")||P.decimalInteger("BANDWIDTH"),_.name=P.NAME,A=P.CODECS)for(var A=A.split(/[ ,]+/),C=0;C<A.length;C++){var L=A[C];L.indexOf("avc1")!==-1?_.videoCodec=this.avc1toavcoti(L):L.indexOf("hvc1")!==-1?_.videoCodec=L:_.audioCodec=L}E.push(_)}return E},e.parseMasterPlaylistMedia=function(S,w,E,_){var P=[],R=0;for(f.lastIndex=0;(C=f.exec(S))!=null;){var A={},C=new o(C[1]);C.TYPE===E&&(A.groupId=C["GROUP-ID"],A.name=C.NAME,A.type=E,A.default=C.DEFAULT==="YES",A.autoselect=C.AUTOSELECT==="YES",A.forced=C.FORCED==="YES",C.URI&&(A.url=this.resolve(C.URI,w)),A.lang=C.LANGUAGE,A.name||(A.name=A.lang),_&&(A.audioCodec=_),A.id=R++,P.push(A))}return P},e.avc1toavcoti=function(S){var w=S.split("."),E=2<w.length?(E=w.shift()+".",(E+=parseInt(w.shift()).toString(16))+("000"+parseInt(w.shift()).toString(16)).substr(-4)):S;return E},e.parseLevelPlaylist=function(S,w,E,_){var P,R,A=0,C=0,L={type:null,version:null,url:w,fragments:[],live:!0,startSN:0},V=new g,I=0,M=null,O=new u;for(T.lastIndex=0;(P=T.exec(S))!==null;){var N=P[1];if(N){O.duration=parseFloat(N);var j=(" "+P[2]).slice(1);O.title=j||null,O.tagList.push(j?["INF",N,j]:["INF",N])}else if(P[3])isNaN(O.duration)||(j=A++,O.type=_,O.start=C,O.levelkey=V,O.sn=j,O.level=E,O.cc=I,O.baseurl=w,O.relurl=(" "+P[3]).slice(1),L.fragments.push(O),C+=(M=O).duration,O=new u);else if(P[4])O.rawByteRange=(" "+P[4]).slice(1),M&&(N=M.byteRangeEndOffset)&&(O.lastByteRangeEndOffset=N);else if(P[5])O.rawProgramDateTime=(" "+P[5]).slice(1),O.tagList.push(["PROGRAM-DATE-TIME",O.rawProgramDateTime]),L.programDateTime===void 0&&(L.programDateTime=new Date(new Date(Date.parse(P[5]))-1e3*C));else{for(P=P[0].match(m),R=1;R<P.length&&P[R]===void 0;R++);var Y=(" "+P[R+1]).slice(1),B=(" "+P[R+2]).slice(1);switch(P[R]){case"#":O.tagList.push(B?[Y,B]:[Y]);break;case"PLAYLIST-TYPE":L.type=Y.toUpperCase();break;case"MEDIA-SEQUENCE":A=L.startSN=parseInt(Y);break;case"TARGETDURATION":L.targetduration=parseFloat(Y);break;case"VERSION":L.version=parseInt(Y);break;case"EXTM3U":break;case"ENDLIST":L.live=!1;break;case"DIS":I++,O.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":I=parseInt(Y);break;case"KEY":var X=new o(Y),W=X.enumeratedString("METHOD"),D=X.URI,X=X.hexadecimalInteger("IV");W&&(V=new g,D)&&0<=["AES-128","SAMPLE-AES"].indexOf(W)&&(V.method=W,V.baseuri=w,V.reluri=D,V.key=null,V.iv=X);break;case"START":W=new o(Y).decimalFloatingPoint("TIME-OFFSET"),isNaN(W)||(L.startTimeOffset=W);break;case"MAP":D=new o(Y),O.relurl=D.URI,O.rawByteRange=D.BYTERANGE,O.baseurl=w,O.level=E,O.type=_,O.sn="initSegment",L.initSegment=O,O=new u;break;case"PART-INF":X=new o(Y),L.partTarget=X.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+P)}}}return(O=M)&&!O.relurl&&(L.fragments.pop(),C-=O.duration),L.totalduration=C,L.averagetargetduration=C/L.fragments.length,L.endSN=A-1,L},e),d.ERROR_REGION_BLOCK=v,t.exports=d},{"../constants":30,"../io":42,"../playerutil":47,"./attrlist":39,"./urltoolkit":41}],41:[function(e,t,x){var g=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/;?#]*)(.*)$/,d=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,y={buildAbsoluteURL:function(T,l,s){if(s=s||{},T=T.trim(),!(l=l.trim())){if(!s.alwaysNormalize)return T;var a=y.parseURL(T);if(a)return a.path=y.normalizePath(a.path),y.buildURLFromParts(a);throw new Error("Error trying to parse base URL.")}if(a=y.parseURL(l),!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return s.alwaysNormalize?(a.path=y.normalizePath(a.path),y.buildURLFromParts(a)):l;if(l=y.parseURL(T),!l)throw new Error("Error trying to parse base URL.");!l.netLoc&&l.path&&l.path[0]!=="/"&&(T=u.exec(l.path),l.netLoc=T[1],l.path=T[2]),l.netLoc&&!l.path&&(l.path="/");var f,T={scheme:l.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};return a.netLoc||(T.netLoc=l.netLoc,a.path[0]!=="/"&&(a.path?(f=(f=l.path).substring(0,f.lastIndexOf("/")+1)+a.path,T.path=y.normalizePath(f)):(T.path=l.path,a.params||(T.params=l.params,a.query)||(T.query=l.query)))),T.path===null&&(T.path=s.alwaysNormalize?y.normalizePath(a.path):a.path),y.buildURLFromParts(T)},parseURL:function(o){return o=g.exec(o),o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null},normalizePath:function(o){for(o=o.split("").reverse().join("").replace(d,"");o.length!==(o=o.replace(h,"")).length;);return o.split("").reverse().join("")},buildURLFromParts:function(o){return o.scheme+o.netLoc+o.path+o.params+o.query+o.fragment}};t.exports=y},{}],42:[function(e,t,x){function g(l){try{var s=/vod(?:-product)?\.(\S+)\.aliyuncs\.com/.exec(l);return{value:!!s,region:s?s[1]:""}}catch{return{value:!1,region:""}}}function u(l){return(l||"").split("?")[0]}var d=e("../player/base/event/eventtype"),h=e("./url"),y="main",o="backup";t.exports.get=function(l,s,a,f,T){t.exports.ajax.call(this,"GET",l,{},s,a,f,T)},t.exports.post=function(l,s,a,f,T,m){var v={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};t.exports.ajax("POST",l,s,a,f,T,m,v)},t.exports.postWithHeader=function(l,s,a,f,T){t.exports.ajax("POST",l,s,f,T,!0,!1,a)},t.exports.ajax=function(l,s,a,f,T,m,v,S,w){var E,_,P,R,A=this,L=(w=w||{type:y,time:0},T=T||function(){},g(s)),C=L.value,L=L.region,V=s.replace("vod."+L+".aliyuncs.com","vod-product."+L+".aliyuncs.com");C&&A&&A._useBackupVodDomain&&(s=V),typeof XMLHttpRequest>"u"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("This browser does not support XMLHttpRequest.")}),_=new XMLHttpRequest,L=h.parseUrl(s),P=window.location,L.protocol+L.host===P.protocol+P.host||!window.XDomainRequest||"withCredentials"in _?(E=L.protocol=="file:"||P.protocol=="file:",_.onreadystatechange=function(){if(_.readyState===4)if(O=(M=_).status,M=M.responseText,O=O===0||500<=O&&O<=599&&(M||"").indexOf("RequestId")===-1,R&&(clearTimeout(R),R=void 0),O||w.time!==0&&A&&typeof A.trigger=="function"&&(A._useBackupVodDomain=!0,A.trigger(d.Private.VodRequestExceptionResume,{url:u(s),status:_.status,response:_.status!==200?_.responseText:"",retryType:w.type,retryTime:w.time})),_.status===200||E&&_.status===0)f(_.responseText);else{if(O&&C&&w){if(A&&typeof A.trigger=="function"&&A.trigger(d.Private.VodRequestException,{url:u(s),status:_.status,response:_.responseText,retryType:w.type,retryTime:w.time}),w.type===y)return w.time<1?(w.time++,void setTimeout(function(){t.exports.ajax.call(A,l,s,a,f,T,m,v,S,w)},200)):(w.type=o,w.time=1,void setTimeout(function(){t.exports.ajax.call(A,l,V,a,f,T,m,v,S,w)},200));if(w.type===o){if(w.time<2)return w.time++,void setTimeout(function(){t.exports.ajax.call(A,l,V,a,f,T,m,v,S,w)},200);A&&(A._useBackupVodDomain=!1)}}T(_.responseText,_.status,_)}var M,O}):((_=new window.XDomainRequest).onload=function(){f(_.responseText)},_.onerror=T,_.onprogress=function(){},_.ontimeout=T);try{if(m===void 0&&(m=!0),_.open(l,s,m),v&&(_.withCredentials=!0),S)for(var I in S)S.hasOwnProperty(I)&&_.setRequestHeader(I,S[I])}catch(M){return void T(M)}try{g(s).value&&(R=setTimeout(function(){w.type===y?w.time=1:w.type===o&&(w.time=2),_.abort()},5e3)),_.send(a)}catch(M){T(M)}},t.exports.jsonp=function(l,s,a){var f="jsonp_callback_"+Math.round(1e5*Math.random()),T=document.createElement("script");l&&(T.src=l+(0<=l.indexOf("?")?"&":"?")+"callback="+f+"&cb="+f,T.onerror=function(){delete window[f],document.body.removeChild(T),a()},T.onload=function(){setTimeout(function(){window[f]&&(delete window[f],document.body.removeChild(T))},0)},window[f]=function(m){delete window[f],document.body.removeChild(T),s(m)},document.body.appendChild(T))},t.exports.loadJS=function(l,s,a){var f=document.getElementsByTagName("HEAD").item(0),T=document.createElement("script");T.setAttribute("crossorigin","anonymous"),l&&l.toLowerCase().indexOf("https://")<0&&l.toLowerCase().indexOf("http://")<0&&(l=document.URL.replace(/(\/[^\/]*?)$/i,"")+l),T.type="text/javascript",T.src=l,T.onload=function(){s&&s()},T.onerror=function(){a&&a()},f.appendChild(T)}},{"../player/base/event/eventtype":70,"./url":51}],43:[function(e,t,x){var g=e("./dom");t.exports.render=function(u,o){var h=o.align||(o.className?"":"tl"),y=o.x||0,o=o.y||0,l=y.indexOf&&0<y.indexOf("%")?"":"px",s=o.indexOf&&0<o.indexOf("%")?"":"px";h==="tl"?g.css(u,{float:"left","margin-left":y+l,"margin-top":o+s}):h==="tr"?g.css(u,{float:"right","margin-right":y+l,"margin-top":o+s}):h==="tlabs"?g.css(u,{position:"absolute",left:y+l,top:o+s}):h==="trabs"?g.css(u,{position:"absolute",right:y+l,top:o+s}):h==="blabs"?g.css(u,{position:"absolute",left:y+l,bottom:o+s}):h==="brabs"?g.css(u,{position:"absolute",right:y+l,bottom:o+s}):h==="cc"&&g.addClass(u,"loading-center")}},{"./dom":34}],44:[function(e,t,x){var g=Object.prototype.hasOwnProperty;t.exports.create=Object.create||function(u){function d(){}return d.prototype=u,new d},t.exports.isArray=function(u){return Object.prototype.toString.call(arg)==="[object Array]"},t.exports.isEmpty=function(u){for(var d in u)if(u[d]!==null)return!1;return!0},t.exports.each=function(u,d,h){if(t.exports.isArray(u))for(var y=0,o=u.length;y<o&&d.call(h||this,u[y],y)!==!1;++y);else for(var l in u)if(g.call(u,l)&&d.call(h||this,l,u[l])===!1)break;return u},t.exports.merge=function(u,d){if(d)for(var h in d)g.call(d,h)&&(u[h]=d[h]);return u},t.exports.deepMerge=function(u,d){var h,y,o;for(h in u=t.exports.copy(u),d)g.call(d,h)&&(y=u[h],o=d[h],t.exports.isPlain(y)&&t.exports.isPlain(o)?u[h]=t.exports.deepMerge(y,o):u[h]=d[h]);return u},t.exports.copy=function(u){return t.exports.merge({},u)},t.exports.isPlain=function(u){return!!u&&typeof u=="object"&&u.toString()==="[object Object]"&&u.constructor===Object},t.exports.isArray=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.exports.unescape=function(u){return u.replace(/&([^;]+);/g,function(d,h){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[h.toLowerCase()]||d})}},{}],45:[function(e,t,x){var g,u=e("./object");(g=function(){}).extend=function(d){var h,y,o=(d=d||{}).init||d.init||this.prototype.init||this.prototype.init||function(){};for(y in(((h=function(){o.apply(this,arguments)}).prototype=u.create(this.prototype)).constructor=h).extend=g.extend,h.create=g.create,d)d.hasOwnProperty(y)&&(h.prototype[y]=d[y]);return h},g.create=function(){var d=u.create(this.prototype);return this.apply(d,arguments),d},t.exports=g},{"./object":44}],46:[function(e,t,x){var g=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=g},{}],47:[function(e,t,x){var g=e("./object"),u=e("../config"),d=e("./dom"),h=e("./cookie"),y=e("./constants"),o=e("../lang/index"),l=e("./ua"),s=e("./io"),a=e("../player/base/plugin/defaultemptycomponent"),f=e("./hardware-decoding-detector"),T={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!0,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+u.domain+"/de/prismplayer-flash/"+u.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:l.IS_PC,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:""},m=(t.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],t.exports.canPlayType=function(v){var S=document.createElement("video");return S.canPlayType?S.canPlayType(v):""},t.exports.canPlayHls=function(){return t.exports.canPlayType("application/x-mpegURL")!=""},t.exports.isUsedHlsPluginOnMobile=function(v){return!!(l.IS_MOBILE&&(l.IS_CHROME||l.IS_FIREFOX||l.IS_X5||l.IS_EDGE_NEW)&&t.exports.isSupportHls())},t.exports.isSafariUsedHlsPlugin=function(v){return!!(l.os.pc&&l.browser.safari&&v)},t.exports.validateSource=function(v){return!0},t.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},t.exports.createWrapper=function(v){var S=v.id,S=typeof S=="string"?(S.indexOf("#")===0&&(S=S.slice(1)),d.el(S)):S;if(S&&S.nodeName)return t.exports.adjustContainerLayout(S,v),S;throw new TypeError("没有为播放器指定容器")},t.exports.adjustContainerLayout=function(v,S){S.width&&!v.style.width&&(v.style.width=S.width),S.height&&!v.style.height&&(v.style.height=S.height)},t.exports.isSupportHls=function(){var v=window.MediaSource=window.MediaSource||window.WebKitMediaSource,S=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,v=v&&typeof v.isTypeSupported=="function"&&v.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),S=(l.IS_ANDROID&&l.is_X5&&(v=!0),!S||S.prototype&&typeof S.prototype.appendBuffer=="function"&&typeof S.prototype.remove=="function");return v&&S},t.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},t.exports.isSupportFlv=function(){return t.exports.isSupportHls()},t.exports.isSupportMSE=function(){return t.exports.isSupportHls()||t.exports.isSupportMMS()},t.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},t.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&t.exports.isSupportMSE()},t.exports.isAudio=function(v,S){if(S)return t.exports.isMp3Format(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mp3"}catch{return v&&0<v.toLowerCase().indexOf(".mp3")}return S},t.exports.isLiveShift=function(v){return v.isLive&&v.liveStartTime&&v.liveOverTime},t.exports.isHls=function(v,S){if(S)return t.exports.isHlsFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="m3u8"}catch{return v&&0<v.toLowerCase().indexOf(".m3u8")}return S},t.exports.isDash=function(v,S){if(S)return t.exports.isDashFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mpd"}catch{return v&&0<v.toLowerCase().indexOf(".mpd")}return S},t.exports.isFlv=function(v,S){if(S)return t.exports.isFlvFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="flv"}catch{return v&&0<v.toLowerCase().indexOf(".flv")}return S},t.exports.isRTMP=function(v){return v&&-1<v.toLowerCase().indexOf("rtmp:")},t.exports.isRts=function(v){return v&&-1<v.toLowerCase().indexOf("artc:")},t.exports.isMp4=function(v,S){if(S)return t.exports.isMp4Format(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mp4"}catch{return v&&-1<v.toLowerCase().indexOf(".mp4")}return S},t.exports.isSupportedFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(S)}catch{return!1}},t.exports.isMp3Format=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp3"].indexOf(S)}catch{return!1}},t.exports.isMp4Format=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp4"].indexOf(S)}catch{return!1}},t.exports.isFlvFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["flv"].indexOf(S)}catch{return!1}},t.exports.isHlsFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["hls","m3u8"].indexOf(S)}catch{return!1}},t.exports.isDashFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mpd"].indexOf(S)}catch{return!1}},t.exports.getFormat=function(w){var S={artc:"rts",m3u8:"hls"},w=(w=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(w))==null?void 0:w[0];return w=w&&w.replace(/\.|:|artc|m3u8/gi,function(E){return S[E]||""})},t.exports.checkSecuritSupport=function(){return t.exports.isSupportMSE()?l.IS_IOS&&(l.IS_UC||l.IS_QUARK||l.IS_BAIDU)?o.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?o.get("Error_SW_Https_required"):o.get("UseChromeForVodEncription")+"(SW not found)"},t.exports.nativeSupportH265=function(){return l.IS_IOS||l.IS_MAC_SAFARI},t.exports.findSelectedStreamLevel=function(v,S){var w=S;if(w||(w=h.get(y.SelectedStreamLevel))){for(var E=0;E<v.length;E++)if(v[E].definition==w)return E}else h.set(y.SelectedStreamLevel,v[0].definition,365);return 0},t.exports.getHistoryDetectResult=function(v,S){if(v)return S=S==="hls",v==="hvc1"?S?h.get(y.HWDetectHvc1Hls):h.get(y.HWDetectHvc1):v==="hev1"?S?h.get(y.HWDetectHev1Hls):h.get(y.HWDetectHev1):void 0},t.exports.setHistoryDetectResult=function(v,_,w){var E="unknownCodec",_=_==="hls";v==="hvc1"?E=_?y.HWDetectHvc1Hls:y.HWDetectHvc1:v==="hev1"&&(E=_?y.HWDetectHev1Hls:y.HWDetectHev1),h.set(E,w)},t.exports.handleOption=function(v,S){t.exports.isRts(v.source)&&(v.isLive=!0);var w,E=g.merge(g.copy(T),v),_=(v.autoplayPolicy&&(E.autoplayPolicy=g.merge(T.autoplayPolicy,v.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),P=!1;if(v.useFlashPrism||t.exports.isRTMP(v.source)?(P=!0,_=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(w=t.exports.isLiveShift(E))?(_.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),_.push({name:"playButton",align:"tl",x:15,y:12}),_.push({name:"liveDisplay",align:"tl",x:15,y:6})):_.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),v.isLive){if(v.skinLayout===void 0)E.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:t.exports.isRts(v.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:_}];else if(v.skinLayout!=0){for(var R=v.skinLayout.length,A=[],C=-1,L=0;L<R;L++)if(E.skinLayout[L].name=="controlBar"){for(var C=L,V=E.skinLayout[L].children.length,I=0;I<V;I++){var M,O=E.skinLayout[L].children[I].name;O!="liveDisplay"&&O!="liveIco"&&O!="fullScreenButton"&&O!="volume"&&O!="snapshot"&&O!="setting"&&O!="subtitle"&&(!w||O!="progress"&&O!="playButton"&&O!="timeDisplay")||(M=E.skinLayout[L].children[I],O=="progress"?M.name="liveShiftProgress":O=="timeDisplay"?M.name="liveShiftTimeDisplay":P&&O=="liveDisplay"&&(M.name="liveIco"),A.push(M))}break}C!=-1&&(E.skinLayout[C].children=A)}}return(v.components===void 0||!v.components||g.isArray(v.components)&&v.components.length==0)&&v.components!="false"&&(E.components=[a]),E},t.exports.ignoreSkinLayouts=function(v,S){var w;if(S!=null&&S.length&&v!=null&&v.length)return w=[].concat(v),S.forEach(function(E){var _,P,R;-1<E.indexOf(".")?(R=E.split("."),_=R[0],P=R[1],(R=w.find(function(A){return A.name===_}))&&(R.children=R.children.filter(function(A){return A.name!==P}))):w=w.filter(function(A){return A.name!==E})}),w},t.exports.getLiveHostByRegion=function(v){var S="live.aliyuncs.com";return v&&-1<["ap-southeast-1","eu-central-1"].indexOf(v)?"live."+v+".aliyuncs.com":S},t.exports.isVideoTag=function(v){return v&&typeof v.nodeName=="string"&&v.nodeName.toLowerCase()==="video"},t.exports.unqiueTextTracks=function(v){var S=[],S=(v=v===void 0?[]:v).reduce(function(E,_){var P;return E.some(function(R){return R.srclang===_.srclang})?E:((P=_).label=_.label||_.srclang,[].concat(E,[P]))},[]),w={};return S.forEach(function(E,_){w[E.label]?w[E.label].push(_):w[E.label]=[_]}),Object.keys(w).forEach(function(E){E=w[E]||[],1<E.length&&E.forEach(function(_){S[_].label=S[_].label+"("+S[_].srclang+")"})}),S},t.exports.isHvc1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("hvc1")},t.exports.isHev1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("hev1")},t.exports.isVvccCodec=function(v){return-1<(v=v===void 0?"":v).indexOf("vvcC")},t.exports.isVvc1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("vvc1")},t.exports.isH265Codec=function(v){return t.exports.isHvc1Codec(v=v===void 0?"":v)||t.exports.isHev1Codec(v)},t.exports.isH266Codec=function(v){return t.exports.isVvccCodec(v=v===void 0?"":v)||t.exports.isVvc1Codec(v)},t.exports.isH264Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("avc1")},t.exports.getVideoTrack=function(v){var S;return(v=v===void 0?[]:v).forEach(function(w){Number(w.type)===1&&(S=w)}),S},l.IS_ANDROID&&(l.dingTalk()||l.IS_UC||l.is_X5||l.IS_HUAWEI||l.IS_XIAOMI||l.IS_OPPO||l.IS_VIVO||l.IS_MEIZU||l.IS_SAMSUNG||l.IS_WEBVIEW)||l.os&&l.os.name==="windows"&&l.IS_UC);t.exports.shouldUseBasePlayer=function(R,S){var w,E,_,P=R.codecTag,R=R.url,A="supported",C="unsupported";return!P||(_=t.exports.isHvc1Codec(P),w=t.exports.isMp4(R),R=t.exports.isHls(R),w&&t.exports.nativeSupportH265()&&_)||w&&function(){if(!(!m&&(l.IS_CHROME||l.IS_EDGE_NEW)))return!1;var L=0;try{L=l.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch{L=0}return!(parseInt(L)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))}()?S(!0):m?(_=t.exports.getHistoryDetectResult(P,E=R?"hls":"mp4"))===A?S(!0):_===C?S(!1):void f({codecTags:[P],format:E,timeout:2e3}).then(function(L){if(L=L.isHev1Supported||L.isHvc1Supported,t.exports.setHistoryDetectResult(P,E,L?A:C),L)return S(!0);S(!1)}).catch(function(L){console.log("hevcDetector ERROR",L),S(!1)}):S(!1)},t.exports.parseHttpHeaders=function(v){if(v){var S={};try{v instanceof Response?v.headers.forEach(function(w,E){S[E]=w}):v.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(_){var _=_.split(": "),E=_.shift(),_=_.join(": ");S[E]=_})}catch{}return S}},t.exports.detectRegionBlock=function(v,S){s.get(v,function(){S(!1)},function(w,E,_){_=t.exports.parseHttpHeaders(_)["x-tengine-error"],E===403&&_&&-1<y.RegionBlockMessages.indexOf(_)?S(!0):S(!1)})}},{"../config":14,"../lang/index":25,"../player/base/plugin/defaultemptycomponent":94,"./constants":30,"./cookie":31,"./dom":34,"./hardware-decoding-detector":38,"./io":42,"./object":44,"./ua":50}],48:[function(e,t,x){var g=e("./object"),u=e("../player/adaptiveplayer"),d=e("./constants").USER_EVENT_NAME;t.exports.reloadInstance=function(f,y,o){var l=o,s=(l.dispose(),f.readyCallback),a=f._readyCallbackCalled,f=u.create(f,function(T){y(T),a||s(T)});t.exports.restoreUserEvents(o,f),t.exports.removeAllProps(l),(l.__proto__=f)[d]=l[d]},t.exports.storeUserEvents=function(h){var y=h,o=y.__proto__.on,l={};y.on=function(s,a){typeof a=="function"&&(l[s]?l[s].push(a):l[s]=[a],this._el)&&(a.binded=!0,o.call(y,s,a))},y[d]=l},t.exports.restoreUserEvents=function(h,y){var o=h[d];o&&g.each(o,function(l){o[l].forEach(function(s){y.on(l,s)})})},t.exports.removeAllProps=function(h,y){for(var o in y=[].concat(y=y||[],[d]),h)h.hasOwnProperty(o)&&y.indexOf(o)===-1&&delete h[o]}},{"../player/adaptiveplayer":67,"./constants":30,"./object":44}],49:[function(e,t,x){t.exports.set=function(g,u){try{window.localStorage&&localStorage.setItem(g,u)}catch{window[g+"_localStorage"]=u}},t.exports.get=function(g){try{if(window.localStorage)return localStorage.getItem(g)}catch{return window[g+"_localStorage"]}return""}},{}],50:[function(e,t,x){var g,u,d,h;if(t.exports.USER_AGENT=navigator.userAgent,t.exports.IS_IPHONE=/iPhone/i.test(t.exports.USER_AGENT),t.exports.IS_IPAD=/iPad/i.test(t.exports.USER_AGENT),t.exports.IS_IPOD=/iPod/i.test(t.exports.USER_AGENT),t.exports.IS_MAC=/mac/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE=/Edge/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE_NEW=/Edg/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE,t.exports.IS_IE11=/Trident\/7.0/i.test(t.exports.USER_AGENT),t.exports.IS_X5=/qqbrowser/i.test(t.exports.USER_AGENT.toLowerCase()),t.exports.IS_CHROME=/Chrome/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE&&!t.exports.IS_EDGE_NEW&&!t.exports.IS_X5,t.exports.IS_SAFARI=/Safari/i.test(t.exports.USER_AGENT)&&!t.exports.IS_CHROME&&!t.exports.IS_EDGE_NEW,t.exports.IS_FIREFOX=/Firefox/i.test(t.exports.USER_AGENT),t.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_QUARK=/Quark/i.test(t.exports.USER_AGENT),t.exports.IS_HUAWEI=/HuaweiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_XIAOMI=/MiuiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_OPPO=/HeyTapBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_VIVO=/VivoBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_MEIZU=/MZBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_SAMSUNG=/samsungbrowser/i.test(t.exports.USER_AGENT),t.exports.IS_BAIDU=/baiduboxapp/i.test(t.exports.USER_AGENT),document.all)try{var y=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t.exports.HAS_FLASH=!!y}catch{t.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(y=navigator.plugins["Shockwave Flash"],t.exports.HAS_FLASH=!!y):t.exports.HAS_FLASH=!1;t.exports.IS_MAC_SAFARI=t.exports.IS_MAC&&t.exports.IS_SAFARI&&!t.exports.IS_CHROME&&!t.exports.HAS_FLASH,t.exports.IS_IOS=t.exports.IS_IPHONE||t.exports.IS_IPAD||t.exports.IS_IPOD,t.exports.IOS_VERSION=function(){var o=t.exports.USER_AGENT.match(/OS (\d+)_/i);if(o&&o[1])return o[1]}(),t.exports.IOS_FULL_VERSION=function(){var o=t.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(o&&o[1]&&o[2])return o[1]+"."+o[2]}(),t.exports.IS_ANDROID=/Android/i.test(t.exports.USER_AGENT),t.exports.ANDROID_VERSION=(y=t.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(u=y[1]&&parseFloat(y[1]),g=y[2]&&parseFloat(y[2]),u&&g?parseFloat(y[1]+"."+y[2]):u||null):null,t.exports.IS_OLD_ANDROID=t.exports.IS_ANDROID&&/webkit/i.test(t.exports.USER_AGENT)&&t.exports.ANDROID_VERSION<2.3,t.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.exports.IS_MOBILE=t.exports.IS_IOS||t.exports.IS_ANDROID,t.exports.IS_H5=t.exports.IS_MOBILE||!t.exports.HAS_FLASH,t.exports.IS_PC=!t.exports.IS_MOBILE,t.exports.is_X5=/micromessenger/i.test(t.exports.USER_AGENT)||/qqbrowser/i.test(t.exports.USER_AGENT),t.exports.IS_ANDROID_FIREFOX=t.exports.IS_ANDROID&&t.exports.IS_FIREFOX,t.exports.CHROME_VERSION=t.exports.IS_CHROME&&t.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],t.exports.getHost=function(o){var l,s,a="";return o===void 0||o==null||o==""?"":(l=o.indexOf("//"),s=o,a=s=-1<l?o.substring(l+2):s,(o=(a=(o=s.split("/"))&&0<o.length?o[0]:a).split(":"))&&0<o.length?o[0]:a)},t.exports.dingTalk=function(){var o=t.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(o)},t.exports.IS_DINGTALK=t.exports.dingTalk(),t.exports.wechat=function(){var o=t.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(o)},t.exports.inIFrame=function(){return self!=top},t.exports.getReferer=function(){var o=document.referrer;if(t.exports.inIFrame())try{o=top.document.referrer}catch{o=document.referrer}return o},t.exports.getHref=function(){if(t.exports.inIFrame())try{top.location.href}catch{}return location.href},t.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?function(){var o=navigator.userAgent.split(" ");if(o[o.length-1].indexOf("Safari")!=-1){for(var l in navigator.plugins)if(navigator.plugins[l].filename=="np-mswmp.dll")return!0}return!1}():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},g=t.exports,(function(o,_){var s=this.os={},a=this.browser={},f=o.match(/Web[kK]it[\/]{0,1}([\d.]+)/),T=o.match(/(Android);?[\s\/]+([\d.]+)?/),m=!!o.match(/\(Macintosh\; Intel /),v=o.match(/(iPad).*OS\s([\d_]+)/),S=o.match(/(iPod)(.*OS\s([\d_]+))?/),w=!v&&o.match(/(iPhone\sOS)\s([\d_]+)/),E=o.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),_=/Win\d{2}|Windows/.test(_),P=o.match(/Windows Phone ([\d.]+)/),R=E&&o.match(/TouchPad/),A=o.match(/Kindle\/([\d.]+)/),C=o.match(/Silk\/([\d._]+)/),L=o.match(/(BlackBerry).*Version\/([\d.]+)/),V=o.match(/(BB10).*Version\/([\d.]+)/),I=o.match(/(RIM\sTablet\sOS)\s([\d.]+)/),M=o.match(/PlayBook/),O=o.match(/Chrome\/([\d.]+)/)||o.match(/CriOS\/([\d.]+)/),N=o.match(/Firefox\/([\d.]+)/),j=o.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),Y=o.match(/MSIE\s([\d.]+)/)||o.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),B=!O&&o.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),W=B||o.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(a.webkit=!!f)&&(a.version=f[1]),T&&(s.android=!0,s.version=T[2]),w&&!S&&(s.ios=s.iphone=!0,s.version=w[2].replace(/_/g,".")),v&&(s.ios=s.ipad=!0,s.version=v[2].replace(/_/g,".")),S&&(s.ios=s.ipod=!0,s.version=S[3]?S[3].replace(/_/g,"."):null),P&&(s.wp=!0,s.version=P[1]),E&&(s.webos=!0,s.version=E[2]),R&&(s.touchpad=!0),L&&(s.blackberry=!0,s.version=L[2]),V&&(s.bb10=!0,s.version=V[2]),I&&(s.rimtabletos=!0,s.version=I[2]),M&&(a.playbook=!0),A&&(s.kindle=!0,s.version=A[1]),C&&(a.silk=!0,a.version=C[1]),!C&&s.android&&o.match(/Kindle Fire/)&&(a.silk=!0),O&&(a.chrome=!0,a.version=O[1]),N&&(a.firefox=!0,a.version=N[1]),j&&(s.firefoxos=!0,s.version=j[1]),Y&&(a.ie=!0,a.version=Y[1]),W&&(m||s.ios||_||T)&&(a.safari=!0,s.ios||s.android||(a.version=W[1])),s.ios&&(a.version=s.version),B&&(a.webview=!0),m&&((f=o.match(/[\d]*_[\d]*_[\d]*/))&&0<f.length&&f[0]&&(s.version=f[0].replace(/_/g,".")),/MQBHD/.test(o))&&(a.version=((o.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),s.tablet=!!(v||M||T&&!o.match(/Mobile/)||N&&o.match(/Tablet/)||Y&&!o.match(/Phone/)&&o.match(/Touch/)),s.phone=!(s.tablet||s.ipod||!(T||w||E||L||V||O&&o.match(/Android/)||O&&o.match(/CriOS\/([\d.]+)/)||N&&o.match(/Mobile/)||Y&&o.match(/Touch/))),s.pc=!s.tablet&&!s.phone,m?s.name="macOS":_?(s.name="windows",s.version=function(){var D=navigator.userAgent,X="";return(-1<D.indexOf("Windows NT 5.0")||-1<D.indexOf("Windows 2000"))&&(X="2000"),(-1<D.indexOf("Windows NT 5.1")||-1<D.indexOf("Windows XP"))&&(X="XP"),(-1<D.indexOf("Windows NT 5.2")||-1<D.indexOf("Windows 2003"))&&(X="2003"),(-1<D.indexOf("Windows NT 6.0")||-1<D.indexOf("Windows Vista"))&&(X="Vista"),(-1<D.indexOf("Windows NT 6.1")||-1<D.indexOf("Windows 7"))&&(X="7"),(-1<D.indexOf("Windows NT 6.2")||-1<D.indexOf("Windows 8"))&&(X="8"),(-1<D.indexOf("Windows NT 6.3")||-1<D.indexOf("Windows 8.1"))&&(X="8.1"),(-1<D.indexOf("Windows NT 10")||-1<D.indexOf("Windows 10"))&&(X="10"),X}()):s.name=function(){var D=navigator.userAgent,X="other",Q=t.exports.os;return Q.ios?"iOS":Q.android?"android":-1<D.indexOf("Baiduspider")?"Baiduspider":-1<D.indexOf("PlayStation")?"PS4":(Q=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<D.indexOf("Windows"),D=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel",D&&(X="macOS"),navigator.platform!="X11"||Q||D||(X="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(X="Linux"),Q?"windows":X)}(),a.name=(S=navigator.userAgent.toLowerCase(),(P=t.exports.browser).firefox?"Firefox":P.ie?/edge/.test(S)?"Edge":"IE":t.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(S)?"微信内置浏览器":/qqbrowser/.test(S)?"QQ浏览器":t.exports.IS_UC?"UC":t.exports.IS_QUARK?"Quark":t.exports.IS_DINGTALK?"Dingtalk":t.exports.IS_HUAWEI?"HuaweiBrowser":t.exports.IS_XIAOMI?"MiBrowser":t.exports.IS_OPPO?"OppoBrowser":t.exports.IS_VIVO?"VivoBrowser":t.exports.IS_MEIZU?"MeizuBrowser":t.exports.IS_SAMSUNG?"SamsungBrowser":t.exports.IS_WEBVIEW||/MQBHD/.test(S)?"webview":P.chrome?"Chrome":P.safari?"Safari":/baiduspider/.test(S)?"Baiduspider":/opera/.test(S)?"Opera":/360se/.test(S)?"360浏览器":/bidubrowser/.test(S)?"百度浏览器":/metasr/.test(S)?"搜狗浏览器":/lbbrowser/.test(S)?"猎豹浏览器":/playstation/.test(S)?"PS4浏览器":void 0)}).call(g,navigator.userAgent,navigator.platform),t.exports.IS_WEBVIEW=(u=t.exports.USER_AGENT,d=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),h=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!u.match(d)&&!u.match(h))},{}],51:[function(e,t,x){var g=e("./dom");t.exports.getAbsoluteURL=function(u){return u=u.match(/^https?:\/\//)?u:g.createEl("div",{innerHTML:'<a href="'+u+'">x</a>'}).firstChild.href},t.exports.parseUrl=function(u){var d,h=["protocol","hostname","port","pathname","search","hash","host"],y=g.createEl("a",{href:u}),o=y.host===""&&y.protocol!=="file:";o&&((d=g.createEl("div")).innerHTML='<a href="'+u+'"></a>',y=d.firstChild,d.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(d));for(var l={},s=0;s<h.length;s++)l[h[s]]=y[h[s]];return l.segments=y.pathname.replace(/^\//,"").split("/"),o&&document.body.removeChild(d),l}},{"./dom":34}],52:[function(e,t,x){var g=e("./dom"),u=e("./ua"),d=e("./playerutil");t.exports.formatTime=function(o){var y,o=Math.floor(o),l=Math.floor(o/3600);return o%=3600,y=Math.floor(o/60),o=o%60,!(l===1/0||isNaN(l)||y===1/0||isNaN(y)||o==1/0||isNaN(o))&&((l=10<=l?l:"0"+l)==="00"?"":l+":")+(10<=y?y:"0"+y)+":"+(10<=o?o:"0"+o)},t.exports.extractTime=function(h){var y;return h?((y=10<=(y=parseInt(h.getHours()))?y:"0"+y)==="00"?"":y+":")+(y=10<=(y=parseInt(h.getMinutes()))?y:"0"+y)+":"+(y=10<=(y=parseInt(h.getSeconds()))?y:"0"+y):""},t.exports.convertToTimestamp=function(h,y){var o="";return h&&(y?o=h.gettime():(o=Date.parse(h),o/=1e3)),o},t.exports.convertToDate=function(h,y){var o="";return h&&(o=new Date).setTime(1e3*h),o},t.exports.parseTime=function(h){var y,o,l;return h?(l=o=y=0,(h=h.split(":")).length===3?(y=h[0],o=h[1],l=h[2]):h.length===2?(o=h[0],l=h[1]):h.length===1&&(l=h[0]),3600*(y=parseInt(y,10))+60*(o=parseInt(o,10))+(l=Math.ceil(parseFloat(l)))):"00:00:00"},t.exports.formatDate=function(h,y){var o,l={"M+":h.getMonth()+1,"d+":h.getDate(),"H+":h.getHours(),"m+":h.getMinutes(),"s+":h.getSeconds(),"q+":Math.floor((h.getMonth()+3)/3),S:h.getMilliseconds()};for(o in/(y+)/.test(y)&&(y=y.replace(RegExp.$1,(h.getFullYear()+"").substr(4-RegExp.$1.length))),l)new RegExp("("+o+")").test(y)&&(y=y.replace(RegExp.$1,RegExp.$1.length==1?l[o]:("00"+l[o]).substr((""+l[o]).length)));return y},t.exports.sleep=function(h){},t.exports.htmlEncodeAll=function(h){return h==null?"":h.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.exports.toBinary=function(h){if(!window.atob)return"";for(var y=atob(h),o=y.length,l=new Uint8Array(o),s=0;s<o;s++)l[s]=y.charCodeAt(s);return l},t.exports.readyBinary=function(h){for(var y=new Uint8Array(h),o=y.length,l="",s=0;s<o;s++)l+=y[s];return l},t.exports.delayHide=function(h,y){h&&(y===void 0&&(y=1e3),h.delayHanlder&&clearTimeout(h.delayHanlder),h.delayHanlder=setTimeout(function(){g.css(h,"display","none")},y))},t.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},t.exports.contentProtocolMixed=function(h,y,o){return!!((u.os.pc&&(d.isHls(h,o)&&!u.browser.safari||d.isFlv(h,o))||y)&&window.location.protocol.toLowerCase()=="https:"&&h&&-1<h.toLowerCase().indexOf("http://"))},t.exports.queryString=function(h){var y,o,l;return(h=(h=decodeURIComponent(h)).split("?")).length===2&&(h=h[1],y=h.split("&"))?(o={},l=0,$(y).each(function(){var s=y[l].split("=");s.length===2&&(o[s[0]]=s[1].replace(/\+/g," ")),l++}),o):{}},t.exports.log=function(h){var y=window.location.href,y=t.exports.queryString(y);y&&y.debug==1&&console.log(h)},t.exports.arrayBufferToB64=function(h){for(var y="",o=new Uint8Array(h),l=o.byteLength,s=0;s<l;s++)y+=String.fromCharCode(o[s]);return window.btoa(y)},t.exports.b64ToArrayBuffer=function(h){for(var y=atob(h),o=new Uint8Array(y.length),l=0;l<y.length;l++)o[l]=y.charCodeAt(l);return o.buffer},t.exports.throttle=function(h,y){var o=null,l=0;return function(){for(var s=this,a=arguments.length,f=new Array(a),T=0;T<a;T++)f[T]=arguments[T];var m=Date.now(),v=y-(m-l);v<=0?(h.apply(this,f),l=m):(clearTimeout(o),o=setTimeout(function(){h.apply(s,f),l=Date.now()},v))}}},{"./dom":34,"./playerutil":47,"./ua":50}],53:[function(e,t,x){var g,u=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=this,g=function(){return h={307:function(l,ge,z){l=z.nmd(l);var f="__lodash_hash_undefined__",T=1,m=2,v=9007199254740991,S="[object Arguments]",w="[object Array]",E="[object AsyncFunction]",_="[object Boolean]",P="[object Date]",R="[object Error]",A="[object Function]",C="[object GeneratorFunction]",L="[object Map]",V="[object Number]",I="[object Object]",M="[object Promise]",O="[object Proxy]",N="[object RegExp]",j="[object Set]",Y="[object String]",B="[object WeakMap]",W="[object ArrayBuffer]",D="[object DataView]",X=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,H={},z=(H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H[S]=H[w]=H[W]=H[_]=H[D]=H[P]=H[R]=H[A]=H[L]=H[V]=H[I]=H[N]=H[j]=H[Y]=H[B]=!1,typeof z.g=="object"&&z.g&&z.g.Object===Object&&z.g),Ie=typeof self=="object"&&self&&self.Object===Object&&self,Ie=z||Ie||Function("return this")(),ge=ge&&!ge.nodeType&&ge,we=ge&&l&&!l.nodeType&&l,we=we&&we.exports===ge,F=we&&z.process,ge=function(){try{return F&&F.binding&&F.binding("util")}catch{}}(),z=ge&&ge.isTypedArray;function ie(re){var pe=-1,ye=Array(re.size);return re.forEach(function(De,ot){ye[++pe]=[ot,De]}),ye}function he(re){var pe=-1,ye=Array(re.size);return re.forEach(function(De){ye[++pe]=De}),ye}var le,Se,ge=Array.prototype,ct=Function.prototype,_e=Object.prototype,be=Ie["__core-js_shared__"],me=ct.toString,xe=_e.hasOwnProperty,Z=(ct=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+ct:"",te=_e.toString,K=RegExp("^"+me.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=we?Ie.Buffer:void 0,ct=Ie.Symbol,J=Ie.Uint8Array,oe=_e.propertyIsEnumerable,de=ge.splice,ue=ct?ct.toStringTag:void 0,ve=Object.getOwnPropertySymbols,we=be?be.isBuffer:void 0,ge=(le=Object.keys,Se=Object,Vt(Ie,"DataView")),ke=Vt(Ie,"Map"),be=Vt(Ie,"Promise"),Re=Vt(Ie,"Set"),Ie=Vt(Ie,"WeakMap"),Le=Vt(Object,"create"),He=Bt(ge),We=Bt(ke),tt=Bt(be),qe=Bt(Re),ht=Bt(Ie),ct=ct?ct.prototype:void 0,Rt=ct?ct.valueOf:void 0;function gt(re){var pe=-1,ye=re==null?0:re.length;for(this.clear();++pe<ye;){var De=re[pe];this.set(De[0],De[1])}}function dt(re){var pe=-1,ye=re==null?0:re.length;for(this.clear();++pe<ye;){var De=re[pe];this.set(De[0],De[1])}}function Ct(re){var pe=-1,ye=re==null?0:re.length;for(this.clear();++pe<ye;){var De=re[pe];this.set(De[0],De[1])}}function nt(re){var pe=-1,ye=re==null?0:re.length;for(this.__data__=new Ct;++pe<ye;)this.add(re[pe])}function vt(re){re=this.__data__=new dt(re),this.size=re.size}function Qt(re,pe){var ye,De,ot,Ve=It(re),it=!Ve&&mr(re),st=!Ve&&!it&&Jt(re),St=!Ve&&!it&&!st&&rt(re),_t=Ve||it||st||St,et=_t?function(at,Ge){for(var Xe=-1,lt=Array(at);++Xe<at;)lt[Xe]=Ge(Xe);return lt}(re.length,String):[],ae=et.length;for(ye in re)!pe&&!xe.call(re,ye)||_t&&(ye=="length"||st&&(ye=="offset"||ye=="parent")||St&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||(De=ye,(ot=(ot=ae)==null?v:ot)&&(typeof De=="number"||Q.test(De))&&-1<De&&De%1==0&&De<ot))||et.push(ye);return et}function rr(re,pe){for(var ye=re.length;ye--;)if(Gt(re[ye][0],pe))return ye;return-1}function Ze(re){{if(re==null)return re===void 0?"[object Undefined]":"[object Null]";if(ue&&ue in Object(re)){var pe=re,ye=xe.call(pe,ue),De=pe[ue];try{var ot=!(pe[ue]=void 0)}catch{}var Ve=te.call(pe);return ot&&(ye?pe[ue]=De:delete pe[ue]),Ve}return te.call(re)}}function Mt(re){return Be(re)&&Ze(re)==S}function sr(re,pe,ye,De,ot){return re===pe||(re==null||pe==null||!Be(re)&&!Be(pe)?re!=re&&pe!=pe:function(Ve,it,st,St,_t,et){var ae=It(Ve),lt=It(it),at=ae?w:Lt(Ve),lt=lt?w:Lt(it),Ge=(at=at==S?I:at)==I,Xe=(lt=lt==S?I:lt)==I,lt=at==lt;if(lt&&Jt(Ve)){if(!Jt(it))return!1;Ge=!(ae=!0)}if(lt&&!Ge)return et=et||new vt,(ae||rt(Ve)?jt:function(mt,Et,fr,Mr,er,Tr){switch(at){case D:if(mt.byteLength!=Et.byteLength||mt.byteOffset!=Et.byteOffset)return!1;mt=mt.buffer,Et=Et.buffer;case W:return!(mt.byteLength!=Et.byteLength||!er(new J(mt),new J(Et)));case _:case P:case V:return Gt(+mt,+Et);case R:return mt.name==Et.name&&mt.message==Et.message;case N:case Y:return mt==Et+"";case L:var kt=ie;case j:if(kt=kt||he,mt.size!=Et.size&&!(fr&T))return!1;var Er=Tr.get(mt);return Er?Er==Et:(fr|=m,Tr.set(mt,Et),Er=jt(kt(mt),kt(Et),fr,Mr,er,Tr),Tr.delete(mt),Er);case"[object Symbol]":if(Rt)return Rt.call(mt)==Rt.call(Et)}return!1})(Ve,it,st,St,_t,et);if(!(st&T)&&(ae=Ge&&xe.call(Ve,"__wrapped__"),Ge=Xe&&xe.call(it,"__wrapped__"),ae||Ge))return _t(ae?Ve.value():Ve,Ge?it.value():it,st,St,et=et||new vt);if(lt){et=et||new vt;var Tt=Ve,yt=it,Zt=st,nr=St,br=_t,Pt=et,Ot=Zt&T,xr=Kt(Tt),Ut=xr.length;if(Ut!=Kt(yt).length&&!Ot)return!1;for(var pr=Ut;pr--;){var or=xr[pr];if(!(Ot?or in yt:xe.call(yt,or)))return!1}if(Xe=Pt.get(Tt),Xe&&Pt.get(yt))return Xe==yt;for(var Sr=!0,kr=(Pt.set(Tt,yt),Pt.set(yt,Tt),Ot);++pr<Ut;){var hr,Xt=Tt[or=xr[pr]],ar=yt[or];if(!((hr=nr?Ot?nr(ar,Xt,or,yt,Tt,Pt):nr(Xt,ar,or,Tt,yt,Pt):hr)===void 0?Xt===ar||br(Xt,ar,Zt,nr,Pt):hr)){Sr=!1;break}kr=kr||or=="constructor"}return Sr&&!kr&&(Xe=Tt.constructor)!=(ae=yt.constructor)&&"constructor"in Tt&&"constructor"in yt&&!(typeof Xe=="function"&&Xe instanceof Xe&&typeof ae=="function"&&ae instanceof ae)&&(Sr=!1),Pt.delete(Tt),Pt.delete(yt),Sr}return!1}(re,pe,ye,De,sr,ot))}function Ft(re){if(pe=re&&re.constructor,re!==(typeof pe=="function"&&pe.prototype||_e))return le(Se(re));var pe,ye,De=[];for(ye in Object(re))xe.call(re,ye)&&ye!="constructor"&&De.push(ye);return De}function jt(re,pe,ye,De,ot,Ve){var it=ye&T,st=re.length,St=pe.length;if(st!=St&&!(it&&st<St))return!1;if(St=Ve.get(re),St&&Ve.get(pe))return St==pe;var _t=-1,et=!0,ae=ye&m?new nt:void 0;for(Ve.set(re,pe),Ve.set(pe,re);++_t<st;){var at,Ge=re[_t],Xe=pe[_t];if((at=De?it?De(Xe,Ge,_t,pe,re,Ve):De(Ge,Xe,_t,re,pe,Ve):at)!==void 0){if(at)continue;et=!1;break}if(ae){if(!function(lt,Tt){for(var yt=-1,Zt=lt==null?0:lt.length;++yt<Zt;)if(Tt(lt[yt],yt,lt))return 1}(pe,function(lt,Tt){return!ae.has(Tt)&&(Ge===lt||ot(Ge,lt,ye,De,Ve))&&ae.push(Tt)})){et=!1;break}}else if(Ge!==Xe&&!ot(Ge,Xe,ye,De,Ve)){et=!1;break}}return Ve.delete(re),Ve.delete(pe),et}function Kt(re){var pe=vr,ye=bt(re);if(It(re))return ye;for(var De=ye,ot=pe(re),Ve=-1,it=ot.length,st=De.length;++Ve<it;)De[st+Ve]=ot[Ve];return De}function ir(De,pe){var ye,De=De.__data__;return((ye=typeof pe)=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?pe!=="__proto__":pe===null)?De[typeof pe=="string"?"string":"hash"]:De.map}function Vt(re,pe){return re=re==null?void 0:re[pe],!Pe(pe=re)||Z&&Z in pe||!(ne(pe)?K:X).test(Bt(pe))?void 0:re}gt.prototype.clear=function(){this.__data__=Le?Le(null):{},this.size=0},gt.prototype.delete=function(re){return re=this.has(re)&&delete this.__data__[re],this.size-=re?1:0,re},gt.prototype.get=function(re){var pe,ye=this.__data__;return Le?(pe=ye[re])===f?void 0:pe:xe.call(ye,re)?ye[re]:void 0},gt.prototype.has=function(re){var pe=this.__data__;return Le?pe[re]!==void 0:xe.call(pe,re)},gt.prototype.set=function(re,pe){var ye=this.__data__;return this.size+=this.has(re)?0:1,ye[re]=Le&&pe===void 0?f:pe,this},dt.prototype.clear=function(){this.__data__=[],this.size=0},dt.prototype.delete=function(ye){var pe=this.__data__,ye=rr(pe,ye);return!(ye<0||(ye==pe.length-1?pe.pop():de.call(pe,ye,1),--this.size,0))},dt.prototype.get=function(ye){var pe=this.__data__,ye=rr(pe,ye);return ye<0?void 0:pe[ye][1]},dt.prototype.has=function(re){return-1<rr(this.__data__,re)},dt.prototype.set=function(re,pe){var ye=this.__data__,De=rr(ye,re);return De<0?(++this.size,ye.push([re,pe])):ye[De][1]=pe,this},Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new gt,map:new(ke||dt),string:new gt}},Ct.prototype.delete=function(re){return re=ir(this,re).delete(re),this.size-=re?1:0,re},Ct.prototype.get=function(re){return ir(this,re).get(re)},Ct.prototype.has=function(re){return ir(this,re).has(re)},Ct.prototype.set=function(re,pe){var ye=ir(this,re),De=ye.size;return ye.set(re,pe),this.size+=ye.size==De?0:1,this},nt.prototype.add=nt.prototype.push=function(re){return this.__data__.set(re,f),this},nt.prototype.has=function(re){return this.__data__.has(re)},vt.prototype.clear=function(){this.__data__=new dt,this.size=0},vt.prototype.delete=function(ye){var pe=this.__data__,ye=pe.delete(ye);return this.size=pe.size,ye},vt.prototype.get=function(re){return this.__data__.get(re)},vt.prototype.has=function(re){return this.__data__.has(re)},vt.prototype.set=function(re,pe){var ye=this.__data__;if(ye instanceof dt){var De=ye.__data__;if(!ke||De.length<199)return De.push([re,pe]),this.size=++ye.size,this;ye=this.__data__=new Ct(De)}return ye.set(re,pe),this.size=ye.size,this};var vr=ve?function(re){if(re==null)return[];re=Object(re);for(var pe=ve(re),ye=-1,De=pe==null?0:pe.length,ot=0,Ve=[];++ye<De;){var it=pe[ye];oe.call(re,it)&&(Ve[ot++]=it)}return Ve}:function(){return[]},Lt=Ze;function Bt(re){if(re!=null){try{return me.call(re)}catch{}try{return re+""}catch{}}return""}function Gt(re,pe){return re===pe||re!=re&&pe!=pe}(ge&&Lt(new ge(new ArrayBuffer(1)))!=D||ke&&Lt(new ke)!=L||be&&Lt(be.resolve())!=M||Re&&Lt(new Re)!=j||Ie&&Lt(new Ie)!=B)&&(Lt=function(ye){var pe=Ze(ye),ye=pe==I?ye.constructor:void 0,ye=ye?Bt(ye):"";if(ye)switch(ye){case He:return D;case We:return L;case tt:return M;case qe:return j;case ht:return B}return pe});var mr=Mt(function(){return arguments}())?Mt:function(re){return Be(re)&&xe.call(re,"callee")&&!oe.call(re,"callee")},It=Array.isArray,Jt=we||function(){return!1};function ne(re){if(Pe(re))return(re=Ze(re))==A||re==C||re==E||re==O}function se(re){return typeof re=="number"&&-1<re&&re%1==0&&re<=v}function Pe(re){var pe=typeof re;return re!=null&&(pe=="object"||pe=="function")}function Be(re){return re!=null&&typeof re=="object"}var ft,rt=z?(ft=z,function(re){return ft(re)}):function(re){return Be(re)&&se(re.length)&&!!H[Ze(re)]};function bt(re){return(re!=null&&se(re.length)&&!ne(re)?Qt:Ft)(re)}l.exports=function(re,pe){return sr(re,pe)}},801:function(l){l.exports=function(s){return s===void 0}},378:function(l,xe,j){l=j.nmd(l);var f,T,m="__lodash_hash_undefined__",v=9007199254740991,S="[object Arguments]",w="[object AsyncFunction]",E="[object Function]",_="[object GeneratorFunction]",P="[object Null]",R="[object Object]",A="[object Proxy]",C="[object Undefined]",L=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,I={},j=(I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[S]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I[E]=I["[object Map]"]=I["[object Number]"]=I[R]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1,typeof j.g=="object"&&j.g&&j.g.Object===Object&&j.g),M=typeof self=="object"&&self&&self.Object===Object&&self,M=j||M||Function("return this")(),xe=xe&&!xe.nodeType&&xe,O=xe&&l&&!l.nodeType&&l,xe=O&&O.exports===xe,N=xe&&j.process,j=function(){try{return O&&O.require&&O.require("util").types||N&&N.binding&&N.binding("util")}catch{}}(),j=j&&j.isTypedArray,nt=Array.prototype,F=Function.prototype,Y=Object.prototype,It=M["__core-js_shared__"],B=F.toString,W=Y.hasOwnProperty,D=(F=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",X=Y.toString,Q=B.call(Object),H=RegExp("^"+B.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),It=xe?M.Buffer:void 0,F=M.Symbol,z=M.Uint8Array,ie=(It&&It.allocUnsafe,f=Object.getPrototypeOf,T=Object,function(ne){return f(T(ne))}),he=Object.create,le=Y.propertyIsEnumerable,Se=nt.splice,_e=F?F.toStringTag:void 0,me=function(){try{var ne=qe(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),xe=It?It.isBuffer:void 0,Z=Math.max,te=Date.now,K=qe(M,"Map"),J=qe(Object,"create"),oe=function(ne){return jt(ne)?he?he(ne):(de.prototype=ne,ne=new de,de.prototype=void 0,ne):{}};function de(){}function ue(ne){var se=-1,Pe=ne==null?0:ne.length;for(this.clear();++se<Pe;){var Be=ne[se];this.set(Be[0],Be[1])}}function ve(ne){var se=-1,Pe=ne==null?0:ne.length;for(this.clear();++se<Pe;){var Be=ne[se];this.set(Be[0],Be[1])}}function we(ne){var se=-1,Pe=ne==null?0:ne.length;for(this.clear();++se<Pe;){var Be=ne[se];this.set(Be[0],Be[1])}}function ge(ne){ne=this.__data__=new ve(ne),this.size=ne.size}function ke(ne,se,Pe){(Pe===void 0||vt(ne[se],Pe))&&(Pe!==void 0||se in ne)||Re(ne,se,Pe)}function be(ne,se){for(var Pe=ne.length;Pe--;)if(vt(ne[Pe][0],se))return Pe;return-1}function Re(ne,se,Pe){se=="__proto__"&&me?me(ne,se,{configurable:!0,enumerable:!0,value:Pe,writable:!0}):ne[se]=Pe}ue.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},ue.prototype.delete=function(ne){return ne=this.has(ne)&&delete this.__data__[ne],this.size-=ne?1:0,ne},ue.prototype.get=function(ne){var se,Pe=this.__data__;return J?(se=Pe[ne])===m?void 0:se:W.call(Pe,ne)?Pe[ne]:void 0},ue.prototype.has=function(ne){var se=this.__data__;return J?se[ne]!==void 0:W.call(se,ne)},ue.prototype.set=function(ne,se){var Pe=this.__data__;return this.size+=this.has(ne)?0:1,Pe[ne]=J&&se===void 0?m:se,this},ve.prototype.clear=function(){this.__data__=[],this.size=0},ve.prototype.delete=function(Pe){var se=this.__data__,Pe=be(se,Pe);return!(Pe<0||(Pe==se.length-1?se.pop():Se.call(se,Pe,1),--this.size,0))},ve.prototype.get=function(Pe){var se=this.__data__,Pe=be(se,Pe);return Pe<0?void 0:se[Pe][1]},ve.prototype.has=function(ne){return-1<be(this.__data__,ne)},ve.prototype.set=function(ne,se){var Pe=this.__data__,Be=be(Pe,ne);return Be<0?(++this.size,Pe.push([ne,se])):Pe[Be][1]=se,this},we.prototype.clear=function(){this.size=0,this.__data__={hash:new ue,map:new(K||ve),string:new ue}},we.prototype.delete=function(ne){return ne=tt(this,ne).delete(ne),this.size-=ne?1:0,ne},we.prototype.get=function(ne){return tt(this,ne).get(ne)},we.prototype.has=function(ne){return tt(this,ne).has(ne)},we.prototype.set=function(ne,se){var Pe=tt(this,ne),Be=Pe.size;return Pe.set(ne,se),this.size+=Pe.size==Be?0:1,this},ge.prototype.clear=function(){this.__data__=new ve,this.size=0},ge.prototype.delete=function(Pe){var se=this.__data__,Pe=se.delete(Pe);return this.size=se.size,Pe},ge.prototype.get=function(ne){return this.__data__.get(ne)},ge.prototype.has=function(ne){return this.__data__.has(ne)},ge.prototype.set=function(ne,se){var Pe=this.__data__;if(Pe instanceof ve){var Be=Pe.__data__;if(!K||Be.length<199)return Be.push([ne,se]),this.size=++Pe.size,this;Pe=this.__data__=new we(Be)}return Pe.set(ne,se),this.size=Pe.size,this};var Ie=function(ne,se,Pe){for(var Be=-1,ft=Object(ne),rt=Pe(ne),bt=rt.length;bt--;){var re=rt[++Be];if(se(ft[re],re,ft)===!1)break}return ne};function Le(ne){{if(ne==null)return ne===void 0?C:P;if(_e&&_e in Object(ne)){var se=ne,Pe=W.call(se,_e),Be=se[_e];try{var ft=!(se[_e]=void 0)}catch{}var rt=X.call(se);return ft&&(Pe?se[_e]=Be:delete se[_e]),rt}return X.call(ne)}}function He(ne){return Kt(ne)&&Le(ne)==S}function We(ne,se,Pe,Be,ft){ne!==se&&Ie(se,function(rt,bt){var re,pe,ye,De,ot,Ve,it,st,St,_t,et,ae,at;ft=ft||new ge,jt(rt)?(pe=se,De=Pe,ot=We,Ve=Be,it=ft,et=Rt(re=ne,ye=bt),ae=Rt(pe,ye),(at=it.get(ae))||((pe=(at=Ve?Ve(et,ae,ye+"",re,pe,it):void 0)===void 0)&&(st=!(_t=rr(ae))&&Mt(ae),St=!_t&&!st&&Vt(ae),at=ae,_t||st||St?at=rr(et)?et:Kt(_t=et)&&Ze(_t)?function(Ge,Xe){var lt=-1,Tt=Ge.length;for(Xe=Xe||Array(Tt);++lt<Tt;)Xe[lt]=Ge[lt];return Xe}(et):st?(pe=!1,ae.slice()):St?(pe=!1,St=new(st=(_t=ae).buffer).constructor(st.byteLength),new z(St).set(new z(st)),new _t.constructor(St,_t.byteOffset,_t.length)):[]:function(Ge){if(Kt(Ge)&&Le(Ge)==R)return(Ge=ie(Ge))===null||typeof(Ge=W.call(Ge,"constructor")&&Ge.constructor)=="function"&&Ge instanceof Ge&&B.call(Ge)==Q}(ae)||Qt(ae)?Qt(at=et)?at=function(){for(var Ge,Xe,lt=et,Tt=vr(et),yt=void 0,Zt=!yt,nr=(yt=yt||{},-1),br=Tt.length;++nr<br;){var Pt=Tt[nr],Ot=void 0;Ot===void 0&&(Ot=lt[Pt]),Zt?Re(yt,Pt,Ot):(Ot=Ot,Xe=void 0,Xe=(Ge=yt)[Pt=Pt],W.call(Ge,Pt)&&vt(Xe,Ot)&&(Ot!==void 0||Pt in Ge)||Re(Ge,Pt,Ot))}return yt}():jt(et)&&!sr(et)||(at=typeof ae.constructor!="function"||ct(ae)?{}:oe(ie(ae))):pe=!1),pe&&(it.set(ae,at),ot(at,ae,De,Ve,it),it.delete(ae))),ke(re,ye,at)):(st=Be?Be(Rt(ne,bt),rt,bt+"",ne,se,ft):void 0,ke(ne,bt,st=st===void 0?rt:st))},vr)}function tt(Be,se){var Pe,Be=Be.__data__;return((Pe=typeof se)=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?se!=="__proto__":se===null)?Be[typeof se=="string"?"string":"hash"]:Be.map}function qe(ne,se){return ne=ne==null?void 0:ne[se],!jt(se=ne)||D&&D in se||!(sr(se)?H:L).test(function(Pe){if(Pe!=null){try{return B.call(Pe)}catch{}try{return Pe+""}catch{}}return""}(se))?void 0:ne}function ht(ne,se){var Pe=typeof ne;return(se=se??v)&&(Pe=="number"||Pe!="symbol"&&V.test(ne))&&-1<ne&&ne%1==0&&ne<se}function ct(ne){var se=ne&&ne.constructor;return ne===(typeof se=="function"&&se.prototype||Y)}function Rt(ne,se){if((se!=="constructor"||typeof ne[se]!="function")&&se!="__proto__")return ne[se]}gt=me?function(ne,se){return me(ne,"toString",{configurable:!0,enumerable:!1,value:(Pe=se,function(){return Pe}),writable:!0});var Pe}:Jt,Ct=dt=0;var gt,dt,Ct,nt=function(){var ne=te(),se=16-(ne-Ct);if(Ct=ne,0<se){if(800<=++dt)return arguments[0]}else dt=0;return gt.apply(void 0,arguments)};function vt(ne,se){return ne===se||ne!=ne&&se!=se}var Qt=He(function(){return arguments}())?He:function(ne){return Kt(ne)&&W.call(ne,"callee")&&!le.call(ne,"callee")},rr=Array.isArray;function Ze(ne){return ne!=null&&Ft(ne.length)&&!sr(ne)}var Mt=xe||function(){return!1};function sr(ne){if(jt(ne))return(ne=Le(ne))==E||ne==_||ne==w||ne==A}function Ft(ne){return typeof ne=="number"&&-1<ne&&ne%1==0&&ne<=v}function jt(ne){var se=typeof ne;return ne!=null&&(se=="object"||se=="function")}function Kt(ne){return ne!=null&&typeof ne=="object"}var ir,Vt=j?(ir=j,function(ne){return ir(ne)}):function(ne){return Kt(ne)&&Ft(ne.length)&&!!I[Le(ne)]};function vr(ne){if(Ze(ne)){var se,Pe=ne,Be=!0,ft=rr(Pe),rt=!ft&&Qt(Pe),bt=!ft&&!rt&&Mt(Pe),re=!ft&&!rt&&!bt&&Vt(Pe),pe=ft||rt||bt||re,ye=pe?function(et,ae){for(var at=-1,Ge=Array(et);++at<et;)Ge[at]=ae(at);return Ge}(Pe.length,String):[],De=ye.length;for(se in Pe)!Be&&!W.call(Pe,se)||pe&&(se=="length"||bt&&(se=="offset"||se=="parent")||re&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||ht(se,De))||ye.push(se);return ye}var ot=ne;if(jt(ot)){var Ve,it=ct(ot),st=[];for(Ve in ot)(Ve!="constructor"||!it&&W.call(ot,Ve))&&st.push(Ve);return st}var St=[];if(ot!=null)for(var _t in Object(ot))St.push(_t);return St}Lt=function(ne,se,Pe){We(ne,se,Pe)};var Lt,Bt,Gt,mr,It=nt((Bt=F=function(ne,se){var Pe=-1,Be=se.length,rt=1<Be?se[Be-1]:void 0,ft=2<Be?se[2]:void 0,rt=3<Lt.length&&typeof rt=="function"?(Be--,rt):void 0;for(ft&&function(re,pe,ye){var De;if(jt(ye))return((De=typeof pe)=="number"?Ze(ye)&&ht(pe,ye.length):De=="string"&&pe in ye)&&vt(ye[pe],re)}(se[0],se[1],ft)&&(rt=Be<3?void 0:rt,Be=1),ne=Object(ne);++Pe<Be;){var bt=se[Pe];bt&&Lt(ne,bt,Pe)}return ne},mr=Jt,Gt=Z(Bt.length-1,0),function(){for(var ne=arguments,se=-1,Pe=Z(ne.length-Gt,0),Be=Array(Pe);++se<Pe;)Be[se]=ne[Gt+se];for(var se=-1,ft=Array(Gt+1);++se<Gt;)ft[se]=ne[se];ft[Gt]=mr(Be);var rt=Bt,bt=this,re=ft;switch(re.length){case 0:return rt.call(bt);case 1:return rt.call(bt,re[0]);case 2:return rt.call(bt,re[0],re[1]);case 3:return rt.call(bt,re[0],re[1],re[2])}return rt.apply(bt,re)}),F+"");function Jt(ne){return ne}l.exports=It},775:function(l){var s=Object.prototype.hasOwnProperty;function a(T){return"[Throws: "+(T?T.message:"?")+"]"}function f(T){var m=[];return function v(S){if(S===null||typeof S!="object")return S;if(m.indexOf(S)!==-1)return"[Circular]";if(m.push(S),typeof S.toJSON=="function")try{var w=v(S.toJSON());return m.pop(),w}catch(E){return a(E)}return w=Array.isArray(S)?S.map(v):Object.keys(S).reduce(function(E,_){return E[_]=v(function(P,R){return s.call(P,R),P[R]}(S,_)),E},{}),m.pop(),w}(T)}l.exports=function(T,m,v){return JSON.stringify(f(T),m,v)},l.exports.ensureProperties=f}},y={},d.n=function(l){var s=l&&l.__esModule?function(){return l.default}:function(){return l};return d.d(s,{a:s}),s},d.d=function(l,s){for(var a in s)d.o(s,a)&&!d.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:s[a]})},d.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),d.o=function(l,s){return Object.prototype.hasOwnProperty.call(l,s)},d.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},d.nmd=function(l){return l.paths=[],l.children||(l.children=[]),l},o={},function(){d.r(o),d.d(o,{AACParser:function(){return l},AudioBody:function(){return pr},AvMultitrackType:function(){return fr},AvcSPS:function(){return Ie},BasicLoader:function(){return re},BitBuffer:function(){return _},Box:function(){return Ze},ByteBuffer:function(){return a},CTrackTypeMap:function(){return vt},Demuxer:function(){return Os},DiscardType:function(){return _e},EAudioCodecID:function(){return yt},EAudioPacketType:function(){return Pt},EFormatType:function(){return Z},EFrameType:function(){return Xt},EH264NALType:function(){return V},EH265NALType:function(){return I},EH266NALType:function(){return N},EHandlerType:function(){return xe},ELoaderStatus:function(){return se},EPID:function(){return Hr},ESampleFlag:function(){return nt},ESoundType:function(){return br},EStreamType:function(){return lr},ETSPacketType:function(){return yr},ETagType:function(){return rt},ETrackType:function(){return te},EVideoCodecID:function(){return mt},EVideoCommand:function(){return ar},EVideoPacketType:function(){return Et},ErrorCode:function(){return me},FLVParser:function(){return nn},FullBox:function(){return Mt},H264NAL:function(){return O},H265NAL:function(){return B},H266NAL:function(){return X},HLSParser:function(){return Mo},HevcSPS:function(){return qe},Loader:function(){return ot},LoaderError:function(){return bt},MP4Parser:function(){return bo},MP4RemuxStream:function(){return Ns},MPEGTSParser:function(){return $i},PAT:function(){return Io},PES:function(){return Lo},PMT:function(){return Oo},Remuxer:function(){return Qi},SOUND_RATE:function(){return Ot},SOUND_SIZE:function(){return xr},ScriptBody:function(){return Mr},TSHeader:function(){return Lr},TagHeader:function(){return Zt},VideoBody:function(){return Tr},VvcSPS:function(){return ht},esTypeMap:function(){return Ro}});var l={},s=(d.r(l),d.d(l,{AAC_DURATION:function(){return T},AAC_SAMPLING_FREQUENCIES:function(){return f},addADTSHeader:function(){return m},getADTSHeaderLength:function(){return S},getADTSLength:function(){return w},isADTS:function(){return v},readAACSamples:function(){return E}}),{}),a=(d.r(s),d.d(s,{Box:function(){return Ze},avc1:function(){return zr},avcC:function(){return sr},btrt:function(){return Bo},co64:function(){return gs},ctts:function(){return _s},dinf:function(){return Dt},dref:function(){return Ho},edts:function(){return Dt},elst:function(){return jo},esds:function(){return Ko},ftyp:function(){return Go},hdlr:function(){return Yo},hev1:function(){return on},hvc1:function(){return on},hvcC:function(){return Bt},mdat:function(){return Qo},mdhd:function(){return Jo},mdia:function(){return Dt},mfhd:function(){return as},mfra:function(){return Dt},minf:function(){return Dt},moof:function(){return os},moov:function(){return Dt},mp4a:function(){return Zo},mvex:function(){return ls},mvhd:function(){return es},pasp:function(){return ts},sdtp:function(){return us},sidx:function(){return cs},stbl:function(){return Dt},stco:function(){return ys},stsc:function(){return vs},stsd:function(){return ms},stss:function(){return bs},stsz:function(){return Ss},stts:function(){return Ts},tfdt:function(){return ds},tfhd:function(){return ps},tkhd:function(){return rs},traf:function(){return ss},trak:function(){return Dt},trex:function(){return hs},trun:function(){return fs},url:function(){return is},vmhd:function(){return ns},vvc1:function(){return Xo},vvcC:function(){return Er}}),R.fromUint8=function(n){return new R(n.buffer,n.byteOffset,n.byteLength)},R.concatUint8s=function(n){return this.concatUint8.apply(this,n)},R.concatUint8=function(){for(var n,r,c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return c.length<=1?c[0]||new Uint8Array(0):(n=new Uint8Array(c.reduce(function(k,U){return k+U.byteLength},0)),r=0,c.forEach(function(k){n.set(k,r),r+=k.byteLength}),n)},R.concat=function(n,r){return R.concatUint8(new Uint8Array(n),new Uint8Array(r)).buffer},Object.defineProperty(R.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),R.prototype.readFloat=function(n){var r=0;switch(n){case 4:r=this.dv.getFloat32(this.offset);break;case 8:r=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+n)}return this.offset+=n,r},R.prototype.back=function(n){this.offset-=n},R.prototype.skip=function(n){this.offset+=n},R.prototype.readInt=function(n){var r=this.offset;switch(this.offset+=n,n){case 1:return this.dv.getInt8(r);case 2:return this.dv.getInt16(r);case 4:return this.dv.getInt32(r);default:throw new Error("not supported for read byte with "+n)}},R.prototype.read=function(n){var r=this.offset;switch(this.offset+=n,n){case 1:return this.dv.getUint8(r);case 2:return this.dv.getUint16(r);case 3:return(this.dv.getUint16(r)<<8)+this.dv.getUint8(r+2);case 4:return this.dv.getUint32(r);default:return this.back(n-4),this.read(n-4)+this.dv.getUint32(r)*Math.pow(256,n-4)}},R.prototype.writeInt=function(n,r){var c=this.offset;switch(this.offset+=n,n){case 1:return this.dv.setInt8(c,r);case 2:return this.dv.setInt16(c,r);case 3:return this.dv.setInt8(c,r>>16),this.dv.setInt16(c+1,65535&r);case 4:return this.dv.setInt32(c,r);default:throw new Error("不支持Byte write "+n)}},R.prototype.write=function(n,r){var c=this.offset;switch(this.offset+=n,n){case 1:return this.dv.setUint8(c,r);case 2:return this.dv.setUint16(c,r);case 3:return this.dv.setUint8(c,r>>>16),this.dv.setUint16(c+1,65535&r);case 4:return this.dv.setUint32(c,r);default:throw new Error("不支持Byte write "+n)}},R.prototype.readToUint8=function(n){return n=new Uint8Array(this.dv.buffer,this.offset,n||this.unreadLength),this.offset+=n.byteLength,n},R.prototype.readToBuffer=function(n){return n=this.offset||n?this.dv.buffer.slice(this.offset,n?this.offset+n:void 0):this.dv.buffer,this.offset+=n.byteLength,n},R),f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],T=1024,m=function(n,k){var c=k.audioObjectType,ee=k.sampleRate,G=k.samplingFrequencyIndex,b=k.channelCount,k=k.numberOfRawDataBlocksInFrame,k=k===void 0?0:k,U=G,G=(G===0&&0<ee&&(U=f.indexOf(ee)),n.byteLength+7),ee=new Uint8Array(7);return ee[0]=255,ee[1]=241,ee[2]=c-1<<6,ee[2]|=U<<2,ee[2]|=(4&b)>>2,ee[3]=(3&b)<<6,ee[3]|=(6144&G)>>11,ee[4]=(2047&G)>>3,ee[5]=(7&G)<<5,ee[5]|=31,ee[6]=252,ee[6]|=3&k,a.concatUint8(ee,n)},v=function(n,r){return r<n.byteLength-1&&n[r]===255&&(246&n[r+1])==240},S=function(n,r){return 1&n[r+1]?7:9},w=function(n,r){return(3&n[r+3])<<11|n[r+4]<<3|(224&n[r+5])>>>5},E=function(n){for(var r,c,b=[],k=0,U=n.byteLength;k+6<U;)v(n,k)?(r=S(n,k),c=w(n,k),b.push({audioObjectType:1+(n[2]>>>6),sampleRate:f[n[2]>>>2&15],samplingFrequencyIndex:n[2]>>>2&15,channelCount:(1&n[2])<<2|n[3]>>>6,numberOfRawDataBlocksInFrame:0,data:n.subarray(k+r,k+c)}),k+=c):k++;return b},_=(P.fromByte=function(n,r){return new P(n.read(r),r<<3)},P.prototype.skip=function(n){this.offset+=n},P.prototype.read=function(n){var r=this.len-this.offset-n;if(0<=r){for(var c=0,b=0;b<n;b++)c+=1<<b;return this.offset+=n,this.num>>>r&c}return console.warn("bit 读取位数超过限制"),0},P);function P(n,r){this.num=n,this.len=r,this.offset=0}function R(n,r,c){this.dv=new DataView(n),this.offset=r||this.dv.byteOffset,this.start=this.offset,this.end=c?this.start+c:this.dv.byteLength}C.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},C.createVVCAnnexbStartCode=function(){return new Uint8Array([0,0,1])},C.createAVCCStartCode=function(n){return new Uint8Array([n>>24&255,n>>16&255,n>>8&255,255&n])},C.extractAVCCNAL=function(n,r){for(var c,b=[],k=new a(n.buffer,n.byteOffset,n.byteLength);k.unreadLength>r;){if((c=k.read(r+1))<=0||c>k.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",r,"size:",c);break}var U=k.offset-k.start;b.push(n.subarray(U,U+c)),k.skip(c)}return b},C.extractAnnexbNAL=function(n){for(var r=n.byteLength,c=[],b=0;b<r-3;)n[b]===0?n[b+1]===0?n[b+2]===0?n[b+3]===0?b++:(n[b+3]===1&&b+4<r&&c.push({prefixStart:b,start:b+4}),b+=4):(n[b+2]===1&&c.push({prefixStart:b,start:b+3}),b+=3):b+=2:b++;return c.length?c.map(function(k,U){return U=c[U+1],U?n.subarray(k.start,U.prefixStart):n.subarray(k.start)}):[]};var A=C;function C(){}var L,V;L=function(n,r){return(L=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},(q=V=V||{})[q.UNUSED=0]="UNUSED",q[q.NON_IDR_SLICE=1]="NON_IDR_SLICE",q[q.DP_A=2]="DP_A",q[q.DP_B=3]="DP_B",q[q.DP_C=4]="DP_C",q[q.IDR=5]="IDR",q[q.SEI=6]="SEI",q[q.SPS=7]="SPS",q[q.PPS=8]="PPS",q[q.DIVIDER=9]="DIVIDER",q[q.SEQUENCE_END=10]="SEQUENCE_END",q[q.STREAM_END=11]="STREAM_END",q[q.FILL=12]="FILL";var I,M,O=function(n){function r(ee){var G=n.call(this)||this,ee=new _(ee.read(1),8);return G.forbiddenZeroBit=ee.read(1),G.nalRefIdc=ee.read(2),G.nalType=ee.read(5),G}var c=r,b=n;if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function k(){this.constructor=c}return L(c,b),c.prototype=b===null?Object.create(b):(k.prototype=b.prototype,new k),r.extractNALType=function(U){return 31&U[0]},r.isSlice=function(U){return U=this.extractNALType(U),U>=V.NON_IDR_SLICE&&U<=V.IDR},r}(A),q=(M=function(n,r){return(M=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}M(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});(ae=I=I||{})[ae.TRAIL_N=0]="TRAIL_N",ae[ae.TRAIL_R=1]="TRAIL_R",ae[ae.TSA_N=2]="TSA_N",ae[ae.TSA_R=3]="TSA_R",ae[ae.STSA_N=4]="STSA_N",ae[ae.STSA_R=5]="STSA_R",ae[ae.RADL_N=6]="RADL_N",ae[ae.RADL_R=7]="RADL_R",ae[ae.RASL_N=8]="RASL_N",ae[ae.RASL_R=9]="RASL_R",ae[ae.VCL_N10=10]="VCL_N10",ae[ae.VCL_R11=11]="VCL_R11",ae[ae.VCL_N12=12]="VCL_N12",ae[ae.VCL_R13=13]="VCL_R13",ae[ae.VCL_N14=14]="VCL_N14",ae[ae.VCL_R15=15]="VCL_R15",ae[ae.BLA_W_LP=16]="BLA_W_LP",ae[ae.BLA_W_RADL=17]="BLA_W_RADL",ae[ae.BLA_N_LP=18]="BLA_N_LP",ae[ae.IDR_W_RADL=19]="IDR_W_RADL",ae[ae.IDR_N_LP=20]="IDR_N_LP",ae[ae.CRA=21]="CRA",ae[ae.VPS=32]="VPS",ae[ae.SPS=33]="SPS",ae[ae.PPS=34]="PPS",ae[ae.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",ae[ae.EOS=36]="EOS",ae[ae.EOB=37]="EOB",ae[ae.FILLER_DATA=38]="FILLER_DATA",ae[ae.SEI=39]="SEI",ae[ae.SEI_SUFFIX=40]="SEI_SUFFIX",ae[ae.INVALID=64]="INVALID",q(W,Y=A),W.extractNALType=function(n,r){return(126&n[r=r===void 0?0:r])>>1},W.isNonRefNALType=function(n){switch(n){case I.TRAIL_N:case I.STSA_N:case I.RADL_N:case I.RASL_N:case I.VCL_N10:case I.VCL_N12:case I.VCL_N14:return!0;default:return!1}},W.isNonRef=function(n){return this.isNonRefNALType(this.extractNALType(n))},W.isSlice=function(n){return n=this.extractNALType(n),n>=I.TRAIL_N&&n<=I.CRA},W.littleEndian=function(){var n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256},W.parseHVCVideoData=function(n,r){for(var c=n.byteLength,b=new DataView(n.buffer,n.byteOffset,n.byteLength),k=[],U=0,G=0+r,ee=this.littleEndian,ce=!1;U<c;){if(c<=U+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+G+", offset = "+U+", dataSize = "+c);break}var fe=b.getUint32(U,!ee);if(c-4<fe)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+G+", NaluSize > DataSize!");var Te=b.getUint8(U+4)>>1&63,Ee=(16<=Te&&Te<=23&&(ce=!0),0+U+4),Te={type:Te,data:n.subarray(Ee,Ee+fe)};k.push(Te),U+=4+fe}return{keyframe:ce,units:k}};var N,j,Y,B=W,ae=(j=function(n,r){return(j=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}j(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});function W(c){var r=Y.call(this)||this,c=new _(c.read(2),16);return r.forbiddenZeroBit=c.read(1),r.nalType=c.read(6),r.nhLayerId=c.read(6),r.nhTimeId=c.read(3),r}(q=N=N||{})[q.VVC_TRAIL_NUT=0]="VVC_TRAIL_NUT",q[q.VVC_STSA_NUT=1]="VVC_STSA_NUT",q[q.VVC_RADL_NUT=2]="VVC_RADL_NUT",q[q.VVC_RASL_NUT=3]="VVC_RASL_NUT",q[q.VVC_RSV_VCL_4=4]="VVC_RSV_VCL_4",q[q.VVC_RSV_VCL_5=5]="VVC_RSV_VCL_5",q[q.VVC_RSV_VCL_6=6]="VVC_RSV_VCL_6",q[q.VVC_IDR_W_RADL=7]="VVC_IDR_W_RADL",q[q.VVC_IDR_N_LP=8]="VVC_IDR_N_LP",q[q.VVC_CRA_NUT=9]="VVC_CRA_NUT",q[q.VVC_GDR_NUT=10]="VVC_GDR_NUT",q[q.VVC_RSV_IRAP_11=11]="VVC_RSV_IRAP_11",q[q.VVC_OPI_NUT=12]="VVC_OPI_NUT",q[q.VVC_DCI_NUT=13]="VVC_DCI_NUT",q[q.VVC_VPS_NUT=14]="VVC_VPS_NUT",q[q.VVC_SPS_NUT=15]="VVC_SPS_NUT",q[q.VVC_PPS_NUT=16]="VVC_PPS_NUT",q[q.VVC_PREFIX_APS_NUT=17]="VVC_PREFIX_APS_NUT",q[q.VVC_SUFFIX_APS_NUT=18]="VVC_SUFFIX_APS_NUT",q[q.VVC_PH_NUT=19]="VVC_PH_NUT",q[q.VVC_AUD_NUT=20]="VVC_AUD_NUT",q[q.VVC_EOS_NUT=21]="VVC_EOS_NUT",q[q.VVC_EOB_NUT=22]="VVC_EOB_NUT",q[q.VVC_PREFIX_SEI_NUT=23]="VVC_PREFIX_SEI_NUT",q[q.VVC_SUFFIX_SEI_NUT=24]="VVC_SUFFIX_SEI_NUT",q[q.VVC_FD_NUT=25]="VVC_FD_NUT",q[q.VVC_RSV_NVCL_26=26]="VVC_RSV_NVCL_26",q[q.VVC_RSV_NVCL_27=27]="VVC_RSV_NVCL_27",q[q.VVC_UNSPEC_28=28]="VVC_UNSPEC_28",q[q.VVC_UNSPEC_29=29]="VVC_UNSPEC_29",q[q.VVC_UNSPEC_30=30]="VVC_UNSPEC_30",q[q.VVC_UNSPEC_31=31]="VVC_UNSPEC_31",ae(H,D=A),H.parseNaluHeader=function(n){return{nuh_layer_id:63&n[0],nal_unit_type:n[1]>>3&31,nuh_temporal_id_plus1:7&n[1]}},H.extractNALType=function(n){return this.parseNaluHeader(n).nal_unit_type},H.isNonRefNALType=function(n){switch(n){case N.VVC_IDR_W_RADL:case N.VVC_IDR_N_LP:return!0;default:return!1}},H.isNonRef=function(n){return this.isNonRefNALType(this.extractNALType(n))},H.isSlice=function(n){return n=this.extractNALType(n),n<=N.VVC_RASL_NUT||n>=N.VVC_IDR_W_RADL&&n<=N.VVC_GDR_NUT},H.littleEndian=function(){var n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256},H.parseHVCVideoData=function(n,r){for(var c=n.byteLength,b=new DataView(n.buffer,n.byteOffset,n.byteLength),k=[],U=0,G=0+r,ee=this.littleEndian,ce=!1;U<c;){if(c<=U+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+G+", offset = "+U+", dataSize = "+c);break}var fe=b.getUint32(U,!ee);if(c-4<fe)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+G+", NaluSize > DataSize!");var Te=b.getUint8(U+4)>>1&63,Ee=(16<=Te&&Te<=23&&(ce=!0),0+U+4),Te={type:Te,data:n.subarray(Ee,Ee+fe)};k.push(Te),U+=4+fe}return{keyframe:ce,units:k}};var D,X=H,q=d(307),Q=d.n(q);function H(c){var r=D.call(this)||this,c=c.readToUint8(2),c={nuh_layer_id:63&c[0],nal_unit_type:c[1]>>3&31,nuh_temporal_id_plus1:7&c[1]};return r.forbiddenZeroBit=0,r.nalType=c.nal_unit_type,r.nhLayerId=c.nuh_layer_id,r.nhTimeId=c.nuh_temporal_id_plus1,r}function F(n,r){var c=!1;return Object.keys(r).forEach(function(b){Q()(n[b],r[b])||(n[b]=r[b],c=!0)}),c}function z(n){return n<10?"0"+n:n}var ae=d(775),ie=d.n(ae),he=typeof performance<"u"&&typeof performance.now=="function";function le(){return(he?performance:Date).now()}var Se;(q=Se=Se||{})[q.TRACE=-1]="TRACE",q[q.DEBUG=0]="DEBUG",q[q.LOG=1]="LOG",q[q.INFO=2]="INFO",q[q.WARN=10]="WARN",q[q.ERROR=11]="ERROR",q[q.NONE=1e3]="NONE";var _e,me,xe,Z,te,K=Se.INFO,J=Se.ERROR,oe=2e3,de=le(),ue=[],ve=0,we=(dt.prototype._print=function(n,r){var c,b,k,U,G,ee,ce,fe;K<=n&&(c=le()-de,k="[".concat(Se[n],"][").concat(this.name,"][").concat((b=c,(k=!0)===void 0&&(k=!0),fe=Math.floor(b/1e3),k=k!==void 0&&k,((U=fe)===1/0?U:(ee=Math.floor(U/60),ee-=60*(G=Math.floor(ee/60)),U=Math.floor(U-60*(60*G+ee)),ce=[],(k||0<G)&&ce.push(z(G)),ce.push(z(ee)),ce.push(z(U)),ce.join(":")))+"."+Math.floor(1e3*(b-1e3*fe))),"]"),ue.push({id:ve++,level:n,name:this.name,timestamp:c,args:r,prefix:k,message:""}),ue.length>oe&&ue.shift(),J<=n)&&(G=(Se[n]||"").toLowerCase(),ee=console[G])&&ee.apply(void 0,function(Ee,Te,Ce){if(arguments.length===2)for(var ze,Ne=0,Ue=Te.length;Ne<Ue;Ne++)!ze&&Ne in Te||((ze=ze||Array.prototype.slice.call(Te,0,Ne))[Ne]=Te[Ne]);return Ee.concat(ze||Array.prototype.slice.call(Te))}([k],r,!1))},dt.prototype.getLogs=function(){return ue.map(function(n){return n.message=n.prefix+" "+n.args.map(function(r){return typeof r=="string"?r:ie()(r)}).join(" "),n})},dt.prototype.clear=function(){ue=[]},dt.prototype.setSize=function(n){oe=n},dt.prototype.setLevel=function(n){K=n},dt.prototype.getLevel=function(){return K},dt.prototype.setPrintLevel=function(n){J=n},dt.prototype.reset=function(){K=Se.INFO,J=Se.ERROR,oe=2e3,de=le(),ue=[],ve=0},dt.LogLevel=Se,dt),ge=(new we("common"),new we("demuxer")),ke=(gt.prototype.loadWord=function(){var n=this.data,b=this.bytesAvailable,r=n.byteLength-b,c=new Uint8Array(4),b=Math.min(4,b);if(b===0)throw new Error("no bytes available");c.set(n.subarray(r,r+b)),this.word=new DataView(c.buffer).getUint32(0),this.bitsAvailable=8*b,this.bytesAvailable-=b},gt.prototype.skipBits=function(n){var r;this.bitsAvailable>n||(n=(n-=this.bitsAvailable)-((r=n>>3)<<3),this.bytesAvailable-=r,this.loadWord()),this.word<<=n,this.bitsAvailable-=n},gt.prototype.readBits=function(n){var r=Math.min(this.bitsAvailable,n),c=this.word>>>32-r;return 32<n&&ge.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,0<this.bitsAvailable?this.word<<=r:0<this.bytesAvailable&&this.loadWord(),0<(r=n-r)&&this.bitsAvailable?c<<r|this.readBits(r):c},gt.prototype.skipLZ=function(){for(var n=0;n<this.bitsAvailable;++n)if(this.word&2147483648>>>n)return this.word<<=n,this.bitsAvailable-=n,n;return this.loadWord(),n+this.skipLZ()},gt.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},gt.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},gt.prototype.readUEG=function(){var n=this.skipLZ();return this.readBits(n+1)-1},gt.prototype.readEG=function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)},gt.prototype.readUByte=function(){return this.readBits(8)},gt.prototype.readUShort=function(){return this.readBits(16)},gt.prototype.readUInt=function(){return this.readBits(32)},gt.prototype.skipScalingList=function(n){for(var r=8,c=8,b=0;b<n;b++)r=(c=c!==0?(r+this.readEG()+256)%256:c)===0?r:c},gt),be=[100,110,122,244,44,83,86,118,128,138,144],Re=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],Ie=(Rt.generateCodec=function(n){return"avc1."+[n.generalProfileIdc,n.generalProfileCompatibility,n.generalLevelIdc].map(function(r){return(r=r.toString(16)).length<2?"0"+r:r}).join("")},Rt),Le=[1,2,2,1],He=[1,2,1,1],We=[1,2,2,1],tt=[1,2,1,1],qe=(ct.generateCodec=function(n){var r=["hvc1"],c=n.generalProfileSpace;r.push((0<c&&c<4?String.fromCharCode(64+c):"")+n.generalProfileIdc.toString()),r.push(n.generalProfileCompatibilityFlags.reverse().reduce(function(ee,ce){return ee<<1|ce},0).toString(16)),r.push((n.generalTierFlag?"H":"L")+n.generalLevelIdc);for(var b=!1,k=[],U=5;0<=U;U--){var G=n.generalConstraintIndicatorFlags[U];(G||b)&&(k.unshift(G.toString(16)),b=!0)}return r.concat(k).join(".")},ct),ht=function(n){this.log2CtuSizeMinus5=0,this.ptlDpbHrdParamsPresentFlag=0,this.gdrEnabledFlag=0,this.refPicResamplingEnabledFlag=0,this.resChangeInClvsAllowedFlag=0,this.picWidthMaxInLumasamples=0,this.picHeightMaxInLumasamples=0,this.conformanceWindowFlag=0,this.profileTierPresentFlag=0,this.generalProfileIdc=0,this.generalTierFlag=0,this.generalLevelIdc=0,this.ptlFrameOnlyConstraintFlag=0,this.ptlMultiLayerEnabledFlag=0,this.subLayerProfilePresentFlags=[],this.ptlSubLayerLevelPresentFlags=[],this.subLayerLevelIdc=[],this.ptlNumSubProfiles=0,this.generalSubProfileIdc=[],this.gciPresentFlag=0,this.width=0,this.height=0,this.pixelRatio=[],this.codec="vvc1.1.L48.CA";var r,c,b,k=new ke(n),U=0;if(this.spsId=k.readBits(4),this.vpsId=k.readBits(4),this.maxSubLayersMinus1=k.readBits(3),this.chromaFormatIdc=k.readBits(2),this.log2CtuSizeMinus5=k.readBits(2),this.ptlDpbHrdParamsPresentFlag=k.readBits(1),U+=16,this.ptlDpbHrdParamsPresentFlag){if(this.profileTierPresentFlag=1,this.profileTierPresentFlag&&(this.generalProfileIdc=k.readBits(7),this.generalTierFlag=k.readBits(1),U+=8),this.generalLevelIdc=k.readBits(8),U+=8,this.ptlFrameOnlyConstraintFlag=k.readBits(1),this.ptlMultiLayerEnabledFlag=k.readBits(1),U+=2,this.profileTierPresentFlag&&(this.gciPresentFlag=k.readBits(1),U+=1,this.gciPresentFlag)){k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=3,k.skipBits(4),k.skipBits(2),U+=6,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=10,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=6,k.skipBits(2),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=5,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=6,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=16,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=13,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=6;for(var G=k.readBits(8),ee=(U+=8,0),ce=(5<G&&(k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),U+=6,ee=6),0),ce=0;ce<G-ee;ce++)k.skipBits(1),U+=1}var n=8-U%8;for(k.skipBits(n),U+=n,ce=this.maxSubLayersMinus1-1;0<=ce;ce--)this.ptlSubLayerLevelPresentFlags[ce]=k.readBits(1),U+=1;for(k.skipBits(n=8-U%8),U+=n,ce=this.maxSubLayersMinus1-1;0<=ce;ce--)this.ptlSubLayerLevelPresentFlags[ce]&&(this.subLayerLevelIdc[ce]=k.readBits(8),U+=8);if(this.profileTierPresentFlag)for(this.ptlNumSubProfiles=k.readBits(8),ce=0;ce<this.ptlNumSubProfiles;ce++)this.generalSubProfileIdc[ce]=k.readBits(32),U+=32}this.gdrEnabledFlag=k.readBits(1),this.refPicResamplingEnabledFlag=k.readBits(1),U+=2,this.refPicResamplingEnabledFlag&&(this.resChangeInClvsAllowedFlag=k.readBits(1),U+=1),this.picWidthMaxInLumasamples=k.readUEG(),this.picHeightMaxInLumasamples=k.readUEG(),U+=16,this.conformanceWindowFlag=k.readBits(1),U+=1,this.width=this.picWidthMaxInLumasamples,this.height=this.picHeightMaxInLumasamples,this.conformanceWindowFlag&&(n=We[this.chromaFormatIdc],b=tt[this.chromaFormatIdc],r=k.readUEG()*n,n=k.readUEG()*n,c=k.readUEG()*b,b=k.readUEG()*b,this.width-=r+n,this.height-=c+b)};function ct(n){var r=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(ee){return r.generalProfileIdc===ee||r.generalProfileCompatibilityFlags[ee]};var c,b,k,U,G=new ke(n);for(this.vpsId=G.readBits(4),this.maxSubLayersMinus1=G.readBits(3),this.temporalIdNestingFlag=G.readBits(1),this.generalProfileSpace=G.readBits(2),this.generalTierFlag=G.readBits(1),this.generalProfileIdc=G.readBits(5),c=0;c<32;c++)this.generalProfileCompatibilityFlags[c]=G.readBits(1),this.generalProfileIdc===0&&0<c&&this.generalProfileCompatibilityFlags[c]&&(this.generalProfileIdc=c);for(c=0;c<6;c++)this.generalConstraintIndicatorFlags.push(G.readUByte());for(this.generalLevelIdc=G.readUByte(),c=0;c<this.maxSubLayersMinus1;c++)this.subLayerProfilePresentFlags[c]=G.readBits(1),this.subLayerLevelPresentFlags[c]=G.readBits(1);for(0<this.maxSubLayersMinus1&&G.skipBits(2*(8-this.maxSubLayersMinus1)),c=0;c<this.maxSubLayersMinus1;c++)this.subLayerProfilePresentFlags[c]&&G.skipBits(48),this.subLayerLevelPresentFlags[c]&&G.readUByte();this.spsId=G.readUEG(),this.codec=ct.generateCodec(this),this.chromaFormatIdc=G.readUEG(),this.chromaFormatIdc===3&&(this.separateColourPlaneFlag=G.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=G.readUEG(),this.height=G.readUEG(),G.readBits(1)&&(n=Le[this.chromaFormatIdc],U=He[this.chromaFormatIdc],b=G.readUEG()*n,n=G.readUEG()*n,k=G.readUEG()*U,U=G.readUEG()*U,this.width-=b+n,this.height-=k+U)}function Rt(U){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var r,c,b=new ke(U);if(this.generalProfileIdc=b.readUByte(),this.generalProfileCompatibility=b.readUByte(),this.generalLevelIdc=b.readUByte(),this.spsId=b.readUEG(),this.codec=Rt.generateCodec(this),-1<be.indexOf(this.generalProfileIdc)){if(this.chromaFormatIdc=b.readUEG(),this.chromaFormatIdc===3&&b.skipBits(1),b.skipUEG(),b.skipUEG(),b.skipBits(1),b.readBits(1))for(r=0,c=this.chromaFormatIdc!==3?8:12;r<c;r++)b.readBits(1)&&(r<6?b.skipScalingList(16):b.skipScalingList(64))}else this.chromaFormatIdc=1;if(b.skipUEG(),U=b.readUEG(),U===0)b.skipUEG();else if(U===1)for(b.skipBits(1),b.skipEG(),b.skipEG(),r=0,c=b.readUEG();r<c;r++)b.skipEG();b.skipUEG(),b.skipBits(1);var k,U=b.readUEG()+1,G=b.readUEG()+1,ee=b.readBits(1);ee||b.skipBits(1),this.height=G*(2-ee),b.skipBits(1),this.crop=b.readBits(1),this.crop&&(k=1<<(this.chromaFormatIdc===1||this.chromaFormatIdc===2?1:0),ee=2-ee<<(this.chromaFormatIdc===1?1:0),this.cropLeft=b.readUEG()*k,this.cropRight=b.readUEG()*k,this.cropTop=b.readUEG()*ee,this.cropBottom=b.readUEG()*ee),this.width=16*U-(this.cropRight+this.cropLeft),this.height=16*G-(this.cropTop+this.cropBottom),b.readBits(1)&&b.readBits(1)&&((k=b.readUByte())===255?(this.pixelRatio[0]=b.readUByte()<<8|b.readUByte(),this.pixelRatio[1]=b.readUByte()<<8|b.readUByte()):k<Re.length&&(this.pixelRatio=Re[k]))}function gt(n){this.data=n,this.bytesAvailable=n.byteLength,this.word=0,this.bitsAvailable=0}function dt(n){var r=this;this.trace=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.TRACE,c)},this.debug=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.DEBUG,c)},this.log=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.LOG,c)},this.info=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.INFO,c)},this.warn=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.WARN,c)},this.error=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return r._print(Se.ERROR,c)},this.name=n}(ae=_e=_e||{})[ae.NONE=-16]="NONE",ae[ae.DEFAULT=0]="DEFAULT",ae[ae.NONREF=8]="NONREF",ae[ae.BIDIR=16]="BIDIR",ae[ae.NONINTRA=24]="NONINTRA",ae[ae.NONKEY=32]="NONKEY",ae[ae.ALL=48]="ALL",(q=me=me||{})[q.ABORTED=1]="ABORTED",q[q.NETWORK=2]="NETWORK",q[q.DECODE=3]="DECODE",q[q.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",q[q.PARSER=1001]="PARSER",q[q.WEBGL_NOT_SUPPORTED=10005]="WEBGL_NOT_SUPPORTED",q[q.COROUTINE=20001]="COROUTINE",q[q.BUFFERING=20003]="BUFFERING",q[q.RENDERER=20005]="RENDERER",(ae=xe=xe||{}).VIDE="vide",ae.SOUN="soun",(q=Z=Z||{})[q.FLV=0]="FLV",q[q.MP4=1]="MP4",q[q.HLS=2]="HLS",q[q.MPEGTS=3]="MPEGTS",q[q.UNKNOWN=4]="UNKNOWN",(ae=te=te||{})[ae.UNKNOWN=0]="UNKNOWN",ae[ae.VIDEO=1]="VIDEO",ae[ae.AUDIO=2]="AUDIO";function Ct(n,r){var c=n.offset;this.start=r,this.size=n.read(4),this.type=String.fromCharCode(n.read(1),n.read(1),n.read(1),n.read(1)).trim(),this.size===1&&(this.size=n.read(8)),this.length=n.offset-c}(q={})[xe.VIDE]=te.VIDEO,q[xe.SOUN]=te.AUDIO;var nt,vt=q,q=((ae=nt=nt||{})[ae.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",ae[ae.IS_NON_SYNC=65536]="IS_NON_SYNC",ae[ae.PADDING_MASK=917504]="PADDING_MASK",ae[ae.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",ae[ae.DEPENDED_MASK=12582912]="DEPENDED_MASK",ae[ae.DEPENDS_MASK=50331648]="DEPENDS_MASK",ae[ae.DEPENDS_NO=33554432]="DEPENDS_NO",ae[ae.DEPENDS_YES=16777216]="DEPENDS_YES",Lt=function(n,r){return(Lt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Lt(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}),Qt=function(){return(Qt=Object.assign||function(n){for(var r,c=1,b=arguments.length;c<b;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(n[k]=r[k]);return n}).apply(this,arguments)},rr=new Date("1904-01-01T00:00:00Z").getTime(),Ze=(Jt.prototype.append=function(n){this.children.push(n)},Jt.mapBoxToJSON=function(n){return Qt({box:n},n.children.reduce(function(r,U){var b=U.header.type,k=r[b],U=Jt.mapBoxToJSON(U);return k?Array.isArray(k)?k.push(U):r[b]=[k,U]:r[b]=U,r},{}))},Jt),Mt=(q(It,vr=Ze),It);Vt=function(n,r){return(Vt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Vt(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(mr,ir=Ze);var sr=mr;Kt=function(n,r){return(Kt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};function Ft(n){for(var r=n.byteLength,c=[],b=1;b<r-2;)n[b]===0&&n[b+1]===0&&n[b+2]===3?c.push(b+=2):b++;if(c.length===0)return n;for(var k=r-c.length,U=new Uint8Array(k),G=0,b=0;b<k;G++,b++)G===c[0]&&(G++,c.shift()),U[b]=n[G];return U}(function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Kt(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)})(Gt,jt=Ze);var jt,Kt,ir,Vt,vr,Lt,Bt=Gt;function Gt(n,r){var c,b=jt.call(this,n,r)||this;b.nalus=[],b.vps=[],b.sps=[],b.pps=[],b.sei=[],b.configVersion=r.read(1),c=new _(r.read(1),8),b.generalProfileSpace=c.read(2),b.generalTierFlag=c.read(1),b.generalProfileIdc=c.read(5),c=new _(r.read(4),32),b.generalProfileCompatibilityFlags=Array.from(new Array(32)).map(function(){return c.read(1)}),b.generalConstraintIndicatorFlags=Array.from(new Array(6)).map(function(){return r.read(1)}),b.generalLevelIdc=r.read(1),b.minSpatialSegmentationIdc=4095&r.read(2),b.parallelismType=3&r.read(1),b.chromaFormatIdc=3&r.read(1),b.bitDepthLumaMinus8=7&r.read(1),b.bitDepthChromaMinus8=7&r.read(1),b.avgFrameRate=r.read(2),c=new _(r.read(1),8),b.constantFrameRate=c.read(2),b.numTemporalLayers=c.read(3),b.temporalIdNested=c.read(1),b.lengthSizeMinusOne=c.read(2),b.nalus=[];for(var k=r.read(1),U=0;U<k;U++){var G=[],ee=(c=new _(r.read(1),8)).read(1);c.read(1);for(var ce=c.read(6),fe=r.read(2),Ee=0;Ee<fe;Ee++)G.push(new Uint8Array(r.read(2)).map(function(){return r.read(1)}));b.nalus.push({completeness:ee,type:ce,data:G}),ce===I.VPS?G.forEach(function(Te){return b.vps.push(Te)}):ce===I.SPS?G.forEach(function(Te){return b.sps.push(Te)}):ce===I.PPS?G.forEach(function(Te){return b.pps.push(Te)}):ce===I.SEI&&G.forEach(function(Te){return b.sei.push(Te)})}return b.codec=qe.generateCodec(b),b}function mr(n,r){var c=ir.call(this,n,r)||this;c.sps=[],c.pps=[],c.configVersion=r.read(1),c.generalProfileIdc=r.read(1),c.generalProfileCompatibility=r.read(1),c.generalLevelIdc=r.read(1),c.lengthSizeMinusOne=3&r.read(1),c.numOfSequenceParameterSets=31&r.read(1);for(var b,U=0,k=[],U=0;U<c.numOfSequenceParameterSets;U++){for(b=r.read(2),k=[];b--;)k.push(r.read(1));c.sps.push(new Uint8Array(k))}for(c.numOfPictureParameterSets=31&r.read(1),U=0;U<c.numOfPictureParameterSets;U++){for(b=r.read(2),k=[];b--;)k.push(r.read(1));c.pps.push(new Uint8Array(k))}return c.codec=Ie.generateCodec(c),c}function It(n,r){return n=vr.call(this,n,r)||this,n.version=r.read(1),n.flag=r.read(3),n}function Jt(n,r){this.children=[],this.isContainer=!1,this.toStandardTime=function(c){return c&&rr+1e3*c},this.header=n}function ne(){var n=this;this._eventMap={},this.listeners=function(r){return n._eventMap[r]||[]},this.emit=function(r,c){return r=n._eventMap[r],!!Array.isArray(r)&&(r.forEach(function(b){return b(c)}),!0)},this.off=function(r,c){var b=n._eventMap[r];return Array.isArray(b)&&(n._eventMap[r]=b.filter(function(k){return k!==c})),n},this.removeAllListeners=function(r){return r===void 0?n._eventMap={}:n._eventMap[r]&&(n._eventMap[r]=[]),n},this.on=function(r,c){return n._eventMap[r]?n._eventMap[r].push(c):n._eventMap[r]=[c],n},this.once=function(r,c){return n.on(r,function b(){for(var k=[],U=0;U<arguments.length;U++)k[U]=arguments[U];n.off(r,b),c.apply(n,k)}),n},this.proxy=function(r,c){c.forEach(function(b){n.on(b,function(){for(var k=[],U=0;U<arguments.length;U++)k[U]=arguments[U];k.unshift(b),r.emit.apply(r,k)})})},this.proxyOnce=function(r,c){c.forEach(function(b){n.once(b,function(){for(var k=[],U=0;U<arguments.length;U++)k[U]=arguments[U];k.unshift(b),r.emit.apply(r,k)})})}}Pe=function(n,r){return(Pe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};var se,Pe,Be,ft,rt,ae=function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Pe(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)},bt=((q=se=se||{})[q.IDLE=0]="IDLE",q[q.LOADING=1]="LOADING",q[q.SUSPENGING=2]="SUSPENGING",q[q.ERROR=3]="ERROR",ft=Error,ae(De,ft),De),re=(ae(ye,Be=ne),Object.defineProperty(ye.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),ye.prototype._changeStatus=function(n){this.status!==n&&(ge.log("loader status changed: ".concat(se[this.status]," -> ").concat(se[n])),this.status=n)},ye.prototype.jump=function(n){this.offset=n},ye.prototype.load=function(n,r,c){return this.reset(),this.url=n,this.loadRange(r,c)},ye.prototype.resume=function(){return this.loadRange(this.offset)},ye.prototype.suspend=function(){var n=this.status;this._abort(),n===se.LOADING&&(this._changeStatus(se.SUSPENGING),this.emit("suspend",void 0))},ye.prototype.abort=function(){var n=this.status;this._abort(),n!==se.SUSPENGING&&n!==se.LOADING||this.emit("abort",void 0)},ye.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},ye.prototype.destroy=function(){this.removeAllListeners(),this.reset()},ye),pe={isIos:!1,isDingtalk:!1,isQQBrowser:!1},q=(window.navigator.userAgent||"").toLowerCase();function ye(n){n===void 0&&(n={});var r=Be.call(this)||this;return r.timeout=15e3,r.total=1/0,r.offset=0,r.status=se.IDLE,r.url="",r._handleError=function(c){c.name!=="AbortError"&&(r._changeStatus(se.ERROR),r.emit("error",{code:me.NETWORK,message:c.message,origin:c}))},r.timeout=n.timeout||r.timeout,r}function De(n){return ft.call(this,n)||this}/(iPhone\sOS)\s([\d_]+)/i.test(q)&&(pe.isIos=!0),-1<q.indexOf("dingtalk")?pe.isDingtalk=!0:-1<q.indexOf("qqbrowser")&&(pe.isQQBrowser=!0),et=function(n,r){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}et(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Tt,_t=re),Tt.isSupported=function(){return pe.isIos&&(pe.isDingtalk||pe.isQQBrowser)?(console.log("ios","isDingtalk",pe.isDingtalk,"isQQBrowser",pe.isQQBrowser),!1):typeof AbortController<"u"&&typeof ReadableStream<"u"},Tt.prototype.loadRange=function(n,r){var c=this;if(n===void 0&&(n=0),r===void 0&&(r=1/0),!this.url||n>=this.total||this.status===se.LOADING||this.status===se.ERROR)return u.resolve(!1);ge.info("执行load, ".concat(this.total," from=").concat(n," to=").concat(r," url=").concat(this.url)),this.abort();var b=new Headers,k=0<n||r<1/0;return k&&(r=Math.min(this.total-1,r),b.set("Range","bytes=".concat(n,"-").concat(r===1/0?"":r))),this._changeStatus(se.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:b,signal:this.controller.signal}).then(function(U){if(clearTimeout(c.timer),200<=U.status&&U.status<300){var G;if(c.offset=n,k?(ee=U.headers.get("Content-Range")||"",c.total=Number(ee.split("/")[1])||c.total):c.total=Number(U.headers.get("Content-Length"))||c.total,U.body)return G=U.body.getReader(),function ce(){return G.read().then(function(fe){return fe.done?(c.total===1/0&&(c.total=c.offset),c.controller=null,c._changeStatus(se.IDLE),c.emit("loadend",void 0),!0):(c.offset+=fe.value.byteLength,c.emit("progress",{offset:c.offset-fe.value.byteLength,data:fe.value}),ce())})}();if(U.arrayBuffer)return U.arrayBuffer().then(function(ce){return c.offset+=ce.byteLength,c.emit("progress",{offset:c.offset-ce.byteLength,data:new Uint8Array(ce)}),c.controller=null,c._changeStatus(se.IDLE),c.emit("loadend",void 0),!0})}var ee=new bt("媒体流数据不存在: ".concat(c.url));throw ee.response=U,ee}).catch(function(U){return clearTimeout(c.timer),c._handleError(U),!1})},ae=Tt,St=function(n,r){return(St=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}St(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(lt,st=re),lt.prototype._abort=function(){var n=this.xhr;n&&(n.onerror=null,n.onprogress=null,n.onloadend=null,n.onreadystatechange=null,n.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(se.IDLE)},lt.prototype.loadRange=function(n,r){var c=this;return n===void 0&&(n=0),r===void 0&&(r=1/0),!this.url||n>=this.total||this.status===se.LOADING||this.status===se.ERROR?u.resolve(!1):(this.abort(),new u(function(b,k){c.xhr=new XMLHttpRequest,c._resolve=b;function U(fe){var Ee,Te=G.responseText,Ce=Te.length,ze=ce,Ne=c.offset,Ue=Ce-ze;0<Ue&&(c.offset+=Ue),!ee&&fe&&c.total===1/0&&(c.total=c.offset),0<Ue&&(ce=Ce,c.emit("progress",{offset:Ne,data:(Ee=Te.substring(ze,Ce),new Uint8Array(Ee.length).map(function(je,Ae){return Ee.charCodeAt(Ae)}))}))}var G=c.xhr,ee=0<n||r<1/0,ce=(G.open("GET",c.url),ee&&G.setRequestHeader("Range","bytes=".concat(n,"-").concat(r===1/0?"":r)),G.onreadystatechange=function(){var fe;G.readyState===G.HEADERS_RECEIVED&&200<=G.status&&G.status<300&&(ee?(fe=G.getResponseHeader("Content-Range")||"",c.total=Number(fe.split("/")[1])||c.total):c.total=Number(G.getResponseHeader("Content-Length"))||c.total),G.readyState>=G.HEADERS_RECEIVED&&clearTimeout(c._timer)},c.offset=n,0);G.timeout=c.timeout,G.onprogress=function(){U(!1)},G.onloadend=function(){U(!0),c.xhr=null,c._changeStatus(se.IDLE),c.emit("loadend",void 0),b(!0)},G.onerror=function(fe){c.xhr=null,fe=new Error(fe.constructor.name),c._handleError(fe),k(fe)},G.overrideMimeType("text/plain; charset=x-user-defined"),c._changeStatus(se.LOADING),c.emit("loadstart",void 0),c._timer=setTimeout(c.triggerTimeout,c.timeout),G.send()}))};var q=lt,ot=ae.isSupported()?ae:q;it=function(n,r){return(it=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}it(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Xe,Ve=ne),Object.defineProperty(Xe.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),Xe.probe=function(n){throw new Error("parser should implements static probe")},Xe.prototype.onProgress=function(n){},Xe.prototype.onLoadEnd=function(){},Xe.prototype.load=function(n){return this.reset(),this.loader.load(n)},Xe.prototype.suspend=function(){return this.loader.suspend()},Xe.prototype.resume=function(){return this.loader.resume()},Xe.prototype.reset=function(){this.loader.reset(),this.metadata=null},Xe.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()};var Ve,it,st,St,_t,et,ae=Xe,at=(Ge.BUFFER_LENGTH=9,Ge);function Ge(c){this.signature=String.fromCharCode(c.read(1),c.read(1),c.read(1)),this.version=c.read(1);var r=c.read(1),c=(this.size=c.read(4),new _(r,8));c.read(5),this.hasAudio=!!c.read(1),c.read(1),this.hasVideo=!!c.read(1)}function Xe(n){var r=Ve.call(this)||this;return r.skipFrame=_e.DEFAULT,r.metadata=null,r.options=n,r.onProgress=r.onProgress.bind(r),r.onLoadEnd=r.onLoadEnd.bind(r),r.originLoader=new ot(r.options),r.customLoader=n.loader,r.loader.on("progress",r.onProgress),r.loader.on("loadend",r.onLoadEnd),r.skipFrame=n.skipFrame||_e.DEFAULT,r}function lt(){var n=st!==null&&st.apply(this,arguments)||this;return n.xhr=null,n._timer=-1,n._resolve=function(r){},n.triggerTimeout=function(){n._abort(),n._handleError(new Error("加载超时，请重试"))},n}function Tt(){var n=_t!==null&&_t.apply(this,arguments)||this;return n.controller=null,n.timer=-1,n._abort=function(){clearTimeout(n.timer),n.controller&&!n.controller.signal.aborted&&(n.controller.abort(),n.controller=null),n._changeStatus(se.IDLE)},n.triggerTimeout=function(){n._abort(),n._handleError(new bt("加载超时，请重试"))},n}(q=rt=rt||{})[q.AUDIO=8]="AUDIO",q[q.VIDEO=9]="VIDEO",q[q.SCRIPT=18]="SCRIPT",nr.BUFFER_LENGTH=11;var yt,Zt=nr;function nr(n){this.type=n.read(1),this.size=n.read(3),this.dts=n.read(3),this.dts|=n.read(1)<<24,n.skip(3)}(q=yt=yt||{})[q.PCM=0]="PCM",q[q.ADPCM=1]="ADPCM",q[q.MP3=2]="MP3",q[q.PCM_LE=3]="PCM_LE",q[q.NELLYMOSER_16KHZ_MONO=4]="NELLYMOSER_16KHZ_MONO",q[q.NELLYMOSER_8KHZ_MONO=5]="NELLYMOSER_8KHZ_MONO",q[q.NELLYMOSER=6]="NELLYMOSER",q[q.PCM_ALAW=7]="PCM_ALAW",q[q.PCM_MULAW=8]="PCM_MULAW",q[q.AAC=10]="AAC",q[q.SPEEX=11]="SPEEX";var br,Pt,Ot=[5512,11025,22050,44100],xr=[8,16];(q=br=br||{})[q.MONO=0]="MONO",q[q.STEREO=1]="STEREO",(q=Pt=Pt||{})[q.ADTS_HEADER=0]="ADTS_HEADER",q[q.RAW=1]="RAW",or.readAudioSpecificConfig=function(b){var b=new _(b.read(2),16),r=b.read(5),c=b.read(4),b=b.read(4);return{audioObjectType:r,sampleRate:f[c],samplingFrequencyIndex:c,channelCount:b}};var Ut,pr=or;function or(n){var r=new _(n.read(1),8);this.codecId=r.read(4),this.sampleRate=Ot[r.read(2)],this.sampleSize=xr[r.read(1)],this.soundType=r.read(1),this.packetType=n.read(1),this.data=n.readToUint8()}function Sr(n){var r=n.read(2);return Array.from(Array(r)).map(function(){var c=n.read(1);return 0<c?String.fromCharCode(c):""}).join("")}function kr(c){var r=Sr(c),c=hr(c);return{key:r,value:c.value,objectEnd:c.objectEnd}}function hr(n){var r={value:null,objectEnd:!1},c=n.read(1);switch(c){case Ut.NUMBER:r.value=n.readFloat(8);break;case Ut.BOOLEAN:r.value=!!n.read(1);break;case Ut.LONG_STRING:case Ut.STRING:r.value=Sr(n);break;case Ut.OBJECT_START:r.value=function(b){for(var k={};0<b.unreadLength;){var U=kr(b);if(U.objectEnd)break;k[U.key]=U.value}return k}(n);break;case Ut.ECMA_ARRAY:r.value=function(b){for(var k=b.read(4),U={};0<k--;){var G=kr(b);U[G.key]=G.value}return U}(n);break;case Ut.OBJECT_END:r.objectEnd=!0;break;case Ut.STRICT_ARRAY:r.value=function(b){for(var k=b.read(4),U=[];0<k--;){var G=hr(b);U.push(G.value)}return U}(n);break;case Ut.DATE:r.value=new Date(n.readFloat(8)+60*n.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",c)}return r}(q=Ut=Ut||{})[q.NUMBER=0]="NUMBER",q[q.BOOLEAN=1]="BOOLEAN",q[q.STRING=2]="STRING",q[q.OBJECT_START=3]="OBJECT_START",q[q.NULL=5]="NULL",q[q.UNDEFINED=6]="UNDEFINED",q[q.REFERENCE=7]="REFERENCE",q[q.ECMA_ARRAY=8]="ECMA_ARRAY",q[q.OBJECT_END=9]="OBJECT_END",q[q.STRICT_ARRAY=10]="STRICT_ARRAY",q[q.DATE=11]="DATE",q[q.LONG_STRING=12]="LONG_STRING";var Xt,ar,mt,Et,fr,Mr=function(n){this.name=hr(n).value,this.value=hr(n).value};(q=Xt=Xt||{})[q.KEY=1]="KEY",q[q.INTER=2]="INTER",q[q.DISP_INTER=3]="DISP_INTER",q[q.GENERATED_KEY=4]="GENERATED_KEY",q[q.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD",(q=ar=ar||{})[q.STARTSEEK=0]="STARTSEEK",q[q.ENDSEEK=1]="ENDSEEK",(q=mt=mt||{})[q.JPEG=1]="JPEG",q[q.H263=2]="H263",q[q.SCREEN=3]="SCREEN",q[q.VP6=4]="VP6",q[q.VP6A=5]="VP6A",q[q.SCREEN2=6]="SCREEN2",q[q.H264=7]="H264",q[q.REALH263=8]="REALH263",q[q.MPEG4=9]="MPEG4",q[q.H265=12]="H265",q[q.H266=14]="H266",(q=Et=Et||{})[q.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",q[q.AVC_NALU=1]="AVC_NALU",q[q.AVC_END=2]="AVC_END",q[q.COCED_FRAMES_X=3]="COCED_FRAMES_X",q[q.METADATA=4]="METADATA",q[q.MPEG2_TS_SEQUENCE_START=5]="MPEG2_TS_SEQUENCE_START",q[q.MULTI_TRACK=6]="MULTI_TRACK",(q=fr=fr||{})[q.OneTrackOneCodec=0]="OneTrackOneCodec",q[q.ManyTracksOneCodec=1]="ManyTracksOneCodec",q[q.ManyTracksManyCodecs=2]="ManyTracksManyCodecs";var er,Tr=function(n){this.videoCommand=ar.STARTSEEK,this.codecId=mt.H265,this.packetType=Et.AVC_NALU,this.cts=0,this.videoFourCC="";var r,c,b=new _(n.read(1),8);this.isExVideoHeader=b.read(1),this.type=b.read(3),this.videoFrameType=this.type,this.isExVideoHeader===0&&(this.codecId=b.read(4),this.packetType=n.read(1),this.type===Xt.VIDEO_INFO_CMD)&&(this.videoCommand=n.read(1)),this.isExVideoHeader===1&&((b=b.read(4))!=Et.METADATA&&this.videoFrameType===Xt.VIDEO_INFO_CMD?this.videoCommand=n.read(1):b==Et.MULTI_TRACK?(c=(r=new _(n.read(1),8)).read(4),b=r.read(4),c==fr.ManyTracksManyCodecs&&(String.fromCharCode(n.read(1)),this.videoFourCC=String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1)))):this.videoFourCC=String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1))+String.fromCharCode(n.read(1)),this.packetType=b),this.cts=n.read(3)+4286578688^4286578688,this.data=n.readToUint8()},kt={isFirefox:!1,isOpera:!1,isTrident:!1,isEdge:!1,isChrome:!1,isSafari:!1,isMQQBrowser:!1,isMobile:!1,isIos:!1,isDingtalk:!1},q=window.navigator!==void 0,Me=q?window.navigator.userAgent:"";-1<Me.indexOf("MQQBrowser")?kt.isMQQBrowser=!0:-1<Me.indexOf("Firefox")?kt.isFirefox=!0:-1<Me.indexOf("Opera")||-1<Me.indexOf("OPR")?kt.isOpera=!0:-1<Me.indexOf("Trident")?kt.isTrident=!0:-1<Me.indexOf("Edge")?kt.isEdge=!0:-1<Me.indexOf("Chrome")?(kt.isChrome=!0,(Me.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1]):-1<Me.indexOf("Safari")||-1<Me.indexOf("iPhone")||-1<Me.indexOf("iPad")||-1<Me.indexOf("iPod")?kt.isSafari=!0:-1<Me.toLowerCase().indexOf("dingtalk")&&(kt.isDingtalk=!0),/(iPhone\sOS)\s([\d_]+)/i.test(Me)&&(kt.isIos=!0),q&&("maxTouchPoints"in(Me=window.navigator)?kt.isMobile=0<Me.maxTouchPoints:"msMaxTouchPoints"in Me?kt.isMobile=0<Me.msMaxTouchPoints:(q=(q=window.matchMedia)==null?void 0:q.call(window,"(pointer:coarse)"))&&q.media==="(pointer:coarse)"?kt.isMobile=!!q.matches:"orientation"in window?kt.isMobile=!0:(q=Me.userAgent,kt.isMobile=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(q)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(q))),ii=function(n,r){return(ii=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ii(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(gn,cn=Ze);var Er=gn;ri=function(n,r){return(ri=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ri(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Yt,Ur=ae),Yt.probe=function(n){return!(n.byteLength<9)&&new at(new a(n.buffer,n.byteOffset,n.byteLength)).signature==="FLV"},Yt.prototype.parse=function(n,r){var c=[];if(n.byteLength){this.unhandleBuffer&&(n=a.concat(this.unhandleBuffer,n),r-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var b=new a(n);for(!this.header&&b.unreadLength>=at.BUFFER_LENGTH&&(this.header=new at(b),this.header.hasVideo===!1&&(this.header.hasVideo=!0),b.skip(this.header.size-at.BUFFER_LENGTH));b.unreadLength>4+Zt.BUFFER_LENGTH;){b.skip(4);var k=new Zt(b);if(!(b.unreadLength>=k.size)){b.back(4+Zt.BUFFER_LENGTH);break}var U=new a(b.buffer,b.offset,k.size);switch(b.skip(k.size),k.type){case rt.VIDEO:c=c.concat(this.parseVideoBody(k,U,b.offset+r));break;case rt.AUDIO:c=c.concat(this.parseAudioBody(k,U,b.offset+r));break;case rt.SCRIPT:this.parseScriptBody(k,U);break;default:return ge.warn("unknown tag type",k.type),c}}this.unhandleBuffer=b.unreadLength?b.readToBuffer():null}return c},Yt.prototype.checkMetadata=function(){var n=this.flvMetadata,r=this.header;if(console.log("checkMetadata flvMetadata:",n,"header:",r,", this.metadata:",this.metadata),r&&!this.metadata){var c=[];if(r.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,this.videoTrackMeta.fps=n==null?void 0:n.framerate,c.push(this.videoTrackMeta)}if(r.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,c.push(this.audioTrackMeta)}var r=this.options,b=r.live,r=r.progressive;this.metadata={formatType:Z.FLV,live:!!b,progressive:!b&&!!r,url:this.loader.url,basePTS:Math.min.apply(Math,c.map(function(U){return U.basePTS||0})),baseDTS:Math.min.apply(Math,c.map(function(U){return U.baseDTS||0})),timescale:1e3,duration:1e3*((n==null?void 0:n.duration)||1/0),tracks:c},console.log("checkMetadata loadedmetadata",this.metadata),this.emit("loadedmetadata",this.metadata)}},Yt.prototype.parseVideoBody=function(n,k,c){var b=this,k=new Tr(k),U=(this.emit("loadedtag",{header:n,body:k}),[]),G=k.type===Xt.KEY,ee=!1;if(k.data.length)if(k.packetType===Et.AVC_SEQUENCE_HEADER){var ce,fe,Ee,Te=this.flvMetadata||{},Ce={type:te.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:Te.width||0,height:Te.height||0,codec:"",pixelRatio:[],live:((Te=this.metadata)==null?void 0:Te.live)||!1};k.codecId===mt.H264?(fe=new Ct(new a(new ArrayBuffer(8)),0),Ee=new a(k.data.buffer,k.data.byteOffset,k.data.byteLength),Te=new sr(fe,Ee),Ce.pps=Te.pps,Ce.sps=Te.sps,Ce.codec=Te.codec,(Te=Te.sps[0])&&(ce=new Ie(Te.subarray(1)),Ce.width=ce.width,Ce.height=ce.height)):k.codecId===mt.H265?(A.extractAnnexbNAL(k.data).forEach(function(Qe){var Oe=new a(Qe.buffer,Qe.byteOffset,Qe.length),Fe=new B(Oe);Fe.nalType<I.ACCESS_UNIT_DELIMITER&&(Fe.nalType===I.SPS?(Oe=new qe(Ft(Oe.readToUint8())),Ce.sps.push(Qe),Ce.codec=Oe.codec,console.log("thisvideoTrackMeta sps.codec=",Oe.codec),Ce.width=Oe.width,Ce.height=Oe.height):Fe.nalType===I.VPS?Ce.vps.push(Qe):Fe.nalType===I.PPS&&Ce.pps.push(Qe))}),Ce.codec===""&&(fe=new Ct(new a(new ArrayBuffer(8)),0),Ee=new a(k.data.buffer,k.data.byteOffset,k.data.byteLength),Te=new Bt(fe,Ee),Ce.vps=Te.vps,Ce.pps=Te.pps,Ce.sps=Te.sps,Ce.sei=Te.sei,Ce.codec=Te.codec,Te.sps&&0<Te.sps.length&&(ce=new qe(Ft(Te.sps[0])),Ce.width=ce.width,Ce.height=ce.height),this.isHVCC=!0)):k.codecId===mt.H266&&(A.extractAnnexbNAL(k.data).forEach(function(Qe){var Oe=new a(Qe.buffer,Qe.byteOffset,Qe.length),Fe=new X(Oe);Fe.nalType<N.VVC_UNSPEC_31&&(Fe.nalType===N.VVC_SPS_NUT?(Oe=new ht(Ft(Oe.readToUint8())),Ce.width=Oe.width,Ce.height=Oe.height,Ce.codec=Oe.codec,Ce.sps.push(Qe)):Fe.nalType===N.VVC_VPS_NUT?Ce.vps.push(Qe):Fe.nalType===N.VVC_PPS_NUT&&Ce.pps.push(Qe))}),Ce.codec==="")&&(fe=new Ct(new a(new ArrayBuffer(8)),0),Ee=new a(k.data.buffer,k.data.byteOffset,k.data.byteLength),Te=new Er(fe,Ee),Ce.vps=Te.vps,Ce.pps=Te.pps,Ce.sps=Te.sps,Ce.sei=Te.sei,Ce.codec=Te.codec,this.isHVCC=!0),this.videoTrackMeta=Ce,this.checkMetadata()}else{var ze=[];if(k.codecId===mt.H266){var Ne={type:te.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((ce=this.flvMetadata)==null?void 0:ce.width)||0,height:((fe=this.flvMetadata)==null?void 0:fe.height)||0,codec:"",pixelRatio:[],live:((Ee=this.metadata)==null?void 0:Ee.live)||!1},Ue=[],je=[],Ae=[],Ye=[],xt=A.extractAVCCNAL(k.data,3),ut=[],Te=(xt.forEach(function(Oe){var Fe=new a(Oe.buffer,Oe.byteOffset,Oe.length),wt=new X(Fe);7<=wt.nalType&&wt.nalType<=10&&(G=!0,b.videoTrackMeta&&0<b.videoTrackMeta.sps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.sps[0]),b.videoTrackMeta&&0<b.videoTrackMeta.pps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.pps[0]),b.videoTrackMeta&&0<b.videoTrackMeta.vps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.vps[0]),b.videoTrackMeta)&&0<b.videoTrackMeta.sei.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.sei[0]),ut.push(X.createAnnexbStartCode(),Oe),wt.nalType<N.VVC_UNSPEC_31&&(wt.nalType===N.VVC_SPS_NUT?(Fe=new ht(Ft(Fe.readToUint8())),Ne.width=Fe.width,Ne.height=Fe.height,Ne.codec=Fe.codec,Ue.push(Oe)):wt.nalType===N.VVC_VPS_NUT?je.push(Oe):wt.nalType===N.VVC_PPS_NUT?Ae.push(Oe):wt.nalType===N.VVC_PREFIX_SEI_NUT&&Ye.push(Oe)),ee=X.isNonRefNALType(wt.nalType)}),a.concatUint8s(ut));ze.push(Te),je.length&&(Ne.vps=je),Ue.length&&(Ne.sps=Ue),Ae.length&&(Ne.pps=Ae),Ye.length&&(Ne.sei=Ye),Ue.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],je.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.vps.push(Oe)}),Ue.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sps.push(Oe)}),Ae.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.pps.push(Oe)}),Ye.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sei.push(Oe)})):this.videoTrackMeta=Ne)}else if(k.codecId!==mt.H265||this.isHVCC){var xt=A.extractAVCCNAL(k.data,3),$e={type:te.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((ce=this.flvMetadata)==null?void 0:ce.width)||0,height:((fe=this.flvMetadata)==null?void 0:fe.height)||0,codec:"",pixelRatio:[],live:((Ee=this.metadata)==null?void 0:Ee.live)||!1},Ke=[],Pr=[],gr=[],Ht=[];xt.forEach(function(Oe){var Fe=new a(Oe.buffer,Oe.byteOffset,Oe.length),wt=new B(Fe);16<=wt.nalType&&wt.nalType<=23&&(G=!0),wt.nalType<I.ACCESS_UNIT_DELIMITER&&(wt.nalType===I.SPS?(Fe=new qe(Ft(Fe.readToUint8())),Ke.push(Oe),$e.codec=Fe.codec,$e.width=Fe.width,$e.height=Fe.height):wt.nalType===I.VPS?Pr.push(Oe):wt.nalType===I.PPS?gr.push(Oe):wt.nalType===I.SEI?Ht.push(Oe):!kt.isSafari||wt.nalType===I.TRAIL_R||wt.nalType===I.TRAIL_N||wt.nalType===I.IDR_W_RADL||wt.nalType===I.IDR_N_LP||wt.nalType===I.CRA?ze.push(Oe):console.warn("skip this nalu nalType:",wt.nalType),ee=B.isNonRefNALType(wt.nalType))}),Pr.length&&($e.vps=Pr),Ke.length&&($e.sps=Ke),gr.length&&($e.pps=gr),Ht.length&&($e.sei=Ht),0<Ke.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],this.videoTrackMeta.sei=[],Pr.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.vps.push(Oe)}),Ke.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sps.push(Oe)}),gr.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.pps.push(Oe)}),Ht.forEach(function(Oe){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sei.push(Oe)})):this.videoTrackMeta=$e)}else{if(this.skipFrame===_e.NONREF&&B.isNonRefNALType(B.extractNALType(k.data,4)))return console.warn("skipFrame isNonRefNALType"),[];var pt={type:te.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((Te=this.flvMetadata)==null?void 0:Te.width)||0,height:((ce=this.flvMetadata)==null?void 0:ce.height)||0,codec:"",pixelRatio:[],live:((fe=this.metadata)==null?void 0:fe.live)||!1},zt=[],Wr=[],qr=[],$r=[];(xt=A.extractAnnexbNAL(k.data)).forEach(function(Qe){var Oe=new a(Qe.buffer,Qe.byteOffset,Qe.length),Fe=new B(Oe);16<=Fe.nalType&&Fe.nalType<=23&&(G=!0),Fe.nalType<I.ACCESS_UNIT_DELIMITER&&(Fe.nalType===I.SPS?(Oe=new qe(Ft(Oe.readToUint8())),zt.push(Qe),pt.codec=Oe.codec,pt.width=Oe.width,pt.height=Oe.height):Fe.nalType===I.VPS?Wr.push(Qe):Fe.nalType===I.PPS?qr.push(Qe):Fe.nalType===I.SEI&&$r.push(Qe)),ee=B.isNonRefNALType(Fe.nalType),ze.push(Qe)}),Wr.length&&(pt.vps=Wr),zt.length&&(pt.sps=zt),qr.length&&(pt.pps=qr),$r.length&&(pt.sei=$r),zt.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],Wr.forEach(function(Qe){var Oe;return(Oe=b.videoTrackMeta)==null?void 0:Oe.vps.push(Qe)}),zt.forEach(function(Qe){var Oe;return(Oe=b.videoTrackMeta)==null?void 0:Oe.sps.push(Qe)}),qr.forEach(function(Qe){var Oe;return(Oe=b.videoTrackMeta)==null?void 0:Oe.pps.push(Qe)}),$r.forEach(function(Qe){var Oe;return(Oe=b.videoTrackMeta)==null?void 0:Oe.sei.push(Qe)})):this.videoTrackMeta=pt)}if(!this.videoLoaded&&this.videoTrackMeta){if(!G)return[];this.videoLoaded=!0,this.baseVideoDTS=n.dts,this.baseVideoPTS=k.cts+n.dts,this.checkMetadata()}this.videoTrackMeta&&k.codecId==mt.H265&&G&&(this.videoTrackMeta.pps.forEach(function(Qe){return ze.unshift(Qe)}),this.videoTrackMeta.sps.forEach(function(Qe){return ze.unshift(Qe)}),this.videoTrackMeta.vps.forEach(function(Qe){return ze.unshift(Qe)}),this.videoTrackMeta.sei.forEach(function(Qe){return ze.unshift(Qe)})),ze.length&&(Te={trackId:2,codec:((Ee=this.videoTrackMeta)==null?void 0:Ee.codec)||"",trackType:te.VIDEO,isSync:G||k.type===Xt.KEY,isNonRef:ee,data:ze,dts:n.dts,pts:n.dts+k.cts,offset:c,size:ze.reduce(function(Qe,Oe){return Qe+Oe.byteLength},0)},U.push(Te))}else ge.warn("[videox] flv parse empty data",n,k);return U},Yt.prototype.parseAudioBody=function(n,k,c){var b,k=new pr(k),U=(this.emit("loadedtag",{header:n,body:k}),[]);return k.packetType===Pt.ADTS_HEADER?(b=new a(k.data.buffer,k.data.byteOffset,k.data.byteLength),b=pr.readAudioSpecificConfig(b),this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:te.AUDIO,codec:"mp4a.40."+b.audioObjectType,timescale:1e3,audioObjectType:b.audioObjectType,sampleRate:b.sampleRate,samplingFrequencyIndex:b.samplingFrequencyIndex,sampleSize:k.sampleSize,channelCount:b.channelCount},this.checkMetadata()):(this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=n.dts,this.baseAudioPTS=n.dts,this.checkMetadata()),U.push({codec:((b=this.audioTrackMeta)==null?void 0:b.codec)||"",trackId:1,trackType:te.AUDIO,isSync:!0,isNonRef:!1,data:[k.data],dts:n.dts,pts:n.dts,offset:c,size:k.data.byteLength})),U},Yt.prototype.parseScriptBody=function(n,r){r=new Mr(r),this.emit("loadedtag",{header:n,body:r}),n=r.value,n&&r.name==="onMetaData"&&(this.flvMetadata=n,ge.info("flv script tag loaded, flv metadata:",this.flvMetadata))},Yt.prototype.onProgress=function(c){var r=c.data,c=c.offset;r.byteLength&&(r=this.parse(r.buffer,c)).length&&(c=void 0,this.cachePackets.length?(c=this.cachePackets.concat(r),this.cachePackets=[]):c=r,this.metadata&&this.loader.status!==se.SUSPENGING?this.emit("loadeddata",{packets:c}):this.cachePackets=c)},Yt.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},Yt.prototype.seek=function(){},Yt.prototype.reset=function(){Ur.prototype.reset.call(this),this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null};var nn=Yt;ti=function(n,r){return(ti=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ti(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(yn,ei=Ze);var Dt=yn;Zr=function(n,r){return(Zr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Zr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(_n,un=Dt);var zr=_n;Jr=function(n,r){return(Jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Jr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(fn,Qr=zr);var on=fn;Yr=function(n,r){return(Yr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Yr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(hn,ln=Ze);var Bo=hn;Xr=function(n,r){return(Xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Xr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(pn,an=Dt);var Ho=pn;Gr=function(n,r){return(Gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Gr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(dn,sn=Ze);var Kr,sn,Gr,an,Xr,ln,Yr,Qr,Jr,un,Zr,ei,ti,Ur,ri,cn,ii,jo=dn,Me=(Kr=function(n,r){return(Kr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Kr(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});function dn(n,r){var c=sn.call(this,n,r)||this;c.entries=[],c.version=r.read(1),c.flag=r.read(3),c.entryCount=r.read(4);for(var b=0;b<c.entryCount;b++){var k=c.version===1;c.entries.push({segmentDuration:r.read(k?8:4),mediaTime:r.read(k?8:4),mediaRateInteger:r.read(2),mediaRateFraction:r.read(2)})}return c}function pn(n,r){return n=an.call(this,n,r)||this,n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4),n}function hn(n,r){return n=ln.call(this,n,r)||this,n.bufferSizeDB=r.read(4),n.maxBitrate=r.read(4),n.avgBitrate=r.read(4),n}function fn(){return Qr!==null&&Qr.apply(this,arguments)||this}function _n(c,r){var c=un.call(this,c,r)||this,b=(r.skip(4),r.skip(2),c.bitReferenceId=r.read(2),c.codeStreamVersion=r.read(4),r.skip(4),r.skip(8),c.width=r.read(2),c.heigth=r.read(2),c.horizontalResolution=r.read(4),c.verticalResolution=r.read(4),r.skip(4),c.frameCount=r.read(2),Math.min(r.read(1),32));return c.compressorName=Array.from(new Array(b)).map(function(){return String.fromCharCode(r.read(1))}).join(""),r.skip(32-(b+1)),c.depth=r.read(2),r.skip(2),c}function yn(){var n=ei!==null&&ei.apply(this,arguments)||this;return n.isContainer=!0,n}function Yt(){var n=Ur!==null&&Ur.apply(this,arguments)||this;return n.header=null,n.flvMetadata=null,n.videoTrackMeta=null,n.audioTrackMeta=null,n.unhandleBuffer=null,n.cachePackets=[],n.videoLoaded=!1,n.baseVideoPTS=0,n.baseVideoDTS=0,n.audioLoaded=!1,n.baseAudioPTS=0,n.baseAudioDTS=0,n.isHVCC=!1,n.formatType=Z.FLV,n}function gn(b,r){var c=cn.call(this,b,r)||this,b=(c.generalTierFlag=0,c.numBytesConstraintInfo=0,c.generalProfileIdc=0,c.generalLevelIdc=0,c.chromaFormatIdc=0,c.bitDepthLumaMinus8=0,c.bitDepthChromaMinus8=0,c.avgFrameRate=0,c.constantFrameRate=0,c.lengthSizeMinusOne=0,c.olsIdx=0,c.ptlFrameOnlyConstraintFlag=0,c.ptlMultilayerEnabledFlag=0,c.maxPictureWidth=0,c.maxPictureHeight=0,c.nalus=[],c.vps=[],c.sps=[],c.pps=[],c.sei=[],c.codec="",c.codecTag="vvc1",(Ee=new _(r.read(1),8)).skip(5),Ee.read(2)),k=Ee.read(1);if(c.lengthSizeMinusOne=b,k){var b=(Ee=new _(r.read(3),24)).read(9),U=Ee.read(3),k=Ee.read(2),ee=Ee.read(2),G=Ee.read(3),b=(c.olsIdx=b,c.constantFrameRate=k,c.chromaFormatIdc=ee,c.bitDepthLumaMinus8=G,Ee.skip(5),(Ee=new _(r.read(2),16)).skip(2),Ee.read(6)),k=Ee.read(7),ee=Ee.read(1),G=(c.numBytesConstraintInfo=b,c.generalTierFlag=ee,c.generalProfileIdc=k,r.read(1)),ee=(c.generalLevelIdc=G,(Ee=new _(r.read(1),8)).read(1)),k=Ee.read(1),ce=(c.ptlFrameOnlyConstraintFlag=ee,c.ptlMultilayerEnabledFlag=k,0),fe=(0<b?Ee.skip(8*b-2):Ee.read(6),0);if(1<U){for(var Ee=new _(r.read(1),8),Te=0,fe=U-2;0<=fe;--fe)Te|=Ee.read(1)<<fe;for(fe=U;fe<=8&&1<U;++fe)Ee.read(1);for(fe=U-2;0<=fe;--fe)Te&1<<fe&&r.read(1);var Ce=r.read(1),ze=[];if(Ce)for(ce=0;ce<Ce;ce++)ze.push(r.readInt(1))}G=r.read(2),ee=r.read(2),k=(c.maxPictureWidth=G,c.maxPictureHeight=ee,r.read(2)),c.avgFrameRate=k}for(var Ne=r.read(1),je=0,Ue=0,je=0;je<Ne;je++){(Ee=new _(r.read(1),8)).read(1),Ee.skip(2);var Ae=Ee.read(5),Ye=[],xt=0;for(Ae!=N.VVC_DCI_NUT&&Ae!=N.VVC_OPI_NUT&&(xt=r.read(2)),Ue=0;Ue<xt;Ue++)Ye.push(new Uint8Array(r.read(2)).map(function(){return r.read(1)}));Ae===N.VVC_VPS_NUT?Ye.forEach(function(ut){return c.vps.push(ut)}):Ae===N.VVC_SPS_NUT?Ye.forEach(function(ut){return c.sps.push(ut)}):Ae===N.VVC_PPS_NUT&&Ye.forEach(function(ut){return c.pps.push(ut)})}return c.configVersion=0,c.codec="vvc1.1.L48.CA",c}(q=er=er||{})[q.OD=1]="OD",q[q.IOD=2]="IOD",q[q.ESD=3]="ESD",q[q.DCD=4]="DCD",q[q.DSD=5]="DSD",q[q.SLCD=6]="SLCD";{let c=function(){this.constructor=ni};var Ms=c;Ar.readSize=function(b){for(var k,U=0,G=4;G--&&(U=U<<7|127&(k=b.read(1)),128&k););return U},Ar.extractDescriptors=function(b){for(var k,U,G,ee=[];b.unreadLength;){if(k=new Ar(b),G=new a(b.buffer,b.offset,k.size),b.skip(k.size),k.size<=0)return ee;switch(k.tag){case er.ESD:U=new Wo(k,G);break;case er.DCD:U=new qo(k,G);break;case er.DSD:U=new $o(k,G);break;case er.SLCD:U=new zo(k,G);break;default:U=null}U&&G.unreadLength&&(U.children=Ar.extractDescriptors(G)),ee.push(U)}return ee};var Wt,Vo=Ar,Cr=(Ri.findDescriptor=function(b,k){var U;return b.some(function(G){return!!(U=G.probe.tag===k?G:Ri.findDescriptor(G.children,k))}),U},Ri),Wo=(Me(no,Nn=Cr),no),qo=(Me(io,Dn=Cr),io),$o=(Me(ro,On=Cr),ro),zo=(Me(to,Ln=Cr),to);Ai=function(b,k){return(Ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var q,Ko=((q=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Ai(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(eo,In=Mt),eo);Ci=function(b,k){return(Ci=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var Me,Go=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Ci(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Zn,Rn=Ze),Zn);ki=function(b,k){return(ki=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var q,Xo=((q=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}ki(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Jn,xi=zr),Jn);Pi=function(b,k){return(Pi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var Me,Yo=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Pi(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Qn,An=Ze),Qn);wi=function(b,k){return(wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var q,Qo=((q=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}wi(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Yn,Cn=Ze),Yn);Ei=function(b,k){return(Ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var Me,Jo=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Ei(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Xn,kn=Ze),Xn);Ti=function(b,k){return(Ti=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var q,Zo=((q=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Ti(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Gn,xn=Dt),Gn);Si=function(b,k){return(Si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)};var Me,es=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=b}Si(b,k),b.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(Kn,Pn=Ze),Kn),ni=(bi=function(b,k){return(bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(U,G){U.__proto__=G}:function(U,G){for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(U[ee]=G[ee])}))(b,k)},zn),wr=wn=Ze;if(typeof wr!="function"&&wr!==null)throw new TypeError("Class extends value "+String(wr)+" is not a constructor or null");bi(ni,wr),ni.prototype=wr===null?Object.create(wr):(c.prototype=wr.prototype,new c);var ts=zn}mi=function(n,r){return(mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}mi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}($n,En=Ze);var rs=$n;vi=function(n,r){return(vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}vi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(qn,Tn=Ze);var is=qn;gi=function(n,r){return(gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}gi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Wn,Sn=Ze);var ns=Wn;yi=function(n,r){return(yi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}yi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Vn,_i=Dt);var os=Vn;fi=function(n,r){return(fi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}fi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(jn,hi=Dt);var ss=jn;pi=function(n,r){return(pi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}pi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Hn,di=Mt);var as=Hn;ci=function(n,r){return(ci=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ci(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Bn,ui=Dt);var ls=Bn;li=function(n,r){return(li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}li(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Fn,bn=Mt);var us=Fn;ai=function(n,r){return(ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ai(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Un,mn=Mt);var cs=Un;si=function(n,r){return(si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}si(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Mn,vn=Mt);var oi,vn,si,mn,ai,bn,li,ui,ci,di,pi,hi,fi,_i,yi,Sn,gi,Tn,vi,En,mi,wn,bi,Pn,Si,xn,Ti,kn,Ei,Cn,wi,An,Pi,xi,ki,Rn,Ci,In,Ai,Ln,On,Dn,Nn,ds=Mn,q=(oi=function(n,r){return(oi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}oi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});function Mn(n,r){return n=vn.call(this,n,r)||this,n.version===1?n.baseMediaDecodeTime=r.read(8):n.baseMediaDecodeTime=r.read(4),n}function Un(n,r){var c=mn.call(this,n,r)||this;c.references=[],c.trackId=r.read(4),c.timescale=r.read(4),c.version===0?(c.pts=r.read(4),c.offset=r.read(4)):(c.pts=r.read(8),c.offset=r.read(8)),r.skip(2),c.references=[];for(var b=r.read(2),k=0;k<b;k++){var U=new _(r.read(4),32),G=r.read(4),ee=new _(r.read(4),32);c.references.push({type:U.read(1),size:U.read(31),duration:G,startWithSap:ee.read(1),sapType:ee.read(3),sapDeltaTime:ee.read(28)})}return c}function Fn(n,r){var c=bn.call(this,n,r)||this;c.isLeadings=[],c.sampleDependsOns=[],c.sampleIsDependedOns=[],c.sampleHasRedundancys=[];for(var b=0,k=void 0;b<r.unreadLength;b++)k=new _(r.read(1),8),c.isLeadings[b]=k.read(2),c.sampleDependsOns[b]=k.read(2),c.sampleIsDependedOns[b]=k.read(2),c.sampleHasRedundancys[b]=k.read(2);return c}function Bn(){return ui!==null&&ui.apply(this,arguments)||this}function Hn(){return di!==null&&di.apply(this,arguments)||this}function jn(){return hi!==null&&hi.apply(this,arguments)||this}function Vn(){return _i!==null&&_i.apply(this,arguments)||this}function Wn(n,r){return n=Sn.call(this,n,r)||this,n.version=r.read(1),n.flag=r.read(3),n.graphicsMode=r.read(2),n.opcolor=[r.read(2),r.read(2),r.read(2)],n}function qn(n,r){return n=Tn.call(this,n,r)||this,n.version=r.read(1),n.flag=r.read(3),n}function $n(n,r){var c=En.call(this,n,r)||this;c.matrix=[],c.version=r.read(1),c.flag=r.read(3),c.createTime=c.toStandardTime(r.read(4)),c.modifyTime=c.toStandardTime(r.read(4)),c.trackId=r.read(4),r.skip(4),c.duration=r.read(4),r.skip(8),c.layer=r.read(2),c.alternateGroup=r.read(2),c.volume=+(r.read(1)+"."+r.read(1)),r.skip(2);for(var b=0;b<9;b++)c.matrix.push(+(r.read(2)+"."+r.read(2)));return c.width=+(r.read(2)+"."+r.read(2)),c.height=+(r.read(2)+"."+r.read(2)),c}function zn(n,r){var c=wn.call(this,n,r)||this;for(c.data=[];0<r.unreadLength;)c.data.push(r.read(1));return c}function Kn(n,r){var c=Pn.call(this,n,r)||this;c.matrix=[],c.version=r.read(1),c.flag=r.read(3),c.createTime=c.toStandardTime(r.read(4)),c.modifyTime=c.toStandardTime(r.read(4)),c.timeScale=r.read(4),c.duration=r.read(4),c.rate=+(r.read(2)+"."+r.read(2)),c.volume=+(r.read(1)+"."+r.read(1)),r.skip(10);for(var b=0;b<9;b++)c.matrix.push(+(r.read(2)+"."+r.read(2)));return r.skip(24),c.nextTrackId=r.read(4),c}function Gn(n,r){return n=xn.call(this,n,r)||this,r.skip(6),n.dataReferenceIndex=r.read(2),r.skip(8),n.channelCount=r.read(2),n.sampleSize=r.read(2),r.skip(4),n.sampleRate=r.read(4)>>>16,n}function Xn(b,r){function c(U){return 96+(31&U)}var b=kn.call(this,b,r)||this,k=(b.version=r.read(1),b.flag=r.read(3),b.version===1),k=(b.createTime=b.toStandardTime(r.read(k?8:4)),b.modifyTime=b.toStandardTime(r.read(k?8:4)),b.timeScale=r.read(4),b.duration=r.read(k?8:4),r.read(2));return b.language=String.fromCharCode(c(k>>10),c(k>>5),c(k)),b.quality=+(r.read(1)+"."+r.read(1)),b}function Yn(n,r){var c=Cn.call(this,n,r)||this;return c.data=r.readToUint8(n.size-n.length),c}function Qn(n,r){var c=An.call(this,n,r)||this;for(c.name="",c.version=r.read(1),c.flag=r.read(3),c.preDefined=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),c.handleType=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),r.skip(12);0<r.unreadLength;)c.name+=String.fromCharCode(r.read(1));return c}function Jn(){return xi!==null&&xi.apply(this,arguments)||this}function Zn(n,r){var c=Rn.call(this,n,r)||this;for(c.compatibleBrands=[],c.majorBrand=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),c.minorVersion=r.read(4);4<=r.unreadLength;)c.compatibleBrands.push(String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)));return c}function eo(c,b){var c=In.call(this,c,b)||this,b=(c.descriptors=[],c.audioObjectType=0,c.samplingFrequencyIndex=0,c.descriptors=Vo.extractDescriptors(b),Cr.findDescriptor(c.descriptors,er.DCD)),k=Cr.findDescriptor(c.descriptors,er.DSD);return k&&(c.audioObjectType=k.audioObjectType,c.samplingFrequencyIndex=k.samplingFrequencyIndex),c.codec=b&&k?"mp4a."+b.mepg4Audio.toString(16)+"."+k.audioObjectType.toString(16):"mp4a",c}function to(n,r){return n=Ln.call(this,n)||this,n.esId=r.read(2),n}function ro(n,r){return n=On.call(this,n)||this,r=new _(r.read(2),16),n.audioObjectType=r.read(5),n.samplingFrequencyIndex=r.read(4),n.channel=r.read(4),n.frameLengthFlag=r.read(1),n.dependsOnCoreCoder=r.read(1),n.extesionFlag=r.read(1),n}function io(n,r){return n=Dn.call(this,n)||this,n.mepg4Audio=r.read(1),n.audioStream=r.read(1),n.bufferSize=r.read(3),n.maxBitrate=r.read(4),n.avgBitrate=r.read(4),n}function no(n,r){return n=Nn.call(this,n)||this,n.streamDependenceFlag=0,n.URLFlag=0,n.OCRStreamFlag=0,n.esId=r.read(2),n.esFlag=r.read(1),128&n.esFlag&&(n.streamDependenceFlag=r.read(2)),64&n.esFlag&&(n.URLFlag=r.read(1),r.skip(n.URLFlag)),32&n.esFlag&&(n.OCRStreamFlag=r.read(2)),n}function Ri(n){this.children=[],this.probe=n}function Ar(n){this.tag=n.read(1),this.size=Ar.readSize(n)}(Me=Wt=Wt||{})[Me.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",Me[Me.SAMPLE_DESC=2]="SAMPLE_DESC",Me[Me.SAMPLE_DUR=8]="SAMPLE_DUR",Me[Me.SAMPLE_SIZE=16]="SAMPLE_SIZE",Me[Me.SAMPLE_FLAG=32]="SAMPLE_FLAG",Me[Me.DUR_EMPTY=65536]="DUR_EMPTY",Me[Me.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",q(lo,so=Mt);var qt,ps=lo;Li=function(n,r){return(Li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Li(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(ao,oo=Mt);var Ii,oo,Li,so,hs=ao,Me=(Ii=function(n,r){return(Ii=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Ii(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});function ao(n,r){return n=oo.call(this,n,r)||this,n.trackId=r.read(4),n.defaultSampleDescriptionIndex=r.read(4),n.defaultSampleDuration=r.read(4),n.defaultSampleSize=r.read(4),n.defaultSampleFlag=r.read(4),n}function lo(n,r){return n=so.call(this,n,r)||this,n.baseDataOffset=0,n.defaultSampleDescriptionIndex=0,n.defaultSampleDuration=0,n.defaultSampleSize=0,n.defaultSampleFlag=0,n.trackId=r.read(4),n.flag&Wt.BASE_DATA_OFFSET&&(n.baseDataOffset=r.read(8)),n.flag&Wt.SAMPLE_DESC&&(n.defaultSampleDescriptionIndex=r.read(4)),n.flag&Wt.SAMPLE_DUR&&(n.defaultSampleDuration=r.read(4)),n.flag&Wt.SAMPLE_SIZE&&(n.defaultSampleSize=r.read(4)),n.flag&Wt.SAMPLE_FLAG&&(n.defaultSampleFlag=r.read(4)),n}(q=qt=qt||{})[q.DATA_OFFSET=1]="DATA_OFFSET",q[q.FIRST_FLAG=4]="FIRST_FLAG",q[q.DURATION=256]="DURATION",q[q.SIZE=512]="SIZE",q[q.FLAG=1024]="FLAG",q[q.CTS_OFFSET=2048]="CTS_OFFSET",Me(Ao,mo=Mt);var lr,fs=Ao;Wi=function(n,r){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Wi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Co,vo=Ze);var _s=Co;Vi=function(n,r){return(Vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Vi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(ko,go=Ze);var ys=ko;ji=function(n,r){return(ji=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}ji(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(xo,yo=Ze);var gs=xo;Hi=function(n,r){return(Hi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Hi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Po,_o=Ze);var vs=Po;Bi=function(n,r){return(Bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Bi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(wo,fo=Dt);var ms=wo;Fi=function(n,r){return(Fi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Fi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Eo,ho=Dt);var bs=Eo;Ui=function(n,r){return(Ui=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Ui(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(To,po=Ze);var Ss=To;Mi=function(n,r){return(Mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};function uo(n){return Array.isArray(n)?n:n?[n]:[]}(function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Mi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)})(So,co=Ze);var Ts=So,Es=(Br.prototype.addTrack=function(n){this.tracks.push(n)},Br.prototype.getTracks=function(){return this.tracks},Br.prototype.getTrackById=function(n){return this.tracks.find(function(r){return r.options.id===n})},Br),Oi=function(){return(Oi=Object.assign||function(n){for(var r,c=1,b=arguments.length;c<b;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(n[k]=r[k]);return n}).apply(this,arguments)},ws=(_r.prototype.getSamples=function(){return this.samples},_r.prototype.getNextSampleOffset=function(){var n=this.samples[this.nextSampleIndex];return n?n.offset:0},_r.prototype.addSample=function(n){this.samples.push(n),this.duration+=n.duration},_r.prototype.processNextSample=function(n,r){r===void 0&&(r=0);var c=this.samples[this.nextSampleIndex];if(c)return this.processSample(n,r,c)},_r.prototype.processSample=function(n,k,c){var b=(k=k===void 0?0:k)+n.byteLength,k=c.offset-k;if(0<=k&&c.offset+c.size<=b)return this.nextSampleIndex++,Oi(Oi({},c),{data:n.subarray(k,k+c.size)})},_r.prototype.processSamples=function(n,r){r===void 0&&(r=0);for(var c=this.samples,b=[],k=this.nextSampleIndex,U=c.length;k<U;k++){var G=this.processSample(n,r,c[k]);if(!G)break;b.push(G)}return b},_r.prototype.seek=function(n){for(var r,c=n*this.options.timeScale,b=-1,k=-1,U=0,G=this.samples.length;U<G;U++)if((r=this.samples[U]).isSync&&(k=U),r.dts+r.cts>=c){b=k;break}if(-1<b)return this.nextSampleIndex=b,this.samples[b]},_r),Ps=(Fr.prototype.createMedia=function(n){return this._parseMoovJSON(n)},Fr.prototype._parseMoovJSON=function(n){var r=this,c=n.mvhd.box,b=new Es({duration:c.duration,timeScale:c.timeScale,rate:c.rate,modifyTime:c.modifyTime,createTime:c.createTime});return n.trak&&[].concat(n.trak).forEach(function(ce){var U=ce.tkhd,ce=ce.mdia,ee=ce.mdhd,G=ce.hdlr,ce=ce.minf.stbl,U=U.box,G=G.box,ee=ee.box,Ee=vt[G.handleType],ce=r._buildSamples(ce,Ee),fe={id:U.trackId,name:G.name,handleType:G.handleType,type:Ee,createTime:U.createTime,modifyTime:U.modifyTime,layer:U.layer,volume:U.volume,matrix:U.matrix,duration:U.duration,width:U.width,height:U.height,timeScale:ee.timeScale,language:ee.language,quality:ee.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},Ee=(G=n.mvex)==null?void 0:G.trex,Te=(Ee&&[].concat(Ee).forEach(function(Ce){Ce=Ce.box,fe.defaultSampleDescriptionIndex=Ce.defaultSampleDescriptionIndex,fe.defaultSampleDuration=Ce.defaultSampleDuration,fe.defaultSampleSize=Ce.defaultSampleSize,fe.defaultSampleFlag=Ce.defaultSampleFlag}),new ws(fe));ce.forEach(function(Ce){return Te.addSample(Ce)}),b.addTrack(Te)}),b},Fr.prototype._buildSamples=function(n,r){var c,b,k,U,G,ee,ce,fe,Ee,Te,Ce,ze,Ne,Ue,je,Ae,Ye,xt=n.stts,ut=n.stss,$e=n.ctts,Ke=n.stsc,Pr=n.stsz||n.stz2;return Pr?(ee=n.stco||n.co64,ce=Ke.box,fe=ut==null?void 0:ut.box,Ee=xt.box,Te=$e==null?void 0:$e.box,Ue=Ne=ze=Ce=-1,je=0,Ae=[],(Ye=Pr.box.sampleSizes).forEach(function(gr,Ht){var pt={},zt=ce.entries;pt.size=gr,pt.trackType=r,Ht===0?(b=1,c=0,pt.chunkIndex=b,G=zt[pt.chunkRunIndex=c].samplePerChunk,U=0,k=c+1<zt.length?zt[c+1].firstChunk-1:1/0):Ht<G?(pt.chunkIndex=b,pt.chunkRunIndex=c):(b++,U=0,k<(pt.chunkIndex=b)&&(k=++c+1<zt.length?zt[c+1].firstChunk-1:1/0),G+=zt[pt.chunkRunIndex=c].samplePerChunk),pt.descriptionIndex=zt[c].sampleDescriptionIndex-1,pt.offset=ee.box.chunkOffsets[pt.chunkIndex-1]+U,U+=pt.size,Ce<Ht&&(ze++,Ce=Math.max(Ce,0),Ce+=Ee.sampleCounts[ze]),0<Ht?((gr=Ae[Ht-1]).duration=Ee.sampleDurations[ze],pt.dts=Ae[Ht-1].dts+gr.duration):pt.dts=0,Te?(Ne<=Ht&&(Ue++,Ne=Math.max(Ne,0),Ne+=Te.sampleCounts[Ue]),pt.cts=Te.sampleOffsets[Ue]):pt.cts=0,fe?Ht===fe.sampleNumbers[je]-1?(pt.isSync=!0,je++):pt.isSync=!1:pt.isSync=!0,pt.isLast=Ht===Ye.length-1,Ae.push(pt)}),Ae):[]},Fr),xs=(Ir.prototype.init=function(n){this.options=n},Ir.prototype.parse=function(n){var r=this;uo(n.traf).forEach(function(c){return r._buildSamples(c,n.box)})},Ir.prototype._buildSamples=function(n,r){var c=n.tfhd.box,b=this._getTrakById(c.trackId);if(b)for(var k=b.options,U=n.tfdt.box,G=c.flag,ee=(G&Wt.SAMPLE_DESC?c:k).defaultSampleDescriptionIndex,ce=(G&Wt.SAMPLE_DUR?c:k).defaultSampleDuration,fe=(G&Wt.SAMPLE_SIZE?c:k).defaultSampleSize,Ee=(G&Wt.SAMPLE_FLAG?c:k).defaultSampleFlag,Te=uo(n.trun),Ce=k.id,ze=k.type,Ne=G&Wt.BASE_DATA_OFFSET?c.baseDataOffset:G&Wt.DEFAULT_BASE_IS_MOOF?r.header.start:0,Ue=0,je=0;je<Te.length;je++)for(var Ae=Te[je].box,Ye=Ae.flag,xt=Ae.dataOffset+Ne,ut=0;ut<Ae.sampleCount;ut++){var $e={},Ke=($e.trackId=Ce,$e.trackType=ze,$e.descriptionIndex=ee,Ye&qt.SIZE?$e.size=Ae.sampleSizes[ut]:$e.size=fe,Ye&qt.DURATION?$e.duration=Ae.sampleDurations[ut]:$e.duration=ce,$e.dts=0<Ue?Ue:U?U.baseMediaDecodeTime:0,Ue=$e.dts+$e.duration,Ye&qt.CTS_OFFSET?$e.cts=Ae.sampleCTSs[ut]:$e.cts=0,Ee);Ye&qt.FLAG?Ke=Ae.sampleFlags[ut]:ut===0&&Ye&qt.FIRST_FLAG&&(Ke=Ae.firstSampleFlag),$e.offset=xt,$e.flag=Ke,$e.isSync=!(Ke&(nt.IS_NON_SYNC|nt.DEPENDS_YES)),$e.isLeading=Ke>>26&3,$e.dependsOn=Ke>>24&3,$e.isDependedOn=Ke>>22&3,$e.hasRedundancy=Ke>>20&3,$e.degradationPriority=65535&Ke,xt+=$e.size,$e.isLast=je===Te.length-1&&ut===Ae.sampleCount-1,b.addSample($e)}},Ir.prototype.destroy=function(){this.options=null},Ir);Ni=function(n,r){return(Ni=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Ni(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(tr,Di=ae),tr.probe=function(n){return!(n.byteLength<8)&&[n[4],n[5],n[6],n[7]].map(function(r){return String.fromCharCode(r)}).join("")==="ftyp"},tr.prototype.processPackets=function(n,r){var c,b=this,k=[];return this.media&&n.byteLength&&(this.media.getTracks().forEach(function(U){U.processSamples(n,r).forEach(function(G){G=b.convertSampleToPacket(G),G&&k.push(G)})}),c=this.getMinNextSampleOffset()-r,this.unhandleBuffer=c>=n.byteLength?null:n.slice(c).buffer),k},tr.prototype.seek=function(n){var r,c=this.options.progressive;this.unhandleBuffer=null,c&&this.loader.suspend(),(r=this.media)!=null&&r.getTracks().map(function(b){return b.seek(n)}),c&&this.loader.loadRange(this.getMinNextSampleOffset())},tr.prototype.onProgress=function(c){var r=c.data,c=c.offset;r.length&&(this.unhandleBuffer&&(r=a.concatUint8(new Uint8Array(this.unhandleBuffer),r),c-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new a(r.buffer,0),c),this.metadata)&&(r=this.processPackets(r,c)).length&&this.emit("loadeddata",{packets:r})},tr.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},tr.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map(function(n){return n.getNextSampleOffset()})):0},tr.prototype.parse=function(n,r){var c,b=this;r===void 0&&(r=0);for(var k=n.offset,U=0,G=this;8<=n.unreadLength;){var ee=function(){var ce,fe,Ee,Te,Ce;return U=n.offset-k,(ce=new Ct(n,r+U)).size===0?(Ee=new Error("box [".concat(ce.type,"] size 为 0")),ge.error(Ee),G.emit("error",{code:me.PARSER,message:Ee.message,origin:Ee}),"break"):G.options.progressive&&ce.type==="mdat"&&!G.metadata?(fe=ce.start+ce.size,G.loader.suspend(),G.unhandleBuffer=null,ge.info("检测到mdat box在moov box之后，跳转moov起始偏移位"),G.loader.loadRange(fe).then(function(ze){ze&&(b.unhandleBuffer=null,b.loader.jump(ce.start),b.loader.status!==se.SUSPENGING)&&b.loader.loadRange(ce.start,fe)}),{value:void 0}):(Ee=ce.size-ce.length,n.unreadLength>=Ee?((Ce=s[ce.type])?(Te=new a(n.buffer,n.offset,Ee),(c=new Ce(ce,Te)).isContainer&&((Ce=new tr({sub:!0})).proxy(G,["loadedbox"]),Ce.parse(Te,U+r+ce.length),Ce.removeAllListeners(),Ce.boxes.forEach(function(ze){c.append(ze)}))):c=new Ze(ce),n.skip(Ee),G.boxes.push(c),void G.emit("loadedbox",c)):(n.back(ce.length),"break"))}();if(typeof ee=="object")return ee.value;if(ee==="break")break}n.unreadLength&&(this.unhandleBuffer=n.readToBuffer())},tr.prototype.reset=function(){Di.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()};var Di,Ni,co,Mi,po,Ui,ho,Fi,fo,Bi,_o,Hi,yo,ji,go,Vi,vo,Wi,mo,bo=tr;function tr(n){var r=Di.call(this,n=n===void 0?{}:n)||this;return r.media=null,r.unhandleBuffer=null,r.formatType=Z.MP4,r.boxes=[],r._handleBoxLoad=function(c){var b,k,U,G,ee,ce,fe,Ee,Te,Ce,ze,Ne,Ue,je,Ae=c.header.type;Ae==="vvcC"?r.vvcCBox=c:Ae==="vvc1"?r.vvcCBox&&(r.vvcCBox.codecTag=Ae):Ae==="hvcC"?r.hvcCBox=c:Ae==="hvc1"||Ae==="hev1"?r.hvcCBox&&(r.hvcCBox.codecTag=Ae):Ae==="avcC"?r.avcCBox=c:Ae==="esds"?r.esdsBox=c:Ae==="mp4a"?r.mp4aBox=c:Ae==="moov"?(Ue=Ze.mapBoxToJSON(c),r.media=r.moovParser.createMedia(Ue),r.moofParser.init({media:r.media}),Ne=(Ue=r.mp4aBox||{}).sampleRate,k=Ne===void 0?0:Ne,Ne=Ue.sampleSize,U=Ne===void 0?0:Ne,Ne=Ue.channelCount,G=Ne===void 0?0:Ne,Ne=(Ue=r.esdsBox||{}).audioObjectType,ee=Ne===void 0?0:Ne,Ne=Ue.samplingFrequencyIndex,ce=Ne===void 0?0:Ne,Ne=Ue.codec,fe=Ne===void 0?"":Ne,Ee=[],Te=[],Ce=[],r.hvcCBox?(Te=r.hvcCBox.vps,Ce=r.hvcCBox.pps,Ee=r.hvcCBox.sps):r.vvcCBox?(Ce=r.vvcCBox.pps,Ee=r.vvcCBox.sps,Ee=r.vvcCBox.sps):r.avcCBox&&(Ce=r.avcCBox.pps,Ee=r.avcCBox.sps),Ne=(Ue=r.options).live,Ue=Ue.progressive,je=((b=r.avcCBox)==null?void 0:b.codec)||"",r.vvcCBox?(je=r.vvcCBox.codec,ze=r.vvcCBox?r.vvcCBox.codecTag:void 0):r.hvcCBox&&(je=r.hvcCBox?r.hvcCBox.codec:((b=r.avcCBox)==null?void 0:b.codec)||"",ze=r.hvcCBox?r.hvcCBox.codecTag:void 0),r.metadata={formatType:Z.MP4,live:!!Ne,progressive:!Ne&&!!Ue,url:r.loader.url,basePTS:0,baseDTS:0,duration:r.media.options.duration,timescale:r.media.options.timeScale,tracks:r.media.getTracks().map(function(Ye){var xt,ut,$e,Ke={};switch(Ke.id=Ye.options.id,Ke.type=Ye.options.type,Ke.timescale=Ye.options.timeScale,Ke.baseDTS=0,Ke.basePTS=0,Ke.type){case te.VIDEO:Ke.width=Ye.options.width,Ke.height=Ye.options.height,Ke.vps=Te,Ke.sps=Ee,Ke.pps=Ce,Ke.rotate=(xt=Ye.options.matrix).length<5||(ut=Math.hypot(xt[0],xt[3]),$e=Math.hypot(xt[1],xt[4]),ut===0)||$e===0?0:180*Math.atan2(xt[1]/$e,xt[0]/ut)/Math.PI,Ke.pixelRatio=[],Ke.codec=je,Ke.codecTag=ze,Ke.fps=r.computeFps(Ye,($e=r.media)==null?void 0:$e.options);break;case te.AUDIO:Ke.audioObjectType=ee,Ke.sampleRate=k,Ke.samplingFrequencyIndex=ce,Ke.sampleSize=U,Ke.channelCount=G,Ke.codec=fe;break;default:Ke.type=te.UNKNOWN}return Ke})},ge.info("loadedmetadata metadata:",r.metadata),r.emit("loadedmetadata",r.metadata)):Ae==="moof"&&(ge.info("检测到moof box被加载，当前素材为fMP4"),r.moofParser.parse(Ze.mapBoxToJSON(c)))},r.computeFps=function(c,b){return b?c.getSamples().length/(b.duration/b.timeScale):0},r.convertSampleToPacket=function(c){var b,k,U,G,ee,ce;return c.trackType===te.VIDEO&&(r.hvcCBox||r.avcCBox||r.vvcCBox)?(b=c.data,k=c.isSync,U=(G=r.hvcCBox||r.avcCBox||r.vvcCBox).lengthSizeMinusOne,G=G.codec,ce=!1,r.vvcCBox&&4<b.length&&b[0]===0&&b[1]===0&&b[2]===0&&b[3]===1&&(ce=!0),ee=[],ee=ce?A.extractAnnexbNAL(b):A.extractAVCCNAL(b,U),ce=!1,r.hvcCBox&&(ce=ee.every(function(fe){return B.isNonRef(fe)})),r.vvcCBox&&(ce=ee.every(function(fe){X.isNonRef(fe)})),k&&(r.hvcCBox?(r.hvcCBox.pps.forEach(function(fe){return ee.unshift(fe)}),r.hvcCBox.sps.forEach(function(fe){return ee.unshift(fe)}),r.hvcCBox.vps.forEach(function(fe){return ee.unshift(fe)})):r.vvcCBox?(r.vvcCBox.pps.forEach(function(fe){return ee.unshift(fe)}),r.vvcCBox.sps.forEach(function(fe){return ee.unshift(fe)}),r.vvcCBox.vps.forEach(function(fe){return ee.unshift(fe)})):r.avcCBox&&(r.avcCBox.pps.forEach(function(fe){return ee.unshift(fe)}),r.avcCBox.sps.forEach(function(fe){return ee.unshift(fe)}))),{codec:G,trackId:c.trackId,trackType:c.trackType,isLast:c.isLast,dts:c.dts,pts:c.cts+c.dts,isSync:c.isSync,isNonRef:ce,data:ee,size:ee.reduce(function(fe,Ee){return fe+Ee.byteLength},0),offset:c.offset}):c.trackType===te.AUDIO&&r.esdsBox?{codec:r.esdsBox.codec,trackId:c.trackId,trackType:c.trackType,dts:c.dts,pts:c.cts+c.dts,isLast:c.isLast,isSync:!0,isNonRef:!1,data:[c.data],size:c.data.byteLength,offset:c.offset}:void 0},r.options=n,r.moovParser=new Ps,r.moofParser=new xs,n.sub||r.on("loadedbox",r._handleBoxLoad),r}function Ir(){var n=this;this.options=null,this._getTrakById=function(r){var c;return(c=n.options)==null?void 0:c.media.getTracks().find(function(b){return b.options.id===r})}}function Fr(){}function _r(n){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=n}function Br(n){this.tracks=[],this.options=n}function So(n,r){var c=co.call(this,n,r)||this;c.sampleCounts=[],c.sampleDurations=[],c.version=r.read(1),c.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)c.sampleCounts[k]=r.read(4),c.sampleDurations[k]=r.read(4);return c}function To(n,r){var c=po.call(this,n,r)||this;c.isContainer=!0,c.sampleSizes=[],c.version=r.read(1),c.flag=r.read(3),c.sampleSize=r.read(4);for(var b=r.read(4),k=0;k<b;k++)c.sampleSize===0?c.sampleSizes.push(r.read(4)):c.sampleSizes.push(c.sampleSize);return c}function Eo(n,r){var c=ho.call(this,n,r)||this;c.sampleNumbers=[],c.version=r.read(1),c.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)c.sampleNumbers.push(r.read(4));return c}function wo(n,r){return n=fo.call(this,n,r)||this,n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4),n}function Po(n,r){var c=_o.call(this,n,r)||this;c.entries=[],c.version=r.read(1),c.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)c.entries.push({firstChunk:r.read(4),samplePerChunk:r.read(4),sampleDescriptionIndex:r.read(4)});return c}function xo(n,r){var c=yo.call(this,n,r)||this;c.chunkOffsets=[],c.version=r.read(1),c.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)c.chunkOffsets.push(r.read(8));return c}function ko(n,r){var c=go.call(this,n,r)||this;c.chunkOffsets=[],c.version=r.read(1),c.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)c.chunkOffsets.push(r.read(4));return c}function Co(n,r){var c=vo.call(this,n,r)||this;c.sampleCounts=[],c.sampleOffsets=[],c.version=r.read(1),c.flag=r.read(3),c.entryCount=r.read(4);for(var b=0;b<c.entryCount;b++)c.sampleCounts.push(r.read(4)),c.sampleOffsets.push(r.readInt(4));return c}function Ao(n,r){var c=mo.call(this,n,r)||this;c.sampleDurations=[],c.sampleSizes=[],c.sampleFlags=[],c.sampleCTSs=[],c.sampleCount=r.read(4),c.flag&qt.DATA_OFFSET?c.dataOffset=r.readInt(4):c.dataOffset=0,c.flag&qt.FIRST_FLAG?c.firstSampleFlag=r.read(4):c.firstSampleFlag=0;for(var b=0;b<c.sampleCount;b++)c.flag&qt.DURATION&&(c.sampleDurations[b]=r.read(4)),c.flag&qt.SIZE&&(c.sampleSizes[b]=r.read(4)),c.flag&qt.FLAG&&(c.sampleFlags[b]=r.read(4)),c.flag&qt.CTS_OFFSET&&(c.version===0?c.sampleCTSs[b]=r.read(4):c.sampleCTSs[b]=r.readInt(4));return c}(q=lr=lr||{})[q.H264=27]="H264",q[q.H265=36]="H265",q[q.H266=51]="H266",q[q.AAC=15]="AAC";var Ro={1:te.VIDEO,2:te.VIDEO,3:te.AUDIO,4:te.AUDIO,5:te.UNKNOWN,6:te.UNKNOWN,7:te.UNKNOWN,8:te.UNKNOWN,9:te.UNKNOWN,10:te.UNKNOWN,11:te.UNKNOWN,12:te.UNKNOWN,13:te.UNKNOWN,14:te.UNKNOWN,15:te.AUDIO,16:te.VIDEO,17:te.AUDIO,18:te.UNKNOWN,19:te.UNKNOWN,20:te.UNKNOWN,21:te.UNKNOWN,22:te.UNKNOWN,23:te.UNKNOWN,24:te.UNKNOWN,25:te.UNKNOWN,26:te.UNKNOWN,27:te.VIDEO,28:te.AUDIO,29:te.UNKNOWN,30:te.VIDEO,31:te.UNKNOWN,32:te.UNKNOWN,33:te.VIDEO,36:te.VIDEO,51:te.VIDEO,66:te.UNKNOWN,127:te.UNKNOWN,128:te.AUDIO,129:te.AUDIO,130:te.AUDIO,131:te.AUDIO,132:te.AUDIO,133:te.AUDIO,134:te.AUDIO,135:te.AUDIO,144:te.UNKNOWN,145:te.UNKNOWN,192:te.UNKNOWN,193:te.AUDIO,194:te.AUDIO,207:te.UNKNOWN,209:te.VIDEO,210:te.VIDEO,219:te.UNKNOWN,234:te.VIDEO},Hr,Io=function(n){this.programs=[],this.tableId=n.read(1);var r=new _(n.read(2),16),r=(this.sectionSyntaxIndicator=r.read(1),r.skip(1),r.skip(2),this.sectionLength=r.read(12),this.transportStreamId=n.read(2),new _(n.read(1),8));r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=n.read(1),this.lastSectionNumber=n.read(1);for(var c=0;c<this.sectionLength-12;c+=4)this.programs.push({number:n.read(2),pid:8191&n.read(2)});this.crc32=n.read(4)},Lo=function(n){this.streamId=n.read(1),this.pesPacketLength=n.read(2);var r=new _(n.read(2),16),r=(r.skip(2),this.pesScramblingControl=r.read(2),this.pesPriority=r.read(1),this.dataAlignmentIndicator=r.read(1),this.copyright=r.read(1),this.originalOrCopy=r.read(1),this.ptsDtsFlags=r.read(2),this.esCRFlag=r.read(1),this.esRateFlag=r.read(1),this.dsmTrickModeFlag=r.read(1),this.additionalCopyInfoFlag=r.read(1),this.pesCRCFlag=r.read(1),this.pesExtensionFlag=r.read(1),this.pesHeaderDataLength=n.read(1),n.offset),r=(2&this.ptsDtsFlags?(this.pts=(14&n.read(1))<<27|n.read(2)>>>1<<13|n.read(2)>>>3,this.pts*=4,n.back(1),this.pts+=(6&n.read(1))>>>1,1&this.ptsDtsFlags?(this.dts=(14&n.read(1))<<27|n.read(2)>>>1<<13|n.read(2)>>>3,this.dts*=4,n.back(1),this.dts+=(6&n.read(1))>>>1):this.dts=this.pts):(this.pts=0,this.dts=0),this.pesHeaderDataLength-(n.offset-r));0<r&&n.skip(r),this.data=n.readToUint8()},Oo=function(n){this.streams=[],this.tableId=n.read(1);var r=new _(n.read(2),16),r=(this.sectionSyntaxIndicator=r.read(1),r.skip(1),r.skip(2),this.sectionLength=r.read(12),this.programNumber=n.read(2),new _(n.read(1),8));r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=n.read(1),this.lastSectionNumber=n.read(1),this.pcrPid=8191&n.read(2),this.programInfoLength=4095&n.read(2);for(var c=12+this.programInfoLength;c<=this.sectionLength-2;c+=5){var b={streamType:n.read(1),pid:8191&n.read(2),esInfoLength:4095&n.read(2)};this.streams.push(b),n.skip(b.esInfoLength),c+=b.esInfoLength}this.crc32=n.read(4)};(Me=Hr=Hr||{})[Me.PAT=0]="PAT",Me[Me.CAT=1]="CAT",Me[Me.TSDT=2]="TSDT",No.SYNC_BYTE=71;var yr,qi,Lr=No,q=d(378),Do=d.n(q),ks=(Object.freeze({formatType:Z.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),Object.freeze({type:te.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],sei:[],pixelRatio:[],fps:0,live:!1})),Cs=Object.freeze({type:te.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,samplingFrequencyIndex:0,sampleRate:0,sampleSize:16,channelCount:0}),As=(Object.defineProperty(Rr.prototype,"size",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),Rr.prototype.write=function(n){this.list.push(n)},Rr.prototype.read=function(){return this.list.shift()},Rr.prototype.readAll=function(){var n=this.list;return this.list=[],n},Rr.prototype.clear=function(){this.list=[]},Rr),Me=(qi=function(n,r){return(qi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}qi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)});function Rr(){this.list=[]}function No(n){var r=new _(n.read(4),32);this.syncByte=r.read(8),this.errorIndicator=r.read(1),this.payloadUnitStartIndicator=r.read(1),this.transportPriority=r.read(1),this.pid=r.read(13),this.transportScramblingControl=r.read(2),this.adaptationFlag=r.read(1),this.payloadFlag=r.read(1),this.continueCounter=r.read(4),this.adaptationFlag&&(r=n.read(1),n.skip(r)),this.payloadUnitStartIndicator&&n.skip(1)}(q=yr=yr||{})[q.UNKNOWN=0]="UNKNOWN",q[q.PAT=1]="PAT",q[q.PES=2]="PES",q[q.PMT=3]="PMT",Me(At,Nr=ae),At.probe=function(n){if(n.byteLength<1)return!1;for(var r=0,c=n.byteLength;r<c;r+=188)if(n[r]!==Lr.SYNC_BYTE)return!1;return!0},At.prototype.splitToTsPacket=function(n){this.unhandleBuffer&&this.unhandleBuffer.byteLength&&(n=a.concat(this.unhandleBuffer,n),this.unhandleBuffer=void 0);for(var r=new Uint8Array(n),c=r.byteLength,b=0;b+188<=c;){if(r[b]!==Lr.SYNC_BYTE){var k=new Uint8Array(r.buffer,b).findIndex(function(U){return U===Lr.SYNC_BYTE});if(console.warn("[videox] mpegts sync byte error",r[b],b,k),-1<k){b+=k;continue}break}this.parseTsPacket(r.subarray(b,b+188)),b+=188}b<c&&(this.unhandleBuffer=n.slice(b))},At.prototype.parseTsPacket=function(c){var r,c=a.fromUint8(c),b=new Lr(c),k=null;b.pid===Hr.PAT?(k=new Io(c),this.patPrograms=k.programs,this.emitTSPacket(yr.PAT,b,k)):this.patPrograms.some(function(U){return U.pid===b.pid})?(k=new Oo(c),(r=Q()(this.pmtStreams,k.streams))&&this.emitPackets(),this.metadataChanged=r,this.pmtStreams=k.streams,this.emitTSPacket(yr.PMT,b,k)):(r=this.pmtStreams.find(function(U){return U.pid===b.pid}))?(b.payloadUnitStartIndicator&&this.parsePes(),this.prevPesSegments.push(c.readToUint8()),this.prevPesTSHeader=b,this.prevPmtStream=r):this.emitTSPacket(yr.UNKNOWN,b,k)},At.prototype.parsePes=function(){var n,r=this.prevPmtStream;this.prevPesSegments.length&&this.prevPesTSHeader&&r&&(n=a.fromUint8(a.concatUint8s(this.prevPesSegments)),this.prevPesSegments=[],n.read(2)===1)&&(n=new Lo(n),this.emitTSPacket(yr.PES,this.prevPesTSHeader,n),r.streamType===lr.H265||r.streamType===lr.H266||r.streamType===lr.H264?this.parseVideoPes(n,r):r.streamType===lr.AAC&&this.parseAudioPes(n,r))},At.prototype.parseVideoPes=function(Ne,r){var c,b=Math.round(Ne.dts/90),k=Math.round(Ne.pts/90),U=r.streamType===lr.H265,G=r.streamType===lr.H266,ee={},ce=!0,fe=!1,Ee=[],Te=[],Ce=[],ze=[],Ne=A.extractAnnexbNAL(Ne.data);if(G?(c=[],Ne.forEach(function(Ue){var je,Ae=a.fromUint8(Ue);Ue.length<2||(je=new X(Ae)).nalType<N.VVC_AUD_NUT&&(je.nalType===N.VVC_SPS_NUT?(fe=!0,Ae=new ht(Ft(Ae.readToUint8())),ee.width=Ae.width,ee.height=Ae.height,ee.codec=Ae.codec,Te.push(Ue)):je.nalType===N.VVC_VPS_NUT?Ce.push(Ue):je.nalType===N.VVC_PPS_NUT&&ze.push(Ue),ce=X.isNonRefNALType(je.nalType)&&ce,c.push(X.createAnnexbStartCode(),Ue))}),G=a.concatUint8s(c),Ee.push(G)):Ne.forEach(function(Ue){var je,Ae,Ye=a.fromUint8(Ue);Ue.length<2||(U?(Ae=new B(Ye)).nalType<I.ACCESS_UNIT_DELIMITER&&(Ae.nalType>=I.VPS&&(Ae.nalType===I.SPS?(fe=!0,je=new qe(Ft(Ye.readToUint8())),ee.width=je.width,ee.height=je.height,ee.pixelRatio=je.pixelRatio,ee.codec=je.codec,Te.push(Ue)):Ae.nalType===I.VPS?Ce.push(Ue):Ae.nalType===I.PPS&&ze.push(Ue)),!kt.isSafari||Ae.nalType===I.TRAIL_R||Ae.nalType===I.TRAIL_N||Ae.nalType===I.IDR_W_RADL||Ae.nalType===I.IDR_N_LP||Ae.nalType===I.CRA||Ae.nalType===I.SPS||Ae.nalType===I.VPS||Ae.nalType===I.PPS||Ae.nalType===I.SEI?Ee.push(Ue):console.warn("skip this nalu nalType:",Ae.nalType),ce=B.isNonRefNALType(Ae.nalType)&&ce):((Ae=new O(Ye)).nalType<V.DIVIDER&&(Ae.nalType===V.SPS?(fe=!0,je=new Ie(Ft(Ye.readToUint8())),ee.width=je.width,ee.height=je.height,ee.pixelRatio=je.pixelRatio,ee.codec=je.codec,Te.push(Ue)):Ae.nalType===V.PPS&&ze.push(Ue),Ee.push(Ue)),ce=!1))}),!this.videoLoaded){if(!fe)return;this.videoLoaded=!0,ee.baseDTS=b,ee.basePTS=k}Ce.length&&(ee.vps=Ce),Te.length&&(ee.sps=Te),ze.length&&(ee.pps=ze),this.videoMetadata?(this.metadataChanged=F(this.videoMetadata,ee),this.metadataChanged&&this.emit("updatedtrackmetadata",this.videoMetadata)):(this.videoMetadata=Do()({},ks,ee),this.metadataChanged=!0),this.checkMetadataChanged(),this.packetQueue.write({trackId:r.pid,codec:this.videoMetadata.codec,trackType:te.VIDEO,isSync:fe,isNonRef:ce,data:Ee,dts:b,pts:k,size:Ee.reduce(function(Ue,je){return Ue+je.byteLength},0)})},At.prototype.parseAudioPes=function(fe,r){var c,b,k,U=this,G={},ee=Math.round(fe.dts/90),ce=Math.round(fe.pts/90),fe=(this.audioLoaded||(this.audioLoaded=!0,G.baseDTS=ee,G.basePTS=ce),E(fe.data));fe.length&&(c=fe[0],b="mp4a.40."+c.audioObjectType,G.codec=b,G.audioObjectType=c.audioObjectType,G.sampleRate=c.sampleRate,G.channelCount=c.channelCount,this.audioMetadata?(this.metadataChanged=F(this.audioMetadata,G),this.metadataChanged&&this.emit("updatedtrackmetadata",this.audioMetadata)):(this.audioMetadata=Do()({},Cs,G),this.metadataChanged=!0),this.checkMetadataChanged(),k=Math.round(9e4*T/c.sampleRate/90),fe.forEach(function(Ee,Te){U.packetQueue.write({trackId:r.pid,codec:b,trackType:te.AUDIO,isSync:!0,isNonRef:!0,data:[Ee.data],dts:k*Te+ee,pts:k*Te+ce,size:Ee.data.byteLength})}))},At.prototype.checkMetadataChanged=function(){var n,r,c=this;return this.pmtStreams.length&&this.metadataChanged&&(n=[],this.pmtStreams.every(function(b){return b=Ro[b.streamType],b===te.VIDEO?(c.videoMetadata&&n.push(c.videoMetadata),!(!c.videoMetadata||!c.videoMetadata.codec)):b!==te.AUDIO||(c.audioMetadata&&n.push(c.audioMetadata),!(!c.audioMetadata||!c.audioMetadata.codec))}))&&(r={formatType:Z.MPEGTS,live:!1,progressive:!!this.options.progressive,url:this.loader.url,basePTS:Math.min.apply(Math,n.map(function(b){return b.basePTS||0})),baseDTS:Math.min.apply(Math,n.map(function(b){return b.baseDTS||0})),timescale:1e3,duration:0,tracks:n},this.metadataChanged=!1,this.metadata?F(this.metadata,r)&&this.emit("updatedmetadata",this.metadata):(this.metadata=r,this.emit("loadedmetadata",this.metadata))),this.metadataChanged},At.prototype.emitTSPacket=function(n,r,c){ge.debug("loadedtspacket","type:",yr[n],"header:",r,"payload:",c),this.emit("loadedtspacket",{type:n,header:r,payload:c})},At.prototype.emitPackets=function(){var n;this.metadata&&this.loader.status!==se.SUSPENGING&&!this.metadataChanged&&0<this.packetQueue.size&&(n=this.packetQueue.readAll(),this.emit("loadeddata",{packets:n}))},At.prototype.continuousLoad=function(n){return this.loader.load(n)},At.prototype.parse=function(n){this.splitToTsPacket(n),this.emitPackets()},At.prototype.onProgress=function(n){n.data.byteLength&&this.parse(n.data.buffer)},At.prototype.onLoadEnd=function(){this.parsePes(),this.emitPackets(),this.loader.eof&&this.emit("end",void 0)},At.prototype.resume=function(){return this.options.progressive?Nr.prototype.resume.call(this):u.resolve(!1)},At.prototype.flush=function(){this.unhandleBuffer=void 0,this.prevPesTSHeader=void 0,this.prevPmtStream=void 0,this.prevPesSegments=[]},At.prototype.seek=function(){this.reset(),this.loader.jump(0)},At.prototype.reset=function(){Nr.prototype.reset.call(this),this.flush(),this.audioLoaded=!1,this.videoLoaded=!1,this.packetQueue.clear(),this.patPrograms=[],this.pmtStreams=[],this.metadata=null,this.audioMetadata=void 0,this.videoMetadata=void 0,this.metadataChanged=!1};var $i=At;Gi=function(n,r){return(Gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};var zi=function(){return(zi=Object.assign||function(n){for(var r,c=1,b=arguments.length;c<b;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(n[k]=r[k]);return n}).apply(this,arguments)},Or={M3U:/^#EXTM3U/,INF:/^#EXTINF:?([0-9\.]*)?,?(.*)?(?:\n|\r\n)(.*)$/,X_TARGETDURATION:/^#EXT-X-TARGETDURATION:?([0-9.]*)?/,X_VERSION:/^#EXT-X-VERSION:?([0-9.]*)?/,X_MEDIA_SEQUENCE:/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/,X_DISCONTINUITY_SEQUENCE:/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/,X_PLAYLIST_TYPE:/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/,X_BYTERANGE:/^#EXT-X-BYTERANGE:?(.*)?$/,X_ALLOW_CACHE:/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/,X_MAP:/^#EXT-X-MAP:?(.*)$/,X_STREAM_INF:/^#EXT-X-STREAM-INF:?(.*)$/,X_MEDIA:/^#EXT-X-MEDIA:?(.*)$/,X_ENDLIST:/^#EXT-X-ENDLIST/,X_DISCONTINUITY:/^#EXT-X-DISCONTINUITY/,X_PROGRAM_DATE_TIME:/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/,X_KEY:/^#EXT-X-KEY:?(.*)$/,X_START:/^#EXT-X-START:?(.*)$/,X_CUE_OUT_CONT:/^#EXT-X-CUE-OUT-CONT:?(.*)?$/,X_CUE_OUT:/^#EXT-X-CUE-OUT:?(.*)?$/,X_CUE_IN:/^#EXT-X-CUE-IN:?(.*)?$/,X_SKIP:/^#EXT-X-SKIP:(.*)$/,X_PART:/^#EXT-X-PART:(.*)$/,X_SERVER_CONTROL:/^#EXT-X-SERVER-CONTROL:(.*)$/,X_PART_INF:/^#EXT-X-PART-INF:(.*)$/,X_PRELOAD_HINT:/^#EXT-X-PRELOAD-HINT:(.*)$/,X_RENDITION_REPORT:/^#EXT-X-RENDITION-REPORT:(.*)$/},Mo=(function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Gi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Nt,Dr=ae),Nt.probe=function(n){var r;return 7<=n.byteLength&&(r=[],n.forEach(function(c){return r.push(String.fromCharCode(c))}),Or.M3U.test(r.join("")))},Object.defineProperty(Nt.prototype,"status",{get:function(){return this.loader.eof?this.mpegtsParser.status===se.IDLE?this.shouldContinuousLoad?se.LOADING:se.SUSPENGING:this.mpegtsParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(Nt.prototype,"duration",{get:function(){return this.isLive?1/0:Math.round(1e3*this.segments.reduce(function(n,r){return n+r.duration},0))},enumerable:!1,configurable:!0}),Object.defineProperty(Nt.prototype,"currentSegment",{get:function(){return this.segments[this.currSegmentIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(Nt.prototype,"prevSegmentsTotalDuration",{get:function(){return this.segments.slice(0,this.currSegmentIndex).reduce(function(n,r){return n+r.duration},0)},enumerable:!1,configurable:!0}),Nt.prototype.insertSegment=function(n){var r=!this.segments.some(function(c){return c.uri===n.uri});return r&&this.segments.push(n),r},Nt.prototype.onProgress=function(n){this.bufferSegments.push(n)},Nt.prototype.onLoadEnd=function(){var n,r,c,b,k,U=this;this.loader.eof&&(r=a.concatUint8s(this.bufferSegments.map(function(G){return G.data})),this.bufferSegments=[],r.byteLength&&(r=new TextDecoder().decode(r).split(/\n#/).map(function(G){return"#"+G.trim()}),c=0,k=b=!1,r.forEach(function(G){var ee=G.match(Or.INF);ee?(ee={sequence:c,duration:parseFloat(ee[1]),uri:new URL(ee[3],U.url).href,discontinuity:k},U.insertSegment(ee),U.emit("loadedsegment",ee)):(n=G.match(Or.X_MEDIA_SEQUENCE))?c=Number(n[1]):Or.X_ENDLIST.test(G)?b=!0:Or.X_DISCONTINUITY.test(G)&&(k=!0)}),this.discontinuity=k,this.isLive=!b,this.segments.length||this.emit("error",{code:me.PARSER,message:"M3U8文件无TS数据"}),this.prevManifestLoadedTime=Date.now(),this.loadSegment()),ge.info("hls manifest loaded, all segments length:",this.segments.length))},Nt.prototype.loadSegment=function(){var n,r,c=this;return this.shouldContinuousLoad?(n=this.segments[this.currSegmentIndex],this.isLive&&!n?(r=1e3*this.m3u8UpdateDuration-(Date.now()-this.prevManifestLoadedTime))<=0?this.loader.load(this.loader.url):new u(function(b){clearTimeout(c.fetchTimer),c.fetchTimer=setTimeout(function(){b(c.loader.load(c.loader.url))},r)}):n?(this.cachePackets=[],this.m3u8UpdateDuration=n.duration||2,this.currSegmentStartPTS=void 0,this.mpegtsParser.continuousLoad(n.uri)):(this.ended=!0,u.resolve(!1))):u.resolve(!1)},Nt.prototype.suspend=function(){clearTimeout(this.fetchTimer),this.shouldContinuousLoad=!1},Nt.prototype.resume=function(){var n;return this.cachePackets.length?(n=this.cachePackets,this.cachePackets=[],this.emit("loadeddata",{packets:n}),u.resolve(!1)):this.shouldContinuousLoad||this.ended?u.resolve(!1):(this.shouldContinuousLoad=!0,this.loader.eof?this.mpegtsParser.loader.status===se.LOADING||this.mpegtsParser.loader.status===se.ERROR?u.resolve(!0):this.loadSegment():Dr.prototype.resume.call(this))},Nt.prototype.seek=function(n){this.ended=!1;var r=0,c=this.segments.findIndex(function(b){return r+=b.duration,n<r});this.currSegmentIndex=-1<c?c:this.segments.length-1,this.cachePackets=[],this.bufferSegments=[],this.mpegtsParser.suspend(),this.mpegtsParser.flush(),this.shouldContinuousLoad=!0,this.loadSegment()},Nt.prototype.reset=function(){clearTimeout(this.fetchTimer),Dr.prototype.reset.call(this),this.discontinuity=!1,this.cachePackets=[],this.bufferSegments=[],this.shouldContinuousLoad=!0,this.mpegtsParser.reset(),this.segments=[],this.currSegmentIndex=0,this.isLive=!1,this.ended=!1},Nt.prototype.destroy=function(){Dr.prototype.destroy.call(this),this.mpegtsParser.loader.removeAllListeners(),this.mpegtsParser.destroy()},Nt),q=d(801),Rs=d.n(q);Ki=function(n,r){return(Ki=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};function jr(n,r,c){if(arguments.length===2)for(var b,k=0,U=r.length;k<U;k++)!b&&k in r||((b=b||Array.prototype.slice.call(r,0,k))[k]=r[k]);return n.concat(b||Array.prototype.slice.call(r))}function ur(n){return n.split("").map(function(r){return r.charCodeAt(0)})}var Uo,Ki,Dr,Gi,Nr,Xi=function(){return(Xi=Object.assign||function(n){for(var r,c=1,b=arguments.length;c<b;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(n[k]=r[k]);return n}).apply(this,arguments)},Is=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],Ls=[bo,Mo,nn,$i],Os=(function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Ki(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}($t,Uo=ne),$t.prototype.createLoader=function(){var n=new ot(this.options);return n.proxy(this,["progress","error"]),n.proxyOnce(this,["loadstart","loadend"]),n.once("progress",this.handleFirstLoadData),n},$t.prototype.createParser=function(n){return n=new n(Xi(Xi({},this.options),{loader:this.loader})),n.proxy(this,Is),n},Object.defineProperty($t.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(n){ge.info("设置skipFrame:",n),Rs()(n)||(this.options.skipFrame=n,this.activeParser.skipFrame=n)},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),$t.prototype.parse=function(n){ge.info("执行parse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:n}),this.activeParser.onLoadEnd()},$t.prototype.load=function(n){return ge.info("执行load",n),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(n)},$t.prototype.seek=function(n){return ge.info("执行seek",n),this.activeParser.seek(n)},$t.prototype.suspend=function(){return this.activeParser.suspend()},$t.prototype.resume=function(){return this.activeParser.resume()},$t.prototype.destroy=function(){ge.info("执行destory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},$t);function $t(n){n===void 0&&(n={});var r=Uo.call(this)||this;return r.loader=new ot,r.parserClasses=Ls,r.logger=ge,r.handleFirstLoadData=function(c){var b,k;c&&((k=r.parserClasses.find(function(U){return U.probe(c.data)}))?(b=r.activeParser.formatType,r.activeParser.destroy(),r.activeParser=r.createParser(k),ge.info("切换parser, ".concat(Z[b]," -> ").concat(Z[r.activeParser.formatType])),r.emit("parserchange",void 0),r.activeParser.onProgress(c)):(k="未找到对应的Parser, Byte数据: "+c.data.slice(0,20).join(","),ge.error(k),r.emit("error",{code:me.PARSER,message:k})))},r.options=n,r.loader=r.createLoader(),r.activeParser=r.createParser(r.parserClasses[0]),r.logger.info("demuxer options",n),r}function Nt(n){var r=Dr.call(this,n)||this;return r.mpegtsParser=new $i({progressive:!0,timeout:r.options.timeout}),r.currSegmentIndex=0,r.isLive=!1,r.shouldContinuousLoad=!0,r.ended=!1,r.prevManifestLoadedTime=0,r.fetchTimer=-1,r.discontinuity=!1,r.m3u8UpdateDuration=2,r.bufferSegments=[],r.cachePackets=[],r.formatType=Z.HLS,r.segments=[],r.handleTSEnd=function(){r.currSegmentIndex>=r.segments.length-1&&r.emit("end",void 0)},r.handleTSLoadedMetadata=function(c){r.basePTS===void 0&&(r.basePTS=c.basePTS),r.baseDTS===void 0&&(r.baseDTS=c.baseDTS),c=zi(zi({},c),{formatType:Z.HLS,live:r.isLive,progressive:!0,basePTS:r.basePTS,baseDTS:r.baseDTS,duration:r.duration,url:r.loader.url,discontinuity:r.discontinuity}),r.metadata?F(r.metadata,c)&&r.emit("updatedmetadata",r.metadata):(r.metadata=c,r.emit("loadedmetadata",r.metadata))},r.handleTSLoadedData=function(ee){var b,k,U,G,ee=ee.packets;ee.length&&((b=r.currentSegment)!=null&&b.discontinuity&&(b=ee.slice().sort(function(ce,fe){return ce.pts-fe.pts}),r.currSegmentStartPTS===void 0&&(r.currSegmentStartPTS=b[0].pts),k=r.currSegmentStartPTS,U=Math.round(1e3*r.prevSegmentsTotalDuration)+(r.basePTS||0),b.forEach(function(ce){var fe=ce.dts-ce.pts;ce.pts=U+ce.pts-k,ce.dts=ce.pts+fe})),r.cachePackets.length?(G=r.cachePackets.concat(ee),r.cachePackets=[]):G=ee,r.shouldContinuousLoad?r.emit("loadeddata",{packets:G}):r.cachePackets=G)},r.handleTSLoadEnd=function(){r.currSegmentIndex++,r.loadSegment()},r.mpegtsParser.on("loadedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("updatedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("loadeddata",r.handleTSLoadedData),r.mpegtsParser.on("end",r.handleTSEnd),r.mpegtsParser.loader.on("loadend",r.handleTSLoadEnd),r.mpegtsParser.loader.proxy(r,["error"]),r.mpegtsParser.proxy(r,["updatedtrackmetadata"]),r}function At(){var n=Nr!==null&&Nr.apply(this,arguments)||this;return n.patPrograms=[],n.pmtStreams=[],n.prevPesSegments=[],n.packetQueue=new As,n.audioLoaded=!1,n.videoLoaded=!1,n.metadataChanged=!1,n.metadata=null,n.formatType=Z.MPEGTS,n}Je.prototype.create=function(n){for(var r=[],c=1;c<arguments.length;c++)r[c-1]=arguments[c];var b=new Uint8Array(8),k=[b].concat(r.map(function(ee){return new Uint8Array(ee)})),U=k.reduce(function(ee,ce){return ee+ce.byteLength},0),G=new a(b.buffer);return G.write(4,U),ur(n).forEach(function(ee){return G.write(1,ee)}),a.concatUint8s(k)},Je.prototype.avc1=function(n){var k=n.pixelRatio,r=n.vps,c=new ArrayBuffer(78),b=new a(c),k=(b.write(4,0),b.write(2,0),b.write(2,1),b.write(4,0),b.write(4,0),b.write(4,0),b.write(4,0),b.write(2,n.width),b.write(2,n.height),b.write(4,4718592),b.write(4,4718592),b.write(4,0),b.write(2,1),b.write(1,12),ur("@ali/splayer").forEach(function(U){return b.write(1,U)}),b.skip(19),b.write(2,24),b.write(2,65535),k.length===2?this.pasp(k[0],k[1]):[]);return r.length?this.create("hvc1",c,this.hvcC(n),k):this.create("avc1",c,this.avcC(n),k)},Je.prototype.avcC=function(k){var b=k.sps,k=k.pps,r=[],c=[],b=(r.push(b.length),b.forEach(function(U){r.push(U.byteLength>>>8&255),r.push(255&U.byteLength),U.forEach(function(G){return r.push(G)})}),c.push(k.length),k.forEach(function(U){c.push(U.byteLength>>>8&255),c.push(255&U.byteLength),U.forEach(function(G){return c.push(G)})}),new ArrayBuffer(5)),k=new a(b);return k.write(1,1),k.write(1,r[4]||0),k.write(1,r[5]||0),k.write(1,r[6]||0),k.write(1,255),this.create("avcC",b,r,c)},Je.prototype.btrt=function(){var n=new ArrayBuffer(12),r=new a(n);return r.write(4,1875072),r.write(4,3e6),r.write(4,3e6),this.create("btrt",n)},Je.prototype.pasp=function(n,r){var c=new ArrayBuffer(8),b=new a(c);return b.write(4,n),b.write(4,r),this.create("pasp",c)},Je.prototype.dinf=function(){return this.create("dinf",this.dref())},Je.prototype.dref=function(){var n=new ArrayBuffer(8),r=new a(n);return r.write(4,0),r.write(4,1),this.create("dref",n,this.url())},Je.prototype.esds=function(b){var r=b.audioObjectType,c=b.sampleRate,b=b.channelCount,k=new ArrayBuffer(33),U=new a(k),G=5<=r,ee=(U.write(4,0),U.write(1,3),U.write(1,G?27:25),U.write(2,1),U.write(1,0),U.write(1,4),U.write(1,G?19:17),U.write(1,64),U.write(1,21),U.write(3,0),U.write(4,0),U.write(4,0),U.write(1,5),U.write(1,G?4:2),f.findIndex(function(ce){return c===ce}));return U.write(1,r<<3|(14&ee)>>1),G?(U.write(1,(1&(r=ee))<<7|b<<3|(14&r)>>1),U.write(1,(1&r)<<7|8),U.write(1,0)):U.write(1,(1&ee)<<7|b<<3),U.back(4),U.skip(4),U.write(1,6),U.write(1,1),U.write(1,2),this.create("esds",k)},Je.prototype.ftyp=function(){var n=new ArrayBuffer(16),r=new a(n);return ur("isom").forEach(function(c){return r.write(1,c)}),r.write(4,1),ur("isom").forEach(function(c){return r.write(1,c)}),ur("avc1").forEach(function(c){return r.write(1,c)}),this.create("ftyp",n)},Je.prototype.hdlr=function(n){var r=new ArrayBuffer(37),c=new a(r);return c.skip(8),n===te.VIDEO?ur("vide").forEach(function(b){return c.write(1,b)}):n===te.AUDIO&&ur("soun").forEach(function(b){return c.write(1,b)}),c.skip(12),n===te.VIDEO?ur("VideoHandler").forEach(function(b){return c.write(1,b)}):n===te.AUDIO&&ur("SoundHandler").forEach(function(b){return c.write(1,b)}),c.write(1,0),this.create("hdlr",r)},Je.prototype.hvcC=function(k){var b=k.vps,r=k.sps,k=k.pps,c=[],b=[{type:I.VPS,data:b},{type:I.SPS,data:r},{type:I.PPS,data:k}],k=(b.forEach(function(Ee){var fe=Ee.type,Ee=Ee.data;c.push(128|fe),c.push(Ee.length>>>8&255),c.push(255&Ee.length),Ee.forEach(function(Te){c.push(Te.byteLength>>>8&255),c.push(255&Te.byteLength),Te.forEach(function(Ce){return c.push(Ce)})})}),new ArrayBuffer(23)),U=new a(k),G=r.length?r[0]:[];U.write(1,1);for(var ee=1;ee<12;ee++)U.write(1,G[ee]||0);return U.write(1,0),U.write(2,0),U.write(1,0),U.write(1,1),U.write(1,0),U.write(1,0),U.write(2,0),U.write(1,15),U.write(1,b.length),this.create("hvcC",k,c)},Je.prototype.mdat=function(n){return this.create("mdat",n)},Je.prototype.mdhd=function(n){var r=new ArrayBuffer(24),c=new a(r);return c.write(4,0),c.write(4,0),c.write(4,0),c.write(4,n.timescale),c.write(4,0),c.write(2,21956),c.write(2,0),this.create("mdhd",r)},Je.prototype.mdia=function(n){return this.create("mdia",this.mdhd(n),this.hdlr(n.type),this.minf(n))},Je.prototype.mfhd=function(n){var r=new ArrayBuffer(8),c=new a(r);return c.write(4,0),c.write(4,n),this.create("mfhd",r)},Je.prototype.minf=function(n){var r=n.type===te.VIDEO?this.vmhd():this.smhd();return this.create("minf",r,this.dinf(),this.stbl(n))},Je.prototype.moof=function(G,k,c){var b=this,k=this.mfhd(k),U=8+k.byteLength+60*G.tracks.length+16*c.length+8,G=G.tracks.map(function(ee){var ce=c.filter(function(Ee){return Ee.trackType===ee.type}),fe=b.traf(ee,ce,U);return U+=ce.reduce(function(Ee,Te){return Ee+Te.size},0),fe});return this.create.apply(this,jr(["moof",k],G,!1))},Je.prototype.moov=function(n){var r=this,c=n.tracks.map(function(b){return r.trak(b)});return this.create.apply(this,jr(jr(["moov",this.mvhd(n)],c,!1),[this.mvex(n)],!1))},Je.prototype.mp4a=function(n){var r=new ArrayBuffer(28),c=new a(r);return c.write(4,0),c.write(2,0),c.write(2,1),c.write(4,0),c.write(4,0),c.write(2,n.channelCount),c.write(2,n.sampleSize),c.write(4,0),c.write(4,n.sampleRate<<16),this.create("mp4a",r,this.esds(n))},Je.prototype.mvex=function(n){var r=this;return this.create.apply(this,jr(["mvex"],n.tracks.map(function(c){return r.trex(c)}),!1))},Je.prototype.mvhd=function(n){var r=new ArrayBuffer(100),c=new a(r);return c.write(4,0),c.write(4,0),c.write(4,0),c.write(4,n.timescale),c.write(4,n.duration),c.write(2,1),c.skip(2),c.write(1,1),c.skip(1),c.skip(10),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(b){return c.write(1,b)}),c.skip(24),c.write(4,4294967295),this.create("mvhd",r)},Je.prototype.sdtp=function(n){var r=n.length,c=new ArrayBuffer(4+r),b=new a(c);b.write(4,0);for(var k=0;k<r;k++){var U=n[k];b.write(1,U.flag)}return this.create("sdtp",c)},Je.prototype.smhd=function(){var n=new ArrayBuffer(8),r=new a(n);return r.write(4,0),r.write(4,0),this.create("smhd",n)},Je.prototype.stbl=function(n){return this.create("stbl",this.stsd(n),this.stts(),this.stsc(),this.stsz(),this.stco())},Je.prototype.stco=function(){var n=new ArrayBuffer(8),r=new a(n);return r.write(4,0),r.write(4,0),this.create("stco",n)},Je.prototype.stsc=function(){var n=new ArrayBuffer(8),r=new a(n);return r.write(4,0),r.write(4,0),this.create("stsc",n)},Je.prototype.stsd=function(n){var r=new ArrayBuffer(8),c=new a(r);return c.write(4,0),c.write(4,1),n.type===te.VIDEO?this.create("stsd",r,this.avc1(n)):n.type===te.AUDIO?this.create("stsd",r,this.mp4a(n)):this.create("stsd",r)},Je.prototype.stsz=function(){var n=new ArrayBuffer(12),r=new a(n);return r.write(4,0),r.write(4,0),r.write(4,0),this.create("stsz",n)},Je.prototype.stts=function(){var n=new ArrayBuffer(8),r=new a(n);return r.write(4,0),r.write(4,0),this.create("stts",n)},Je.prototype.tkhd=function(n){var r=new ArrayBuffer(84),c=new a(r);return c.write(4,7),c.write(4,0),c.write(4,0),c.write(4,n.id),c.write(4,0),c.write(4,0),c.write(4,0),c.write(4,0),c.write(4,0),c.write(1,0),c.write(1,0),c.write(2,0),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(b){return c.write(1,b)}),c.write(2,n.width||0),c.write(2,0),c.write(2,n.height||0),c.write(2,0),this.create("tkhd",r)},Je.prototype.tfdt=function(n){var r=new ArrayBuffer(8),c=new a(r);return c.write(4,0),c.write(4,n),this.create("tfdt",r)},Je.prototype.tfhd=function(n){var r=new ArrayBuffer(8),c=new a(r);return c.write(4,0),c.write(4,n.id),this.create("tfhd",r)},Je.prototype.traf=function(n,r,c){c===void 0&&(c=0);var b=r.length?r[0].dts:0;return this.create("traf",this.tfhd(n),this.tfdt(b),this.trun(r,c))},Je.prototype.trak=function(n){return this.create("trak",this.tkhd(n),this.mdia(n))},Je.prototype.trex=function(n){var r=new ArrayBuffer(24),c=new a(r);return c.write(4,0),c.write(4,n.id),c.write(4,1),c.write(4,0),c.write(4,0),c.write(4,65537),this.create("trex",r)},Je.prototype.trun=function(n,r){var c=n.length,b=new ArrayBuffer(12+16*c),k=new a(b);k.write(4,3841),k.write(4,n.length),k.write(4,r);for(var U=0;U<c;U++){var G=n[U];k.write(4,G.duration),k.write(4,G.size),k.write(4,G.flag),k.write(4,G.cts)}return this.create("trun",b)},Je.prototype.vmhd=function(){var n=new ArrayBuffer(12),r=new a(n);return r.write(4,1),r.write(2,0),r.write(2,0),r.write(2,0),r.write(2,0),this.create("vmhd",n)},Je.prototype.url=function(){var n=new ArrayBuffer(4);return new a(n).write(4,1),this.create("url ",n)};var Ds=Je;function Je(){}Yi.createSilentFrame=function(n,r){if(n==="mp4a.40.2"){if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array},Yi.FRAME_DURATION=1024;var Fo=Yi;function Yi(){}dr.prototype.updateConfig=function(n){Object.assign(this.config,n)},dr.prototype.createInitSegment=function(){var n=a.concatUint8(this.generator.ftyp(),this.generator.moov(this.config));return this.offset=n.byteLength,n},dr.prototype.createSegment=function(n){var r,c,b=this;return n.length?(r=[],this.config.tracks.forEach(function(k){var U,G=n.filter(function(ee){return ee.trackType===k.type});G.length&&(U=null,k.type===te.VIDEO?U=b.recaculateVideoSamples(G,k):k.type===te.AUDIO&&(U=b.recaculateAudioSamples(G,k)),U)&&(r.push(b.generator.moof(b.config,++b.sequenceNumber,U)),r.push(b.generator.mdat(a.concatUint8s(U.map(function(ee){return ee.data})))))}),c=a.concatUint8s(r),this.offset+=c.byteLength,c):new Uint8Array},dr.prototype.createSlientFrames=function(n,r,c,b){var k=[];if(1.5*b<c){this.logger.warn("remux audio found pts hole at pts:",n,"timestamp:",(n-this.config.basePTS)/r.timescale,"gap duration:",c,"sample duration:",b);for(var U=Fo.createSilentFrame(r.codec,r.channelCount),G=Math.ceil(c/b),ee=0;ee<G;ee++)k.push({flag:nt.DEPENDS_NO,trackType:te.AUDIO,dts:n+b*ee,cts:0,duration:b,size:U.byteLength,data:U,isSync:!0});k.length&&(k[k.length-1].duration=c-(G-1)*b)}return k},dr.prototype.recaculateAudioSamples=function(n,r){var c=[];this.prevAudioPacket&&(n.unshift(this.prevAudioPacket),this.prevAudioPacket=void 0);var b,k,U=Math.round(Fo.FRAME_DURATION/r.sampleRate*r.timescale);!this.audioInited&&n.length&&(this.audioInited=!0,k=n[0].pts-this.config.basePTS,this.createSlientFrames(this.config.basePTS,r,k,U).forEach(function(Te){c.push(Te)}));for(var G,ee,ce=0,fe=0,Ee=n.length;ce<Ee;ce++){if(b=n[ce],G=n[ce+1]){if((fe=G.dts-b.dts)<0){if(!((G=n.findIndex(function(Te){return b.dts<Te.dts}))>ce+1))break;fe=n[G].dts-b.dts,ce=G-1,this.logger.warn("remux audio found pts overlap at pts:",b.pts,"timestamp:",(b.pts-(this.config.basePTS||0))/r.timescale,"gap duration:",fe,"sample duration:",U)}}else{if(!b.isLast||!c.length){this.prevAudioPacket=b;break}fe=c[c.length-1].duration}0<fe&&((G=this.createSlientFrames(b.pts+U,r,fe-U,U)).length&&(fe=U),ee=a.concatUint8s(b.data),c.push({flag:nt.DEPENDS_NO,trackType:te.AUDIO,size:ee.byteLength,dts:b.dts,cts:b.pts-b.dts,duration:fe,data:ee,isSync:!0}),G.forEach(function(Te){c.push(Te)}))}return c.length&&this.recaculateSample(c[0],this.config.baseDTS),c},dr.prototype.recaculateVideoSamples=function(n,r){var c;this.prevVideoPacket&&(n.unshift(this.prevVideoPacket),this.prevVideoPacket=void 0),this.videoInited||(this.videoInited=!0,c=Math.min.apply(Math,n.map(function(Ne){return Ne.pts})),n.find(function(Ne){return Ne.pts===c}).pts=this.config.basePTS);for(var b,k,U,G,ee=[],ce=this,fe=0,Ee=0,Te=0,Ce=n.length;fe<Ce;fe++){var ze=function(je,Ae,Ye,xt){if(b=n[je],k=n[je+1]){if((Ye=k.dts-b.dts)<0){for(k.dts=b.dts,Ae=je+1;Ae<xt-1;Ae++)n[Ae].dts>n[Ae+1].dts&&(n[Ae+1].dts=n[Ae].dts);ce.logger.warn("remux video found pts overlap at pts:",b.pts,"timestamp:",(b.pts-ce.config.basePTS)/r.timescale,"gap packet number:",Ae-je,"gap duration:",Ye),Ye=0}}else{if(!b.isLast||!ee.length)return ce.prevVideoPacket=b,U=Ae,G=Ye,"break";Ye=ee[ee.length-1].duration}var ut;0<=Ye&&(ut=[],b.data.forEach(function($e){ut.push(O.createAVCCStartCode($e.length),$e)}),je=a.concatUint8s(ut),ee.push({flag:b.isSync?nt.DEPENDS_NO:nt.IS_NON_SYNC|nt.DEPENDS_YES,trackType:te.VIDEO,size:je.byteLength,dts:b.dts,cts:b.pts-b.dts,duration:Ye,data:je,isSync:b.isSync})),U=Ae,G=Ye}(fe,Ee,Te,Ce),Ee=U,Te=G;if(ze==="break")break}return ee.length&&this.recaculateSample(ee[0],this.config.baseDTS),ee},dr.prototype.recaculateSample=function(n,r){return r=n.dts-r,n.dts=r,n},dr.prototype.flush=function(){this.prevAudioPacket=void 0,this.prevVideoPacket=void 0};var Qi=dr;tn=function(n,r){return(tn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}tn(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(Vr,en=ne),Vr.prototype.end=function(){this.emit("end",void 0)},Vr.prototype.pipe=function(n,r){return r?this.on("data",function(c){return n.write(r(c))}):this.on("data",function(c){return n.write(c)}),this.on("end",function(){return n.end()}),n},Me=Vr,Zi=function(n,r){return(Zi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}))(n,r)};var Ji,Zi,en,tn,rn=function(){return(rn=Object.assign||function(n){for(var r,c=1,b=arguments.length;c<b;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(n[k]=r[k]);return n}).apply(this,arguments)},Ns=(function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=n}Zi(n,r),n.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}(cr,Ji=Me),cr.prototype.remux=function(n,r){var c=this.remuxerMap.get(n);c&&r.length&&this.emit("data",{type:n,buffer:c.createSegment(r).buffer,eos:!!r[r.length-1].isLast})},cr.prototype.eos=function(){var n=this;this.pendingPacketsMap.forEach(function(r,c){n.pendingPacketsMap.delete(c),n.remux(c,r)})},cr.prototype.writeMetadata=function(n){var r=this;(this.metadata=n).tracks.forEach(function(c){return r.writeTrackMetadata(c)})},cr.prototype.writeTrackMetadata=function(n){this.eos();var r=this.remuxerMap.get(n.type);r&&(r.updateConfig(rn(rn({},this.metadata),{tracks:[n]})),this.emit("data",{type:n.type,buffer:r.createInitSegment().buffer,eos:!1}))},cr.prototype.write=function(c){var r=this,c=c.packets,b=this.pendingPacketsMap;c.forEach(function(k){var U=b.get(k.trackType);U?(U.push(k),10<=U.length&&(b.set(k.trackType,[]),r.remux(k.trackType,U))):b.set(k.trackType,[k])})},cr.prototype.flush=function(){this.remuxerMap.forEach(function(n){return n.flush()}),this.pendingPacketsMap.clear()},cr.prototype.end=function(){this.eos(),Ji.prototype.end.call(this)},cr);function cr(){var n=Ji.call(this)||this;return n.remuxerMap=new Map,n.pendingPacketsMap=new Map,n.metadata={},n.remuxerMap.set(te.VIDEO,new Qi),n.remuxerMap.set(te.AUDIO,new Qi),n}function Vr(){return en!==null&&en.apply(this,arguments)||this}function dr(){this.logger=new we("remux"),this.generator=new Ds,this.config={formatType:Z.MP4,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]},this.sequenceNumber=0,this.offset=0,this.videoInited=!1,this.audioInited=!1,this.lastPacketMap=new Map}}(),o;function d(l){var s=y[l];return s!==void 0||(s=y[l]={id:l,loaded:!1,exports:{}},h[l](s,s.exports,d),s.loaded=!0),s.exports}var h,y,o},typeof x=="object"&&typeof t=="object"?t.exports=g():typeof x=="object"?x.VideoxMuxer=g():e.VideoxMuxer=g()},{"es6-promise":8}],54:[function(e,t,x){function g(d){for(var h=5381,y=d.length;y;)h=33*h^d.charCodeAt(--y);return(h>>>0).toString()}var u=e("./vttparse");t.exports={parse:function(l,h,y){var o,l=l.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),s=[],a=new u;a.oncue=function(f){f.id=g(f.startTime)+g(f.endTime)+g(f.text),f.text=decodeURIComponent(escape(f.text)),f.isBig=!1;var T=f.text.split("#xywh=");T.length==2&&(T=T[1].split(","),f.x=T[0],f.y=T[1],f.w=T[2],f.h=T[3],f.isBig=!0),0<f.endTime&&s.push(f)},a.onparsingerror=function(f){o=f},a.onflush=function(){o&&y?(y(o),console.log(o)):h(s)},l.forEach(function(f){a.parse(f+`
`)}),a.flush()}}},{"./vttparse":56}],55:[function(e,t,x){function g(o){return typeof o=="string"&&!!y[o.toLowerCase()]&&o.toLowerCase()}function u(o){for(var l=1;l<arguments.length;l++){var s,a=arguments[l];for(s in a)o[s]=a[s]}return o}function d(o,l,s){var a=this,f=function(){if(typeof navigator<"u")return/MSIE\s8\.0/.test(navigator.userAgent)}(),T={},m=(f?a=document.createElement("custom"):T.enumerable=!0,a.hasBeenReset=!1,""),v=!1,S=o,w=l,E=s,_=null,P="",R=!0,A="auto",C="start",L=50,V="middle",I=50,M="middle";if(Object.defineProperty(a,"id",u({},T,{get:function(){return m},set:function(O){m=""+O}})),Object.defineProperty(a,"pauseOnExit",u({},T,{get:function(){return v},set:function(O){v=!!O}})),Object.defineProperty(a,"startTime",u({},T,{get:function(){return S},set:function(O){if(typeof O!="number")throw new TypeError("Start time must be set to a number.");S=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",u({},T,{get:function(){return w},set:function(O){if(typeof O!="number")throw new TypeError("End time must be set to a number.");w=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",u({},T,{get:function(){return E},set:function(O){E=""+O,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",u({},T,{get:function(){return _},set:function(O){_=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",u({},T,{get:function(){return P},set:function(O){if(O=typeof(O=O)=="string"&&!!h[O.toLowerCase()]&&O.toLowerCase(),O===!1)throw new SyntaxError("An invalid or illegal string was specified.");P=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",u({},T,{get:function(){return R},set:function(O){R=!!O,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",u({},T,{get:function(){return A},set:function(O){if(typeof O!="number"&&O!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");A=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",u({},T,{get:function(){return C},set:function(O){if(O=g(O),!O)throw new SyntaxError("An invalid or illegal string was specified.");C=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",u({},T,{get:function(){return L},set:function(O){if(O<0||100<O)throw new Error("Position must be between 0 and 100.");L=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",u({},T,{get:function(){return V},set:function(O){if(O=g(O),!O)throw new SyntaxError("An invalid or illegal string was specified.");V=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",u({},T,{get:function(){return I},set:function(O){if(O<0||100<O)throw new Error("Size must be between 0 and 100.");I=O,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",u({},T,{get:function(){return M},set:function(O){if(O=g(O),!O)throw new SyntaxError("An invalid or illegal string was specified.");M=O,this.hasBeenReset=!0}})),a.displayState=void 0,f)return a}var h,y;t.exports=typeof window<"u"&&window.VTTCue?window.VTTCue:(h={"":!0,lr:!0,rl:!0},y={start:!0,middle:!0,end:!0,left:!0,right:!0},d.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},d)},{}],56:[function(e,t,x){function g(){return{decode:function(a){if(!a)return"";if(typeof a!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}}var u=e("./vttcue");function d(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new g,this.regionList=[]}function h(){this.values=Object.create(null)}function y(a,f,T,m){var v,S,w=m?a.split(m):[a];for(v in w)typeof w[v]=="string"&&(S=w[v].split(T)).length===2&&f(S[0],S[1])}h.prototype={set:function(a,f){this.get(a)||f===""||(this.values[a]=f)},get:function(a,f,T){return T?this.has(a)?this.values[a]:f[T]:this.has(a)?this.values[a]:f},has:function(a){return a in this.values},alt:function(a,f,T){for(var m=0;m<T.length;++m)if(f===T[m]){this.set(a,f);break}},integer:function(a,f){/^-?\d+$/.test(f)&&this.set(a,parseInt(f,10))},percent:function(a,f){return!!(f.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(f=parseFloat(f))&&f<=100)&&(this.set(a,f),!0)}};var o=new u(0,0,0),l=o.align==="middle"?"middle":"center";function s(a,f,T){var m,v,S=a;function w(){var _,P=(P=(P=a).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(_=(_=P[4])&&_.replace(".",""),P[3]?R(P[1],P[2],P[3].replace(":",""),_):59<P[1]?R(P[1],P[2],0,_):R(0,P[1],P[2],_)):null;function R(A,C,L,V){return 3600*(0|A)+60*(0|C)+(0|L)+(0|V)/1e3}if(P===null)throw new Error("Malformed timestamp: "+S);return a=a.replace(/^[^\sa-zA-Z-]+/,""),P}function E(){a=a.replace(/^\s+/,"")}if(E(),f.startTime=w(),E(),a.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+S);a=a.substr(3),E(),f.endTime=w(),E(),m=a,f=f,v=new h,y(m,function(_,P){switch(_){case"region":for(var R=T.length-1;0<=R;R--)if(T[R].id===P){v.set(_,T[R].region);break}break;case"vertical":v.alt(_,P,["rl","lr"]);break;case"line":var A=P.split(","),C=A[0];v.integer(_,C),v.percent(_,C)&&v.set("snapToLines",!1),v.alt(_,C,["auto"]),A.length===2&&v.alt("lineAlign",A[1],["start",l,"end"]);break;case"position":A=P.split(","),v.percent(_,A[0]),A.length===2&&v.alt("positionAlign",A[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":v.percent(_,P);break;case"align":v.alt(_,P,["start",l,"end","left","right"])}},/:/,/\s/),f.region=v.get("region",null),f.vertical=v.get("vertical",""),(m=v.get("line","auto"))==="auto"&&o.line===-1&&(m=-1),f.line=m,f.lineAlign=v.get("lineAlign","start"),f.snapToLines=v.get("snapToLines",!0),f.size=v.get("size",100),f.align=v.get("align",l),(m=v.get("position","auto"))==="auto"&&o.position===50&&(m=f.align==="start"||f.align==="left"?0:f.align==="end"||f.align==="right"?100:50),f.position=m}d.prototype={parse:function(a){var f=this;function T(){for(var E=0,_=(_=f.buffer).replace(/<br(?: \/)?>/gi,`
`);E<_.length&&_[E]!=="\r"&&_[E]!==`
`;)++E;var P=_.substr(0,E);return _[E]==="\r"&&++E,_[E]===`
`&&++E,f.buffer=_.substr(E),P}a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{if(f.state==="INITIAL"){if(!/\r\n|\n/.test(f.buffer))return this;var m,v=(m=T()).match(/^WEBVTT([ \t].*)?$/);if(!v||!v[0])throw new Error("Malformed WebVTT signature.");f.state="HEADER"}for(var S=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;switch(S?S=!1:m=T(),f.state){case"HEADER":/:/.test(m)?y(m,function(E,_){E==="Region"&&console.log("parse region",_)},/:/):m||(f.state="ID");continue;case"NOTE":m||(f.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(m)){f.state="NOTE";break}if(!m)continue;if(f.cue=new u(0,0,""),f.state="CUE",m.indexOf("-->")===-1){f.cue.id=m;continue}case"CUE":try{s(m,f.cue,f.regionList)}catch{f.cue=null,f.state="BADCUE";continue}f.state="CUETEXT";continue;case"CUETEXT":var w=m.indexOf("-->")!==-1;if(!m||w&&(S=!0)){f.oncue&&f.oncue(f.cue),f.cue=null,f.state="ID";continue}f.cue.text&&(f.cue.text+=`
`),f.cue.text+=m;continue;case"BADCUE":m||(f.state="ID");continue}}}catch{f.state==="CUETEXT"&&f.cue&&f.oncue&&f.oncue(f.cue),f.cue=null,f.state=f.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(a){throw a}return this.onflush&&this.onflush(),this}},t.exports=d},{"./vttcue":55}],57:[function(T,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var w,E=arguments[S];for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&(v[w]=E[w])}return v}).apply(this,arguments)}function u(v,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}function d(v,S,w){S&&u(v.prototype,S),Object.defineProperty(v,"prototype",{writable:!1})}var h=T("./vtt-parser"),y=T("./vtt-renderer"),o=T("./vtt-loader"),l=T("../../player/base/event/eventtype"),s=T("../../lib/ua"),a=T("../../lib/event"),f=T("../../ui/component/util"),T=function(){function v(w){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new m,this.player=(w=w||{}).player,this.loader=new o,this.parser=new h,this.createRendererInstance(),this.bindEvents()}var S=v.prototype;return S.bindEvents=function(){function w(C){C.paramData.splayer&&_.switchRenderer(y.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var E,_=this,P=this,R=this.player,A=(R.on(l.Private.TextTrackFounded,function(C){if(C.paramData.from==="user")_.hasUserTracks=!0;else if(_.hasUserTracks)return;C=C.paramData.textTracks,C&&C.length&&(_.enabled=!0,_.trackConfigs=C.map(function(L){return g({},L,{label:L.label||L.srclang,language:L.srclang})}),_.trackConfigs.forEach(function(L){_.activeRenderer.addTrack(L),R.getOptions().controlBarVisibility==="always"&&_.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},_.parser.cues)}))}),R.on(l.Private.UserTrackReset,function(){_.hasUserTracks=!1}),R.on(l.Player.H265PlayInfo,w),R.on(l.Player.H266PlayInfo,w),s.IS_IOS?(E=!1,R.on(l.Player.RequestFullScreen,function(){E=!0}),a.on(R.tag,"webkitendfullscreen",function(){E=!1}),a.on(R.tag.textTracks,"change",function(){var C;_.sleeper.isSleep||(_.sleeper.sleep(1e3),_.isCustomRenderer)||E&&(C=R.tag.textTracks,(C=Array.from(C).find(function(L){return L.mode==="showing"}))?_.activeTrackConfig&&_.activeTrackConfig.language===C.language||(_.switchTrack(C.language),R.trigger(l.Private.SelectorValueChange,{type:"cc",text:C.label})):R.trigger(l.Private.CCStateChanged,{value:"off",lang:""}))})):(R.on(l.Player.RequestFullScreen,this.adjustLayout.bind(this)),R.on(l.Player.CancelFullScreen,this.adjustLayout.bind(this)),A=f.debounce(function(){P.isCustomRenderer&&P.activeRenderer.resetCuesStyle(_.parser.cues)},100),a.on(window,"resize",A)),f.throttle(function(){P.isShow&&(P.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},P.parser.cues),P.player.paused())&&(P.activeRenderer.hide(),P.activeRenderer.restore())},100)),A=(R.on(l.Private.ShowBar,A),f.throttle(function(){P.isShow&&(P.activeRenderer.forceUpdateCuesStyle({transform:"none"},P.parser.cues),P.player.paused())&&(P.activeRenderer.hide(),P.activeRenderer.restore())},100));R.on(l.Private.HideBar,A),R.on(l.Private.VttHide,function(){_.hide()}),R.on(l.Private.VttSwitchTrack,function(C){_.switchTrack(C.paramData)}),R.on(l.Private.VttClearTracks,function(){_.reset()})},S.createRendererInstance=function(w){this.activeRenderer&&this.activeRenderer.dispose();var E=this.player.getOptions(),_={player:this.player};this.adaptPlatform(),w?w===y.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new y.NativeRenderer(_):(_.overlayId=this.getOverlayId(),this.activeRenderer=new y.CustomRenderer(_)):E.useNativeTextRenderer?this.activeRenderer=new y.NativeRenderer(_):(_.overlayId=this.getOverlayId(),this.activeRenderer=new y.CustomRenderer(_))},S.switchTrack=function(w){var E,_=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new h,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=w,E=this.trackConfigs.find(function(P){return P.language===w}))&&(E=E._loaded?"":(E||{}).src,this.loadVtt(E,function(){_.parseVtt(),_.activeRenderer.addCues(_.parser.cues,_.activeTrackConfig.language),_.show()}))},S.adaptPlatform=function(){var w=this.player.getOptions();s.IS_IOS&&(w.useNativeTextRenderer=!0)},S.loadVtt=function(w,E){var _=this;w?this.loader.loadFromUrl(w,function(P){_.activeTrackConfig._loaded=!0,_.vttText[_.activeTrackConfig.language]=P,E&&E()}):E&&E()},S.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var w=this.player.el().getElementsByClassName("prism-controlbar")[0];w&&((w=w.style)==null?void 0:w.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},this.parser.cues)},S.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},S.switchRenderer=function(w){var E=this,_=y.VttBasicRenderer.RENDER_TYPE_NATIVE,P=y.VttBasicRenderer.RENDER_TYPE_CUSTOM;(w===_&&this.activeRenderer.type!==_||w===P&&this.activeRenderer.type!==P)&&(this.createRendererInstance(w),this.trackConfigs.forEach(function(R){return E.activeRenderer.addTrack(R)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},S.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},S.adjustLayout=function(){var w=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){w.activeRenderer.restore()},300))},S.startTickTimeListener=function(){var w=this;this.clearTicker(),this.tick(function(){var E=w.player.getCurrentTime();isNaN(E)||w.activeRenderer.renderCues(w.findTargetCues(E))})},S.tick=function(w){var E=this;this.tickTimer=requestAnimationFrame(function(){try{w()}catch(_){console.log("e",_)}E.tick(w)})},S.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},S.getOverlayId=function(){var w=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(w)return w.id},S.findTargetCues=function(w){if(this.parser&&w!==this.prevPosition){this.prevPosition=w;for(var E=[],_=0;_<this.parser.cues.length;_++){var P=this.parser.cues[_];if(w>=P.startTime&&w<=P.endTime)E.push(P);else if(w<P.startTime)break}return E}},S.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},S.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},d(v,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(w){this._enabled=w}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===y.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var w;return(w=this.trackConfigs)==null?void 0:w.find(function(E){return E._isActive})},set:function(w){this.trackConfigs.forEach(function(E){return E._isActive=E.language===w})}}]),v}(),m=function(){function v(){this.value=!1,this.timer=null}return v.prototype.sleep=function(S){var w=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){w.value=!1},S)},d(v,[{key:"isSleep",get:function(){return this.value}}]),v}();t.exports=T},{"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../../ui/component/util":165,"./vtt-loader":59,"./vtt-parser":60,"./vtt-renderer":61}],58:[function(a,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(T){for(var m=1;m<arguments.length;m++){var v,S=arguments[m];for(v in S)Object.prototype.hasOwnProperty.call(S,v)&&(T[v]=S[v])}return T}).apply(this,arguments)}function u(T,m){T.prototype=Object.create(m.prototype),d(T.prototype.constructor=T,m)}function d(T,m){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,S){return v.__proto__=S,v})(T,m)}function h(T,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}function y(T,m,v){m&&h(T.prototype,m),Object.defineProperty(T,"prototype",{writable:!1})}var o=a("../../lib/data"),l={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},s={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},a=function(T){function m(w){var w=g({},w=w===void 0?{}:w,{kind:w.kind||s.SUBTITLES,language:w.language||w.srclang||""}),E=w.mode||l.DISABLED;return w.default,-1<[s.METADATA,s.CHAPTERS].indexOf(w.kind)&&(E=l.HIDDEN),w.mode=E,(E=T.call(this,w)||this)._cues=[],E._activeCues=[],E._settings={},E._nativeTrack=null,E._extData={},E._settings=w,E}u(m,T);var v=m.prototype;return v.setExtData=function(S){this._extData=g({},this._extData,S=S===void 0?{}:S)},v.addCue=function(S){this._cues.push(S),this.nativeTrack&&this.nativeTrack.addCue(S)},v.removeCue=function(S){this._cues=this._cues.filter(function(w){return w!==S}),this.nativeTrack&&this.nativeTrack.removeCue(S)},y(m,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(S){this._settings.mode=S,this.nativeTrack&&(this.nativeTrack.mode=S)}},{key:"language",get:function(){return this._settings.language},set:function(S){this._settings.language=S,this.nativeTrack&&(this.nativeTrack.language=S)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(S){this._nativeTrack=S}}]),m}(function(){function T(m){this._id=(m=m===void 0?{}:m).id||"prism-track-"+o.guid(),this._kind=m.kind||"",this._language=m.language||"",this._label=m.label||""}return y(T,[{key:"label",get:function(){return this._label},set:function(m){this._label=m}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),T}()),f=function(T){function m(){return T.call(this)||this}return u(m,T),m}(function(){function T(){this._trackList=[]}return T.prototype.addTrack=function(m){var v=this.length;""+v in this||Object.defineProperty(this,v,{get:function(){return this._trackList[v]}}),this._trackList.indexOf(m)===-1&&this._trackList.push(m)},y(T,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),T}());t.exports.TextTrack=a,t.exports.TextTrackList=f,t.exports.TRACK_MODE=l,t.exports.TRACK_KIND=s},{"../../lib/data":32}],59:[function(e,t,x){var g=e("../io");t.exports=function(){function u(){}return u.prototype.loadFromUrl=function(d,h){g.get(d,function(y){h(y)},function(y,o){console.log("ERR",y,o)})},u}()},{"../io":42}],60:[function(d,t,x){function g(h,y){for(var o=0;o<y.length;o++){var l=y[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(h,l.key,l)}}var u=d("./vttjs").WebVTT,d=function(){function h(){var l=this;this._cues=[],this._regions=[],this.parser=new u.Parser(window,u.StringDecoder()),this.parser.onregion=function(s){l._regions.push(s)},this.parser.oncue=function(s){l._cues.push(s)},this.parser.onflush=function(){},this.parser.onparsingerror=function(s){}}var y,o=h.prototype;return o.parse=function(l){this.parser.parse(l),this.parser.flush()},o.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},o.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},o=h,(y=[{key:"cues",get:function(){return this._cues}}])&&g(o.prototype,y),Object.defineProperty(o,"prototype",{writable:!1}),h}();t.exports=d},{"./vttjs":62}],61:[function(T,t,x){function g(v,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}function u(){return(u=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var w,E=arguments[S];for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&(v[w]=E[w])}return v}).apply(this,arguments)}function d(v,S){v.prototype=Object.create(S.prototype),h(v.prototype.constructor=v,S)}function h(v,S){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w})(v,S)}T("../../player/base/event/eventtype");var m=T("./text-track"),y=T("./vttjs").WebVTT,o=T("../../lib/dom"),l=m.TextTrack,s=m.TextTrackList,a=m.TRACK_MODE,f=(m.TRACK_KIND,function(){function v(w){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(w=w||{}).player,this.defineTextTrackGetter(),this.trackList=new s}var S=v.prototype;return S.log=function(){for(var w,E=arguments.length,_=new Array(E),P=0;P<E;P++)_[P]=arguments[P];(w=console).log.apply(w,["[LOG:"+this.type+"]"].concat(_))},S.defineTextTrackGetter=function(){var w=this;this.player.getTextTracks=function(){return w.trackList||[]}},S.show=function(w){w=this.findTrackByLanguage(w),w&&(w.mode=a.SHOWING)},S.findTrackByLanguage=function(w){return this.trackList.list.find(function(E){return E.language===w})},S.clearCurrentCues=function(w){if(w){var E=w.mode;if(E===a.DISABLED&&(w.mode=a.HIDDEN),w.cues)for(var _=w.cues.length;_--;)w.removeCue(w.cues[_]);E===a.DISABLED&&(w.mode=E)}},S.addTrack=function(){},S.addCues=function(){},S.restore=function(){},S.renderCues=function(){},S.updateCuesStyle=function(){},S.clearTrack=function(w){this.clearCurrentCues(this.findTrackByLanguage(w))},S.clearAllTracks=function(){var w=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(E){E.mode=a.DISABLED,w.clearCurrentCues(E)}),this.trackList=new s},S.reset=function(){this.hide(),this.clearAllTracks()},S.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},v}()),T=(f.RENDER_TYPE_CUSTOM="CUSTOM",f.RENDER_TYPE_NATIVE="NATIVE",function(v){function S(E){var _=v.call(this,E)||this;return _.overlayId=null,_.currentCues=null,E=E||{},_.type=f.RENDER_TYPE_CUSTOM,_.overlayId=E.overlayId,_}d(S,v);var w=S.prototype;return w.addTrack=function(E){var _=new l({kind:E.kind,label:E.label,language:E.language,default:E.default});_.mode=E.default?a.SHOWING:a.DISABLED,this.trackList.addTrack(_)},w.hide=function(){return y.processCues(window,[],document.getElementById(this.overlayId))},w.restore=function(){this.currentCues&&(this.currentCues.forEach(function(E){return E.displayState=null}),y.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},w.renderCues=function(E){E&&(this.currentCues=E,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),y.processCues(window,E,this.overlayEl),this.updateCuesStyle(E))},w.updateCuesStyle=function(E){var _=this;E.forEach(function(P){var R,A=P.displayState;A._styleSetDone||A&&(A.setAttribute("class","prism-cue"),_.overlayEl||(_.overlayEl=document.getElementById(_.overlayId)),P=_.overlayEl.offsetWidth,R=_.overlayEl.offsetHeight,(P=Math.min(P,R))&&(A.style.fontSize=.05*P+"px",A.style.height="auto",A.style.top="auto"),Object.keys(_.overrideStyle).forEach(function(C){_.tryUpdateStyle(A,C,_.overrideStyle[C])}),A._styleSetDone=!0)})},w.updateOverrideStyle=function(E){this.overrideStyle=u({},this.overrideStyle,E=E===void 0?{}:E)},w.forceUpdateCuesStyle=function(E,_){_===void 0&&(_=[]),this.updateOverrideStyle(E=E===void 0?{}:E),this.resetCuesStyle(_)},w.tryUpdateStyle=function(E,_,P){try{E.style[_]=P}catch{}},w.resetCuesStyle=function(E){E&&E.length&&E.forEach(function(_){_.displayState&&(_.displayState=null)})},w.dispose=function(){v.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},S}(f)),m=function(v){function S(_){return(_=v.call(this,_=_===void 0?{}:_)||this).type=f.RENDER_TYPE_NATIVE,_}d(S,v);var w,E=S.prototype;return E.addTrack=function(_){var P=this.player.tag,R=Array.from(P.textTracks)||[],A=R.find(function(C){return C.language===_.language}),R=A?(this.log("sameLangTrack",A,R),this.clearCurrentCues(A),A.kind=_.kind,A.label=_.label,A):P.addTextTrack(_.kind,_.label,_.language),A=(R.mode=_.default?a.SHOWING:a.DISABLED,new l(_));A.nativeTrack=R,this.trackList.addTrack(A)},E.addCues=function(_,P){var R;_&&_.length&&(R=this.trackList.list.find(function(A){return A.language===P}))&&_.forEach(function(A){R.addCue(A)})},E.hide=function(){this.trackList.list.forEach(function(_){_.mode=_.mode===a.SHOWING?a.HIDDEN:_.mode})},E.invalidAllTracks=function(){},E.forceUpdateCuesStyle=function(_,P){o.addCssByStyle("video::-webkit-media-text-track-container{transform: "+_.transform+";}")},E.dispose=function(){v.prototype.dispose.call(this)},E=S,(w=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(_){return _.mode===a.SHOWING})}}])&&g(E.prototype,w),Object.defineProperty(E,"prototype",{writable:!1}),S}(f);t.exports.VttBasicRenderer=f,t.exports.CustomRenderer=T,t.exports.NativeRenderer=m},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"./text-track":58,"./vttjs":62}],62:[function(e,t,x){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":63}],63:[function(e,t,x){var g=this;function u(I,M){return M===void 0&&(M=1),"rgba("+[parseInt(I.substring(0,2),16),parseInt(I.substring(2,4),16),parseInt(I.substring(4,6),16),M].join(",")+")"}var d,h=1;function y(I,M,O){switch(O){case"webvtt.font.color":case"webvtt.font.opacity":var N=Services.prefs.getCharPref("webvtt.font.color"),j=Services.prefs.getIntPref("webvtt.font.opacity")/100;d.fontSet=u(N,j);break;case"webvtt.font.scale":h=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":N=Services.prefs.getCharPref("webvtt.bg.color"),j=Services.prefs.getIntPref("webvtt.bg.opacity")/100,d.backgroundSet=u(N,j);break;case"webvtt.edge.color":case"webvtt.edge.type":N=Services.prefs.getIntPref("webvtt.edge.type"),j=Services.prefs.getCharPref("webvtt.edge.color"),d.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][N]+u(j)}}typeof Services<"u"&&(d={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(I){y(0,0,I),Services.prefs.addObserver(I,y,!1)}));var o=Object.create||function(I){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return l.prototype=I,new l};function l(){}function s(I,M){this.name="ParsingError",this.code=I.code,this.message=M||I.message}function a(I){function M(O,N,j,Y){return 3600*(0|O)+60*(0|N)+(0|j)+(0|Y)/1e3}return I=I.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),I?I[3]?M(I[1],I[2],I[3].replace(":",""),I[4]):59<I[1]?M(I[1],I[2],0,I[4]):M(0,I[1],I[2],I[4]):null}function f(){this.values=o(null)}function T(I,M,O,N){var j,Y,B=N?I.split(N):[I];for(j in B)typeof B[j]=="string"&&(Y=B[j].split(O)).length===2&&M(Y[0],Y[1])}((s.prototype=o(Error.prototype)).constructor=s).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},f.prototype={set:function(I,M){this.get(I)||M===""||(this.values[I]=M)},get:function(I,M,O){return O?this.has(I)?this.values[I]:M[O]:this.has(I)?this.values[I]:M},has:function(I){return I in this.values},alt:function(I,M,O){for(var N=0;N<O.length;++N)if(M===O[N]){this.set(I,M);break}},integer:function(I,M){/^-?\d+$/.test(M)&&this.set(I,parseInt(M,10))},percent:function(I,M){return!!(M.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(M=parseFloat(M))&&M<=100)&&(this.set(I,M),!0)}};var m={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},v={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},S={v:"title",lang:"lang"},w={rt:"ruby"};function E(I,M){function O(z){return m[z]}for(var N,j,Y,B,W,D,X,Q=I.document.createElement("div"),H=Q,F=[];X=void 0,(X=M?(X=(X=M.match(/^([^<]*)(<[^>]+>?)?/))[1]||X[2],M=M.substr(X.length),X):null)!==null;)X[0]==="<"?X[1]==="/"?F.length&&F[F.length-1]===X.substr(2).replace(">","")&&(F.pop(),H=H.parentNode):(Y=a(X.substr(1,X.length-2)))?(N=I.document.createProcessingInstruction("timestamp",Y),H.appendChild(N)):(j=X.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(Y=j[1],B=j[3],D=W=void 0,D=v[Y],N=D?((W=I.document.createElement(D)).localName=D,(D=S[Y])&&B&&(W[D]=B.trim()),W):null)&&(Y=H,w[(D=N).localName]&&w[D.localName]!==Y.localName||(j[2]&&(N.className=j[2].substr(1).replace("."," ")),F.push(j[1]),H.appendChild(N),H=N)):H.appendChild(I.document.createTextNode(function(z){for(;j=z.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)z=z.replace(j[0],O);return z}(X)));return Q}var _=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function P(I){var M=[],O="";if(I&&I.childNodes){for(j(M,I);O=function Y(B){var W,D,X;return B&&B.length?(D=(W=B.pop()).textContent||W.innerText)?(X=D.match(/^.*(\n|\r)/))?X[B.length=0]:D:W.tagName==="ruby"?Y(B):W.childNodes?(j(B,W),Y(B)):void 0:null}(M);)for(var N=0;N<O.length;N++)if(function(Y){for(var B=0;B<_.length;B++){var W=_[B];if(Y>=W[0]&&Y<=W[1])return 1}}(O.charCodeAt(N)))return"rtl"}return"ltr";function j(Y,B){for(var W=B.childNodes.length-1;0<=W;W--)Y.push(B.childNodes[W])}}function R(){}function A(I,M,O){var N=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),B="rgba(255, 255, 255, 1)",j="rgba(0, 0, 0, 0.8)",Y="",B=(d!==void 0&&(B=d.fontSet,j=d.backgroundSet,Y=d.edgeSet),N&&(B="rgb(255, 255, 255)",j="rgb(0, 0, 0)"),R.call(this),this.cue=M,this.cueDiv=E(I,M.text),{color:B,backgroundColor:j,textShadow:Y,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),W=(N||(B.writingMode=M.vertical===""?"horizontal-tb":M.vertical==="lr"?"vertical-lr":"vertical-rl",B.unicodeBidi="plaintext"),this.applyStyles(B,this.cueDiv),this.div=I.document.createElement("div"),B={textAlign:M.align==="middle"?"center":M.align,font:O.font,whiteSpace:"pre-line",position:"absolute"},N||(B.direction=P(this.cueDiv),B.writingMode=M.vertical===""?"horizontal-tb":M.vertical==="lr"?"vertical-lr":"plaintext"),this.applyStyles(B),this.div.appendChild(this.cueDiv),0);switch(M.positionAlign){case"start":W=M.position;break;case"middle":W=M.position-M.size/2;break;case"end":W=M.position-M.size}M.vertical===""?this.applyStyles({left:this.formatStyle(W,"%"),width:this.formatStyle(M.size,"%")}):this.applyStyles({top:this.formatStyle(W,"%"),height:this.formatStyle(M.size,"%")}),this.move=function(D){this.applyStyles({top:this.formatStyle(D.top,"px"),bottom:this.formatStyle(D.bottom,"px"),left:this.formatStyle(D.left,"px"),right:this.formatStyle(D.right,"px"),height:this.formatStyle(D.height,"px"),width:this.formatStyle(D.width,"px")})}}function C(I){var M,O,N,j,Y=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);I.div&&(M=I.div.offsetHeight,O=I.div.offsetWidth,N=I.div.offsetTop,j=(j=(j=I.div.childNodes)&&j[0])&&j.getClientRects&&j.getClientRects(),I=I.div.getBoundingClientRect(),j=j?Math.max(j[0]&&j[0].height||0,I.height/j.length):0),this.left=I.left,this.right=I.right,this.top=I.top||N,this.height=I.height||M,this.bottom=I.bottom||N+(I.height||M),this.width=I.width||O,this.lineHeight=j!==void 0?j:I.lineHeight,Y&&!this.lineHeight&&(this.lineHeight=13)}function L(I,M,O,N){var j,Y=new C(M),B=M.cue,W=function(ie){if(typeof ie.line=="number"&&(ie.snapToLines||0<=ie.line&&ie.line<=100))return ie.line;if(!ie.track||!ie.track.textTrackList||!ie.track.textTrackList.mediaElement)return-1;for(var he=ie.track,le=he.textTrackList,Se=0,_e=0;_e<le.length&&le[_e]!==he;_e++)le[_e].mode==="showing"&&Se++;return-1*++Se}(B),D=[];if(B.snapToLines){switch(B.vertical){case"":D=["+y","-y"],j="height";break;case"rl":D=["+x","-x"],j="width";break;case"lr":D=["-x","+x"],j="width"}var X=Y.lineHeight,Q=X*Math.round(W),H=O[j]+X,F=D[0];Math.abs(Q)>H&&(Q=Q<0?-1:1,Q*=Math.ceil(H/X)*X),W<0&&(Q+=B.vertical===""?O.height:O.width,D=D.reverse()),Y.move(F,Q)}else{var z=Y.lineHeight/O.height*100;switch(B.lineAlign){case"middle":W-=z/2;break;case"end":W-=z}switch(B.vertical){case"":M.applyStyles({top:M.formatStyle(W,"%")});break;case"rl":M.applyStyles({left:M.formatStyle(W,"%")});break;case"lr":M.applyStyles({right:M.formatStyle(W,"%")})}D=["+y","-x","+x","-y"],Y=new C(M)}H=function(ie,he){for(var le,Se=new C(ie),_e=1,me=0;me<he.length;me++){for(;ie.overlapsOppositeAxis(O,he[me])||ie.within(O)&&ie.overlapsAny(N);)ie.move(he[me]);if(ie.within(O))return ie;var xe=ie.intersectPercentage(O);xe<_e&&(le=new C(ie),_e=xe),ie=new C(Se)}return le||Se}(Y,D),M.move(H.toCSSCompatValues(O))}function V(){}R.prototype.applyStyles=function(I,M){for(var O in M=M||this.div,I)I.hasOwnProperty(O)&&(M.style[O]=I[O])},R.prototype.formatStyle=function(I,M){return I===0?0:I+M},(A.prototype=o(R.prototype)).constructor=A,C.prototype.move=function(I,M){switch(M=M!==void 0?M:this.lineHeight,I){case"+x":this.left+=M,this.right+=M;break;case"-x":this.left-=M,this.right-=M;break;case"+y":this.top+=M,this.bottom+=M;break;case"-y":this.top-=M,this.bottom-=M}},C.prototype.overlaps=function(I){return this.left<I.right&&this.right>I.left&&this.top<I.bottom&&this.bottom>I.top},C.prototype.overlapsAny=function(I){for(var M=0;M<I.length;M++)if(this.overlaps(I[M]))return!0;return!1},C.prototype.within=function(I){return this.top>=I.top&&this.bottom<=I.bottom&&this.left>=I.left&&this.right<=I.right},C.prototype.overlapsOppositeAxis=function(I,M){switch(M){case"+x":return this.left<I.left;case"-x":return this.right>I.right;case"+y":return this.top<I.top;case"-y":return this.bottom>I.bottom}},C.prototype.intersectPercentage=function(I){return Math.max(0,Math.min(this.right,I.right)-Math.max(this.left,I.left))*Math.max(0,Math.min(this.bottom,I.bottom)-Math.max(this.top,I.top))/(this.height*this.width)},C.prototype.toCSSCompatValues=function(I){return{top:this.top-I.top,bottom:I.bottom-this.bottom,left:this.left-I.left,right:I.right-this.right,height:this.height,width:this.width}},C.getSimpleBoxPosition=function(I){var M=I.div?I.div.offsetHeight:I.tagName?I.offsetHeight:0,O=I.div?I.div.offsetWidth:I.tagName?I.offsetWidth:0,N=I.div?I.div.offsetTop:I.tagName?I.offsetTop:0;return{left:(I=I.div?I.div.getBoundingClientRect():I.tagName?I.getBoundingClientRect():I).left,right:I.right,top:I.top||N,height:I.height||M,bottom:I.bottom||N+(I.height||M),width:I.width||O}},V.StringDecoder=function(){return{decode:function(I){if(!I)return"";if(typeof I!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(I))}}},V.convertCueToDOMTree=function(I,M){return I&&M?E(I,M):null},V.processCues=function(I,M,O){if(!I||!M||!O)return null;for(;O.firstChild;)O.removeChild(O.firstChild);var N=I.document.createElement("div");if(N.style.position="absolute",N.style.left="0",N.style.right="0",N.style.top="0",N.style.bottom="0",N.style.margin="1.5%",O.appendChild(N),function(H){for(var F=0;F<H.length;F++)if(H[F].hasBeenReset||!H[F].displayState)return 1}(M))for(var j,Y,B=[],W=C.getSimpleBoxPosition(N),D={font:Math.round(.05*W.height*100)/100*h+"px sans-serif"},X=0;X<M.length;X++)Y=M[X],j=new A(I,Y,D),N.appendChild(j.div),L(0,j,W,B),Y.displayState=j.div,B.push(C.getSimpleBoxPosition(j));else for(var Q=0;Q<M.length;Q++)N.appendChild(M[Q].displayState)},(V.Parser=function(I,M){this.window=I,this.state="INITIAL",this.buffer="",this.decoder=M||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(I){if(!(I instanceof s))throw I;this.onparsingerror&&this.onparsingerror(I)},parse:function(I){var M=this;function O(){for(var D=M.buffer,X=0;X<D.length&&D[X]!=="\r"&&D[X]!==`
`;)++X;var Q=D.substr(0,X);return D[X]==="\r"&&++X,D[X]===`
`&&++X,M.buffer=D.substr(X),Q}function N(D){T(D,function(X,Q){var H;X==="Region"&&(X=Q,H=new f,T(X,function(F,z){switch(F){case"id":H.set(F,z);break;case"width":H.percent(F,z);break;case"lines":H.integer(F,z);break;case"regionanchor":case"viewportanchor":var ie,he=z.split(",");he.length===2&&((ie=new f).percent("x",he[0]),ie.percent("y",he[1]),ie.has("x")&&ie.has("y"))&&(H.set(F+"X",ie.get("x")),H.set(F+"Y",ie.get("y")));break;case"scroll":H.alt(F,z,["up"])}},/=/,/\s/),H.has("id"))&&((X=new M.window.VTTRegion).width=H.get("width",100),X.lines=H.get("lines",3),X.regionAnchorX=H.get("regionanchorX",0),X.regionAnchorY=H.get("regionanchorY",100),X.viewportAnchorX=H.get("viewportanchorX",0),X.viewportAnchorY=H.get("viewportanchorY",100),X.scroll=H.get("scroll",""),M.onregion&&M.onregion(X),M.regionList.push({id:H.get("id"),region:X}))},/:/)}I&&(M.buffer+=M.decoder.decode(I,{stream:!0}));try{if(M.state==="INITIAL"){if(!/\r\n|\n/.test(M.buffer))return this;var j,Y=(j=O()).match(/^WEBVTT([ \t].*)?$/);if(!Y||!Y[0])throw new s(s.Errors.BadSignature);M.state="HEADER"}for(var B=!1;M.buffer;){if(!/\r\n|\n/.test(M.buffer))return this;switch(B?B=!1:j=O(),M.state){case"HEADER":/:/.test(j)?N(j):j||(M.state="ID");continue;case"NOTE":j||(M.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(j)){M.state="NOTE";break}if(!j)continue;if(M.cue=new M.window.VTTCue(0,0,""),M.state="CUE",j.indexOf("-->")===-1){M.cue.id=j;continue}case"CUE":try{(function(D,X,Q){var H,F,z=D;function ie(){var le=a(D);if(le===null)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+z);return D=D.replace(/^[^\sa-zA-Z-]+/,""),le}function he(){D=D.replace(/^\s+/,"")}if(he(),X.startTime=ie(),he(),D.substr(0,3)!=="-->")throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+z);D=D.substr(3),he(),X.endTime=ie(),he(),H=D,X=X,F=new f,T(H,function(le,Se){switch(le){case"region":for(var _e=Q.length-1;0<=_e;_e--)if(Q[_e].id===Se){F.set(le,Q[_e].region);break}break;case"vertical":F.alt(le,Se,["rl","lr"]);break;case"line":var me=Se.split(","),xe=me[0];F.integer(le,xe),F.percent(le,xe)&&F.set("snapToLines",!1),F.alt(le,xe,["auto"]),me.length===2&&F.alt("lineAlign",me[1],["start","middle","end"]);break;case"position":me=Se.split(","),F.percent(le,me[0]),me.length===2&&F.alt("positionAlign",me[1],["start","middle","end"]);break;case"size":F.percent(le,Se);break;case"align":F.alt(le,Se,["start","middle","end","left","right"])}},/:/,/\s/),X.region=F.get("region",null),X.vertical=F.get("vertical",""),X.line=F.get("line","auto"),X.lineAlign=F.get("lineAlign","start"),X.snapToLines=F.get("snapToLines",!0),X.size=F.get("size",100),X.align=F.get("align","middle"),X.position=F.get("position","auto"),X.positionAlign=F.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},X.align)})(j,M.cue,M.regionList)}catch(D){M.reportOrThrowError(D),M.cue=null,M.state="BADCUE";continue}M.state="CUETEXT";continue;case"CUETEXT":var W=j.indexOf("-->")!==-1;if(!j||W&&(B=!0)){M.oncue&&M.oncue(M.cue),M.cue=null,M.state="ID";continue}M.cue.text&&(M.cue.text+=`
`),M.cue.text+=j;continue;case"BADCUE":j||(M.state="ID");continue}}}catch(D){M.reportOrThrowError(D),M.state==="CUETEXT"&&M.cue&&M.oncue&&M.oncue(M.cue),M.cue=null,M.state=M.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var I=this;try{if(I.buffer+=I.decoder.decode(),!I.cue&&I.state!=="HEADER"||(I.buffer+=`

`,I.parse()),I.state==="INITIAL")throw new s(s.Errors.BadSignature)}catch(M){I.reportOrThrowError(M)}return I.onflush&&I.onflush(),this}},g.WebVTT=V},{}],64:[function(e,t,x){var g=e("../lib/io");e("../lib/storage");function u(d){this._uploadDuration=d.logDuration||5,this._uploadCount=d.logCount||10,this._logReportTo=d.logReportTo,this._dumpLogReportTo=d.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var h,y=this;window&&(window.onbeforeunload=function(o){if(0<y._logs.length)if(y._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(y._logs));else{y._report();for(var l=500,s=new Date().getTime(),a=s;a<s+l;)a=new Date().getTime()}});try{localStorage?(h=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),h&&(this._logs=JSON.parse(h))):this._supportLocalStorage=!1}catch{this._supportLocalStorage=!1}this._start()}u.prototype.add=function(d){var h=this._logs.length;if(d.__time__=Math.round(new Date/1e3),0<h&&d.e=="4001"){var h=this._logs[h-1];if(h.e=="4001"&&h.__time__-d.__time__<5)return}this._logs.push(d),(this._logs.length>this._uploadCount||d.e=="4001"||d.e=="2002"||d.e=="9002"&&(h=d.args)!=null&&h.includes("dump::"))&&this._report()},u.prototype.dispose=function(){this._report(),this._disposed=!0},u.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},u.prototype._report=function(d){var h,y,o;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(d=d||this._logs.splice(0,this._uploadCount)).length?(o={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(h=JSON.stringify({__logs__:d,__source__:""})).length},g.postWithHeader((y=this)._logReportTo,h,o,function(l){y._tick()},function(l){y._retry==0?(y._retry=1,y._report(d)):y._tick()})):this._tick()},u.prototype.reportDump=function(d){var h;d&&(h={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(d=JSON.stringify({__logs__:[d],__source__:""})).length},g.postWithHeader(this._dumpLogReportTo,d,h,function(y){},function(y){}))},u.prototype._tick=function(){var d;this._disposed||(this._retry=0,(d=this)._logs.length>this._uploadCount?d._report():this._tickHandler=setTimeout(function(){d._report()},1e3*this._uploadDuration))},t.exports=u},{"../lib/io":42,"../lib/storage":49}],65:[function(E,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(_){for(var P=1;P<arguments.length;P++){var R,A=arguments[P];for(R in A)Object.prototype.hasOwnProperty.call(A,R)&&(_[R]=A[R])}return _}).apply(this,arguments)}var u,d=E("../lib/oo"),h=E("../lib/object"),y=E("../lib/data"),o=E("../lib/io"),l=E("../lib/ua"),s=E("../lib/event"),a=E("../config"),f=E("../player/base/event/eventtype"),T=E("./util"),m=E("./log"),v=E("../lib/playerutil"),S=0,w={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},E=d.extend({init:function(C,L,A){this.trackLog=A=A===void 0?!0:A,this.player=C,this.requestId="",this.sessionId=y.guid(),this.playId=0,this.firstPlay=!0,this.osName=l.os.name,this.osVersion=l.os.version||"",this.exName=l.browser.name,this.exVersion=l.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],a.logReportTo=L.logReportTo||a.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),L.logBatched&&(this._logService=new m(a));var A=this.player.getOptions(),C=L.from||"",L=(A.isLive,A.isLive?"live":"vod"),V="pc",I=(l.IS_IPAD?V="pad":l.os.phone&&(V="phone"),this.encodeURL(l.getReferer())),N=l.getHref(),M=this.encodeURL(N),O="",N=(N&&(O=l.getHost(N)),a.h5Version),j=T.getUuid(),Y=A.source?this.encodeURL(A.source):"",B=l.getHost(A.source),W=A.userId?A.userId+"":"0",D=this.sessionId,X=new Date().getTime(),Q=A.traceId||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:X,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:l.USER_AGENT,hn:"0.0.0.0",bi:C,ri:D,e:"0",args:"0",li_ki:A.license.key||"",vt:L,tt:V,dm:"h5",av:N,uuid:j,vu:Y,vd:B,ua:W,dn:"custom",cdn_ip:"0.0.0.0",app_n:O,r:I,pu:M,ti:Q},this.bindEvent()},updateVideoInfo:function(_){_=_.from||"",this.opt.bi=_+"",this.updateSourceInfo()},updateSourceInfo:function(){var _,P=this.player.getOptions();P&&(_=P.source?this.encodeURL(P.source):"",P=l.getHost(P.source),this.opt.vu=_,this.opt.vd=P)},updateTraceId:function(_){this.opt.ti=_},updateLightSaasVideoId:function(_){this.lightSaasVideoId=_},replay:function(){this.reset(),this.player.trigger(f.Video.LoadStart),this.player.trigger(f.Video.LoadedMetadata),this.player.trigger(f.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var _=this;this.player.on(f.Private.Create,function(P){_._onCreate(P)}),this.player.on(f.Player.Init,function(){_._onPlayerInit()}),this.player.on(f.Video.LoadStart,function(){_._onPlayerloadstart()}),this.player.on(f.Video.LoadedMetadata,function(){_._onPlayerLoadMetadata()}),this.player.on(f.Video.LoadedData,function(){_._onPlayerLoaddata()}),this.player.on(f.Player.H265PlayInfo,function(P){_._onH265PlayInfo(P),_._onPlayerH265PlayInfo(P)}),this.player.on(f.Player.H266PlayInfo,function(P){_._onH265PlayInfo(P),_._onPlayerH265PlayInfo(P)}),this.player.on(f.Video.Play,function(){_._onPlayerPlay()}),this.player.on(f.Video.Playing,function(){_._onPlayerReady()}),this.player.on(f.Video.Ended,function(){_._onPlayerFinish()}),this.player.on(f.Video.Pause,function(){_._onPlayerPause()}),this.player.on("seeking",function(){_._onPlayerSeeking()}),this.player.on("seeked",function(){_._onPlayerSeeked()}),this.player.on(f.Private.LicenseHasResult,function(P){_._onLicenseHasResult(P)}),this.player.on(f.Private.SeekStart,function(P){_._onPlayerSeekStart(P)}),this.player.on(f.Private.EndStart,function(P){_._seekEndData=P.paramData}),this.player.on(f.Player.Waiting,function(){_._onPlayerLoaded()}),this.player.on(f.Video.CanPlayThrough,function(){}),this.player.on(f.Video.CanPlay,function(){_._waitingDelayLoadingShowHandle&&(clearTimeout(_._waitingDelayLoadingShowHandle),_._waitingDelayLoadingShowHandle=null),_._onPlayerUnderload(),_._onPlayerCanplay()}),this.player.on(f.Video.TimeUpdate,function(){_._waitingDelayLoadingShowHandle&&(clearTimeout(_._waitingDelayLoadingShowHandle),_._waitingDelayLoadingShowHandle=null),_._seekEndData&&_.player._seeking&&_._onPlayerSeekEnd()}),this.player.on(f.Player.Error,function(P){_._onPlayerError(P)}),this.player.on(f.Player.RequestFullScreen,function(){_._onFullscreenChange(1)}),this.player.on(f.Player.CancelFullScreen,function(){_._onFullscreenChange(0)}),this.player.on(f.Private.PREPARE,function(P){_._prepareTime=performance.now(),_._log("PREPARE",{dn:P.paramData}),_.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(f.Private.ManualPlay,function(){_.loadedDataReported||(_._prepareTime=performance.now(),_.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(f.Player.Snapshoted,function(){_._log("SNAPSHOT")}),this.player.on(f.Private.Retry,function(P){P=P.paramData||{},_._log("RETRY",{type:P.type,source:P.source})}),this.player.on(f.Player.RtsFallback,function(A){var R,A=A.paramData||{};_._log("RTSFALLBACK",{reason:(R=A.reason)==null?void 0:R.error_msg,url:A.fallbackUrl})}),this.player.on(f.Private.VodRequestException,function(P){P=P.paramData||{},_.reportVodException(P)}),this.player.on(f.Private.VodRequestExceptionResume,function(P){P=P.paramData||{},_.reportVodExceptionResume(P)}),this.player.on(f.Private.TraceLog,function(P){P=P.paramData||{},_._reportTrace(P)}),this.player.on(f.Private.DumpBuffer,function(P){P=P.paramData||{},_._reportDump(P)}),this.player.on(f.Private.StatisticsInfo,function(P){P=P.paramData||{},_._onStatisticsHistoryUpdate(P)}),this.player.on(f.Private.Timeline,function(P){P=P.paramData||{},_._onTimeline(P)}),s.on(this.player.tag,f.Video.Playing,function(){_.reportPlaying()}),s.on(this.player.tag,f.Video.TimeUpdate,function(){_.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var _=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){_.player.trigger(f.Private.TraceLog,"[statistics_history]"+JSON.stringify(_.statisticsHistory)),_.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var _;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),_={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",_))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(f.Private.PREPARE),this.player.offAll(f.Player.RtsFallback),s.off(this.player.tag,f.Video.Playing),s.off(this.player.tag,f.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(u),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},S=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),u&&(clearInterval(u),u=null)},encodeURL:function(_){var P;return _?(P=this.player.getOptions())&&!P.logBatched?encodeURIComponent(_):_:""},startHeartBeat:function(){var _=this;u&&clearInterval(u),u=setInterval(function(){var P;_.player.getCurrentTime()&&(P=Math.floor(1e3*_.player.getCurrentTime()),_.player.paused()&&(_.prevStats.timestamp=0),++S>=_.player._options.heartHeatInterval)&&_.updateStats.call(_,function(R){var C=_._imageInfo()||{},L=_.player.tag.playbackRate,A=_.player.getVolume(),C={vt:P,interval:1e3*S,imgLength:C.imgLength,playbackRate:L,volume:A,bw:_._getbwEstimator()+"KB"},L=((C=R?g({},C,{dls:Math.floor(R.downloadSpeedPerSec),dfps:Math.floor(R.decodedFramesPerSec),pkl:Number((R.packageLossRate||0).toFixed(2)),rtt:1e3*R.rtt}):C).player_status=g({},_.heartBeatStatusData),_.player);C.time={play_time:parseFloat((L._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(L._stuckCount.toFixed(2)),stuck_time:parseFloat((L._stuckTime/1e3).toFixed(2))},_._log("HEARTBEAT",C),S=0})},1e3)},updateStats:function(_){_=_||function(){};var P=this;this.player.getStats().then(function(R){var A,C,L,V;R?(V=P.prevStats,R.bytesReceived=R.bytesReceived||0,R.framesDecoded=R.framesDecoded||0,R.packetsLost=R.packetsLost||0,R.packetsReceived=R.packetsReceived||0,A=((P.prevStats=R).timestamp-V.timestamp)/1e3,C=(R.bytesReceived-V.bytesReceived)/A,L=(R.framesDecoded-V.framesDecoded)/A,V=(R.packetsLost-V.packetsLost)/(R.packetsLost-V.packetsLost+(R.packetsReceived-V.packetsReceived)),R=R.rtt,_({downloadSpeedPerSec:C,decodedFramesPerSec:L,packageLossRate:V,rtt:R,timeGap:A})):_()}).catch(function(R){console.log("error in monitor getStats: ",R),_()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(_){this._log("PLAYABORT",{vt:new Date().getTime(),from:_})},reportVodException:function(_){console.log("VOD_REQUEST_FATAL_ERROR",_),this._log("VOD_REQUEST_FATAL_ERROR",_)},reportVodExceptionResume:function(_){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",_),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",_)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=y.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var _=performance.now();this._createTime=_,this.timeline=[{name:"init",ts:_}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(_){this._h265ProbeInfo=_||{}},_onFullscreenChange:function(_){_?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(_){var P=["frag_s","frag_f","frag_parsed"].includes(_.name);this.timeline.some(function(R){return P&&R.name===_.name})||this.timeline.push(_)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=y.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var _,P,R,A,C=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(A=R=0,this.player.tag&&(R=this.player.tag.videoWidth,A=this.player.tag.videoHeight),_={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:R+"*"+A})},this.timeline.forEach(function(L,V){try{var I=V?L.ts-C.timeline[V-1].ts:0;_["tl_"+L.name]=V+"#"+parseInt(I)}catch{}}),(R=this.player.tag)!=null&&R.duration&&(_.vdur=1e3*((A=this.player.tag)==null?void 0:A.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(R=Math.floor(this._h265ProbeInfo.codecCost)||0,A=Math.floor(this._h265ProbeInfo.decoderCost)||0,_.tc+=P=R+A,_.cc+=P,_.pcc=R,_.pdc=A),P=[{type:"audio"}],R={type:"video",codecType:null,isHardwareDecode:null},A=this._h265ProbeInfo.codecTag,v.isH265Codec(A)?R.codecType="h265":v.isH266Codec(A)?R.codecType="h266":v.isH264Codec(A)&&(R.codecType="h264"),P.push(R),_.decode_info=P,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=_,this.h265RenderTypeTimer=setTimeout(function(){C._log("PREPAREEND",_),C.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",_)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(_){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(_.speed)),this.statisticsHistory.framesDropped.push(_.droppedFrames),_=navigator.connection)&&(this.statisticsHistory.downlink.push(_.downlink),this.statisticsHistory.type.push(_.effectiveType),this.statisticsHistory.rtt.push(_.rtt))},_onH265PlayInfo:function(_){var P,R;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(_=_.paramData,P=this.pendingPrepareEndData,this.pendingPrepareEndData=null,R=P.decode_info[1],_.renderType==="wasm"&&(R.isHardwareDecode=!1),this._log("PREPAREEND",P))},_onPlayerH265PlayInfo:function(_){_=_.paramData||{},this._log("HEVCINFO",{cd:_.codecTag,rd:_.renderType,si:_.simd,sio:_.simdOption,wt:_.wasmThreads,wto:_.wasmThreadsOption,sp:_.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(_){_=_.paramData||{},_.hasPa=!!_.playauth,delete _.playauth,_.hasSk=!!_.accessKeySecret,delete _.accessKeySecret,_.hasSt=!!_.securityToken,delete _.securityToken,this._log("CREATE",_),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var _;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=y.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,_=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:_,pass:_,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(_){_=_.paramData||{},this._log("LICENSE_RESULT",{li_ri:_.result,li_ti:_.featureId||"sdk"})},_onPlayerSeekStart:function(_){this.seekStartTime=_.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var _,P=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),setTimeout(function(){var R=P.player.readyState()<4;P.player.readyState()||(R=!0),P.player.getCurrentTime()===P.seekingStartTime&&R&&(R=P._getbwEstimator(),P._log("UNDERLOAD",{vt:Math.floor(1e3*P.player.getCurrentTime()),bw:R,cbs:P._getCbs()}),P.stucking=!0,P.stuckStartTime=new Date().getTime(),P._getCbs()===0)&&(P.heartBeatStatusData.t_last_load_start=P.stuckStartTime,P.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,_=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:_,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var _,P,R,A;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(_=Math.floor(1e3*this.player.getCurrentTime()),P=this.stuckStartTime||new Date().getTime(),0<(R=Math.floor(new Date().getTime()-P))&&R<(1e3*this.player._options.waitingTimeout||6e4)&&(A=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:_,cost:R,bw:A,cbs:this._getCbs(),t_last_load_start:P})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var _=this;this.player._splayer?this.player.one("canplay",function(){_._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var _=performance.now(),_=Math.floor(_-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:_})},_reportTrace:function(_){this._log("TRACE",{log:_})},_reportDump:function(_){this._log("DUMP",_)},_onPlayerError:function(_){this._reportTrace(_.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData())},_getbwEstimator:function(){var _=NaN;try{_=((_=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch{}return _},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(_,P){if(this.trackLog){this.updateSourceInfo();var R=h.copy(this.opt),A=(this.requestId=y.guid(),a.logReportTo),_=(R.e=w[_]+"",R.en=_,R.ri=this.sessionId,R.bi=R.bi&&String(R.bi),R.t=new Date().getTime()+"",R.cdn_ip=this._userNetInfo.cdnIp,R.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),C=(_!=""&&(R.definition=_.definition),[]),_=(h.each(P,function(M,O){if(typeof O!="string")try{O=JSON.stringify(O)}catch{}C.push(M+"="+O)}),""),P=this.player.getOptions(),_=((_=P&&P.vid||this.lightSaasVideoId?P.vid||this.lightSaasVideoId:_)&&C.push("vid="+_),"");(_=P&&P.mediaAuth?P.mediaAuth:_)&&C.push("pauth="+_);try{Aliplayer&&Aliplayer.__logCallback__&&(R.args=C,Aliplayer.__logCallback__(R))}catch(M){console.log(M)}if((C=C.join("&"))==""&&(C="0"),R.args=this.encodeURL(C),this._logService){if(R.e===String(w.DUMP))return void this._logService.reportDump(R);this._logService.add(R)}else{var L=[];h.each(R,function(M,O){L.push(M+"="+O)}),L=L.join("&"),o.jsonp(A+"?"+L,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var _,P,R,A,C,L,V;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(_=this.player.tag)?(P=document.createElement("canvas"),R=_.videoWidth,A=_.videoHeight,P.width=R,P.height=A,(C=P.getContext("2d")).save(),C.drawImage(_,0,0,R,A),C.restore(),L=P.toDataURL("image/jpeg",1),V="",{imgLength:(V=L?(V=L.substr(L.indexOf(",")+1))||"":V).length}):{}}catch{return{}}}});t.exports=E},{"../config":14,"../lib/data":32,"../lib/event":35,"../lib/io":42,"../lib/object":44,"../lib/oo":45,"../lib/playerutil":47,"../lib/ua":50,"../player/base/event/eventtype":70,"./log":64,"./util":66}],66:[function(e,t,x){var g=e("../lib/cookie"),u=e("../lib/data"),d=e("../lib/ua");t.exports.getUuid=function(){var h=g.get("p_h5_u");return h||(h=u.guid(),g.set("p_h5_u",h,730)),h},t.exports.getTerminalType=function(){var h="pc";return d.IS_IPAD?h="pad":d.IS_ANDROID?h="android":d.IS_IOS&&(h="iphone"),h},t.exports.returnUTCDate=function(T){var y=T.getUTCFullYear(),o=T.getUTCMonth(),l=T.getUTCDate(),s=T.getUTCHours(),a=T.getUTCMinutes(),f=T.getUTCSeconds(),T=T.getUTCMilliseconds();return Date.UTC(y,o,l,s,a,f,T)},t.exports.getRfc822=function(h){return h.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":31,"../lib/data":32,"../lib/ua":50}],67:[function(e,t,x){var g=e("./base/player"),u=(e("./flash/flashplayer"),e("./saas/mtsplayer")),d=e("./saas/vodplayer"),h=e("./saas/lightPlayer"),y=e("./audio/audioplayer"),o=e("./hls/hlsplayer"),l=e("./flv/flvplayer"),s=e("./dash/dashplayer"),a=e("./rts/rtsplayer"),f=e("./drm/drmplayer"),T=e("./splayer/splayer"),m=e("../lib/ua"),v=e("../lib/playerutil"),S=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),w=e("../lib/constants"),E=e("./base/event/eventtype");t.exports.create=function(A,R){A._userOptions||(A._userOptions=Object.assign({},A)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(A.useNativeControls=!0),A.readyCallback=R=typeof R!="function"?function(){}:R,S.setCurrentLanguage(A.language,"h5",A.languageTexts,A.extLanguageTexts);var R=v.handleOption(A),A=R.source,C=R.format;if(C&&A)try{C=C.toLowerCase()}catch(M){console.log("Aliplayer - parsing format failed",M),C=""}else C="";v.isSupportedFormat(C)||(C=""),R.optionFormat=C;var L,V=v.isAudio(A,C),I=(V&&(R.mediaType="audio"),v.createWrapper(R));if(I.player)return I.player;if(V)L=new y(I,R);else if(v.isRts(A))L=new a(I,R);else if((R.forceH265||R.enableH265)&&(v.isMp4(A,C)||v.isFlv(A,C)||v.isHls(A,C)))L=new T(I,R);else if((R.forceH266||R.enableH266)&&(v.isMp4(A,C)||R.isLive&&(v.isFlv(A,C)||v.isHls(A,C))))L=new T(I,R);else if(!R.useFlashPrism&&v.isFlv(A,C)&&v.isSupportFlv())L=new l(I,R);else if([null,void 0].indexOf(R.mediaAuth)!==-1||R.source)if(R.vid&&!R.source)if(R.authInfo)L=new u(I,R);else{if(!(R.playauth||R.accessKeyId&&R.accessKeySecret))throw V="vid="+R.vid+" playauth='', playauth property is required by VOD(视频点播) as new Aliplayer.",new Error(V);L=new d(I,R)}else v.isHls(A,C)?v.canPlayHls()?L=new(v.isSupportHls()&&(v.isUsedHlsPluginOnMobile()||v.isSafariUsedHlsPlugin(R.useHlsPluginForSafari))?R.isDrm?f:o:R.isDrm?f:g)(I,R):v.isSupportHls()?L=new(R.isDrm?f:o)(I,R):m.os.pc||(L=new g(I,R)):v.isDash(A,C)&&v.isSupportMSE()?L=new s(I,R):(L=new g(I,R),R.source||(V={error_code:w.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:S.get("Error_Empty_Source")},L.trigger(E.Player.Error,V)));else L=new h(I,R);return L}},{"../lang/index":25,"../lib/constants":30,"../lib/dom":34,"../lib/io":42,"../lib/playerutil":47,"../lib/ua":50,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":93,"./dash/dashplayer":100,"./drm/drmplayer":102,"./flash/flashplayer":103,"./flv/flvplayer":105,"./hls/hlsplayer":107,"./rts/rtsplayer":109,"./saas/lightPlayer":113,"./saas/mtsplayer":115,"./saas/vodplayer":121,"./splayer/splayer":130}],68:[function(o,t,x){var g=o("../base/player"),u=o("../../ui/component"),d=o("../../lib/dom"),h=o("../../lib/object"),y=o("../../lib/playerutil"),o=g.extend({init:function(l,s){this._isAudio=!0,s.skinLayout===void 0&&(s.skinLayout=y.defaultAudioLayout),g.call(this,l,s)}});o.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=u.prototype.createEl.call(this,"audio"));var l=this._el,s=this.tag,a=(s.player=this,d.getElementAttributes(s));return h.each(a,function(f){l.setAttribute(f,a[f])}),this.setVideoAttrs(),s.parentNode&&s.parentNode.insertBefore(l,s),d.insertFirst(s,l),l},t.exports=o},{"../../lib/dom":34,"../../lib/object":44,"../../lib/playerutil":47,"../../ui/component":135,"../base/player":93}],69:[function(e,t,x){var g=e("../../../lib/event"),u=e("./eventtype"),d=e("../eventHandler/video/index"),h=e("../eventHandler/player/index");t.exports.offAll=function(y){var o,l,s,a=y.tag,f=y._el;for(o in u.Video)g.off(a,u.Video[o]);for(l in u.Player)g.off(f,u.Player[l]);for(s in u.Private)g.off(f,u.Private[s])},t.exports.offVideoAll=function(y){var o,l=y.tag;for(o in u.Video)g.off(l,u.Video[o])},t.exports.onAll=function(y){d.bind(y),h.bind(y)}},{"../../../lib/event":35,"../eventHandler/player/index":74,"../eventHandler/video/index":84,"./eventtype":70}],70:[function(e,t,x){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",Timeline:"timeline",ManualPlay:"manualPlay"}}},{}],71:[function(e,t,x){e("../../event/eventtype");var g=e("../../../../lib/dom"),u=e("../../../../lib/ua");t.exports.handle=function(){(!u.IS_IOS||u.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&g.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],72:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){var d=this;d.trigger(g.Player.CompleteSeek,u.paramData.toTime),d.one(g.Player.CanPlay,function(){d._enteredProgressMarker&&d.pause()})}},{"../../event/eventtype":70}],73:[function(e,t,x){var g=e("../../event/eventtype"),u=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(y){var h=this,y=y.paramData;h.trigger(g.Private.H5_Loading_Hide),h.trigger(g.Private.Cover_Hide),h.trigger(g.Private.Play_Btn_Hide),h.trigger(g.Private.SettingListHide),h.trigger(g.Private.SelectorHide),h.trigger(g.Private.VolumeVisibilityChange,""),y=y||{},h._monitor&&(y.uuid=u.getUuid(),y.serverRequestId=h._serverRequestId,y.requestId=h._monitor.sessionId,y.cdnIp=h._monitor._userNetInfo.cdnIp,y.localIp=h._monitor._userNetInfo.localIp),h._isError=!0,h.trigger(g.Private.Error_Show,y),h.trigger(g.Private.LifeCycleChanged,{type:g.Player.Error,data:y})}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../monitor/util":66,"../../event/eventtype":70}],74:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/event"),d=e("./lifecyclecommon"),h={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},y=[g.Private.EndStart,g.Private.SeekStart,g.Player.RequestFullScreen,g.Player.CancelFullScreen,g.Player.Error,g.Player.Ready,g.Private.Dispose,g.Private.Created,g.Private.SeiFrame,g.Private.PatchWaiting];t.exports.bind=function(o){o.el();for(var l=0;l<y.length;l++){var s=y[l];h[s]!="undefined"&&function(a,f,T){var m=a.el();u.on(m,f,function(v){var S=(T&&T.handle?T:d).handle;S.call(a,v,f)})}(o,s,h[s])}}},{"../../../../lib/event":35,"../../event/eventtype":70,"../video/waiting":92,"./cancelfullscreen":71,"./endstart":72,"./error":73,"./lifecyclecommon":75,"./requestfullscreen":76,"./seekstart":77,"./seiframe":78}],75:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u,d){this.trigger(g.Private.LifeCycleChanged,{type:d,data:u})}},{"../../event/eventtype":70}],76:[function(e,t,x){e("../../event/eventtype");var g=e("../../../../lib/dom"),u=e("../../../../lib/ua");t.exports.handle=function(){(!u.IS_IOS||u.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&g.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],77:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){this._seeking=!0,this.trigger(g.Player.StartSeek,u.paramData.fromTime)}},{"../../event/eventtype":70}],78:[function(e,t,x){e("../../event/eventtype"),t.exports.handle=function(h){var u,d,h=h.paramData,y=h.pts;this._hls2?y=parseInt(1e3*y):this._hls&&(u=h.pts,d=this._initPTS,y=parseInt((u-d)/90,10)),this._seis[y]=this._seis[y]||[],this._seis[y].push(h.dataContent)}},{"../../event/eventtype":70}],79:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){var d=this,h=(d._retrySwitchUrlCount=0,d._liveRetryCount=0,d._clearLiveErrorHandle(),d._dumpBuffer="ABORTED",new Date().getTime()-d.readyTime);d._options.autoplay||d._options._autoplay||!d.paused()||(d.trigger(g.Private.H5_Loading_Hide),d.trigger(g.Private.Play_Btn_Show)),d.trigger(g.Player.CanPlay,{loadtime:h})}},{"../../event/eventtype":70}],80:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/dom"),d=e("../../../../lib/ua");t.exports.handle=function(h){this._seeking=!1;var y=this.tag;y.style.display==="none"&&d.IS_IOS&&setTimeout(function(){u.css(y,"display","block")},100),this.trigger(g.Video.CanPlayThrough)}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],81:[function(e,t,x){t.exports.handle=function(g,u){var d="";g&&g.paramData&&(d=g.paramData),this.trigger(u,d)}},{}],82:[function(e,t,x){var g=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event"),t.exports.handle=function(u){var d=this;d.waiting=!1,d._ended=!0,d._currentTimeForDisableSeek=0,d.traceLog("video/ended.js","event::ended"),d.trigger(g.Private.Play_Btn_Show),d.trigger(g.Player.Ended),d.__disposed||(d._monitor&&d._monitor._onPlayerInit(),d._options.rePlay?(d._monitor&&d._monitor.startHeartBeat(),this._splayer||(d.seek(0),d.tag.play())):d._options.isLive&&d.trigger(g.Private.H5_Loading_Hide))}},{"../../../../lang/index":25,"../../../../lib/event":35,"../../event/eventtype":70}],83:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/constants"),d=e("../../../../lang/index"),h=(e("../../../../lib/event"),e("../../../../lib/ua")),y=(e("../../../../lib/io"),e("../../../../lib/playerutil")),o="video/error.js";function l(s,a,f){var T=s._options,m=T.source||"";(a=a!==4&&h.IS_IOS&&/qqbrowser/i.test(h.USER_AGENT)?4:a)===4&&y.isHls(m)?y.detectRegionBlock(m,function(v){v?(v={mediaId:T.isLive?"ISLIVE":T.vid||"",error_code:u.ErrorCode.RegionBlock,error_msg:d.get("Error_Region_Block_Text"),diagnosis_info:d.get("Tip_Err_Blocked")},s.logError(v),s.trigger("error",v)):f()}):f()}t.exports.handle=function(s){if((s.target||s.srcElement).error){var a=this;if(a.waiting=!1,a._clearTimeout(),a.checkOnline()&&!a._splayer){var f,v="",T=s.target||s.srcElement,m=T.error&&T.error.message||"",v="";if(T.error&&T.error.code&&(f=T.error.code,v=u.VideoErrorCode[T.error.code],m=f+" || "+m),a.traceLog(o,"event::error#"+f+"#"+m),a._reportDumpBuffer&&a._reportDumpBuffer(),a._options.isLive)l(a,f,function(){a._options.liveRetry>a._liveRetryCount?a._reloadAndPlayForM3u8():(a._liveRetryCount=0,a.trigger(g.Player.LiveStreamStop),a._liveErrorHandle=setTimeout(function(){var w={mediaId:"ISLIVE",error_code:v,error_msg:m||d.get("Error_Play_Text")+"，"+d.get("Error_Retry_Text")};a.logError(w),w.display_msg=u.VideoErrorCodeText[f]||w.error_msg,a.trigger("error",w)}),h.IS_UC&&(a._liveErrorHandle=null))});else if(f==3){if(T="",-1<m.indexOf("no decoder found"))T=d.get("Error_No_Decoder_Text");else if(a._nudgeCount=a._nudgeCount||0,a._nudgeCount<5){a._nudgeCount++;var S=+a._nudgeCount,S=a.getCurrentTime()+S;if(a.traceLog(o,"decode error, try to nudge("+a._nudgeCount+"/5) from "+a.getCurrentTime()+" to "+S+"s, duration: "+a.getDuration()),S<a.getDuration())return void a._loadByUrlInner(a._options.source,S,!0)}else if((function(){var w=!1,E=this.getOptions();{var _;this._fallback||!y.isHls(E.source)||this._options._native||!y.canPlayHls()||this.swPlayer||(w=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(o,"fallback to native player"),_=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(P){P._fallback=!0,E.isLive||P.seek(_)},this))}return w}).call(a)||(function(){var w=!1,E=this.getOptions();{var _;!this._fallback&&y.isHls(E.source)&&this._options._native&&y.isSupportHls()&&(w=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(o,"fallback to MSE player"),_=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(P){P._fallback=!0,E.isLive||P.seek(_)},this)}return w}).call(a))return;S={mediaId:a._options.vid||"",error_code:v,error_msg:m},a.logError(S),S.display_msg=u.VideoErrorCodeText[f]+(T?"，"+T:""),S.diagnosis_info=d.get("Tip_Err_Decode")+"<br />"+d.get("Tip_Err_Common_Short")+m,a.trigger(g.Player.Error,S)}else a._reloadForVod()||l(a,f,function(){var w,E,_;w=d.get("Error_Play_Text"),E=!1,f<3?w=u.VideoErrorCodeText[f]:a._eventState==u.SUSPEND?(w=d.get("Error_Load_Abort_Text"),v=u.ErrorCode.RequestDataError):a._eventState==u.LOAD_START?(w=d.get("Error_Network_Text"),0<a._options.source.indexOf("auth_key")&&(w=w+"，"+d.get("Error_AuthKey_Text")),v=u.ErrorCode.StartLoadData):a._eventState==u.LOADED_METADATA&&(w=d.get("Error_Play_Text"),v=u.ErrorCode.PlayingError),w=w+"，"+d.get("Error_Retry_Text"),1<a._urls.length&&a._retrySwitchUrlCount<3&&a._options.source.indexOf(".mpd")==-1&&(a.switchUrl(),E=!0),_={mediaId:a._options.vid||"",error_code:v,error_msg:m},E||(a.logError(_),_.display_msg=w,a.trigger(g.Player.Error,_))})}}else this.traceLog(o,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(s.target||s.srcElement).poster+")")}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../lib/event":35,"../../../../lib/io":42,"../../../../lib/playerutil":47,"../../../../lib/ua":50,"../../event/eventtype":70}],84:[function(e,t,x){var g=e("../../../../lib/event"),u=e("../../event/eventtype"),d={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata"),seeking:e("./seeking"),resize:e("./resize")};t.exports.bind=function(h){h.tag;for(var y in u.Video)y=u.Video[y],function(o,l,s){var a=o.tag;g.on(a,l,function(f){s.handle.call(o,f,l),l!=u.Video.Error&&(l==u.Video.ManualEnded&&(l=u.Video.Ended),o.trigger(u.Private.LifeCycleChanged,{type:l,data:f}))})}(h,y,d[y]!==void 0?d[y]:d.common)}},{"../../../../lib/event":35,"../../event/eventtype":70,"./canplay":79,"./canplaythrough":80,"./common":81,"./ended":82,"./error":83,"./loadedmetadata":85,"./pause":86,"./play":87,"./playing":88,"./resize":89,"./seeking":90,"./timeupdate":91,"./waiting":92}],85:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){var d=this.tag;this._duration=d.duration<1?0:d.duration,this.trigger(g.Private.ReadyState),this._splayer&&this.trigger(g.Video.DurationChange),this.trigger(g.Video.LoadedMetadata),d.videoWidth&&d.videoHeight||this.trigger(g.Player.VideoUnavailable)}},{"../../event/eventtype":70}],86:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/ua");t.exports.handle=function(d){var h=this;h._seeking&&h._splayer||(h._hls&&h._options&&h._options.isLive&&u.IS_FIREFOX&&h.trigger(g.Private.Play_Btn_Show),h._clearTimeout(),h.trigger(g.Private.AutoStreamHide),h.trigger(g.Player.Pause),h._isManualPause&&(h.trigger(g.Private.Play_Btn_Show),h.trigger(g.Private.H5_Loading_Hide)),h.waiting=!1)}},{"../../../../lib/ua":50,"../../event/eventtype":70}],87:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){this.trigger(g.Private.Error_Hide),this.trigger(g.Private.Cover_Hide),this.trigger(g.Private.AutoStreamHide),this.waiting=!1,this.trigger(g.Player.Play)}},{"../../event/eventtype":70}],88:[function(e,t,x){var g=e("../../event/eventtype");t.exports.handle=function(u){var d,h=this;this.tag.paused||(h.trigger(g.Private.H5_Loading_Hide),h.trigger(g.Private.Cover_Hide),h.trigger(g.Private.Info_Hide),h.waiting=!1,h._ended=!1,h._liveRetryCount=0,h._vodRetryCount=0,h._seeking=!1,d=h.getCurrentTime(),h._waitingReloadTime!=d&&(h._waitingTimeoutCount=0),h._checkTimeoutHandle&&(clearTimeout(h._checkTimeoutHandle),h._checkTimeoutHandle=null),h._waitingLoadedHandle&&(clearTimeout(h._waitingLoadedHandle),h._waitingLoadedHandle=null),h._ucSourceHandle&&(clearTimeout(h._ucSourceHandle),h._ucSourceHandle=null),h._waitingDelayLoadingShowHandle&&(clearTimeout(h._waitingDelayLoadingShowHandle),h._waitingDelayLoadingShowHandle=null),h._waitingTimeoutHandle&&(clearTimeout(h._waitingTimeoutHandle),h._waitingTimeoutHandle=null,h._ccService)&&h._options.isLive&&(d=h._ccService.getCurrentSubtitle(),h._setDefaultCC=!0,d)&&h._ccService.switch(d),h.trigger(g.Private.AutoStreamHide),h.trigger(g.Player.Playing),h.trigger(g.Private.Error_Hide),h.trigger(g.Private.Play_Btn_Hide))}},{"../../event/eventtype":70}],89:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../feature/ratioAdapter");t.exports.handle=function(d){this.trigger(g.Video.Resize);var h=this.getOptions();if(h.autoSize){if(!this._ratioAdapter){if(h.autoSize!==!0&&h.autoSize!=="width"&&h.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+h.autoSize+", only true/height/width are supported");h.autoSize===!0&&(h.autoSize="height"),this._ratioAdapter=new u}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,h.autoSize)}}},{"../../../../feature/ratioAdapter":21,"../../event/eventtype":70}],90:[function(e,t,x){var g=e("../../event/eventtype");e("../../../../lib/dom"),e("../../../../lib/ua"),t.exports.handle=function(u){var d,h=this.tag;this.getOptions().disableSeek&&(d=h.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(d))&&(h.currentTime=this._currentTimeForDisableSeek),this.trigger(g.Video.Seeking)}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],91:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/ua"),d=e("../../../../lib/event"),h=e("../../plugin/status");function y(o){var l=this;o!=null&&o.length&&o.forEach(function(s){l.trigger(g.Player.SeiFrame,s)})}t.exports.handle=function(m){var l,s,a,f=this,T=(f._isError||f.trigger(g.Player.TimeUpdate,m.timeStamp),f._decodeErrorNudgeTimer||(f._decodeErrorNudgeTimer=setTimeout(function(){f._nudgeCount=0},3e3)),(u.IS_IOS||u.IS_MAC_SAFARI)&&(clearTimeout(f._waitingPatchTimer),f._waitingPatchTimer=setTimeout(function(){f.waiting||f._isError||f.paused()||f._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),f.trigger(g.Private.PatchWaiting))},3e3)),f.getCurrentTime()),m=(f.tag.seeking||(f._currentTimeForDisableSeek=T),f.waiting&&!f._TimeUpdateStamp&&(f._TimeUpdateStamp=T),f.waiting!=0&&f._TimeUpdateStamp==T||(f.trigger(g.Private.H5_Loading_Hide),f.trigger(g.Private.AutoStreamHide),f._checkTimeoutHandle&&clearTimeout(f._checkTimeoutHandle),f._waitingTimeoutHandle&&clearTimeout(f._waitingTimeoutHandle),f._waitingLoadedHandle&&clearTimeout(f._waitingLoadedHandle),f._ucSourceHandle&&(clearTimeout(f._ucSourceHandle),f._ucSourceHandle=null),f.waiting=!1),u.IS_ANDROID&&u.IS_UC&&(f._timeNotUpdateCount=f._timeNotUpdateCount||0,f.waiting||T!==f._TimeUpdateStamp||(f._timeNotUpdateCount++,2<=f._timeNotUpdateCount&&(f._timeNotUpdateCount=0,f.trigger(g.Private.PatchWaiting)))),f._TimeUpdateStamp=T,f._options.isLive||(l=f.getDuration(),m=!1,s=0,l<T&&!f.paused()?(s=1,m=!0):l-T<.2&&0<=u.browser.version.indexOf("49.")&&!f.paused()?(s=2,m=!0):f.exceedPreviewTime(T)&&(s=3,m=!0),m&&setTimeout(function(){f._ended||(f._options.rePlay&&!f._splayer&&f.pause(),d.trigger(f.tag,g.Video.ManualEnded),f.traceLog&&f.traceLog("video/timeupdate.js","ManualEnded#"+s+"#"+T+"#"+l))},100)),f._player.tag),v=(m&&f._options.isLive&&(f._player.resolution&&0<m.videoWidth&&0<m.videoHeight&&(0<f._player.resolution.width||0<f._player.resolution.height)&&(f._player.resolution.width!==m.videoWidth||f._player.resolution.height!==m.videoHeight)&&(a={oldResolution:{width:f._player.resolution.width,height:f._player.resolution.height},newResolution:{width:m.videoWidth,height:m.videoHeight}},f.trigger(g.Player.ResolutionChange,a)),f._player.resolution.width=m.videoWidth==0?f._player.resolution.width:m.videoWidth,f._player.resolution.height=m.videoHeight==0?f._player.resolution.height:m.videoHeight),u.IS_CHROME&&Number(u.CHROME_VERSION)<50&&(f._playingSlientPause&&(clearTimeout(f._playingSlientPause),f._playingSlientPause=null),f._playingSlientPause=setTimeout(function(){var P,R;f._status!=h.playing||f.paused()||f._drm||f._urls.length||(P=f.getCurrentTime(),R=f._options.isLive?0:P,f._loadByUrlInner(f._options.source,R,P,!0))},3e3)),f._seis||{}),S=Object.keys(v);if(S.length!==0)for(var w=parseInt(1e3*T,10)+300,E=0;E<S.length;E++){var _=S[E];if(!(_<=w))break;y.call(f,v[_]),delete v[_]}}},{"../../../../lib/event":35,"../../../../lib/ua":50,"../../event/eventtype":70,"../../plugin/status":97}],92:[function(e,t,x){var g=e("../../event/eventtype"),u=e("../../../../lib/constants"),d=e("../../../../lib/event"),h=e("../../../../lang/index"),y=e("../../../../lib/ua"),o=e("../../../../lib/playerutil"),l="video/waiting.js";t.exports.handle=function(s){var a=this;if(!a._options.isLive){var f=this.getCurrentTime(),T=this.getDuration();if(!a._ended&&0<T&&(T-f<.5||T<f))return a.pause(),a._ended=!0,d.trigger(this.tag,g.Video.ManualEnded),void(a.traceLog&&a.traceLog(l,"ManualEnded#"+f+"#"+T))}a.waiting=!0;function m(){a._checkTimeoutHandle&&(clearTimeout(a._checkTimeoutHandle),a._checkTimeoutHandle=null),a._waitingTimeoutHandle&&(clearTimeout(a._waitingTimeoutHandle),a._waitingTimeoutHandle=null),a._waitingLoadedHandle&&(clearTimeout(a._waitingLoadedHandle),a._waitingLoadedHandle=null),a._waitingDelayLoadingShowHandle&&(clearTimeout(a._waitingDelayLoadingShowHandle),a._waitingDelayLoadingShowHandle=null),a._ucSourceHandle&&(clearTimeout(a._ucSourceHandle),a._ucSourceHandle=null)}m(),a._waitingDelayLoadingShowHandle=setTimeout(function(){y.IS_IOS&&a.paused()||a.trigger(g.Private.H5_Loading_Show)},1e3*a._options.delayLoadingShow),a._TimeUpdateStamp=null,a._checkTimeoutHandle=setTimeout(function(){a.trigger(g.Private.AutoStreamShow)},1e3*a._options.loadDataTimeout),a.trigger(g.Player.Waiting),a._waitingTimeoutHandle=setTimeout(function(){var v;a.tag&&a._options&&(a.pause(),v={mediaId:a._options.vid||"",error_code:u.ErrorCode.LoadingTimeout,error_msg:h.get("Error_Waiting_Timeout_Text")},a.logError(v),a.trigger("error",v))},1e3*a._options.waitingTimeout),f=a._options,f.disableLiveHalfRetry&&f.isLive||f.disableVodHalfRetry&&!f.isLive||(a._waitingLoadedHandle=setTimeout(function(){var v=a.getCurrentTime();a._waitingTimeoutCount==0&&v!=a._waitingReloadTime&&(a.traceLog(l,"half-retry::"+a._options.waitingTimeout/2),a._waitingTimeoutCount=1,a._waitingReloadTime=v,v=a._options.isLive?0:v,a._loadByUrlInner(a._options.source,v,!0))},a._options.waitingTimeout/2*1e3)),y.IS_ANDROID&&y.IS_DINGTALK&&(a._ucSourceHandle=setTimeout(function(){o.detectRegionBlock(a._options.source,function(v){v&&(v={mediaId:a._options.vid,error_code:u.ErrorCode.RegionBlock,error_msg:h.get("Error_Region_Block_Text"),diagnosis_info:h.get("Tip_Err_Blocked")},a.logError(v),a.trigger("error",v))})},5e3)),a.on("error",function(){m()})}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../lib/event":35,"../../../../lib/playerutil":47,"../../../../lib/ua":50,"../../event/eventtype":70}],93:[function(H,t,x){var g=typeof Promise>"u"?H("es6-promise").Promise:Promise,u=H("../../ui/component"),d=H("../../lib/object"),h=H("../../lib/dom"),y=H("../../lib/event"),o=H("../../ui/exports"),l=H("../../monitor/monitor"),s=H("../../lib/ua"),a=H("../../lib/constants"),f=H("../../lib/playerutil"),T=H("./x5play"),m=H("../../lib/cookie"),v=H("../../lang/index"),S=H("../../feature/autoplaydelay"),w=H("./event/eventmanager"),E=H("../../ui/component/cover"),_=H("../../ui/component/license-watermark"),P=H("../../feature/license"),R=H("../../ui/component/text-track-display"),A=H("../../ui/component/play-animation"),C=H("../../commonui/autostreamselector"),L=H("./event/eventtype"),V=H("./plugin/lifecyclemanager"),I=H("../service/export"),M=H("../../ui/component/progressmarker"),O=H("../../feature/keyboardControl"),N=H("../../feature/AntiRecord"),j=(H("./eventHandler/video/index"),H("../../lib/vttnext/index")),Y=H("../../lib/codec-probe"),B=H("../splayer/splayerinjector"),W=H("../../ui/component/util").throttle,D=H("../../feature/ratioAdapter"),X=H("../../feature/logoManager"),Q="base/player.js",H=u.extend({init:function(F,z){var ie,he=this;function le(Se){var _e=this;if(Se.paramData.renderType!=="native"){var me,Se=Se.paramData.codecTag;if(f.isH265Codec(Se))me=a.FEATURE_ID_H265;else{if(!f.isH266Codec(Se))return;me=a.FEATURE_ID_H266}P.getLicense(z.license.domain,z.license.key,z.env==="SEA"?"ap-southeast-1":"cn-shanghai").then(function(Z){if(Z=Z.validate(a.PLAYER_SDK_CODE,me),console.log("license validate result => ",Z),Z===0)_e.trigger(L.Private.LicenseHasResult,{result:a.LicenseResultCode.Success,featureId:me});else{if(Z===1)return g.reject(a.LicenseResultCode.NotFound);{if(Z===2)return g.reject(a.LicenseResultCode.Expired);console.error("license validate unknown error")}}}).catch(function(Z){_e.trigger(L.Private.LicenseHasResult,{result:Z,featureId:me}),P.logError(Z)})}}this.tag=F,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._duration=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this.__disposed=!1,this.resolution={width:0,height:0},z.skinLayout===void 0&&(z.skinLayout=f.defaultH5Layout),(F=z.skinLayoutIgnore)!=null&&F.length&&(z.skinLayout=f.ignoreSkinLayouts(z.skinLayout,z.skinLayoutIgnore)),f.isRts(z.source)&&!z.autoplay&&(z.preload=!1),z.env==="SEA"&&(z.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",z.disableDumpBuffer=!0),u.call(this,this,z),this.addClass("prism-player"),z.plugins&&d.each(z.plugins,function(Se,_e){this[Se](_e)},this),this._createService(),this.UI={},z.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=o,z.errorDisplay==0&&(this.UI.errorDisplay=void 0)),z.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),!z.isLive&&z.clickPause&&(this._clickPauseEnabled=!0,y.on(this.tag,"click",function(){he._clickPauseEnabled&&(he.paused()?he.play(!0):he.pause(!0))})),this.initChildren(),this._options.trackLog&&(this._monitor=new l(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),w.onAll(this),this.trigger(L.Private.Create,z._userOptions),this._options.preventRecord&&(this._antiRecord=new N({player:this}),this._antiRecord.start()),this._lifeCycleManager=new V(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(F={mediaId:this._options.vid||"",error_code:a.ErrorCode.InvalidParameter,error_msg:v.get("ShiftLiveTime_Error")},this.trigger(L.Player.Error,F)):(this._options.extraInfo&&(F=this._options.extraInfo).liveRetry&&(this._options.liveRetry=F.liveRetry),this.on(L.Private.ReadyState,function(){this.trigger(L.Player.Ready)}),this.on(L.Player.H265PlayInfo,le),this.on(L.Player.H266PlayInfo,le),this.on(L.Private.LicenseHasResult,function(Se){var _e=a.LicenseResultCode;-1<[_e.NotFound,_e.Expired,_e.CertInvalid,_e.ResourceIncorrect,_e.LicenseKeyInvalid,_e.DomainInvalid].indexOf(Se.paramData.result)&&(this.UI.licenseWatermark=_,this._licenseWatermark=this.addChild("licenseWatermark",this._options))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(L.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(L.Private.H5_Loading_Show):this.trigger(L.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(L.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new S(this),(ie=this)._autoPlayDelay.handle(function(){ie.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new D,this._ratioAdapter.autoResize(this._options.ratio,this))),O.init.call(this),(F=this._options.logo)!=null&&F.length&&(this._logoManager=new X({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new j({player:this}),this._getUserTextTracks())}});H.prototype.isSupportMSE=function(){return f.isSupportMSE()},H.prototype.initPlay=function(F){this._initPlayBehavior(F,this._options.source)},H.prototype.initChildren=function(){var F=this.options(),z=F.skinLayout;if(z!==!1&&!d.isArray(z))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");z!==!1&&z.length!==0&&(this.options({children:z}),u.prototype.initChildren.call(this)),this.UI.cover=E,F.className="",this.addChild("cover",F),this.UI.playanimation=A,this.addChild("playanimation",F),this.UI.autoStreamSelector=C,this.addChild("autoStreamSelector",F),this.UI.progressMarker=M,this.addChild("progressMarker",F),this.UI.textTrackDisplay=R,this.addChild("textTrackDisplay",F),this.trigger(L.Private.UiH5Ready)},H.prototype.createEl=function(){var F=!1,z=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=u.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(F=!0,this._el=this.tag.parentNode),this._el),ie=this.tag,he=(this._options.enableSystemMenu||(ie.addEventListener?ie.addEventListener("contextmenu",function(le){le.preventDefault()},!1):ie.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),ie.player=this,h.getElementAttributes(ie));return d.each(he,function(le){z.setAttribute(le,he[le])}),this.setVideoAttrs(),F||(ie.parentNode&&ie.parentNode.insertBefore(z,ie),h.insertFirst(ie,z)),z},H.prototype.setVideoAttrs=function(){var F=this._options.preload,z=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",F&&this.tag.setAttribute("preload","preload"),z&&!this._isEnabledAILabel()&&s.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),s.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(s.IS_UC||s.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var ie in this._options.extraInfo)s.IS_OPPO&&ie==="crossOrigin"||this.tag.setAttribute(ie,this._options.extraInfo[ie]);T.adaptX5Play(this)},H.prototype.checkOnline=function(){var F;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((F={mediaId:this._options.vid||"",error_code:a.ErrorCode.NetworkUnavaiable,error_msg:v.get("Error_Offline_Text")}).display_msg=v.get("Error_Offline_Text"),this.trigger(L.Player.Error,F),1))},H.prototype.id=function(){return this.el().id},H.prototype.renderUI=function(){},H.prototype.switchUrl=function(){var F,z;this.traceLog(Q,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),F=this._urls[this._currentPlayIndex],m.set(a.SelectedStreamLevel,F.definition,365),this.trigger(L.Private.QualityChange,v.get("Quality_Change_Fail_Switch_Text")),z=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(F.Url,z,!0))},H.prototype.setControls=function(){var F=this.options();F.useNativeControls?this.tag.setAttribute("controls","controls"):typeof F.controls=="object"&&(F=this._initControlBar(F.controls),this.addChild(F))},H.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},H.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},H.prototype._initControlBar=function(F){return new ControlBar(this,F)},H.prototype.getMetaData=function(){},H.prototype.getReadyTime=function(){return this.readyTime},H.prototype.readyState=function(){return this.tag.readyState},H.prototype.getError=function(){return this.tag.error},H.prototype.getRecentOccuredEvent=function(){return this._eventState},H.prototype.getSourceUrl=function(){return this._options?this._options.source:""},H.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},H.prototype.getCurrentQuality=function(){var F;return 0<this._urls.length?{width:(F=this._urls[this._currentPlayIndex]).width,url:F.Url,definition:F.definition}:""},H.prototype.getCurrentPDT=function(){var F;if((s.IS_SAFARI||s.IS_IOS)&&this.tag)return F=Date.parse(this.tag.getStartDate()),isNaN(F)?0:F+1e3*this.getCurrentTime()},H.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},H.prototype.startPlayTimeMonitor=function(){var F=this,z=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),ie=0,he=0,le=!1,Se=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var _e=F.paused()?le=!0:!F.tag,me=1e3*F.getCurrentTime(),xe=performance.now(),Z=xe-z,te=(z=xe,me-ie);ie=me,te<0&&(_e=!0),(me=F._monitor)!=null&&me.canplayReported||(_e=!0),(_e=document.visibilityState==="hidden"?!0:_e)||(le?le=!1:te<.8*Z?(Z<xe-he&&(F._stuckCount++,Se=xe),xe-Se>=1e3*F.getOptions().waitingTimeout?F.stopPlayTimeMonitor():(he=xe,F._playingTime+=te,F._stuckTime+=Z-te)):F._playingTime+=Z)},1e3)},H.prototype.setSpeed=function(F,z){z===void 0&&(z=!0),this.tag&&(this._originalPlaybackRate=F,this.tag.playbackRate=F,z)&&this.trigger(L.Private.PlaybackRateChanged,F)},H.prototype.play=function(F){return this.traceLog(Q,"play::"+F),F&&this.trigger(L.Private.ManualPlay),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(L.Private.Cover_Hide),this.tag.play())),this._isManualPlay=F||!1,this},H.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(0),this.tag.play(),this},H.prototype.pause=function(F){return this.tag&&this.tag.pause(),this._isManualPause=F||!1,this},H.prototype.stop=function(){return this.traceLog(Q,"stop"),this.tag.setAttribute("src",null),this},H.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},H.prototype.getDuration=function(){var F=0;return F=this.tag?this.isPreview()?this._vodDuration||this.tag.duration:this._duration&&this._duration!=1/0?this._duration:this.tag.duration:F},H.prototype.getDisplayDuration=function(){var F=0;return F=this.tag?this._vodDuration||this.getDuration():F},H.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0},H.prototype.seek=function(F){this._ended=!1;var z=this.tag.duration;if(!Number.isNaN(F))return this._doSeek(this,F=z<=F?z:F),this},H.prototype._doSeek=W(function(ie){var z=ie[0],ie=ie[1];try{var he=z._originalPlaybackRate||z.tag.playbackRate;["16"].indexOf(s.IOS_VERSION)!==-1&&!z.oncePlayed||(z.tag.currentTime=ie),z._seeking=!0,z.traceLog(Q,"doSeek::"+ie),s.IS_IE11&&setTimeout(function(){z.tag&&(z.tag.playbackRate=he)})}catch(le){console.log(le)}},100),H.prototype.firstNewUrlloadByUrl=function(F,z){this._clearTimeout(),this._options.vid=0,this._options.source=F,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:F,from:this._options.from}),this.trigger(L.Private.ChangeURL),this.initPlay(),this._options.autoplay&&this.trigger(L.Private.Cover_Hide),this._options.autoplay?this.trigger(L.Player.Play):this.trigger(L.Player.Pause),!(z=z||0)&&z!=0||isNaN(z)||this.seek(z)},H.prototype.traceLog=function(F,z){this.trigger(L.Private.TraceLog,"["+F+"]"+z)},H.prototype._loadByUrlInner=function(F,z,ie){this.loadByUrl(F,z,ie,!0)},H.prototype.loadByUrl=function(F,z,ie,he){var le=this,Se=(this.traceLog(Q,"loadByUrl::"+F+"#"+z+"#"+ie+"#"+he),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!he&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),_e=((this._options.source||"").match(Se)||[])[0]!==((F||"").match(Se)||[])[0];if(this._options.liveShiftSource&&(_e=!1),this._options.enableH266&&(_e=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!_e&&(f.isMp4(F)||f.isFlv(F)||f.isHls(F)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||s.IS_ANDROID&&s.dingTalk()&&!f.isFlv(F)?void me.call(this):void Y(F,function(Z){var Z=f.getVideoTrack(Z.tracks),te=(Z||{}).codecTag||((te=(Z||{}).codec)==null?void 0:te.split(".")[0]);le._probeInfo.codecTag=te,Z&&f.isH265Codec(te)?f.isFlv(F)||f.isHls(F)?(le._splayer||(_e=!0),me.call(le)):f.shouldUseBasePlayer({codecTag:te,url:F},function(K){K?(le._splayer&&(_e=!0),le._probeInfo.codecTag&&B.reportH265PlayInfo.call(le,{renderType:"native",codecTag:le._probeInfo.codecTag})):le._splayer||(_e=!0),me.call(le)}):(Z&&f.isH266Codec(te)?le._splayer||(_e=!0):le._splayer&&(_e=!0),me.call(le))},function(xe){me.call(le)});function me(){var xe,Z=this;_e&&this._splayer&&this.removeChild(this._licenseWatermark),_e&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(Q,"reloadInstance::"+F),this._options.source=F,window.Aliplayer.reloadInstance(this._options,function(){},this)):(he||(this._urls=[]),this._monitor&&!he&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._duration=0,this._clearTimeout(),this.trigger(L.Private.Error_Hide),this._options.source=F,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:F,from:this._options.from}),he||(this.trigger(L.Private.ChangeURL),this._vodRetryCount=0),this._options._autoplay=ie,this.initPlay(ie),(xe=this._options.autoplay||ie)&&this.trigger(L.Private.Cover_Hide),xe?this.trigger(L.Player.Play):this.trigger(L.Player.Pause),this._options.isLive||!z&&z!=0||isNaN(z)||y.one(this.tag,L.Video.CanPlay,function(te){xe&&(s.IS_IOS||s.IS_MAC_SAFARI)&&Z._splayer&&Z.play();var K=Z.getDuration();Z.seek(K<=z?K:z)}))}me.call(this)},H.prototype.setLogo=function(F){this._logoManager&&this._logoManager.dispose(),this._logoManager=new X({container:this.el(),video:this.tag,logo:F})},H.prototype.dispose=function(){this.__disposed=!0,this.trigger(L.Private.Dispose),this.tag.pause(),w.offAll(this),O.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0},H.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},H.prototype.mute=function(F){return this._muteInner(),this._originalVolumn=this.tag.volume,F||(F=v.get("Volume_Mute"),this._player.trigger(L.Private.Info_Show,{text:F,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},H.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(L.Private.VolumnChanged,-1)},H.prototype.unMute=function(F){return this._unMuteInner(),F||(F=v.get("Volume_UnMute"),this._player.trigger(L.Private.Info_Show,{text:F,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},H.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(L.Private.VolumnChanged,-2)},H.prototype.muted=function(){return this.tag&&this.tag.muted},H.prototype.getVolume=function(){return this.tag&&this.tag.volume},H.prototype.getOptions=function(){return this._options},H.prototype.setVolume=function(F,z){(F=Math.min(1,Math.max(0,F)))!=0?this._unMuteInner():F==0&&this._muteInner(),this._setInnerVolume(F),F=v.get("Curent_Volume")+"<span>"+(100*F).toFixed()+"%</span>",this._player.trigger(L.Private.Info_Show,{text:F,duration:1e3,align:"lb"})},H.prototype._setInnerVolume=function(F){this.tag.volume=F,this.trigger(L.Private.VolumnChanged,F)},H.prototype.hideProgress=function(){this.trigger(L.Private.HideProgress)},H.prototype.cancelHideProgress=function(){this.trigger(L.Private.CancelHideProgress)},H.prototype.setPlayerSize=function(F,z){this._el&&(this._el.style.width=F,this._el.style.height=z)},H.prototype.getBuffered=function(){return this.tag.buffered},H.prototype.setRotate=function(F){this.tag&&(this._rotate=F,this._setTransform(),this.log("ROTATE",{rotation:F}))},H.prototype.getRotate=function(F){return this._rotate===void 0?0:this._rotate},H.prototype.setImage=function(F){this.tag&&(this._image=F,this._setTransform(),this.log("IMAGE",{mirror:F=="horizon"?2:1,text:F}))},H.prototype.getImage=function(){return this._image},H.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},H.prototype.setCover=function(F){var z=document.querySelector("#"+this.id()+" .prism-cover");z&&F&&(z.style.backgroundImage="url("+F+")",this._options.cover=F,this._options.autoplay||this.trigger(L.Private.Cover_Show))},H.prototype.setTextTracks=function(F){this._options.textTracks=F,F=f.unqiueTextTracks(F||[]),this.trigger(L.Private.VttClearTracks),F&&F.length&&this.trigger(L.Private.TextTrackFounded,{from:"user",textTracks:F}),this.trigger(L.Private.CCReset)},H.prototype._setTransform=function(){this._transformProp||(this._transformProp=h.getTransformName(this.tag));var F=" translate(-50%, -50%)";this._rotate&&(F+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?F+=" scaleY(-1)":this._image=="horizon"&&(F+=" scaleX(-1)")),this.tag.style[this._transformProp]=F},H.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},H.prototype._initPlayBehavior=function(F,z){return!this._checkSupportVideoType()&&(f.validateSource(z)?(F===void 0&&(F=!1),this._created||(this._created=!0,this.trigger(L.Private.Created)),this.loaded||this.trigger(L.Player.Init),this._options.mute&&this.mute(!0),this._options.autoplay||this._options._autoplay||this._options.preload||F?(this._options._preload=!0,this._initLoad(z),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(L.Private.Play_Btn_Show),!0):((F={mediaId:this._options.vid||"",error_code:a.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=v.get("Error_Invalidate_Source"),this.trigger(L.Player.Error,F),!1))},H.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},H.prototype._initLoad=function(F){F&&(this._isPreload()&&!s.IS_MOBILE?this.trigger(L.Private.H5_Loading_Show):(this.trigger(L.Private.H5_Loading_Hide),this.trigger(L.Private.Play_Btn_Show)),this.tag.setAttribute("src",F),this.oncePlayed=!1,this.loaded=!0)},H.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},H.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(L.Player.OnM3u8Retry);var F=this._options,z=F.liveRetryInterval+F.liveRetryStep*this._liveRetryCount,ie=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(Q,"reloadAndPlayForM3u8::#"+ie._options.source+"#"+1e3*z),this._liveRetryTimer=setTimeout(function(){ie._liveRetryCount++,ie._loadByUrlInner(ie._options.source,void 0,F.autoplay)},1e3*z)},H.prototype._checkSupportVideoType=function(){var F,z=this,ie=this._options.source,he="";if(f.isRTMP(ie)&&!this._options.useFlashPrism)he=v.get("Error_Not_Support_RTMP");else if(f.isDash(ie)&&!f.isSupportMSE())he=v.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!s.IS_MOBILE)return"";return 0<ie.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||f.isSupportHls()||(he=v.get("Error_Not_Support_M3U8_Text")):0<ie.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(he=v.get("Error_Not_Support_MP4_Text")):(f.isRTMP(ie)||f.isFlv(ie))&&s.IS_MOBILE&&(this._options.useFlvPlugOnMobile?f.isSupportFlv()||(he=v.get("Error_Not_Support_Mse_Flv")):he=v.get("Error_Not_Support_Format_On_Mobile")),he&&(ie=f.getFormat(ie),F={mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:he+(ie?"(format:"+ie+")":"")},this.logError(F),F.display_msg=he,setTimeout(function(){z.trigger(L.Player.Error,F)})),he},H.prototype.getComponent=function(F){return this._lifeCycleManager.getComponent(F)},H.prototype.logError=function(F,z){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(F=F||{}).vt=this.getCurrentTime(),this.log(z?"ERRORRETRY":"ERROR",F)},H.prototype.log=function(F,z){var ie=0,he=0;if(this._monitor)return this._options&&(ie=this._options.vid||"0",he=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:ie,album_id:0,source:this._options.source,from:he}),this._monitor._log(F,z)},H.prototype.setSanpshotProperties=function(F,z,ie){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=F,this._snapshotMatric.height=z,1<ie)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=ie},H.prototype.getStatus=function(){return this._status||"init"},H.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},H.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},H.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},H.prototype.setProgressMarkers=function(F){this.trigger(L.Private.ProgressMarkerChanged,F=F||[])},H.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},H.prototype.setPreviewTime=function(F){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=F},H.prototype.getPreviewTime=function(){var F=0;return F=this._options.playConfig?this._options.playConfig.PreviewTime:F},H.prototype.exceedPreviewTime=function(F){return this.isPreview()&&F>=this._options.playConfig.PreviewTime},H.prototype.isPreview=function(){var F=this._options.playConfig.PreviewTime,z=this._vodDuration||this.tag.duration;return 0<F&&F<z},H.prototype.getStats=function(){return new g(function(F){F()})},H.prototype.setTraceId=function(F){this._monitor&&this._monitor.updateTraceId(F)},H.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},H.prototype._autoplayFailedHandler=function(){var F,z=this;(F=this.getOptions().autoplayPolicy)!=null&&F.fallbackToMute&&!this.muted()?(this.mute(!0),(F=this.tag.play())?F.then(function(){z.trigger(L.Private.MutedAutoplay)}).catch(function(ie){z.tag.paused?(console.warn("Muted autoplay failed",ie),z.unMute(!0)):z.one("canplay",function(){z.trigger(L.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(L.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(L.Private.Play_Btn_Show),this.trigger(L.Private.H5_Loading_Hide),this.trigger(L.Player.AutoPlayPrevented),this.trigger(L.Player.AutoPlay,!1),this._options.cover&&this.trigger(L.Private.Cover_Show))},H.prototype._overrideNativePlay=function(){var F=this.tag.play,z=this;this.tag.play=function(){if(z._monitor&&z._monitor.reportStartPlay(),!z._options.source)return ie={mediaId:z._options.vid||"",error_code:a.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},z._options.vid||z._options.mediaAuth?void 0:(ie.display_msg=v.get("Error_Empty_Source"),void z.trigger(L.Player.Error,ie));z.readyTime=new Date().getTime();var ie=F.apply(z.tag),he=(z.oncePlayed=!0,ie!==void 0&&ie.then(function(){z.trigger(L.Player.AutoPlay,!0)}).catch(function(le){!z.tag||!z.tag.paused||z._isError||z._options._autoplay||z._switchedLevel||z._autoplayFailedHandler()}),z._originalPlaybackRate||z.tag.playbackRate);return setTimeout(function(){z.tag&&(z.tag.playbackRate=he)}),ie}},H.prototype._extraMultiSources=function(){var F=this._options.source;if(F&&-1<F.indexOf("{")&&-1<F.indexOf("}")){var z="";try{z=JSON.parse(F)}catch(Se){console.error(Se),console.error("地址json串格式不对")}var ie,he=[];for(ie in z){var le=a.QualityLevels[ie];he.push({definition:ie,Url:z[ie],desc:le||ie})}this._setupSourceList(he)}return he},H.prototype._setupSourceList=function(F){var z;(F=F===void 0?[]:F).length&&(this._currentPlayIndex=f.findSelectedStreamLevel(F,this._options.defaultDefinition),z=F[this._currentPlayIndex],this._urls=F,this._options.source=z.Url,this.trigger(L.Private.SourceLoaded,z))},H.prototype._isEnabledAILabel=function(){return this._options.ai&&this._options.ai.label},H.prototype._createService=function(){if(I)for(var F=I.length,z=0;z<F;z++){var ie=I[z],he=ie.condition;he===void 0?he=!0:typeof he=="function"&&(he=he.call(this)),he&&(this[ie.name]=new ie.service(this))}},H.prototype._disposeService=function(){if(I)for(var F=I.length,z=0;z<F;z++){var ie=this[I[z].name];ie!==void 0&&ie.dispose&&ie.dispose()}},H.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(L.Private.H5_Loading_Hide),this.trigger(L.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(F){console.log(F)}},H.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},H.prototype._reloadForVod=function(){var F,z,ie;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(F=this.getCurrentTime(),(z=this._originalSource).indexOf("auth_key=")<0&&(z=z&&0<z.indexOf("?")?z+"&_t="+new Date().valueOf():z+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(ie=this).traceLog(Q,"reloadForVod::#"+z+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){ie._loadByUrlInner(z,F,ie.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},H.prototype._getUserTextTracks=function(){var F=this._options.textTracks||[];(F=f.unqiueTextTracks(F)).length&&this.trigger(L.Private.TextTrackFounded,{from:"user",textTracks:F})},t.exports=H},{"../../commonui/autostreamselector":11,"../../feature/AntiRecord":16,"../../feature/autoplaydelay":17,"../../feature/keyboardControl":18,"../../feature/license":19,"../../feature/logoManager":20,"../../feature/ratioAdapter":21,"../../lang/index":25,"../../lib/codec-probe":28,"../../lib/constants":30,"../../lib/cookie":31,"../../lib/dom":34,"../../lib/event":35,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/vttnext/index":57,"../../monitor/monitor":65,"../../ui/component":135,"../../ui/component/cover":139,"../../ui/component/license-watermark":144,"../../ui/component/play-animation":146,"../../ui/component/progressmarker":149,"../../ui/component/text-track-display":160,"../../ui/component/util":165,"../../ui/exports":168,"../service/export":124,"../splayer/splayerinjector":131,"./event/eventmanager":69,"./event/eventtype":70,"./eventHandler/video/index":84,"./plugin/lifecyclemanager":96,"./x5play":98,"es6-promise":8}],94:[function(e,t,x){e=e("../../../lib/oo").extend({}),t.exports=e},{"../../../lib/oo":45}],95:[function(e,t,x){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],96:[function(e,t,x){function g(s){(this._player=s)._status="init",this.components=[];var a=s.getOptions().components;if(a&&u.isArray(a)&&0<a.length)for(var f=0;f<a.length;f++){var v=a[f];if(!v)return void console.log("The "+f+" custome component is "+v);var T=v.type===void 0?v:v.type,m=v.args===void 0?[]:v.args,v=v.name===void 0?"":v.name;if(!T)return void console.log(v+" compenent is "+T);m=m&&0<m.length?[].concat.call([T],m):[],T=new(Function.prototype.bind.apply(T,m)),m=T[h.createEl],m&&typeof m=="function"&&m.call(T,s.el(),s),this.components.push({name:v,obj:T})}var S=this;s.on(d.Private.LifeCycleChanged,function(w){var _=w.paramData,E=_.type,_=_.data;E===d.Video.CanPlayThrough&&S._player.trigger(d.Player.TimeUpdate,_.target.currentTime),E===d.Video.Ended&&S._player.trigger(d.Player.TimeUpdate,S._player.getDuration()),S.components.length!=0&&o.call(S,s,w)})}var u=e("../../../lib/object"),d=e("../event/eventtype"),h=e("./lifecycle"),y=e("./status"),o=(g.prototype.getComponent=function(s){var a=null,f=this.components.length;if(s){for(var T=0;T<f;T++)if(this.components[T].name==s){a=this.components[T].obj;break}}return a},function(s,a){if(a){for(var a=a.paramData,f=a.type,T=a.data,m=((a=f)!=d.Video.LoadStart&&a!=d.Video.LoadedData&&a!=d.Video.LoadedMetadata||(f=h.loading),l(s,f),this.components.length),v=0;v<m;v++){var S=this.components[v].obj,w=S[f];w&&typeof w=="function"&&w.call(S,s,T)}f==d.Private.Dispose&&(this.components=[])}}),l=function(s,a){y[a]===void 0||a==y.pause&&(s._status==y.error||s._status==y.ended)||a==y.ready&&s._status==y.playing||(s._status=a)};t.exports=g},{"../../../lib/object":44,"../event/eventtype":70,"./lifecycle":95,"./status":97}],97:[function(e,t,x){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],98:[function(e,t,x){function g(h,y){var o=h.el().style.height,l=h.el().style.width,s=(h.originalLayout={container:{height:o,width:l},video:{width:h.tag.style.width,height:h.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),a=document.body.clientWidth+"px";width=y?(height=s,a):(height=o.indexOf("%")?o:o+"px",l.indexOf("%")?l:l+"px"),h.tag.style.width=a,h.tag.style.height=s,h.el().style.height=y?s:height}var u=e("../../lib/ua"),d=e("../../lib/dom");t.exports.isAndroidX5=function(){return u.os.android&&u.is_X5||u.dingTalk()},t.exports.adaptX5Play=function(h){u.os.android&&u.is_X5&&(h._options.x5_type=="h5"&&(h.tag.setAttribute("x5-video-player-type",h._options.x5_type),window.onresize=function(){var y,o;g(h,h._options.x5_fullscreen||h._options.x5_video_position=="center"),(y=h)._x5VideoOrientation=="landscape"&&(y._originalTagWidth=y.tag.style.width,y._originalTagHeight=y.tag.style.height,(o=document.querySelector("#"+y.id()+" .prism-controlbar"))&&parseFloat(o.offsetHeight),y.tag.style.height="100%",y.tag.style.width=window.screen.width+"px")},h.tag.addEventListener("x5videoenterfullscreen",function(){g(h,h._options.x5_fullscreen||h._options.x5_video_position=="center"),h.trigger("x5requestFullScreen")}),h.tag.addEventListener("x5videoexitfullscreen",function(){var y,o;(y=h).originalLayout&&(o=y.originalLayout,y.el().style.height=o.container.height,y.el().style.width=o.container.width,y.tag.style.width=o.video.width,y.tag.style.height=o.video.height),h.trigger("x5cancelFullScreen"),h.fullscreenService.getIsFullScreen()&&h.fullscreenService.cancelFullScreen()}),h.on("requestFullScreen",function(){h._options.x5_video_position=="top"&&d.removeClass(h.tag,"x5-top-left"),u.os.android&&u.is_X5&&h._options.x5LandscapeAsFullScreen&&(h.tag.setAttribute("x5-video-orientation","landscape"),h._x5VideoOrientation="landscape")}),h.on("cancelFullScreen",function(){h._options.x5_video_position=="top"&&d.addClass(h.tag,"x5-top-left"),u.os.android&&u.is_X5&&h._options.x5LandscapeAsFullScreen&&(h.tag.setAttribute("x5-video-orientation","portrait"),g(h,h._options.x5_fullscreen||h._options.x5_video_position=="center"),h._x5VideoOrientation="portrait")})),h._options.x5_fullscreen!==void 0&&h._options.x5_fullscreen&&(h.tag.setAttribute("x5-video-player-fullscreen",h._options.x5_fullscreen),d.addClass(h.tag,"x5-full-screen")),h._options.x5_video_position=="top"&&d.addClass(h.tag,"x5-top-left"),h._options.x5_orientation!==void 0)&&h.tag.setAttribute("x5-video-orientation",h._options.x5_orientation)}},{"../../lib/dom":34,"../../lib/ua":50}],99:[function(e,t,x){var g=e("../../lib/object"),u=e("../../lib/io"),d=e("../../config"),h=e("../../lang/index"),y=e("../../lib/constants"),o=e("../../lib/playerutil"),l=e("../base/event/eventtype"),s="dashinjector.js";t.exports.inject=function(a,f,T,m){var v=m.source;if(!(function(S){return!this._dash&&o.isDash(S)&&o.isSupportMSE()}).call(a,v))return console.warn("Should not inject dash player");a._Type=f,a._superType=T,a._superPt=T.prototype,a._disposed=!1,a._dash=null,f.prototype.initPlay=function(){var S=this,w=(this.trigger(l.Private.H5_Loading_Show),performance.now());(function(E,_){var R="aliplayer-dash-min.js",P=this.getOptions(),R=P.dashjsUrl||"https://"+d.domain+d.path+d.h5Version+"/dash/"+R;P.assetPrefix&&(P.assetPrefix,function(A){throw new TypeError('"'+A+'" is read-only')}("url")),u.loadJS(R,E,_)}).call(this,function(){S.traceLog(s,"got js#"+parseInt(performance.now()-w)+"ms"),(function(){var E,_,P,R=!this._dash;this._disposed||(this._destroyDash(),(E=this.getOptions()).vid||(E.isVBR=!0),_={streaming:{retryAttempts:{MPD:E.isLive?E.liveRetry:E.vodRetry}}},_=g.deepMerge(_,E.dashOption),P=dashjs.MediaPlayer().create(),this._dash=P,(function(){var A=this,C=this._dash,L=this.getOptions(),V=!1;C.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(I){var M,O;V||(V=!0,O=(O=C.getBitrateInfoListFor("video"))==null?void 0:O.map(function(N){return{url:""+y.DASH_QUALITY_PROTOCOL+N.qualityIndex,width:N.width,height:N.height,bitrate:N.bitrate,attrs:{BANDWIDTH:N.bitrate,RESOLUTION:N.width+"x"+N.height}}}),A.trigger(l.Player.LevelsLoaded,{levels:O}),M=C.getCurrentTrackFor("audio"),O=C.getTracksFor("audio").map(function(N){return{id:N.index,language:N.lang,enabled:(M==null?void 0:M.index)===N.index}}),A.trigger(l.Player.AudioTrackUpdated,{audioTracks:O}))}),C.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(I){var M,O;I.mediaType==="video"&&(M=A._qualityService.levels||[],O=""+y.DASH_QUALITY_PROTOCOL+I.newQuality,I=M.find(function(N){return N.Url===O}),A.trigger(l.Private.QualityChange,{levelSwitch:!0,url:O,desc:I==null?void 0:I.desc}))}),C.on("bytesAppendedEndFragment",function(I){try{var M,O;I.mediaType==="video"&&(M=I.bufferedRanges.length)&&(O=I.bufferedRanges.end(M-1),I.startTime>O)&&(C.refreshManifest(),A.traceLog(s,"PTS rollback, refresh manifest, expectedStart: "+I.startTime+", resultBufferEnd: "+O),console.warn("PTS rollback, refresh manifest"))}catch(N){console.log("exception",N)}}),C.on(dashjs.MediaPlayer.events.ERROR,function(I){var M=I.error,O=dashjs.MediaPlayer.errors,N=function(Q){var H,F={};for(H in Q){var z;Q.hasOwnProperty(H)&&(z=Q[H],F[z]=H)}return F}(O)[M.code],j=[O.TIME_SYNC_FAILED_ERROR_CODE,O.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",I,"code:",N),A.traceLog(s,"dashjs-error::"+N+"#"+M.message+"#"+((I=M.data)==null||(I=I.response)==null?void 0:I.status)),!j.includes(M.code)){A._clearTimeout();var Y,B,W,D=M.code;switch(D){case O.DOWNLOAD_ERROR_ID_CONTENT_CODE:case O.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case O.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case O.DOWNLOAD_ERROR_ID_SIDX_CODE:case O.DOWNLOAD_ERROR_ID_XLINK_CODE:case O.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case O.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var X=(X=M.data)==null||(X=X.response)==null?void 0:X.status;if(X===404){if(C.isDynamic()&&D===O.DOWNLOAD_ERROR_ID_CONTENT_CODE)return A.traceLog(s,"dashjs::reload mpd because seg 404"),void C.attachSource(L.source);Y=y.ErrorCode.NotFoundSourceURL,B=h.get("Error_Not_Found"),W=h.get("Tip_Err_Not_found")}else B=X===403?(Y=y.ErrorCode.AuthKeyExpired,h.get("Error_AuthKey_Text")):X===0?(Y=y.ErrorCode.RequestDataError,h.get("Error_Play_Text")+","+h.get("Maybe_Cors_Error")):(Y=y.ErrorCode.RequestDataError,h.get("Error_Network_Text")+"("+N+"|"+X+")");break;case O.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case O.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case O.MANIFEST_ERROR_ID_PARSE_CODE:case O.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case O.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:Y=y.ErrorCode.LoadedMetadata,B=h.get("Error_Manifest_Decode_Text")+"("+N+")";break;default:Y=y.ErrorCode.OtherError,B=h.get("Error_Play_Text")+"("+N+")"}B+="<br>"+M.message,I={mediaId:L.vid||"",mediaAuth:L.mediaAuth||"",error_code:Y,error_msg:B,diagnosis_info:W},A.logError(I),A.trigger(l.Player.Error,I),A._dash.reset()}})}).call(this),P.initialize(),P.updateSettings(_),P.setAutoPlay(E.autoplay),P.attachView(this.tag),P.attachSource(E.source),this._initPlayBehavior(),R&&this._executeReadyCallback())}).call(S)},function(){var E={mediaId:m.vid||"",mediaAuth:m.mediaAuth||"",error_code:y.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};S.trigger(l.Player.Error,E)})},f.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),f.prototype.play=this._superPt.play,f.prototype.pause=this._superPt.pause,f.prototype.initPlay=this._superPt.initPlay,f.prototype.seek=this._superPt.seek,f.prototype.canSeekable=this._superPt.canSeekable))},f.prototype._switchLevel=function(S){this.traceLog(s,"switchLevel::"+S);var w=this._dash;S?(S=Number(S.replace(y.DASH_QUALITY_PROTOCOL,"")),w.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),w.setQualityFor("video",S)):w.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},f.prototype._switchAudioTrack=function(S){var w=this._dash,E=w.getTracksFor("audio").find(function(_){return _.index===S});E&&w.setCurrentTrack(E)},f.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],100:[function(e,t,x){var g=e("../base/player"),u=e("./dashinjector"),d=g.extend({init:function(h,y){y._native=!1,u.inject(this,d,g,y),g.call(this,h,y)}});t.exports=d},{"../base/player":93,"./dashinjector":99}],101:[function(e,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var w,E=arguments[S];for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&(v[w]=E[w])}return v}).apply(this,arguments)}var u=e("../../lib/io"),d=e("../../config"),h=e("../../lib/constants"),y=e("../../lib/util"),o=e("../../lib/playerutil"),l=(e("../../lib/dom"),e("../../lang/index")),s=e("../base/event/eventtype"),a=e("../saas/drm"),f=e("../../lib/ua"),T="drminjector.js",m=function(){function v(){}var S=v.prototype;return S.destroy=function(){},S.append=function(w){},S.remove=function(w,E){},S.isTextVisible=function(){},S.setTextVisibility=function(w){},v}();t.exports.inject=function(v,S,w,E,_,P,R){var A,C=E.source;function L(Y){var B=shaka.util.Error.Code,W="",D=Y.data||[];switch(Y.code){case B.BAD_HTTP_STATUS:case B.HTTP_ERROR:case B.TIMEOUT:case B.LICENSE_REQUEST_FAILED:W=l.get("Tip_Drm_Request_Err")+V(D);break;case B.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case B.SESSION_TIMEOUT:window.isSecureContext?(W=l.get("Tip_Drm_Key_System_Unavailable"),D.length&&(W+="<br />"+l.get("Tip_Err_Common_Short")+D)):W=l.get("Tip_Drm_Secure_Context");break;case B.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(W=l.get("Tip_Drm_File_Not_Allowed"));break;case B.HLS_INVALID_PLAYLIST_HIERARCHY:W=l.get("Tip_Drm_Playlist_Hierarchy")}return Y=V(D),W||Y}function V(Y){return l.get("Tip_Err_Common")+Y}function I(Y){var B=this;this._drm.load(this._options.source,Y.startTime).then(function(){if(B.trigger(s.Private.H5_Loading_Hide),Y.continuePlay&&(B.play(),Y.prevVariant)&&Y.prevVariant!==0){for(var W,D=B._drm.getVariantTracks(),X=0;X<D.length;X++)if(D[X].id===Y.prevVariant){W=D[X];break}W&&B._drm.selectVariantTrack(W,!0)}}).catch(function(W){O.call(B,W)})}function M(){N();var B=h.ErrorCode.DrmNotSupported,Y=l.get("Error_Drm_Not_Supported"),B={mediaId:this._options.vid||"",error_code:B,error_msg:Y,diagnosis_info:l.get("Tip_Drm_Unsupported")};this.logError(B),this.trigger(s.Player.Error,B)}function O(Y){N();var W=h.ErrorCode.DrmLoadError,B=l.get("Error_Drm_Load"),W={mediaId:this._options.vid||"",error_code:W,error_msg:B+" | "+this._shakaCodeMap[Y.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(W),W.diagnosis_info=L.call(this,Y),this.trigger(s.Player.Error,W)}function N(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function j(Y,B){B=B.getVariantTracks().find(function(W){return W.active}),console.log("activeTrack",B),Y.trigger(s.Private.QualityChange,{levelSwitch:!0,bitrate:B.bandwidth,desc:B.height})}!P&&(E=C,v._drm||!o.isDash(E)&&!o.isHls(E))||(v._isDrm=!0,v._drm=null,v._isLoadedDrm=!1,v._sessionTimer=null,v._isFairPlay=f.IS_MAC_SAFARI||f.IS_IOS,v._fairPlayHandlers={},v._shakaCodeMap={},v._cdmData="",v._licenseData="",console.log("use FairPlay",v._isFairPlay),S.prototype._checkDrmReady=function(){if(this._drm==null&&!this._isFairPlay)throw new Error("please invoke this method after ready event")},S.prototype.play=function(Y){return this.traceLog(T,"play::"+Y),this._checkDrmReady(),this._isManualPlay=Y||!1,this.trigger(s.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},S.prototype.initPlay=function(Y){var B,W,D;function X(Q,H){var F,z,ie,he;Q._antiRecord&&(console.log("Manual check before load source"),Q._antiRecord.check())||(!shaka.Player.isBrowserSupported()||function(){if(f.IS_ANDROID)return!(!f.IS_UC&&!f.IS_FIREFOX)}()?M.call(Q):(F=null,shaka.Player.probeSupport().then(function(le){F&&(clearTimeout(F),F=null),le&&le.drm&&le.drm["com.widevine.alpha"]?Q.destroy(he):M.call(Q)}),F=setTimeout(function(){M.call(Q)},5e3),z=!Q._drm,ie=function(){var le,Se,_e;Q._drm=new shaka.Player(Q.tag),A(Q,Q._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",Q._shakaCodeMap=(le=shaka.util.Error.Code,Se={},Object.keys(le).forEach(function(me){Se[le[me]]=me}),Se),_e=Q._options.isLive?"https://"+o.getLiveHostByRegion(Q._options.region):"https://vod."+Q._options.region+".aliyuncs.com",Q._drm.configure(g({drm:{servers:{"com.widevine.alpha":_e,"com.microsoft.playready":_e},retryParameters:{maxAttempts:1}}},Q._options.drmOption||{},{textDisplayFactory:function(){return new m}})),Q._drm.getNetworkingEngine().registerRequestFilter(function(me,xe){shaka.util.StringUtils;var Z=shaka.util.Uint8ArrayUtils;me==shaka.net.NetworkingEngine.RequestType.LICENSE&&(me=Z.toBase64(new Uint8Array(xe.body)),Z=Q._options.isLive?a.getRequestUrl(me,Q):a.postData(me,Q),Q._cdmData=me,xe.uris[0]=Z.url,xe.headers["content-type"]="application/x-www-form-urlencoded",xe.body=Z.data)}),Q._drm.getNetworkingEngine().registerResponseFilter(function(me,xe){var Z=shaka.util.StringUtils,te=shaka.util.Uint8ArrayUtils;me==shaka.net.NetworkingEngine.RequestType.LICENSE&&(me=Z.fromUTF8(xe.data),Z=JSON.parse(me),me=Q._options.isLive?Z.Response.B64License:JSON.parse(Z.License).b64License,Q._licenseData=me,xe.data=te.fromBase64(me))}),Q._drm.addEventListener("error",function(me){console.log("errorMessage"),console.log(me.detail.code),console.log(me.detail)}),Q._drm.load(Q._options.source).then(function(){Q._initPlayBehavior(H)}).catch(function(me){O.call(Q,me)}),N.call(Q),Q.one(s.Video.CanPlay,function(){N.call(Q)}),Q._sessionTimer=setTimeout(function(){Q._isError||(O.call(Q,{code:"SESSION_TIMEOUT"}),Q._drm&&Q._drm.destroy())},Q._player.getOptions().drmSessionTimeout||5e3),_&&_(Q._drm),z&&Q._executeReadyCallback()},he=function(le){try{ie()}catch(Se){console.log(Se)}}))}y.contentProtocolMixed(C)?(N(),(B={mediaId:this._options.vid||"",error_code:h.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=l.get("Request_Block_Text"),this.trigger(s.Player.Error,B)):this._options.accessKeyId&&this._options.accessKeySecret?((W=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(s.Private.H5_Loading_Show),(function(Q,H){var F;this._isFairPlay&&(function(){if(f.IS_IOS)return z=parseInt(f.os.version),console.log("osVersion",z),12<=z;{var z;if(f.IS_MAC_SAFARI)return z=parseInt(f.browser.version),console.log("browserVersion",z),12<=z}}()?((F=this).destroy(),a.loadCertificate(this,function(){Q&&Q(),F._initPlayBehavior(H,F._options.source),F._executeReadyCallback()})):M.call(this))}).call(this,_,Y)):this._isLoadedDrm&&typeof shaka<"u"?X(this,Y):(this.trigger(s.Private.H5_Loading_Show),D=performance.now(),(function(Q,H){var F="aliplayer-drm-min.js",z="",z=d.domain?"https://"+d.domain+d.path+d.h5Version+"/drm/"+F:"/build/drm/"+F,ie=(this._options.shakaUrl&&(z=this._options.shakaUrl),this);u.loadJS(z,function(){shaka.polyfill.installAll(),Q.apply(ie)},function(he){H&&H(he)})}).call(W,function(){this.traceLog(T,"got js#"+parseInt(performance.now()-D)),this._isLoadedDrm=!0,X(this,Y)},function(Q){Q={mediaId:W._options.vid||"",mediaAuth:W._options.mediaAuth||"",error_code:h.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(Q?Q.message:"")},W.trigger(s.Player.Error,Q)}))):(N(),(B={mediaId:this._options.vid||"",error_code:h.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=l.get("Error_Drm_No_Sts"),this.trigger(s.Player.Error,B))},S.prototype.destroy=function(Y){var B;this._drm?(N.call(B=this),this._drm.destroy().then(function(){B._drm=null,typeof Y=="function"&&Y(B)})):(this._isFairPlay&&this._destroyFairPlay(),typeof Y=="function"&&Y(this))},S.prototype._destroyFairPlay=function(){a.destroyFairPlay.call(this)},S.prototype.dispose=function(){w.dispose.call(this),this.destroy()},S.prototype._switchLevel=function(Y,B){if(B=B||{},this.trigger(s.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!B.isAuto;var W=this.autoplay||this._status!="pause";this._loadByUrlInner(Y,this.getCurrentTime(),W,!0)}else if(B.isAuto)this._drm.configure({abr:{enabled:!0}}),j(this._player,this._drm);else{for(var D,X=this._drm.getVariantTracks(),Q=0;Q<X.length;Q++){var H=X[Q];if(Number(H.bandwidth)===Number(B.bitrate)&&Number(H.height)===Number(B.resolution.split("x")[1])){D=H;break}}console.log("find track",D),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(D,!this._options.seamlessHandover)}var F=this;setTimeout(function(){F.trigger(s.Player.LevelSwitched),this._switchedLevel=!1},1e3)},S.prototype._getDRMEncryptItem=function(){var Y=this._urls;if(Y&&0<Y.length)for(var B=Y.length,W=0;W<B;W++){var D=Y[W];if(D.Url==this._options.source&&+D.encryption)return D}return""},S.prototype._getItemBySource=function(){var Y=this._urls;if(Y&&0<Y.length)for(var B=Y.length,W=0;W<B;W++){var D=Y[W];if(D.Url==this._options.source)return D}return""},A=function(Y,B){B.addEventListener("error",function(Q){var D,X=Y,Q=Q.detail,F="Error code:"+Q.code+"message:"+Q.message,H=(X.traceLog(T,F),console.log(F),h.ErrorCode.OtherError),F=l.get("Error_Play_Text");Q.code==shaka.util.Error.Code.EXPIRED?(function(){var z=this,ie=(this.trigger(s.Private.H5_Loading_Show),null);this._options.isLive||(ie=this.getCurrentTime());var he,le=!this.paused(),Se=this._drm.getConfiguration().abr.enabled;if(!Se){for(var _e=this._drm.getVariantTracks(),me=0;me<_e.length;me++)if(_e[me].active){he=_e[me].id;break}}var xe={startTime:ie,continuePlay:le,prevVariant:he,isAdaptive:Se};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(Z){(Z=Z||{}).accessKeyId&&(z._options.accessKeyId=Z.accessKeyId),Z.securityToken&&(z._options.securityToken=Z.securityToken),Z.accessKeySecret&&(z._options.accessKeySecret=Z.accessKeySecret),I.call(z,xe)}):I.call(z,xe)}).call(X):(Q.code==shaka.util.Error.Code.HTTP_ERROR?(H=h.ErrorCode.NetworkError,F=l.get("Http_Error")):Q.code==shaka.util.Error.Code.TIMEOUT?(H=h.ErrorCode.LoadingTimeout,F=l.get("Error_Waiting_Timeout_Text")):Q.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(H=h.ErrorCode.DrmLicenseRequestFailed,F=l.get("Error_Drm_License_Request_Failed")):Q.Category==shaka.util.Error.NETWORK&&(H=h.ErrorCode.NetworkError,F=l.get("Error_Network_Text")),N.call(X),setTimeout(function(){X.trigger(s.Private.Play_Btn_Hide)}),X.checkOnline()&&(D=X._drm.drmInfo()||{},D={keyIds:Array.from(D.keyIds||[]),initData:String(((D=(D.initData||[])[0])==null?void 0:D.initData)||[]),cdmData:X._cdmData,licenseData:X._licenseData},D={mediaId:X._options.vid||"",error_code:H,error_msg:Q.message,shaka_error:JSON.stringify(Q.data||[]),drm_info:JSON.stringify(D)},X.logError(D),D.display_msg=F+" | "+X._shakaCodeMap[Q.code],D.diagnosis_info=L.call(X,Q),X.trigger(s.Player.Error,D)))}),B.addEventListener("variantchanged",function(W){console.log("DRM Event: variantchanged",W)}),B.addEventListener("abrstatuschanged",function(W){console.log("DRM Event: abrstatuschanged",W)}),B.addEventListener("drmsessionupdate",function(W){console.log("DRM Event: drmsessionupdate",W),N.call(Y)}),B.addEventListener("expirationupdated",function(W){console.log("DRM Event: expirationupdated",W),console.log("Exp:",this.getExpiration())}),B.addEventListener("adaptation",function(W){console.log("adaptation",W),j(Y,B)}),B.addEventListener("trackschanged",function(W){console.log("DRM EVENT: trackschanged",B.getTextLanguages(),B.getTextTracks());var D=B.getTextLanguages();D&&D.length&&(D=function(X){var Q={subtitle:"subtitles",caption:"captions"},H=(console.log("Building track config"),X.getManifest().textStreams||[]),F=(console.log("textStreams",H),X.getTextLanguages()),z=(console.log("languageList",F),[]);try{H.forEach(function(ie){F.includes(ie.language)&&z.push({kind:Q[ie.kind]||ie.kind,label:ie.label,srclang:ie.language,src:Array.from(ie.segmentIndex)[0].getUris()[0]})})}catch(ie){console.log("error in retrieving text track url: ",ie)}return z}(B),Y.trigger(s.Private.TextTrackFounded,{from:"drm",textTracks:D}),Y.trigger(s.Private.CCReset))})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70,"../saas/drm":111}],102:[function(e,t,x){var g=e("../base/player"),u=e("./drminjector"),d=g.extend({init:function(h,y){u.inject(this,d,g.prototype,y,function(o){}),y._native=!1,g.call(this,h,y)}});t.exports=d},{"../base/player":93,"./drminjector":101}],103:[function(_,t,x){var g=_("../../ui/component"),u=_("../../lib/data"),d=_("../../lib/ua"),h=_("../../lib/constants"),y=_("../../lib/dom"),o=_("../../lib/object"),l=_("../../config"),s=_("../../lang/index"),a=_("../../lib/playerutil"),f=_("../../lib/util"),T=_("../../ui/component/info-display"),m=_("../../ui/component/error-display"),v=_("../../feature/autoplaydelay"),S=_("../../commonui/autostreamselector"),w=_("../base/event/eventtype"),E=_("../saas/ststoken"),_=g.extend({init:function(P,R){var A;R.skinLayout===void 0&&(R.skinLayout=a.defaultFlashLayout),g.call(this,this,R),this._id="prism-player-"+u.guid(),this.tag=P,this._el=this.tag,this._childrenUI=[m],this.initChildren(),this.id=this._id,window[this.id]=this,s.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),f.openInFile()?(R={mediaId:this._options.vid||"",error_code:h.ErrorCode.FormatNotSupport,error_msg:s.get("Open_Html_By_File","flash")},this.trigger(w.Private.Error_Show,R)):d.IS_MOBILE?this.trigger(w.Private.Error_Show,{mediaId:this._options.vid||"",error_code:h.ErrorCode.FormatNotSupport,error_msg:s.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?E.getPlayAuth((A=this)._options,function(C){A._options.playauth=C,A._createPlayer()},function(C){var L={mediaId:A._options.vid,error_code:C.Code,error_msg:C.Message};C.sri&&(L.sri=C.sri),L.display_msg=C.display_msg,A.trigger(w.Private.Error_Show,L)},"flash"):this._createPlayer(),this._status="init")},_createPlayer:function(){var P,R;this._options.autoPlayDelay?(R=new v(this),P=this,R.handle(function(){P._options.autoplay=!0,P._initPlayer(),P._childrenUI=[T,S],P.initChildren()})):(this._initPlayer(),this._childrenUI=[T,S],this.initChildren()),d.HAS_FLASH||(R=s.get("Flash_Not_Ready","flash"),this.trigger(w.Private.Info_Show,{text:R,align:"tc",isBlack:!1}))},_initPlayer:function(){var P="//"+l.domain+"/de/prismplayer-flash/"+l.flashVersion+"/PrismPlayer.swf",R=(this._options.playerSwfPath?P=this._options.playerSwfPath:l.domain?-1<l.domain.indexOf("localhost")&&(P="//"+l.domain+"/build/flash//PrismPlayer.swf"):P="de/prismplayer-flash/"+l.flashVersion+"/PrismPlayer.swf",this._comboFlashVars()),A=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+P+'"><param name=quality value=High><param name="FlashVars" value="'+R+'"><param name="WMode" value="'+A+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+P+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+A+'" FlashVars="'+R+'"></embed></object>'},_getPlayer:function(P){return navigator.appName.indexOf("Microsoft")!=-1?document.getElementById(P):document[P]},_getLowerQualityLevel:function(){var P,R=this._getVideoUrls();return R&&(P=R.Urls,R=R.index,!(P&&P.length==0||R==-1))&&0<R?{item:P[R-1],index:R-1}:""},_comboFlashVars:function(){var C=encodeURIComponent(d.getReferer()),A=d.getHref(),P=encodeURIComponent(A),R="",A=(A&&(R=d.getHost(A)),this._options),C={autoPlay:A.autoplay?1:0,isInner:0,actRequest:1,vid:A.vid,diagnosisButtonVisible:A.diagnosisButtonVisible?1:0,domain:A.domain||"//tv.taobao.com",statisticService:A.statisticService||l.logReportTo,videoInfoService:A.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:A.trackLog?0:1,namespace:this.id,barMode:A.barMode!=0?1:0,isLive:A.isLive?1:0,waterMark:A.waterMark,environment:A.environment,vurl:A.source?encodeURIComponent(A.source):"",plugins:A.plugins||"",snapShotShow:A.snapshot?1:0,accessId:A.accId||"",accessKey:A.accSecret||"",apiKey:A.apiKey||"",flashApiKey:A.flashApiKey||"",disableSeek:A.disableSeek?1:0,disableFullScreen:A.disableFullScreen?1:0,stsToken:A.stsToken||"",domainRegion:A.domainRegion||"",authInfo:A.authInfo?encodeURIComponent(A.authInfo):"",playDomain:A.playDomain||"",stretcherZoomType:A.stretcherZoomType||"",playauth:A.playauth?A.playauth.replace(/\+/g,"%2B"):"",prismType:A.prismType||0,formats:A.formats||"",notShowTips:A.notShowTips?1:0,showBarTime:A.showBarTime||0,showBuffer:A.showBuffer==0?0:1,rePlay:A.rePlay?1:0,encryp:A.encryp||"",secret:A.secret||"",mediaType:"video",logInfo:{ud:d.getHost(A.source),os:d.os.name,ov:d.os.version||"",et:d.browser.name,ev:d.browser.version||"",uat:d.USER_AGENT,r:C,pu:P,app_n:R}},L=[];return A.rtmpBufferTime!==void 0&&(C.rtmpBufferTime=A.rtmpBufferTime),A.cover&&(C.cover=A.cover),A.extraInfo&&(C.extraInfo=encodeURIComponent(JSON.stringify(A.extraInfo))),C.logInfo&&(C.logInfo=encodeURIComponent(JSON.stringify(C.logInfo))),C.languageData=encodeURIComponent(JSON.stringify(s.getLanguageData("flash"))),C.language=s.getCurrentLanguage(),o.each(C,function(V,I){L.push(V+"="+I)}),L.join("&")},initChildren:function(){for(var P=this._childrenUI.length,R=0;R<P;R++){var A=new this._childrenUI[R](this,this._options),C=A.el();C.id=A.id(),this.contentEl().appendChild(C),A.bindEvent()}var L=document.querySelector("#"+this._options.id+" .prism-info-display");y.css(L,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var P=this._options.skinRes,R=this._options.skinLayout;if(R!==!1&&!o.isArray(R))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if(typeof P!="string")throw new Error("PrismPlayer Error: skinRes should be string!");P=R!=0&&R.length!==0&&{skinRes:P,skinLayout:R},this.flashPlayer.setPlayerSkin(P),this.trigger("ready");var A=this;window.addEventListener("beforeunload",function(){try{A.flashPlayer.setPlayerCloseStatus()}catch{}})},jsReady:function(){return!0},snapshoted:function(A){var R=f.toBinary(A),A="data:image/jpeg;base64,"+A;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:A,binary:R})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){this._status!="ended"&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(w.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(w.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(P){this.trigger("bSSendMsg",P)},onVideoRender:function(P){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:P})},onVideoError:function(P){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:P})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){var P;this._status!="pause"&&(this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle(),(P=this)._checkTimeoutHandle=setTimeout(function(){P.trigger(w.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus())},startSeek:function(P){this.trigger("startSeek",P)},completeSeek:function(P){this.trigger("completeSeek",P)},_invoke:function(){var P=arguments[0],R=arguments;if(Array.prototype.shift.call(R),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready，please use api after ready event occured!");if(typeof this.flashPlayer[P]!="function")throw new Error("PrismPlayer Error: function "+P+" is not found!");return this.flashPlayer[P].apply(this.flashPlayer,R)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(P){this._invoke("seekVideo",P)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var P=this._invoke("getVideoUrls"),R=[];if(P&&P.Urls)for(var A=0;A<P.Urls.length;A++){var C=P.Urls[A].value,L=C.desc.indexOf("_"),V=s.get(C.definition,"flash");C.desc=0<L?V+"_"+C.height:V,R.push(C)}return{Urls:R,index:P.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var P;this.flashPlayer&&!this._checkVideoStatusHandler&&(P=this,function R(){P._checkVideoStatusHandler=setTimeout(function(){var A=P._getVideoStatus();A.videoStatus=="playing"&&A.bufferStatus=="bufferFull"?(P._status="playing",P._clearTimeoutHandle()):A.videoStatus=="videoPlayOver"&&(P._status="ended",P._clearTimeoutHandle()),R()},500)}())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(P){return this._invoke("changeStream",P)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(P){this._invoke("setVolume",P)},loadByVid:function(P){this._invoke("loadByVid",P,!1)},loadByUrl:function(P,R){this._invoke("loadByUrl",P,R)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),this._checkVideoStatusHandler=null),this._invoke("pauseVideo");var P=this;setTimeout(function(){P.offAll("completeSeek"),P.offAll("startSeek"),P.offAll("stsTokenExpired"),P.offAll("liveStreamStop"),P.offAll("showBar"),P.offAll("hideBar"),P.offAll("m3u8Retry"),P.offAll("error"),P.offAll("canplay"),P.offAll("pause"),P.offAll("ended"),P.offAll("play"),P.offAll("loadedmetadata"),P.offAll("snapshoted"),P.offAll("uiReady"),P.offAll("ready"),P.flashPlayer=null,P._el&&(P._el.innerHTML="")})},showBSMsg:function(P){this._invoke("showBSMsg",P)},setToastEnabled:function(P){this._invoke("setToastEnabled",P)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(P,R){this._el.style.width=P,this._el.style.height=R}});t.exports=_},{"../../commonui/autostreamselector":11,"../../config":14,"../../feature/autoplaydelay":17,"../../lang/index":25,"../../lib/constants":30,"../../lib/data":32,"../../lib/dom":34,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../ui/component":135,"../../ui/component/error-display":140,"../../ui/component/info-display":143,"../base/event/eventtype":70,"../saas/ststoken":118}],104:[function(e,t,x){var g=e("../../lib/io"),u=e("../../config"),d=e("../../lib/constants"),h=e("../../lib/util"),y=e("../../lib/playerutil"),o=e("../../lib/ua"),l=e("../../lib/data"),s=e("../../lang/index"),a=e("../base/event/eventtype"),f="flvinjector.js";t.exports.inject=function(T,m,v,S,w,E){var _,P=S.source,R=S.optionFormat;function A(C){try{for(var L=C.buffered.length,V="Len:"+L+";",I=0;I<L;I++)V+="["+(I+1)+"]"+C.buffered.start(I)+"~"+C.buffered.end(I);return V}catch{}}(E||(S=P,E=R,!T._flv&&y.isFlv(S,E)&&y.isSupportFlv()))&&(T._Type=m,T._superType=v,T._superPt=v.prototype,T._disposed=!1,m.prototype._checkFlvReady=function(){if(this._flv==null)throw new Error("please invoke this method after ready event")},T._isFlv=!0,T._flv=null,T._isLoadedFlv=!1,T._dumpBuffer=null,m.prototype.play=function(C){return this.traceLog(f,"play::"+C),C&&this.trigger(a.Private.ManualPlay),this._checkFlvReady(),this._isManualPlay=C||!1,this.trigger(a.Private.Cover_Hide),this._options.isLive&&C?this._loadByUrlInner(this._options.source,0,C):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(C=0,this.tag.ended||this._ended||(C=this.getCurrentTime())==0&&(C=-1),C!=-1)&&this.seek(C),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},m.prototype.seek=function(C){this._checkFlvReady(),this._seeking=!0;var L=this.getDuration();L<=(C=Math.floor(C))&&(C=L);try{this._flv.currentTime=C}catch(V){console.log(V)}return this},m.prototype.pause=function(C){return this._checkFlvReady(),this._isManualPause=C||!1,this._flv.pause(),this},m.prototype.getProgramDateTime=function(){var C;return this._checkFlvReady(),this._metadata?(C=(C=this._flv.getFirstSample())&&C.pts?C.pts:0,console.log("推流时间："+this._metadata.NtpTime),console.log("首帧PTS："+C),this._metadata.NtpTime+C):""},m.prototype.initPlay=function(C){var L,V,I;function M(O,N){if(!O._disposed){var j=!O._flv,Y=(O._destroyFlv(),O._options.isLive);if(Y&&!flvjs.getFeatureList().networkStreamIO)return(X={error_code:d.ErrorCode.FormatNotSupport,error_msg:s.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=X.error_msg,void O.trigger(a.Player.Error,X);var B,W={isLive:Y,enableWorker:O._options.enableWorker,accurateSeek:!0},D=(o.IS_IE11&&(W.enableWorker=!1),{type:"flv",isLive:Y,url:O._options.source});for(B in Y?(W.enableStashBuffer=O._options.enableStashBufferForFlv,W.stashInitialSize=O._options.stashInitialSizeForFlv,W.autoCleanupSourceBuffer=!1):W.lazyLoadMaxDuration=600,W.statisticsInfoReportInterval=1e3,O._options.isLive&&(O._options.flvFrameChasing&&(W.flvFrameChasing=O._options.flvFrameChasing),O._options.chasingFirstParagraph&&(W.chasingFirstParagraph=O._options.chasingFirstParagraph),O._options.chasingSecondParagraph&&(W.chasingSecondParagraph=O._options.chasingSecondParagraph),O._options.chasingFirstSpeed&&(W.chasingFirstSpeed=O._options.chasingFirstSpeed),O._options.chasingSecondSpeed)&&(W.chasingSecondSpeed=O._options.chasingSecondSpeed),O._options.flvOption)B=="cors"||B=="hasAudio"||B=="withCredentials"||B=="hasVideo"||B=="type"?D[B]=O._options.flvOption[B]:W[B]=O._options.flvOption[B];flvjs.LoggingControl.enableAll=O._options.debug,O._flv=flvjs.createPlayer(D,W),_(O,O._flv),O._flv.on(flvjs.Events.DUMP_BUFFER,function(H){var F,z,ie;O._options.disableDumpBuffer||O._liveRetryCount===0&&O._vodRetryCount===0&&O._nudgeCount===0&&typeof O._dumpBuffer!="string"&&(O._flvDumpTimer||(O._flvDumpTimer=setTimeout(function(){O._reportDumpBuffer&&O._reportDumpBuffer()},5e3)),H=new Uint8Array(H),O._dumpBuffer?O._dumpBuffer=(F=O._dumpBuffer,z=H,(ie=new Uint8Array(F.length+z.length)).set(F),ie.set(z,F.length),ie):O._dumpBuffer=H)});var X,Q=h.throttle(function(H){O.traceLog(f,"dts_adjustment::"+H.from+"->"+H.to)},1e3);O._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(H){Q(H)}),O._flv.on(flvjs.Events.MEDIA_INFO,function(H){O._metadata=H.metadata}),O._flv.on(flvjs.Events.METADATA_ARRIVED,function(H){H&&H.dataContent&&H.dataContent.length&&O.trigger(a.Private.SeiFrame,{dataContent:H.dataContent,pts:H.pts})}),O._flv.on(flvjs.Events.STATISTICS_INFO,function(H){O.trigger(a.Private.StatisticsInfo,H)}),O._flv.attachMediaElement(O.tag),O._initPlayBehavior(N)&&((O._options.preload||O._options.autoplay)&&(O._hasLoaded=!0,O._flv.load()),O._options.autoplay&&!O.tag.paused&&O._flv.play(),w&&w(O._flv),j)&&(O._executeReadyCallback(),O._urls)&&0<O._urls.length&&(O._currentPlayIndex=y.findSelectedStreamLevel(O._urls,O._options.defaultDefinition),X=O._urls[O._currentPlayIndex],O._options.source=X.Url,O.trigger(a.Private.SourceLoaded,X))}}o.browser.safari&&this.trigger(a.Private.Snapshot_Hide),h.contentProtocolMixed(P,"",R)?((L={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=s.get("Request_Block_Text"),this.trigger(a.Player.Error,L)):(V=this)._isLoadedFlv&&typeof Hls<"u"?setTimeout(function(){M(V,C)},1e3):(this.trigger(a.Private.H5_Loading_Show),I=performance.now(),(function(O,N,j){var Y="aliplayer-flv-min.js",B="",B=u.domain?"https://"+u.domain+u.path+u.h5Version+"/flv/"+Y:"/build/flv/"+Y,W=(this._options.assetPrefix&&(B=this._options.assetPrefix+"/flv/"+Y),this);g.loadJS(B,function(){O.apply(W)},function(){j&&j()})}).call(V,function(){this.traceLog(f,"got js#"+parseInt(performance.now()-I)),this._isLoadedFlv=!0,M(this,C)},this._options.debug,function(){var O={mediaId:V._options.vid||"",mediaAuth:V._options.mediaAuth||"",error_code:d.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};V.trigger(a.Player.Error,O)}))},m.prototype._reportDumpBuffer=function(){var C,L;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),C=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),C=h.arrayBufferToB64(C),L=l.guid(),this.traceLog(f,"dump::"+L),this.trigger(a.Private.DumpBuffer,{id:L,data:C}))},m.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(C){console.log(C)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},m.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(m.prototype.play=this._superPt.play,m.prototype.pause=this._superPt.pause,m.prototype.initPlay=this._superPt.initPlay,m.prototype.seek=this._superPt.seek,m.prototype.canSeekable=this._superPt.canSeekable))},m.prototype.canSeekable=function(C){var L=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(C)&&L&&!L.hasKeyframesIndex)},m.prototype._getbwEstimator=function(){var C;return 1024*((C=this._flv)==null||(C=C.statisticsInfo)==null?void 0:C.speed)*8},_=function(C,L){var V=!1;L.on(flvjs.Events.ERROR,function(I,M,O){var N,j,Y,B,W="flvjs-error::"+I+"#"+M+"#"+O.code+"#"+O.msg,D=O.msg==="BodyStreamBuffer was aborted"&&L._config.lazyLoad;if(D){W+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var X=L._msectl._sourceBuffers.video,Q=L._msectl._sourceBuffers.audio;W+="#Video buffer:"+A(X)+"#Audio buffer:"+A(Q)}catch{}}C.traceLog(f,W),C._reportDumpBuffer&&C._reportDumpBuffer(),I===flvjs.ErrorTypes.BUFFER_FULL||(C._flv.unload(),D)||C._isError||(N=d.ErrorCode.OtherError,j=s.get("Error_Play_Text"),Y=null,M==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(X=C.getOptions().source)||X.toLowerCase().indexOf("http://")!=0&&X.toLowerCase().indexOf("https://")!=0?(N=d.ErrorCode.InvalidSourceURL,j=s.get("Error_Invalidate_Source_Widthout_Protocal"),V=!0):j=navigator.onLine?(N=d.ErrorCode.RequestDataError,s.get("Maybe_Cors_Error")):(N=d.ErrorCode.NetworkError,s.get("Error_Network_Text")):M==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?O.code=="404"?(N=d.ErrorCode.NotFoundSourceURL,j=s.get("Error_Not_Found"),Y=s.get("Tip_Err_Not_found")):O.code=="403"?(N=d.ErrorCode.AuthKeyExpired,j=s.get("Error_AuthKey_Text"),V=!0):(N=d.ErrorCode.NetworkError,j=s.get("Error_Network_Text")):M==flvjs.ErrorDetails.NETWORK_TIMEOUT?(N=d.ErrorCode.LoadingTimeout,j=s.get("Error_Waiting_Timeout_Text")):M==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||M==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(N=d.ErrorCode.FormatNotSupport,j=s.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",V=!0):M===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(Q=C.tag.error)&&(N=d.VideoErrorCode[Q.code],j=Q.code+" || "+Q.message),W=function(){var H;setTimeout(function(){C.trigger(a.Private.Play_Btn_Hide)}),C.checkOnline()&&(H={mediaId:C._options&&C._options.vid?C._options.vid:"",error_code:N,error_msg:j,diagnosis_info:Y},C.logError(H),H.display_msg=j,u.cityBrain&&(C.flv=null),C.trigger(a.Player.Error,H))},C._options&&C._options.isLive&&!V?(B=C._options).liveRetry>C._liveRetryCount?(C._liveRetryCount==0&&C.trigger(a.Player.OnM3u8Retry),I=B.liveRetryInterval+B.liveRetryStep*C._liveRetryCount,C._liveRetryCount++,setTimeout(function(){C._isError||C._liveRetryTimer||C._loadByUrlInner(B.source)},1e3*I)):(C.trigger(a.Player.LiveStreamStop),W()):M===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&O.code===11&&C.getCurrentTime()<C.getDuration()?(C._flv.unload(),C._flv.load(),C._flv.detachMediaElement(),C._flv.attachMediaElement(C.tag)):V?(C._flv.unload(),W()):C._reloadForVod()||W())})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/data":32,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70}],105:[function(e,t,x){var g=e("../base/player"),u=e("./flvinjector"),d=g.extend({init:function(h,y){u.inject(this,d,g,y,function(o){}),y._native=!1,g.call(this,h,y)}});t.exports=d},{"../base/player":93,"./flvinjector":104}],106:[function(e,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(E){for(var _=1;_<arguments.length;_++){var P,R=arguments[_];for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&(E[P]=R[P])}return E}).apply(this,arguments)}var u,d=e("../../lib/object"),h=e("../../lib/io"),y=e("../../config"),o=e("../../lib/constants"),l=e("../../lib/util"),s=e("../../lib/playerutil"),a=e("../../lib/ua"),f=e("../../lang/index"),T=e("../base/event/eventtype"),m="hlsinjector.js";function v(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function S(E){this.trigger(T.Private.Timeline,{name:E,ts:performance.now()})}function w(E,_){return _<E.maxNumRetry}t.exports.inject=function(E,_,P,R,A,C){E._hls2=!1;var L,V=R.source,I=R.useHlsPluginForSafari,M=R.useHlsPlugOnMobile,O=R.optionFormat;function N(j,Y){Y.frag.level===this.currentLevel&&(this.off(u.Events.FRAG_BUFFERED,N),this.media.currentTime=this.media.currentTime+.01)}((A||"").length||C||(R=V,C=I,I=M,M=O,!E._hls&&s.isHls(R,M)&&(!s.canPlayHls()||s.isSafariUsedHlsPlugin(C)||I&&s.isUsedHlsPluginOnMobile())))&&(E._Type=_,E._superType=P,E._superPt=P.prototype,E._disposed=!1,_.prototype._checkHlsReady=function(){if(this._hls==null)throw new Error("please invoke this method after ready event")},E._isHls=!0,E._hls=null,E._isLoadedHls=!1,E._stopLoadAsPaused=!0,E._yekced_saved=A,_.prototype.play=function(j){return this.traceLog(m,"play::"+j),j&&this.trigger(T.Private.ManualPlay),this._checkHlsReady(),this._isManualPlay=j||!1,this.trigger(T.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(j=this.getCurrentTime(),this._hls.startLoad(j)),this},_.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._hls.startLoad(0),this.tag.play(),this},_.prototype.pause=function(j){return this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),this._isManualPause=j||!1,this},_.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},_.prototype.seek=function(j){this._checkHlsReady();try{this._superPt.seek.call(this,j),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(j)}catch(Y){console.log(Y)}return this},_.prototype.getProgramDateTime=function(){if(this._checkHlsReady(),this._hls.currentLevel==-1)return"";var j=this._hls.currentLevel,j=this._hls.levels[j].details;return j&&(j=j.programDateTime,console.log("ProgramDateTime="+j),j)?new Date(j).valueOf():0},_.prototype.getCurrentPDT=function(){var j,Y;return this._checkHlsReady(),this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(j=(Y=this._hls.streamController.fragPlaying||{}).pdt)?(Y=1e3*Y.startPTS,j+(1e3*this.getCurrentTime()-Y)):0},_.prototype._switchLevel=function(j){this.traceLog(m,"switchLevel::"+j);var Y=this.getCurrentTime(),B=!this._qualityService.levels.length&&1<this._urls.length,W=(B&&(this.pause(),this._hls.stopLoad(),this._hls.detachMedia(),this._hls.destroy()),this.trigger(T.Player.LevelSwitch),this._hls.levels),D=!0;B&&this._loadByUrlInner(j,Y,D,!0);for(var X=0;X<W.length;X++)if(W[X].url==j||W[X].url[0]==j){D=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=X,console.log("Seamlessly set nextLevel to",X)):(this._hls.on(u.Events.FRAG_BUFFERED,N),this._hls.currentLevel=X,console.log("Immediately set currentLevel to",X));break}D&&(this._hls.on(u.Events.FRAG_BUFFERED,N),this._hls.currentLevel=-1),this._switchedLevel=!0;var Q=this;setTimeout(function(){Q.trigger(T.Player.LevelSwitched),this._switchedLevel=!1},1e3)},_.prototype._getHlsVersion=function(j){this._options.useHls2===!0?(this._hls2=!0,j()):this._options.useHls2===!1&&j()},_.prototype.initPlay=function(j){var Y,B;function W(D,X){if(!D._disposed){if(D._antiRecord&&(console.log("Manual check before load source"),D._antiRecord.check()))return;var Q,H,F=!D._hls,z=(D._destroyHls(),{xhrSetup:function(ie,he){ie.withCredentials=D._options.withCredentials||!1}});for(H in D._hls2||(Q=D._options.loadingTimeOut||D._options.hlsLoadingTimeOut)&&(z.manifestLoadingTimeOut=Q,z.levelLoadingTimeOut=Q,z.fragLoadingTimeOut=Q),D._hls2&&(z.manifestLoadPolicy=g({},u.DefaultConfig.manifestLoadPolicy),z.playlistLoadPolicy=g({},u.DefaultConfig.playlistLoadPolicy),z.fragLoadPolicy=g({},u.DefaultConfig.fragLoadPolicy),Q=D._options.isLive?D._options.liveRetry:D._options.vodRetry,z.manifestLoadPolicy.default.errorRetry.maxNumRetry=Q,D._options.isLive&&(z.manifestLoadPolicy.default.errorRetry.shouldRetry=w),z.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=Q,z.playlistLoadPolicy.default.errorRetry.maxNumRetry=Q,D._options.isLive&&(z.playlistLoadPolicy.default.errorRetry.shouldRetry=w),z.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=Q,z.fragLoadPolicy.default.maxLoadTimeMs=2e4,z.fragLoadPolicy.default.errorRetry.shouldRetry=w,(Q=D._options.hlsOption||{}).manifestLoadPolicy&&(z.manifestLoadPolicy=d.deepMerge(z.manifestLoadPolicy,Q.manifestLoadPolicy),delete Q.manifestLoadPolicy),Q.playlistLoadPolicy&&(z.playlistLoadPolicy=d.deepMerge(z.playlistLoadPolicy,Q.playlistLoadPolicy),delete Q.playlistLoadPolicy),Q.fragLoadPolicy&&(z.fragLoadPolicy=d.deepMerge(z.fragLoadPolicy,Q.fragLoadPolicy),delete Q.fragLoadPolicy),D._options.isLive)&&!a.IS_IE11&&(z.backBufferLength=12,z.liveDurationInfinity=!0),D._options.isLive&&(D._options.hlsFrameChasing&&(z.hlsFrameChasing=D._options.hlsFrameChasing),D._options.chasingFirstParagraph&&(z.chasingFirstParagraph=D._options.chasingFirstParagraph),D._options.chasingSecondParagraph&&(z.chasingSecondParagraph=D._options.chasingSecondParagraph),D._options.chasingFirstSpeed&&(z.chasingFirstSpeed=D._options.chasingFirstSpeed),D._options.chasingSecondSpeed)&&(z.chasingSecondSpeed=D._options.chasingSecondSpeed),D._options.defaultBandwidth&&(z.defaultBandwidth=D._options.defaultBandwidth),D._options.hlsBandWidthUpCacheTime&&(z.abrBandWidthUpCacheTime=D._options.hlsBandWidthUpCacheTime),D._options.seamlessHandover&&(z.seamlessHandover=D._options.seamlessHandover),D._options.liveSyncDurationCount&&(z.liveSyncDurationCount=D._options.liveSyncDurationCount),D._options.nudgeMaxRetry&&(z.nudgeMaxRetry=D._options.nudgeMaxRetry),D._options.maxMaxBufferLength&&(z.maxMaxBufferLength=D._options.maxMaxBufferLength),D._options.maxBufferSize&&(z.maxBufferSize=D._options.maxBufferSize),D._options.fragLoadingRetryDelay&&(z.fragLoadingRetryDelay=D._options.fragLoadingRetryDelay),D._options.maxBufferLength&&(z.maxBufferLength=D._options.maxBufferLength),D._options.accessKeyId&&(z.accessKeyId=D._options.accessKeyId),D._options.accessKeySecret&&(z.accessKeySecret=D._options.accessKeySecret),D._options.securityToken&&(z.securityToken=D._options.securityToken),D._options.app&&(z.app=D._options.app),D._options.stream&&(z.stream=D._options.stream),D._options.domain&&(z.domain=D._options.domain),D._options.regionId&&(z.regionId=D._options.regionId),D._yekced_saved&&(z._yekcedxx=D._yekced_saved,z._vpk=D._yekced_saved),z.enableWorker=D._options.enableWorker,z.debug=D._options.debug,D._stopLoadAsPaused=D._options.hlsOption.stopLoadAsPaused,D._options.hlsOption)z[H]=D._options.hlsOption[H];a.IS_IE11&&(z.enableWorker=!1),D._hls=new u(z),L(D,D._hls),D._loadSourced=!1,D._hls.attachMedia(D.tag),D._hls.on(u.Events.INIT_PTS_FOUND,function(ie,he){D._initPTS=he.initPTS}),D._hls.on(u.Events.FRAG_LOADING,function(){S.call(D,"frag_s")}),D._hls.on(u.Events.FRAG_LOADED,function(){S.call(D,"frag_f")}),D._hls.on(u.Events.FRAG_PARSED,function(){S.call(D,"frag_parsed")}),D._hls.on(u.Events.FRAG_PARSED,function(ie,Se){var le,Se=(Se==null?void 0:Se.frag)||{},_e=Se.elementaryStreams||{},_e="Frag(sn"+Se.sn+"): "+((le=Se.startPTS)==null?void 0:le.toFixed(3))+" -> "+((le=Se.endPTS)==null?void 0:le.toFixed(3))+"(v:"+((le=_e.video)==null||(le=le.startPTS)==null?void 0:le.toFixed(3))+"/"+((le=_e.video)==null||(le=le.endPTS)==null?void 0:le.toFixed(3))+";a:"+((le=_e.audio)==null||(le=le.startPTS)==null?void 0:le.toFixed(3))+"/"+((le=_e.audio)==null||(_e=le.endPTS)==null?void 0:_e.toFixed(3))+"); Duration: "+((le=Se.duration)==null?void 0:le.toFixed(3));D.trackLogFragBuffer&&(D.trackLogFragBuffer.push(_e),10<D.trackLogFragBuffer.length)&&D.trackLogFragBuffer.shift()}),D._hls.on(u.Events.FRAG_PARSING_USERDATA,function(ie,he){he&&he.dataContent&&he.dataContent.length?D.trigger(T.Private.SeiFrame,{dataContent:he.dataContent,pts:he.pts}):he.samples.forEach(function(le){D.trigger(T.Private.SeiFrame,{dataContent:le.userDataBytes,dataContentString:le.userData,pts:le.pts,uuid:le.uuid})})}),D._hls.on(u.Events.MEDIA_ATTACHED,function(){var ie;D._hls.on(u.Events.MANIFEST_PARSED,function(){D._initPlayBehavior(X||D._loadSourced)}),D._hls.on(u.Events.AUDIO_TRACKS_UPDATED,function(he,le){D.trigger(T.Player.AudioTrackUpdated,le)}),D._hls.on(u.Events.MANIFEST_LOADED,function(he,le){D.trigger(T.Player.LevelsLoaded,le)}),D._hls.on(u.Events.LEVEL_SWITCHED,function(he,le){if(D._qualityService){for(var Se=D._hls.levels[le.level].url,_e=D._qualityService.levels,me="",xe="",Z=0;Z<_e.length;Z++)if(_e[Z].Url==Se){xe=_e[Z].desc,me=_e[Z].bitrate;break}(xe||me)&&D.trigger(T.Private.QualityChange,{levelSwitch:!0,url:Se,bitrate:me,desc:xe})}}),D._hls.on(u.Events.AUDIO_TRACK_SWITCH,function(he,le){D.trigger(T.Player.AudioTrackSwitch,le),setTimeout(function(){D.trigger(T.Player.AudioTrackSwitched,le)},1e3)}),(D._options.autoplay||D._options.preload||X)&&(D._loadSourced=!0,D._levels&&1<D._levels.length?(D._hls.trigger(u.Events.MANIFEST_LOADING,{}),D._hls.trigger(u.Events.MANIFEST_LOADED,{levels:D._levels})):D._hls.loadSource(D._options.source||"__INVALID__")),F?(D._executeReadyCallback(),D._urls&&0<D._urls.length&&(D._currentPlayIndex=s.findSelectedStreamLevel(D._urls,D._options.defaultDefinition),ie=D._urls[D._currentPlayIndex],D._options.source=ie.Url,D.trigger(T.Private.SourceLoaded,ie))):D.trigger(T.Private.H5_Loading_Show)})}}this.trigger(T.Private.H5_Loading_Show),l.contentProtocolMixed(V,"",O)?((Y={mediaId:(Y=this.getOptions()||{}).vid||"",mediaAuth:Y.mediaAuth||"",error_code:o.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=f.get("Request_Block_Text"),this.trigger(T.Player.Error,Y)):(B=this)._isLoadedHls&&u!==void 0?W(this,j):(this.trigger(T.Private.H5_Loading_Show),this._getHlsVersion(function(D){var X=performance.now();(function(Q,H,F){var z="aliplayer-hls-min.js",ie=((H=H||{}).hls2&&(z="aliplayer-hls2-min.js"),""),ie=y.domain?"https://"+y.domain+y.path+y.h5Version+"/hls/"+z:"/build/hls/"+z,he=(H.assetPrefix&&(ie=H.assetPrefix+"/hls/"+z),S.call(this,"mod_hls_s"),this);h.loadJS(ie,function(){S.call(he,"mod_hls_f"),u=window.AliHls||window.Hls,Q.apply(he)},function(){F&&F()})}).call(B,function(){B.traceLog(m,"got js#"+parseInt(performance.now()-X)),B._isLoadedHls=!0,W(B,j)},{debug:B._options.debug,hls2:B._hls2,assetPrefix:B._options.assetPrefix},function(){var Q={mediaId:B._options.vid||"",mediaAuth:B._options.mediaAuth||"",error_code:o.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};B.trigger(T.Player.Error,Q)})}),this.on("error",v))},_.prototype._getbwEstimator=function(){var j,Y=NaN;return Y=this._hls?(j=this._hls.abrController._bwEstimator)?j.getEstimate():this._hls.bandwidthEstimate:Y},_.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]},_.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&(_.prototype.play=this._superPt.play,_.prototype.pause=this._superPt.pause,_.prototype.initPlay=this._superPt.initPlay,_.prototype.replay=this._superPt.replay,_.prototype.stop=this._superPt.stop,_.prototype.seek=this._superPt.seek))},L=function(j,Y){Y.on(u.Events.MANIFEST_LOADING,function(){S.call(j,"mani_s")}),Y.on(u.Events.MANIFEST_LOADED,function(){S.call(j,"mani_f")}),Y.on(u.Events.DEFAULT_BANDWIDTH,function(B,W){j.trigger(T.Player.DefaultBandWidth,{width:W.width,height:W.height,bitrate:W.bitrate})}),Y.on(u.Events.ERROR,function(B,W){var D="hlsjs-error::"+W.type+"#"+W.details+"#"+((D=W.networkDetails)==null?void 0:D.status)+"#"+W.reason+"#bw:"+(j._getbwEstimator()/8/1024).toFixed(2)+"KB";if(W.details==="manifestParsingError")try{D+="#"+W.networkDetails.getResponseHeader("Content-Type")+"#"+W.networkDetails.getResponseHeader("Content-Length")}catch{}else if(W.details==="fragLoadError"||W.details==="fragLoadTimeOut")D+="#"+W.frag.url+"#retry:"+((Se=W.errorAction)==null?void 0:Se.retryCount);else if(W.details==="internalException")try{D+="#"+W.event+"#"+((X=W.error)==null?void 0:X.message)+"#"+((H=W.error)==null?void 0:H.stack)}catch{}W.details!=="internalException"&&(D+="#"+W.error);try{D+="#"+(j==null||(F=j.trackLogFragBuffer)==null?void 0:F.toString())}catch{}if(j.traceLog(m,D),j._options&&W.details!=u.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&j._seeking!=1&&W.fatal!=0){let Z=function(){j._liveErrorHandle&&clearTimeout(j._liveErrorHandle),Y.stopLoad(),j.trigger(T.Player.LiveStreamStop),j._liveErrorHandle=setTimeout(_e,500)};var xe=Z;j._clearTimeout();var X,Q,H,F,z=o.ErrorCode.LoadedMetadata,ie=f.get("Error_Play_Text"),he=!1,le=null,Se=!1,_e=(W.details==u.ErrorDetails.MANIFEST_LOAD_ERROR||W.details==u.ErrorDetails.LEVEL_LOAD_ERROR?(he=!0,X=W.networkDetails,Q=Number(X.status),j.liveShiftSerivce&&j.liveShiftSerivce.isLiveShiftPlaying()&&Q===404?(z=o.ErrorCode.NotFoundSourceURL,ie=f.get("Error_Liveshift_M3U8_Not_Found_Text"),Se=!0):Q===404?(z=o.ErrorCode.NotFoundSourceURL,ie=f.get("Error_Not_Found"),le=f.get("Tip_Err_Not_found")):Q===403?(H=s.parseHttpHeaders(X)["x-tengine-error"])&&-1<o.RegionBlockMessages.indexOf(H)?(z=o.ErrorCode.RegionBlock,ie=f.get("Error_Region_Block_Text"),le=f.get("Tip_Err_Blocked")):(z=o.ErrorCode.AuthKeyExpired,ie=f.get("Error_AuthKey_Text")):ie=Q===0&&navigator.onLine?(z=o.ErrorCode.RequestDataError,ie+"，"+f.get("Maybe_Cors_Error")):f.get("Error_Load_M3U8_Failed_Text")):W.details==u.ErrorDetails.MANIFEST_LOAD_TIMEOUT||W.details==u.ErrorDetails.LEVEL_LOAD_TIMEOUT?(he=!0,ie=f.get("Error_Load_M3U8_Timeout_Text")):W.details==u.ErrorDetails.MANIFEST_PARSING_ERROR||W.details==u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(he=!0,ie=f.get("Error_M3U8_Decode_Text")):W.type==u.ErrorTypes.NETWORK_ERROR?(z=o.ErrorCode.NetworkError,ie=f.get("Error_Network_Text")):W.type!=u.ErrorTypes.MUX_ERROR&&W.type!=u.ErrorTypes.MEDIA_ERROR||(z=o.ErrorCode.PlayDataDecode,ie=f.get("Error_TX_Decode_Text")),ie=ie+"("+W.details+")",function(){var te;setTimeout(function(){j.trigger(T.Private.Play_Btn_Hide)}),j.checkOnline()&&(te={mediaId:(te=j.getOptions()||{}).vid||"",mediaAuth:te.mediaAuth||"",error_code:z,error_msg:W.details,diagnosis_info:le},j.logError(te),te.display_msg=ie,j.trigger(T.Player.Error,te))}),me=j._options;if(me.isLive&&Se)Z();else if(j._hls2){if(he&&me.isLive)if(me.hlsOption.progressive){if(me.liveRetry>j._liveRetryCount)return j._liveRetryCount==0&&j.trigger(T.Player.OnM3u8Retry),j.trigger(T.Private.H5_Loading_Show),j._hls.stopLoad(),j._liveRetryCount++,void setTimeout(function(){j.traceLog(m,"retry when live error in progressive mode#"+j._liveRetryCount),j._hls.loadSource(me.source)},1e3*j._liveRetryCount)}else((F=W.errorAction)==null?void 0:F.retryCount)===0&&j.trigger(T.Player.OnM3u8Retry);W.fatal&&Z()}else me.isLive?me.liveRetry>j._liveRetryCount?(j._liveRetryCount==0&&j.trigger(T.Player.OnM3u8Retry),D=me.liveRetryInterval+me.liveRetryStep*j._liveRetryCount,j._liveRetryCount++,j.trigger(T.Private.H5_Loading_Show),setTimeout(function(){he&&j._loadByUrlInner(j._options.source,0,!0)},1e3*D)):Z():(he&&-1<[403,404].indexOf(Q)||!j._reloadForVod())&&_e()}})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70}],107:[function(e,t,x){var g=e("../base/player"),u=e("./hlsinjector"),d=g.extend({init:function(h,y){y._native=!1,u.inject(this,d,g,y),g.call(this,h,y)}});t.exports=d},{"../base/player":93,"./hlsinjector":106}],108:[function(e,t,x){var g=["extraInfo"];function u(){return(u=Object.assign?Object.assign.bind():function(E){for(var _=1;_<arguments.length;_++){var P,R=arguments[_];for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&(E[P]=R[P])}return E}).apply(this,arguments)}var d=typeof Promise>"u"?e("es6-promise").Promise:Promise,h=e("../../lib/io"),y=e("../../config"),o=e("../../lib/constants"),l=e("../../lang/index"),s=e("../base/event/eventtype"),a=e("../../lib/ua"),f=e("../base/event/eventtype"),T=e("../../lib/playerutil"),m="rtsinjector.js";function v(E){var _,P,R,A,C=this._options;C.rtsFallback&&window.Aliplayer?((_=C.rtsFallbackSource)||((P=String(C.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(P)&&(console.warn("invalid rtsFallbackType:",C.rtsFallbackType,", will use flv -> hls as fallback"),P=""),P=P||(T.isSupportFlv()?"FLV":"HLS"),R=C.source,A=!R.includes("@subvideo=no"),R=!R.includes("@subaudio=no"),R=(A={enableVideo:A,enableAudio:R}).enableVideo,A=A.enableAudio,P==="FLV"?(C.flvOption=C.flvOption||{},A||(C.flvOption.hasAudio=!1),R||(C.flvOption.hasVideo=!1)):P!=="HLS"||A||(C.mute=!0),_=function(O,I){var I=I==="FLV"?"flv":"m3u8",M=window.location.protocol,M=(-1<["http:","https:"].indexOf(M)?M:"https:")+"//",O=O.replace("artc://",M).replace("?","."+I+"?").replace("@subvideo=no","").replace("@subaudio=no","");return O.includes("?")||(O+="."+I),O.includes("auth_key")&&(O+="&rts_degrade=on"),O}(C.source,P)),this.trigger(s.Player.RtsFallback,{reason:E,fallbackUrl:_}),this.loadByUrl(_)):(this.trigger(s.Player.Error,E),this.logError(E))}function S(E){var _=this,P=(this.trigger(s.Private.H5_Loading_Show),this.trigger(s.Private.Play_Btn_Hide),this._options),R=new w(_,E);return _._rts.subscribe(P.source,u({retryTimes:P.rtsFallback?1:void 0,mediaTimeout:P.rtsLoadDataTimeout},P.rtsOption||{})).then(function(A){return R.preProcess(),_.tag.srcObject=null,A.play(_.tag),!0}).catch(function(A){return _.traceLog(m,"subError::"+JSON.stringify(A)),!1})}t.exports.inject=function(E,_,P,R,A,C){E._Type=_,E._superType=P,E._superPt=P.prototype,E._disposed=!1,_.prototype._checkRtsReady=function(){if(this._rts==null)throw new Error("please invoke this method after ready event")},E._isRts=!0,E._rts=null,E._isLoadedRts=!1,E.bind_rtsErrorEventHandler=null,E.bind_rtsReconnectEventHandler=null,_.prototype.play=function(L){this.traceLog(m,"play::"+L),L&&this.trigger(s.Private.ManualPlay),this._checkRtsReady(),this._isManualPlay=L||!1;var V=this;if(this.paused())return V.trigger(s.Private.Cover_Hide),V.trigger(s.Private.Play_Btn_Hide),S.call(V).then(function(I){I&&V._startPlay()}),this},_.prototype.seek=function(L){},_.prototype.setSpeed=function(L){},_.prototype.pause=function(L){return this._checkRtsReady(),this._superPt.pause.call(this,!0),this},_.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},_.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts(),this._superPt)},_.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},_.prototype.initPlay=function(L){var V,I=this;function M(O,N){var j;O._disposed||(j=!O._rts,O._destroyRts(),O._rts=new AliRTS.createClient({customReporter:function(Y){if(Number(Y.msgid)===126){var B={};try{B=JSON.parse(Y.args)}catch{B={}}B.tcid&&O._rts&&(O._rts.traceid=B.tcid,O.traceLog(m,"tcid::"+B.tcid),O.trigger(s.Player.RtsTraceId,{traceId:B.tcid,source:O._options.source}))}}}),O._checkRtsSupport(function(Y){(function(B){var W=this._rtsErrorEventHandler.bind(this),W=(this.bind_rtsErrorEventHandler=W,B.on("onError",W),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=W,B.on("reconnect",W)}).call(O,O._rts),O._options.autoplay?S.call(O).then(function(B){B&&O._initPlayBehavior(N)}):O._initPlayBehavior(N),j&&O._executeReadyCallback()},function(Y){console.log("[RTS isSupport error]",Y);var B=null,W=null;switch(Number(Y.errorCode)){case 10110:B=o.ErrorCode.RtsNotSupportWebRtc,W=l.get("Rts_Err_Not_Support_Webrtc");break;case 10111:B=o.ErrorCode.RtsBrowserNotSupport,W=l.get("Rts_Err_Browser_Not_Support");break;case 10112:B=o.ErrorCode.RtsBrowserVersionTooLow,W=l.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:B=o.ErrorCode.RtsNotSupportH264,W=l.get("Rts_Err_Not_Support_H264");break;case 10114:B=o.ErrorCode.RtsCreateOfferError,W=l.get("Rts_Err_Create_Offer_Error")}return v.call(O,{error_code:B,error_msg:W}),!1}))}this._isLoadedRts?M(this,L):(this.trigger(s.Private.H5_Loading_Show),V=performance.now(),(function(O,N,j){var B="",Y=this._options,B="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(Y.rtsVersion||y.rtsVersion)+"/aliyun-rts-sdk.js",W=(Y.assetPrefix&&(B=Y.assetPrefix+"/rts/aliyun-rts-sdk.js"),Y.rtsSdkUrl&&(B=Y.rtsSdkUrl),this);h.loadJS(B,function(){O.apply(W)},function(){j&&j()})}).call(I,function(){this.traceLog(m,"got js#"+parseInt(performance.now()-V)),this._isLoadedRts=!0,M(this,L)},this._options.debug,function(){var O={error_code:o.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};I.trigger(s.Player.Error,O)}))},_.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?d.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(M){var V=M[0],I=M[1],M=M[2];return{rtt:V.rtt,bytesReceived:V.bytesReceived,framesDecoded:I.framesDecoded,packetsLost:(I.packetsLost||0)+(M.packetsLost||0),packetsReceived:(I.packetsReceived||0)+(M.packetsReceived||0),timestamp:V.timestamp||Date.now()}}).catch(function(L){return console.log("ERR in RTS getstats: ",L),{}}):d.resolve()},_.prototype._checkRtsSupport=function(L,V){this._options.skipRtsSupportCheck?L():this._rts.isSupport({isReceiveVideo:!0}).then(L).catch(V)},_.prototype._rtsErrorEventHandler=function(L){console.log("RTS Error:",L),L.extraInfo;var V=function(W,D){if(W==null)return{};for(var X,Q={},H=Object.keys(W),F=0;F<H.length;F++)X=H[F],0<=D.indexOf(X)||(Q[X]=W[X]);return Q}(L,g),I=(this.traceLog(m,"rtsError::"+JSON.stringify(V)),null),M=null,O=null;switch(Number(L.errorCode)){case 10201:return;case 10101:I=o.ErrorCode.RtsSignalError,M=l.get("Rts_Err_Http_Signal_Error");break;case 10114:I=o.ErrorCode.RtsCreateOfferError,M=l.get("Rts_Err_Create_Offer_Error");break;case 10202:I=o.ErrorCode.RtsPlayUrlError,M=l.get("Rts_Err_Play_Url_Error");break;case 10203:I=o.ErrorCode.RtsSubscribeNonthing,M=l.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var N=(N=L.extraInfo)==null?void 0:N.response;if((N==null?void 0:N.status)===403){var j=N.headers["x-tengine-error"];if(j&&-1<o.RegionBlockMessages.indexOf(j)){I=o.ErrorCode.RegionBlock,M=l.get("Error_Region_Block_Text"),O=l.get("Tip_Err_Blocked");break}I=o.ErrorCode.AuthKeyExpired,M=l.get("Error_AuthKey_Text")}else O=(N==null?void 0:N.status)===404?(I=o.ErrorCode.NotFoundSourceURL,M=l.get("Error_Not_Found"),l.get("Tip_Err_Not_found")):(I=o.ErrorCode.RtsHttpRequestFaild,M=l.get("Rts_Err_Http_Request_Failed"),l.get("Tip_Err_Rts_Http_Failed"));break;case 10206:I=o.ErrorCode.RtsHttpAnswerFaild,M=l.get("Rts_Err_Http_Answer_Failed");break;case 10207:I=o.ErrorCode.RtsPlayFailedError;try{var Y,B=(Y=L.message.match(/after (\d+) ms/))==null?void 0:Y[1]}catch{}M=l.get("Rts_Err_Play_Failed")+", "+(B?B*L.extraInfo.retryTimes/1e3+l.get("Rts_Err_No_Data_For"):L.message);break;case 12e3:I=o.ErrorCode.RtsPeerConnectionUnknown,M=l.get("Rts_Err_PeerConnection_Unknown")}V={error_code:I,error_msg:M,diagnosis_info:O,tcid:this._rts.traceid},(function(W){var D=this;D.pause(),setTimeout(function(){D.trigger(s.Private.Play_Btn_Hide)}),D.checkOnline()&&v.call(this,W)}).call(this,V)},_.prototype._rtsReconnectEventHandler=function(L){var V=this;this.traceLog(m,"rts auto reconnect::"+L.retryTimes+"#"+JSON.stringify(L.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(s.Private.H5_Loading_Show),this.trigger(s.Private.Play_Btn_Hide),this._options.autoplay&&this.one(f.Player.AutoPlayPrevented,function(){V.trigger(s.Private.Play_Btn_Hide),V.trigger(s.Private.H5_Loading_Show)}),L.retryTimes===1&&this.trigger(s.Player.OnM3u8Retry),this.trigger(s.Private.Retry,{type:"rts",source:this._options.source})}};var w=function(){function E(_,P){(this.isRetry=P)&&(this.isApple=a.IS_IOS||a.IS_SAFARI,this.player=_)}return E.prototype.preProcess=function(){var _,P,R;this.isRetry&&this.isApple&&(_=this.player.getVolume(),P=this.player.muted(),_)&&!P&&((R=this.player.tag).volume=0,this.player.one("canplay",function(){R.volume=_}))},E}()},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../base/event/eventtype":70,"es6-promise":8}],109:[function(e,t,x){var g=e("../base/player"),u=e("./rtsinjector"),d=g.extend({init:function(h,y){y.isLive&&(y._native=!1,u.inject(this,d,g,y),g.call(this,h,y))}});t.exports=d},{"../base/player":93,"./rtsinjector":108}],110:[function(u,t,x){var g=u("../../lib/constants"),u=u("../../lib/oo").extend({init:function(d){this.player=d,this.tickhandle=null}});u.prototype.tick=function(d,h){var y=this;this.tickhandle=setTimeout(function(){y.player&&y.player.trigger(g.AuthKeyExpiredEvent),h&&h()},1e3*d)},u.prototype.clearTick=function(d){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=u},{"../../lib/constants":30,"../../lib/oo":45}],111:[function(e,t,x){function g(w,E,_){var R=y.randomUUID(),P="https://mts."+w.domainRegion+".aliyuncs.com/?",R={AccessKeyId:w.accessId,Action:"GetLicense",MediaId:w.vid,LicenseUrl:P,data:w.data,SecurityToken:w.stsToken,Format:"JSON",Type:w.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:R};w.header&&(R.Header=w.header),P+="Signature="+y.AliyunEncodeURI(y.makeChangeSiga(R,w.accessSecret,"POST")),w=y.makeUTF8sort(R,"=","&"),u.post(P,w,function(A){A?(A=JSON.parse(A),E&&(A=A.License,E(A))):_&&_(o.createError("MPS获取License失败"))},function(A){if(_){var C={Code:"",Message:a.get("Error_MTS_Fetch_Urls_Text")};try{C=JSON.parse(A)}catch{}_({Code:h.ErrorCode.ServerAPIError,Message:C.Code+"|"+C.Message,sri:C.RequestId||""})}})}var u=e("../../lib/io"),d=(e("../../lib/ua"),e("../../lib/bufferbase64")),h=e("../../lib/constants"),y=e("./signature"),o=e("./util"),l=e("../../lib/url"),s=e("../../lib/playerutil"),a=e("../../lang/index"),f=e("../base/event/eventtype");function T(w){window.console.error("The license request failed.")}function m(w){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",w)}function v(w){window.console.log("Decryption key was added to session.")}function S(w,E,_){_.addEventListener(w,function(){E(arguments[0])},!1)}t.exports.requestLicenseKey=function(w){var E=w;return E._options.vid&&(E.__vid=E._options.vid),function(_,P){var R,A,C=E._options,L=E._getDRMEncryptItem();L&&(R={vid:E.__vid,accessId:C.accId,accessSecret:C.accSecret,stsToken:C.stsToken,domainRegion:C.domainRegion,authInfo:C.authInfo,encryptionType:L.encryptionType},L.encryptionType==h.EncryptionType.Widevine?R.data=d.encode(_.message):L.encryptionType==h.EncryptionType.PlayReady&&(C=d.unpackPlayReady(_.message),R.data=C.changange,C.header)&&(R.header=JSON.stringify(C.header)),console.log(R.data),_=E.__licenseKeys,A=E.__vid+L.Url,_&&_[A],g(R,function(V){E.__licenseKeys||(E.__licenseKeys={}),10<R.data.length&&(E.__licenseKeys[A]=V),V=d.decode(V),P(V)},function(V){V={mediaId:E.__vid,error_code:V.Code,error_msg:V.Message},E.logError(V),E.trigger("error",V)}))}},t.exports.loadCertificate=function(V,L){var _,P,R,A=new XMLHttpRequest,C=(A.addEventListener("load",(function(I,N){var O,N=N.target;if(N.status!==200){var Y=h.ErrorCode.DrmLicenseRequestFailed,j=a.get("Error_Drm_License_Request_Failed"),Y={mediaId:this._options.vid||"",error_code:Y,error_msg:N.response};player.logError(Y),Y.display_msg=j,player.trigger(f.Player.Error,Y)}else{try{O=this._options.isLive?JSON.parse(N.response).Response.B64ServCert:JSON.parse(JSON.parse(N.response).DRMCertInfo).b64ServCert}catch(B){console.log(B)}j=y.base64DecodeUint8Array(O),Y=(function(B,X){var D=X.target,X=X.initData,Q=y.arrayToString(X).split("skd://")[1].split("?")[0],H=y.stringToArray(Q);if(X=function(_e,z,ie){typeof z=="string"&&(z=stringToArray(z));var he=0,le=new ArrayBuffer(_e.byteLength+4+z.byteLength+4+ie.byteLength),Se=new DataView(le),_e=(new Uint8Array(le,0,_e.byteLength).set(_e),he+=_e.byteLength,Se.setUint32(he,z.byteLength,!0),he+=4,new Uint16Array(le,he,z.length));return _e.set(z),he+=_e.byteLength,Se.setUint32(he,ie.byteLength,!0),he+=4,new Uint8Array(le,he,ie.byteLength).set(ie),new Uint8Array(le,0,le.byteLength)}(X,H,B),D.webkitKeys||(function(){{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}}(),D.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!D.webkitKeys)throw"Could not create MediaKeys";if(H=D.webkitKeys.createSession("video/mp4",X),!H)throw"Could not create key session";H.contentId=Q,S("webkitkeymessage",(function(le){var z=this,ie=le.target,xe=le.message,he=new XMLHttpRequest,le=(le.sessionId,he.responseType="text",he.session=ie,he.addEventListener("load",(function(te){te=te.target,K=this._options.isLive?JSON.parse(te.response).Response.B64License:JSON.parse(JSON.parse(te.response).License).b64License;var K=y.base64DecodeUint8Array(K),K=y.Uint8ArrayToString(K);K.substr(0,5)==="<ckc>"&&K.substr(-6)==="</ckc>"&&(K=K.slice(5,-6)),K=y.base64DecodeUint8Array(K),te.session.update(K)}).bind(this),!1),he.addEventListener("error",T,!1),btoa("spc="+y.base64EncodeUint8Array(xe)+"&assetId="+encodeURIComponent(ie.contentId))),Se={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:y.ISODateString(new Date),SignatureNonce:y.randomUUID(),AccessKeyId:z._options.accessKeyId,SecurityToken:z._options.securityToken,CertId:z._options.certId};z._options.isLive?(Se.RegionId=z._options.region,Se.Action="DescribeDRMLicense",Se.Version="2016-11-01",Se.CdmData=le,Se.Type="fairplay",Se.Domain=l.parseUrl(z._options.source).hostname):(Se.region=z._options.region,Se.Action="GetDRMLicense",Se.Version="2017-03-21",Se.VideoId=z._options.vid,Se.CDMData=le,Se.DRMType="FairPlay");var _e,me,xe="Signature="+y.AliyunEncodeURI(y.makeChangeSiga(Se,z._options.accessKeySecret,"POST"));ie=z._options.isLive?"https://"+s.getLiveHostByRegion(z._options.region)+"/?"+xe:"https://vod."+z._options.region+".aliyuncs.com/?"+xe;for(me in he.open("POST",ie,!0),he.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Se){var Z;Se.hasOwnProperty(me)&&(Z=Se[me],_e=_e?_e+"&"+y.AliyunEncodeURI(me)+"="+y.AliyunEncodeURI(Z):y.AliyunEncodeURI(me)+"="+y.AliyunEncodeURI(Z))}he.send(_e)}).bind(this),H),S("webkitkeyadded",v,H),S("webkitkeyerror",m,H)}).bind(this,j),N=(this._fairPlayHandlers.onNeedKey=Y,(function(B){window.console.error("A video playback error occurred")}).bind(this)),this._fairPlayHandlers.onError=N,this.tag.addEventListener("webkitneedkey",Y,!1),this.tag.addEventListener("error",N,!1),this.tag.src=this._options.source}I&&I()}).bind(V,L),!1),A.addEventListener("error",(function(I){window.console.error("Failed to retrieve the server certificate.")}).bind(V),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:y.ISODateString(new Date),SignatureNonce:y.randomUUID(),AccessKeyId:V._options.accessKeyId,SecurityToken:V._options.securityToken,CertId:V._options.certId}),L=(V._options.isLive?(C.RegionId=V._options.region,C.Action="DescribeDRMCertificate",C.Version="2016-11-01"):(C.region=V._options.region,C.Action="GetDRMCertInfo",C.Version="2017-03-21",C.VideoId=V._options.vid),"Signature="+y.AliyunEncodeURI(y.makeChangeSiga(C,V._options.accessKeySecret,"POST"))),V=V._options.isLive?"https://"+s.getLiveHostByRegion(V._options.region)+"/?"+L:"https://vod."+V._options.region+".aliyuncs.com/?"+L;for(_ in A.open("POST",V,!0),A.setRequestHeader("Content-type","application/x-www-form-urlencoded"),C)C.hasOwnProperty(_)&&(P=C[_],R=R?R+"&"+y.AliyunEncodeURI(_)+"="+y.AliyunEncodeURI(P):y.AliyunEncodeURI(_)+"="+y.AliyunEncodeURI(P),console.log(P));A.send(R)},t.exports.getRequestUrl=function(_,E){var _={AccessKeyId:E._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:y.ISODateString(new Date),SignatureNonce:y.randomUUID(),SecurityToken:E._options.securityToken,RegionId:E._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:_,Domain:l.parseUrl(E._options.source).hostname},P=(E._options.widevineCertId&&(_.CertId=E._options.widevineCertId),"Signature="+y.AliyunEncodeURI(y.makeChangeSiga(_,E._options.accessKeySecret,"POST")));return{url:"https://"+s.getLiveHostByRegion(E._options.region)+"/?"+P,data:y.makeUTF8sort(_,"=","&"),jsonData:y.makeUTF8sort(_,"=","&","json")}},t.exports.postData=function(P,E){var _=y.randomUUID(),_={AccessKeyId:E._options.accessKeyId,VideoId:E._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:_,SecurityToken:E._options.securityToken,region:E._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:P},P=(E._options.widevineCertId&&(_.CertId=E._options.widevineCertId),"Signature="+y.AliyunEncodeURI(y.makeChangeSiga(_,E._options.accessKeySecret,"POST")));return{url:"https://vod."+E._options.region+".aliyuncs.com/?"+P,data:y.makeUTF8sort(_,"=","&"),jsonData:y.makeUTF8sort(_,"=","&","json")}},t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":25,"../../lib/bufferbase64":27,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/url":51,"../base/event/eventtype":70,"./signature":117,"./util":119}],112:[function(e,t,x){var g=e("../../lib/io"),u=e("../../lib/constants"),d=e("../../lib/data"),h=e("./util");t.exports.getDataByAuthInfo=function(y,o,l,s){y={playAuth:y.playAuth,requestId:y.requestId},g.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+function(a){return a.requestId=d.guid(),Object.keys(a).reduce(function(f,T){return f+(f?"&":"?")+T+"="+encodeURIComponent(a[T])},"")}(y),function(a){if(a)if(a=JSON.parse(a),a.httpStatusCode!==200)s&&s({Code:u.ErrorCode.ServerAPIError,Message:a.httpStatusCode+"|"+a.code,sri:a.requestId});else{for(var f=a.data.PlayInfoList,T=[],m=f.length-1;0<=m;--m)f[m].Definition==="AUTO"&&(T=[f.splice(m,1)[0]]);var v,S=null;(S=(S=T.length===0?h.objectPlayerMessageSort(f,o):h.objectPlayerMessageSort(T)).map(function(w){return w.format==="m3u8"&&(w.Url=w.Url+"&_ext=.m3u8"),w}))&&l&&(v=a.data.VideoBase||{},l({videoId:v.VideoId,userId:v.UserId,requestId:a.requestId,urls:S,encryptUrlArr:[],thumbnailUrl:"",coverUrl:v.CoverURL,playInfoAry:f,textTracks:a.data.SubtitlesList}))}else s&&s(h.createError("轻SaaS服务获取数据失败"))},function(a){a&&typeof a=="string"&&-1<a.indexOf("Invalid CORS request")?s&&s({Code:u.ErrorCode.ServerAPIError,Message:a}):s&&s(h.createError("轻SaaS服务获取数据失败"))})}},{"../../lib/constants":30,"../../lib/data":32,"../../lib/io":42,"./util":119}],113:[function(h,t,x){var g=h("./saasplayer"),u=h("./light"),d=h("../base/event/eventtype"),h=g.extend({init:function(y,o){g.call(this,y,o),this.service=u,this.loadByLightSaas()}});h.prototype.loadByLightSaas=function(y){var o=this._options,l={playAuth:o.mediaAuth,defaultDefinition:o.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:o.mediaAuth}}),this.loadData(l,y)},h.prototype.replayByMediaAuth=function(y){this.trigger(d.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(d.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=y,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},t.exports=h},{"../base/event/eventtype":70,"./light":112,"./saasplayer":116}],114:[function(e,t,x){var g=e("../../lib/io"),u=e("../../lib/constants"),d=e("./signature"),h=e("./util"),y=e("../../lang/index"),o=e("../../lib/ua"),l=function(a,f){for(var T="",m=(a.sort(function(_,P){return _=parseInt(_.bitrate),P=parseInt(P.bitrate),f=="desc"?P<_?-1:_<P?1:void 0:_<P?-1:P<_?1:void 0}),a.length),v=0;v<m;v++){var S=a[v],w=u.QualityLevels[S.definition],E="",E=w===void 0?S.bitrate:T==w?w+S.bitrate:w;S.desc=E,T=w}},s=function(a,f){for(var T="",m=(a.sort(function(_,P){return _=parseInt(_.width),P=parseInt(P.width),f=="desc"?P<_?-1:_<P?1:void 0:_<P?-1:P<_?1:void 0}),a.length),v=0;v<m;v++){var S=a[v],w=u.QualityLevels[S.definition],E="",E=w===void 0?"":T==w?w+S.height:w;S.desc=E,T=w}};t.exports.getDataByAuthInfo=function(S,f,T,m){d.returnUTCDate(),d.randomUUID();var v=d.randomUUID(),v={AccessKeyId:S.accessId,Action:"PlayInfo",MediaId:S.vid,Formats:S.format,AuthInfo:S.authInfo,AuthTimeout:S.authTimeout||u.AuthKeyExpired,IncludeSnapshotList:S.includeSnapshotList,Rand:S.rand,SecurityToken:S.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:o.IS_CHROME?"Chrome":o.IS_EDGE?"Edge":o.IS_IE11?"IE":o.IS_SAFARI?"Safari":o.IS_FIREFOX?"Firefox":"",SignatureNonce:v},v=(S.hlsUriToken&&(S.MtsHlsUriToken=S.hlsUriToken),S.playConfig&&(v.PlayConfig=JSON.stringify(S.playConfig)),d.makeUTF8sort(v,"=","&")+"&Signature="+d.AliyunEncodeURI(d.makeChangeSiga(v,S.accessSecret))),S="https://mts."+S.domainRegion+".aliyuncs.com/?"+v;g.get(S,function(w){var E,_,P;w?(E=(w=JSON.parse(w)).PlayInfoList.PlayInfo,_="",(P=w.SnapshotList?w.SnapshotList.Snapshot:[])&&0<P.length&&(_=P[0].Url),P=function(R,A){for(var C=[],L=[],V=[],I=[],M=R.length-1;0<=M;M--){var O=R[M];(O.format=="mp4"?L:O.format=="mp3"?V:O.format=="m3u8"?C:I).push(O)}return 0<V.length?(l(V,A),V):0<L.length?(s(L,A),L):0<C.length?(s(C,A),C):(s(I,A),I)}(E,f),T&&T({requestId:w.RequestId,urls:P,thumbnailUrl:_})):m&&m(h.createError("MPS获取取数失败"))},function(w){if(m){var E={Code:"",Message:y.get("Error_MTS_Fetch_Urls_Text")};try{E=JSON.parse(w)}catch{}m({Code:u.ErrorCode.ServerAPIError,Message:E.Code+"|"+E.Message,sri:E.RequestId||""})}})}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/ua":50,"./signature":117,"./util":119}],115:[function(d,t,x){var g=d("./saasplayer"),u=(d("../../lib/constants"),d("./mts")),d=g.extend({init:function(h,y){g.call(this,h,y),this.service=u,this.loadByMts()}});d.prototype.loadByMts=function(h){var y={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(y,h)},d.prototype.replayByVidAndAuthInfo=function(h,y,o,l,s,a){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(h,y,o,l,s,a)},d.prototype.reloadNewVideoInfo=function(h,y,o,l,s,a){if(this.trigger("error_hide"),this._options.source="",h&&(this._options.vid=h,this._options.accId=y,this._options.accessSecret=o,this._options.stsToken=l,this._options.domainRegion=a,this._options.authInfo=s),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("需要提供vid、accId、accessSecret、stsToken、domainRegion和authInfo参数");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:h}}),this.loadByMts(!0)},t.exports=d},{"../../lib/constants":30,"./mts":114,"./saasplayer":116}],116:[function(e,t,x){var g=e("../base/player"),u=e("../audio/audioplayer"),d=(e("../../lib/event"),e("../../lib/io")),h=e("../../lib/constants"),y=e("./signature"),o=e("./authkeyexpiredhandle"),l=e("../hls/hlsinjector"),s=e("../flv/flvinjector"),a=e("../drm/drminjector"),f=e("../sw/swinjector"),T=(e("../../lib/cookie"),e("../../lang/index")),m=e("../../lib/ua"),v=e("../../config"),S=e("../../lib/playerutil"),w=e("../base/event/eventtype"),E=e("../../protected/anti-injector-protected"),_=g.extend({init:function(A,C){m.IS_PC&&E(C,this),this._authKeyExpiredHandle=new o(this),g.prototype._videoCreateEl||(g.prototype._videoCreateEl=g.prototype.createEl),C.format=="mp3"?(C.height="auto",C.mediaType="audio",g.prototype.createEl=u.prototype.createEl,u.call(this,A,C),_.prototype.play=g.prototype.play,_.prototype.pause=g.prototype.pause,_.prototype.initPlay=g.prototype.initPlay,_.prototype.replay=g.prototype.replay,_.prototype.stop=g.prototype.stop,_.prototype.seek=g.prototype.seek):(g.prototype.createEl=g.prototype._videoCreateEl,C._native=!1,g.call(this,A,C))}});function P(){var A,C=!1;return Number(this._options.encryptType)!==1?(A={error_code:h.ErrorCode.InvalidParameter,error_msg:T.get("Error_Not_Support_encrypt_Text")},this.logError(A),this.trigger("error",A),!0):C}function R(){var A=S.checkSecuritSupport();if(A)return this._mtsError_message(this,{Code:h.ErrorCode.EncrptyVideoNotSupport,Message:A,display_msg:A},""),!0}_.prototype.loadData=function(A,C){var L,V,I;this._options.encryptType!=1?this._loadData(A,C):(L="aliplayer-vod-min.js",V="",V=v.domain?"https://"+v.domain+v.path+v.h5Version+"/hls/"+L:"/build/hls/"+L,this.trigger(w.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),I=this,d.loadJS(V,function(){I.trigger(w.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),I._loadData(A,C)}))},_.prototype._loadData=function(A,C){var L,V=new Date().getTime(),I=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),A.format!=""&&A.format!="m3u8"||this._options.encryptType!=1?A.rand=y.randomUUID():(L=_rtsneg(I._vdnct6f===3?A.vid:void 0),A.rand=_dnaRekam(L,I._vdnct6f)),this._options.thumbnailUrl&&(A.thumbnailUrl=this._options.thumbnailUrl),this.trigger(w.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,A,this._options.qualitySort,function(M){if(I.trigger(w.Private.PlayInfoLoaded,M),M.userId&&(I._options.from=M.userId),M.videoId&&I._monitor&&I._monitor.updateLightSaasVideoId(M.videoId),M.textTracks&&M.textTracks.length&&(O=S.unqiueTextTracks(M.textTracks),I.trigger(w.Private.TextTrackFounded,{from:"saas",textTracks:O})),M.urls&&M.urls.length==0)I._mtsError_message(I,{Code:h.ErrorCode.URLsIsEmpty,Message:T.get("Error_Vod_URL_Is_Empty_Text")+(A.format?"(format:"+A.format+")":"")},"");else{I.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-V,mi:JSON.stringify(function(X){for(var Q=[],H=0;H<X.length;H++)Q.push({width:X[H].width,height:X[H].height,definition:X[H].definition,format:X[H].format,encryptionType:X[H].encryptionType,duration:X[H].duration});return Q}(M.urls))}),I._urls=M.urls,I._currentPlayIndex=S.findSelectedStreamLevel(I._urls,A.defaultDefinition);var O=(N=M.urls[I._currentPlayIndex]).Url;if(I._vodDuration=N.duration||0,I._options.source=O,I.encType="",I.trigger(w.Private.PREPARE,N.definition),I.UI.cover&&M.coverUrl&&!I._options.cover&&I.setCover(M.coverUrl),S.isHls(O))if(M&&M.playInfoAry&&0<M.playInfoAry.length&&M.playInfoAry[0].EncryptType=="Widevine-FairPlay")a.inject(I,_,g.prototype,I._options);else{if(M.encryptUrlArr&&0<M.encryptUrlArr.length){for(var N,j=[],Y=!1,B=0;B<M.encryptUrlArr.length;++B)if((N=M.encryptUrlArr[B]).encryptionType===h.EncryptionType.Private){if(P.call(I))return;if(Y||R.call(I))return void(Y=!0);var W=_yekced(L,N.rand,N.plaintext);j.push({url:N.Url,secData:W})}}else if(j="",N.encryptionType==h.EncryptionType.Private){if(P.call(I)||R.call(I))return;I.encType=N.encryptionType,j=_yekced(L,N.rand,N.plaintext)}var D=m.IS_IOS&&parseFloat(m.IOS_FULL_VERSION)<17.1;(j&&(I._options.useSW||D)?f:(I._hls&&(I._hls.destroy(),I._hls=null),l)).inject(I,_,g,I._options,j)}else S.isFlv(O)?s.inject(I,_,g,I._options):S.isDash(O)?(console.log("isDash"),a.inject(I,_,g,I._options)):I._player._executeReadyCallback();I._authKeyExpiredHandle.tick(h.AuthKeyRefreshExpired),I.trigger(w.Private.SourceLoaded,N),I.initPlay(C),I.trigger(w.Private.ChangeURL,{from:"saas"}),M.thumbnailUrl&&I._thumbnailService.get(M.thumbnailUrl),D=I._player._isFlv,O=-1<I._player.getOptions().source.indexOf("mp4"),I._player.encType==1||D||O||(m.IS_IOS||m.IS_MAC_SAFARI||m.IS_X5||m.IS_EDGE)&&(I._player._executeReadyCallback(),I._urls.length)&&I.trigger(w.Private.SourceLoaded,N)}},function(M){I._mtsError_message(I,M,"")})},_.prototype._changeStream=function(A,C){this._urls.length>A&&(this._loadByUrlInner(this._urls[A].Url,this.getCurrentTime(),!0),this._currentPlayIndex=A,this.trigger(w.Private.QualityChange,C||T.get("Quality_Change_Fail_Switch_Text")))},_.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},_.prototype._mtsError_message=function(A,C,L){A._serverRequestId=C.sri,A.trigger(w.Private.H5_Loading_Hide),C.Code=C.Code||C.code,C.Message=C.Message||C.message;var V=C.Code||"OTHER_ERR_CODE",I=C.Message||"OTHER_ERR_MSG",M=(h.ErrorCode.ServerAPIError,C.display_msg||""),O=(-1<I.indexOf("InvalidParameter.Rand")||-1<I.indexOf('"Rand" is not valid.')?(h.ErrorCode.EncrptyVideoNotSupport,M=T.get("Error_Encrypt_Fetch_Failed_Text")):-1<I.indexOf("SecurityToken.Expired")?(h.ErrorCode.AuthKeyExpired,M=T.get("Error_Playauth_Expired_Text")):-1<I.indexOf("InvalidVideo.NoneStream")?(h.ErrorCode.URLsIsEmpty,M=T.get("Error_Fetch_NotStream")+"("+A._options.format+"|"+A._options.definition+")"):-1<I.indexOf("DataNotFound")&&(h.ErrorCode.MediaNotFound,M=T.get("Error_Fetch_Media_Not_Found")),A._options.vid||""),O=(A._options.from,{mediaId:O,mediaAuth:A._options.mediaAuth||"",error_code:V,error_msg:I});C.sri&&(O.sri=C.sri),A.logError(O),O.display_msg=M&&M===I?M:(M||T.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+I,A.trigger("error",O),console.log("PrismPlayer Error: "+L+"! error_msg :"+I+";")},t.exports=_},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/cookie":31,"../../lib/event":35,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../protected/anti-injector-protected":134,"../audio/audioplayer":68,"../base/event/eventtype":70,"../base/player":93,"../drm/drminjector":101,"../flv/flvinjector":104,"../hls/hlsinjector":106,"../sw/swinjector":132,"./authkeyexpiredhandle":110,"./signature":117}],117:[function(e,t,x){var g=e("crypto-js/hmac-sha1"),u=e("crypto-js/enc-base64"),d=e("crypto-js/enc-utf8");t.exports.randomUUID=function(){for(var h=[],y="0123456789abcdef",o=0;o<36;o++)h[o]=y.substr(Math.floor(16*Math.random()),1);return h[14]="4",h[19]=y.substr(3&h[19]|8,1),h[8]=h[13]=h[18]=h[23]="-",h.join("")},t.exports.returnUTCDate=function(){var f=new Date,h=f.getUTCFullYear(),y=f.getUTCMonth(),o=f.getUTCDate(),l=f.getUTCHours(),s=f.getUTCMinutes(),a=f.getUTCSeconds(),f=f.getUTCMilliseconds();return Date.UTC(h,y,o,l,s,a,f)},t.exports.AliyunEncodeURI=function(h){return h=encodeURIComponent(h),h=(h=(h=h.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},t.exports.makesort=function(h,y,o){if(!h)throw new Error("PrismPlayer Error: vid should not be null!");var l=[];for(T in h)l.push(T);for(var s=l.sort(),a="",f=s.length,T=0;T<f;T++)a==""?a=s[T]+y+h[s[T]]:a+=o+s[T]+y+h[s[T]];return a},t.exports.makeUTF8sort=function(h,y,o){if(!h)throw new Error("PrismPlayer Error: vid should not be null!");var l=[];for(T in h)l.push(T);for(var s=l.sort(),a="",f=s.length,T=0;T<f;T++){var m=t.exports.AliyunEncodeURI(s[T]),v=t.exports.AliyunEncodeURI(h[s[T]]);a==""?a=m+y+v:a+=o+m+y+v}return a},t.exports.makeChangeSiga=function(h,y,o){if(h)return u.stringify(g((o=o||"GET")+"&"+t.exports.AliyunEncodeURI("/")+"&"+t.exports.AliyunEncodeURI(t.exports.makeUTF8sort(h,"=","&")),y+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},t.exports.ISODateString=function(h){function y(o){return o<10?"0"+o:o}return h.getUTCFullYear()+"-"+y(h.getUTCMonth()+1)+"-"+y(h.getUTCDate())+"T"+y(h.getUTCHours())+":"+y(h.getUTCMinutes())+":"+y(h.getUTCSeconds())+"Z"},t.exports.encPlayAuth=function(h){if(h=d.stringify(u.parse(h)))return JSON.parse(h);throw new Error("playuth参数解析为空")},t.exports.encRsa=function(){},t.exports.stringToArray=function(h){for(var y=new ArrayBuffer(2*h.length),o=new Uint16Array(y),l=0,s=h.length;l<s;l++)o[l]=h.charCodeAt(l);return o},t.exports.Uint8ArrayToString=function(h){for(var y="",o=0;o<h.length;o++)y+=String.fromCharCode(h[o]);return y},t.exports.arrayToString=function(h){return h=new Uint16Array(h.buffer),String.fromCharCode.apply(null,h)},t.exports.base64DecodeUint8Array=function(h){var y=window.atob(h),o=y.length,l=new Uint8Array(new ArrayBuffer(o));for(i=0;i<o;i++)l[i]=y.charCodeAt(i);return l},t.exports.base64EncodeUint8Array=function(h){for(var y,o,l,s,a,f,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="",v=0;v<h.length;)l=(y=h[v++])>>2,s=(3&y)<<4|(y=v<h.length?h[v++]:Number.NaN)>>4,a=(15&y)<<2|(o=v<h.length?h[v++]:Number.NaN)>>6,f=63&o,isNaN(y)?a=f=64:isNaN(o)&&(f=64),m+=T.charAt(l)+T.charAt(s)+T.charAt(a)+T.charAt(f);return m}},{"crypto-js/enc-base64":3,"crypto-js/enc-utf8":4,"crypto-js/hmac-sha1":5}],118:[function(e,t,x){var g=e("../../lib/io"),u=e("../../lib/constants"),d=e("./signature"),h=e("./util"),y=e("../../lang/index");t.exports.getPlayAuth=function(T,l,s,a){d.randomUUID();var f=d.randomUUID(),f={AccessKeyId:T.accessKeyId,Action:"GetVideoPlayAuth",VideoId:T.vid,AuthTimeout:u.AuthInfoExpired,SecurityToken:T.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:f},f=d.makeUTF8sort(f,"=","&")+"&Signature="+d.AliyunEncodeURI(d.makeChangeSiga(f,T.accessKeySecret)),T="https://vod."+T.region+".aliyuncs.com/?"+f;g.get(T,function(m){m?(m=JSON.parse(m),l&&l(m.PlayAuth)):s&&s(h.createError("获取视频播放凭证失败"))},function(m){if(s){var v={Code:"",Message:y.get("Fetch_Playauth_Error")};try{(v=JSON.parse(m)).Code}catch{}s({Code:u.ErrorCode.ServerAPIError,Message:v.Code+"|"+v.Message,sri:v.RequestId,display_msg:y.get("Fetch_Playauth_Error",a)})}})}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"./signature":117,"./util":119}],119:[function(e,t,x){var g=e("../../lib/constants");t.exports.createError=function(u,d){return{requestId:"",code:d||"",message:u}},t.exports.getItem=function(u){var d={};return d.width=u.Width,d.height=u.Height,d.definition=u.Definition,d.Url=u.PlayURL,d.format=u.Format,d.desc=g.QualityLevels[d.definition],d.encryptionType=g.VodEncryptionType[u.EncryptType],d.plaintext=u.Plaintext,d.rand=u.Rand,d.encrypt=u.Encrypt,d.duration=u.Duration,d.bitrate=u.Bitrate,d},t.exports.objectPlayerMessageSort=function(u,d){for(var h=[],y=[],o=[],l=[],s=u.length-1;0<=s;s--){var a=u[s],a=t.exports.getItem(a);(a.format=="mp4"?y:a.format=="mp3"?o:a.format=="m3u8"?h:l).push(a)}var f=[],f=0<o.length?o:0<y.length?y:0<h.length?h:l;return d=="asc"&&f.reverse(),f}},{"../../lib/constants":30}],120:[function(e,t,x){var g=e("../../lib/io"),u=e("../../lib/constants"),d=e("./signature"),h=e("./util"),y=e("../../config"),o=e("../../lang/index"),l=e("../base/event/eventtype"),s="saas/vod.js";t.exports.getDataByAuthInfo=function(a,f,T,m){d.randomUUID();var v=d.randomUUID(),v={AccessKeyId:a.accessId,Action:"GetPlayInfo",VideoId:a.vid,Formats:a.format,AuthTimeout:a.authTimeout||u.AuthKeyExpired,Rand:a.rand,SecurityToken:a.stsToken,StreamType:a.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:v,PlayerVersion:y.h5Version,Channel:"HTML5"},v=(a.definition==="AUTO"?v.ResultType="Multiple":a.definition&&(v.Definition=a.definition),a.authInfo&&(v.AuthInfo=a.authInfo),a.outputType&&(v.OutputType=a.outputType),a.playConfig&&(v.PlayConfig=JSON.stringify(a.playConfig)),a.reAuthInfo&&(v.ReAuthInfo=JSON.stringify(a.reAuthInfo)),d.makeUTF8sort(v,"=","&")+"&Signature="+d.AliyunEncodeURI(d.makeChangeSiga(v,a.accessSecret))),v="https://vod."+a.domainRegion+".aliyuncs.com/?"+v,S=(this.trigger(l.Private.Timeline,{name:"vod_s",ts:performance.now()}),this);g.get.call(this,v,function(w){if(S.trigger(l.Private.Timeline,{name:"vod_f",ts:performance.now()}),S.traceLog(s,"Vod request ok."+w),w){for(var w=JSON.parse(w),E="",_=w.VideoBase.ThumbnailList,P=(_&&_.Thumbnail&&0<_.Thumbnail.length?E=_.Thumbnail[0].URL:a.thumbnailUrl&&(E=String(a.thumbnailUrl)),w.PlayInfoList.PlayInfo),R=[],A=[],C=P.length-1;0<=C;--C)P[C].Definition==="AUTO"?(S.getOptions().isVBR=!0,R=[P.splice(C,1)[0]]):P[C].Encrypt===1&&A.push(P[C]);_=null,A=R.length===0?(_=h.objectPlayerMessageSort(P,f),[]):(_=h.objectPlayerMessageSort(R),h.objectPlayerMessageSort(A)),_&&T&&T({requestId:w.RequestId,urls:_,encryptUrlArr:A,thumbnailUrl:E,coverUrl:w.VideoBase.CoverURL,playInfoAry:P})}else m&&m(h.createError("点播服务获取数据失败"))},function(w){if(S.traceLog(s,"Vod request error::"+w),m){var E={Code:"",Message:o.get("Error_Vod_Fetch_Urls_Text")};try{E=JSON.parse(w)}catch{}m({Code:u.ErrorCode.ServerAPIError,Message:E.Code+"|"+E.Message,sri:E.RequestId||""})}})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../base/event/eventtype":70,"./signature":117,"./util":119}],121:[function(s,t,x){var g=s("./saasplayer"),u=s("../../lib/constants"),d=s("./vod"),h=s("./signature"),y=(s("./authkeyexpiredhandle"),s("./ststoken"),s("../../lib/io")),o=s("../../config"),l=s("../base/event/eventtype"),s=g.extend({init:function(a,f){g.call(this,a,f),this.service=d,this.loadByVod()}});s.prototype.loadByVod=function(a){var f,T,m;typeof _apesrap<"u"?this._loadByVod(a):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),f="aliplayer-vod-p-min.js",T="",T=o.domain?"https://"+o.domain+o.path+o.h5Version+"/hls/"+f:"/build/hls/"+f,this.trigger(l.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),m=this,y.loadJS(T,function(){m.trigger(l.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),m._loadByVod(a)}))},s.prototype._loadByVod=function(a){var f="",T="",m="",v="",S="";if(this._options.accessKeyId&&this._options.accessKeySecret)f=this._options.accessKeyId,T=this._options.accessKeySecret,m=this._options.securityToken,v=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var w=_apesrap(this._options.playauth,this._options.vid),E=(this._vdnct6f=w.v,w.value),_=h.encPlayAuth(E),f=_.AccessKeyId,T=_.AccessKeySecret,m=_.SecurityToken,v=_.Region,S=_.AuthInfo}catch(P){return console.log("e",P),w={Code:u.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth解析错误"},void this._mtsError_message(this,w,E)}this._options.from=_.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(f,T,m,v,S,a)},s.prototype.replayByVidAndPlayAuth=function(a,f){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(l.Private.UserTrackReset),this._options.source="",this._options.vid=a,this._options.playauth=f,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByVod(!0)},s.prototype.updateSourcesByVidAndPlayAuth=function(a,f){var T,m,v;typeof _apesrap<"u"?this._updateSourcesByVidAndPlayAuth(a,f):(T="aliplayer-vod-p-min.js",m="",m=o.domain?"https://"+o.domain+o.path+o.h5Version+"/hls/"+T:"/build/hls/"+T,v=this,y.loadJS(m,function(){v._updateSourcesByVidAndPlayAuth(a,f)}))},s.prototype._updateSourcesByVidAndPlayAuth=function(a,f){if(a!=this._options.vid)console.log("不能更新地址，vid和播放中的不一致");else{this._options.vid=a,this._options.playauth=f;try{var T=_apesrap(this._options.playauth,this._options.vid),m=(this._vdnct6f=T.v,T.value),v=h.encPlayAuth(m)}catch{return void console.log("playauth解析错误")}var f={vid:a,accessId:v.AccessKeyId,accessSecret:v.AccessKeySecret,stsToken:v.SecurityToken,domainRegion:v.Region,authInfo:v.AuthInfo,playDomain:v.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},S=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(f,this._options.qualitySort,function(E){S._serverRequestId=E.requestId,E.urls.length!=0&&(S._urls=E.urls),S._authKeyExpiredHandle.tick(u.AuthKeyRefreshExpired)},function(E){console.log(E)})}},s.prototype.reloaduserPlayInfoAndVidRequestMts=function(a,f){this.replayByVidAndPlayAuth(a,f,accessSecret)},s.prototype._loadByVodBySTS=function(a,f,T,m,v,S){a={vid:this._options.vid,accessId:a,accessSecret:f,stsToken:T,authInfo:v,domainRegion:m,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(a,S)},t.exports=s},{"../../config":14,"../../lib/constants":30,"../../lib/io":42,"../base/event/eventtype":70,"./authkeyexpiredhandle":110,"./saasplayer":116,"./signature":117,"./ststoken":118,"./vod":120}],122:[function(e,t,x){function g(d){this._player=d,this._video=d.tag;var h=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",d.on(u.Private.ChangeURL,function(){h._isCreated=!1,h._canPlayTriggered=!1,h._defaultTrack=""}),d.on(u.Player.CanPlay,function(){var y;h._player._drm||h._canPlayTriggered||((y=h._getTracks())&&(h._isCreated=!0,h._player._options.isVBR||h._hls||(d.trigger(u.Player.AudioTrackReady,y),h._notifyDefaultValue(y))),h._canPlayTriggered=!0)}),d.on(u.Player.AudioTrackUpdated,function(y){h._isCreated||(y=h._getTracks(y.paramData.audioTracks))&&(h._isCreated=!0,d.trigger(u.Player.AudioTrackReady,y),h._notifyDefaultValue(y))})}var u=e("../base/event/eventtype");g.prototype._notifyDefaultValue=function(d){!this._defaultTrack&&0<d.length&&(this._defaultTrack=d[0]),this._defaultTrack&&this._player.trigger(u.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},g.prototype.support=function(){return!!this._video.audioTracks},g.prototype._getTracks=function(d){if(!this.support()&&!d)return null;for(var h=[],y=(d=!this._video||!this._video.audioTracks||d&&d.length!=0?d:this._video.audioTracks)?d.length:0,o=0;o<y;o++){var l=d[o],s={value:l.id,text:l.label||l.name||l.language};(l.default||l.enabled)&&(this._defaultTrack=s),h.push(s)}return h},g.prototype.switch=function(d){if(this._player._hls)this._player._hls.audioTrack=+d;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(d);else for(var h=this._video.audioTracks?this._video.audioTracks.length:0,y=0;y<h;y++){var o=this._video.audioTracks[y];o.id==d?o.enabled=!0:o.enabled=!1}},g.prototype.dispose=function(){this._player=null},t.exports=g},{"../base/event/eventtype":70}],123:[function(e,t,x){function g(s){this._video=s.tag,this._player=s,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var a=this,f=(s.on(u.Player.LevelsLoaded,function(T){(h.IS_MAC_SAFARI||h.IS_IOS)&&(T&&T.paramData&&T.paramData.subtitles&&T.paramData.subtitles.length?a._storedTracks=T.paramData.subtitles||[]:a._resotreTracks())}),s.on(u.Private.SafariDrmLevelSwitch,function(){a._resotreTracks()}),s.on(u.Private.ChangeURL,function(T){T&&T.paramData&&T.paramData.from==="saas"||(a._disabledTracks(),a._isCreated=!1,a._defaultTrack="",a._backupCC="")}),s.on(u.Private.VttClearTracks,function(){a.switch("off"),a._disabledTracks(),a._isCreated=!1,a._defaultTrack={value:"off",text:"Off"},a.tracks=[a._defaultTrack],s.trigger(u.Private.SelectorGenerateList,{type:"cc"}),s.trigger(u.Private.CCStateChanged,{value:"off",lang:""})}),s.on(u.Player.CanPlay,function(){a._isCreated||(a.tracks=a._getTracks(),s.trigger(u.Player.TextTrackReady,a.tracks),s.trigger(u.Private.CCReset)),a._isCreated&&!a._player._setDefaultCC||!a._defaultTrack||(s.trigger(u.Private.SelectorUpdateList,{type:"cc",text:a._defaultTrack.text}),a.switch(a._defaultTrack.value),a._player._setDefaultCC=!1,a._isCreated=!0)}),h.os.ios&&parseFloat(h.os.version)<=15.1&&d.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),s.getOptions().controlBarVisibility==="always"&&d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),l.throttle(function(){s._vttBroker&&s._vttBroker.enabled||d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),f=(s.on(u.Private.ShowBar,f),l.throttle(function(){s._vttBroker&&s._vttBroker.enabled||d.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));s.on(u.Private.HideBar,f),s.on(u.Private.CCReset,function(){a._updateSelectorList()})}var u=e("../base/event/eventtype"),d=(e("../../lib/event"),e("../../lib/dom")),h=e("../../lib/ua"),y=e("../../lib/cookie"),o=e("../../lib/constants"),l=e("../../ui/component/util");g.prototype._adaptiveCueStype=function(){var s,a=-10;h.IS_SAFARI?(a=-65,(s=this._player.fullscreenService)&&s.getIsFullScreen()&&(a=-95)):h.IS_MOBILE&&(a=-30),d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+a+"px) !important;}")},g.prototype.close=function(){for(var s=this.getTextTracks(),a=s.length,f=0;f<a;f++){var T=s[f];T.mode!="expired"&&(T.mode=="showing"&&(this._backupCC=T),T.mode="disabled")}this._player.trigger(u.Private.VttHide)},g.prototype.open=function(){var s,a,f;return!this.tracks||this.tracks.length<2||(a=this._backupCC?this._backupCC.language:"",f=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(T){a===T.value&&(s=!0)}),(a=s?a:f="")||(a=this.tracks[1].value,f=this.tracks[1].text),this.switch(a)),{label:f,language:a}},g.prototype.getCurrentSubtitle=function(){return this._currentValue},g.prototype._getTracks=function(){for(var s=this.getTextTracks(),a=s.length,f=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),T=y.get(o.SelectedCC),m="",v=!1,S=0;S<a;S++){var w,E=s[S];E.mode=="expired"||E.kind!="subtitles"&&E.kind!="captions"||(w={value:E.language,text:E.label},E.default&&(this._defaultTrack=w,v=!0),w.value==T&&(m=w),f.push(w))}return!v&&m&&(this._defaultTrack=m),f},g.prototype._disabledTracks=function(){for(var s=this.getTextTracks(),a=s.length,f=0;f<a;f++)s[f].mode="expired"},g.prototype.switch=function(s){var a=this._player;if(this.close(),s!="off")for(var f=this.getTextTracks(),T=f.length,m=0;m<T;m++){var v=f[m];v.language===s&&v.mode!="expired"&&(f[m].mode="showing",a.trigger(u.Private.VttSwitchTrack,v.language))}else this.close();this._currentValue=s,a.trigger(u.Private.CCChanged,s)},g.prototype.updateUI=function(s){var a="on",f="";f=s?(this.tracks.find(function(T){return T.value===s})||{}).text||"":(a="off","Off"),player.trigger(u.Private.CCChanged,a),player.trigger(u.Private.CCStateChanged,{value:a,lang:f})},g.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},g.prototype._patchSafariTracks=function(){var s=this;if(h.IS_MAC_SAFARI||h.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var a=!1;if(a=this._video.textTracks&&this._video.textTracks.length?!0:a)return;for(var f=0;f<this._storedTracks.length;f++){var T=this._storedTracks[f],m=T.vttUrl,v=document.createElement("track");v.src=m,v.kind="subtitles",v.label=T.name,v.srclang=T.lang,this._video.appendChild(v)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var S=s.getCurrentSubtitle();S&&S!=="off"&&s.switch(S)},1e3)}},g.prototype.getTextTracks=function(){var s=this._player,a=s.tag;return s._vttBroker&&s._vttBroker.enabled&&s.getTextTracks?s.getTextTracks()||[]:a&&a.textTracks||[]},g.prototype._updateSelectorList=function(){var s=this._player;this.tracks=this._getTracks(),s.trigger(u.Private.SelectorGenerateList,{type:"cc",value:"Off"})},g.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(u.Player.TextTrackReady,this.tracks)},t.exports=g},{"../../lib/constants":30,"../../lib/cookie":31,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../ui/component/util":165,"../base/event/eventtype":70}],124:[function(e,t,x){var g=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var u=this.options();return g.isLiveShift(u)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":47,"./audiotrackservice":122,"./ccservice":123,"./fullscreenservice":125,"./liveshiftservice":126,"./progressmarkerservice":127,"./qualityservice":128,"./thumbnailservice":129}],125:[function(e,t,x){function g(a){var f=this,T=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=a,this),m=o;this._fullscreenChanged=function(v){var S;T._player!=null&&(v.target||v.srcElement)===(v=T._player.el())&&(S=document[m.fullscreenElement],T.isFullScreen=S===v,(T.isFullScreenChanged=!0)===T.isFullScreen?T._player.trigger(y.Player.RequestFullScreen):T._player.trigger(y.Player.CancelFullScreen))},m&&h.on(document,m.eventName,this._fullscreenChanged),h.on(a.tag,"webkitendfullscreen",function(v){v=v.target||v.srcElement,a&&a.tag===v&&(f.isFullScreenChanged=!0,f.isFullScreen=!1,f._player.trigger(y.Player.CancelFullScreen),f._player.trigger(y.Private.Play_Btn_Show))})}var u=e("../../lib/ua"),d=e("../../lib/dom"),h=e("../../lib/event"),y=e("../base/event/eventtype"),o=(e("../base/x5play"),e("../../lang/index"),function(){d.createEl("div");var a={},f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],T=!1;if(!(T=u.IS_IOS&&(a.requestFn="webkitEnterFullscreen",a.cancelFn="webkitExitFullscreen",a.fullscreenElement="webkitFullscreenElement",a.eventName="webkitfullscreenchange",a.isFullScreen="webkitDisplayingFullscreen",document[a.requestFn])?!0:T)){for(var m=0;m<5;m++)if(f[m][1]in document){a.requestFn=f[m][0],a.cancelFn=f[m][1],a.fullscreenElement=f[m][2],a.eventName=f[m][4],a.isFullScreen=f[m][6];break}"requestFullscreen"in document?a.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?a.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?a.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?a.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?a.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(a.requestFn="msRequestFullscreen"),"fullscreenchange"in document?a.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?a.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?a.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(a.eventName="MSFullscreenChange"),"fullScreen"in document?a.isFullScreen="fullScreen":"webkitfullScreen"in document?a.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?a.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?a.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?a.isFullScreen="mozFullScreen":"mozfullScreen"in document?a.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(a.isFullScreen="MSFullScreen"),"fullscreenElement"in document?a.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?a.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?a.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?a.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?a.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(a.fullscreenElement="MSFullscreenElement")}return a.requestFn?a:null}()),l=(g.prototype.requestFullScreen=function(){var a=o,f=this._player.el(),T=this;if(u.IS_IOS){var m=this._player._splayer;if(!m||m.renderType!==2){f=this._player.tag,m&&m.renderType!==2&&(f=this._player.el().querySelector("video"));try{var v=f[a.requestFn]();v&&typeof v.catch=="function"&&v.catch(function(w){console.log(w)}),T._player.trigger(y.Player.RequestFullScreen)}catch(w){console.log(w)}return this}this._player._options.enableMockFullscreen=!0}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),T=this,a&&!this._player._options.enableMockFullscreen)try{var S=f[a.requestFn]();S&&typeof S.catch=="function"&&S.catch(function(w){console.log(w)}),this._requestFullScreenTimer=setTimeout(function(){T.isFullScreenChanged||(l.apply(T),T._player.trigger(y.Player.RequestFullScreen)),T._requestFullScreenTimer=null},1e3)}catch(w){console.log(w)}else l.apply(T),this._player.trigger(y.Player.RequestFullScreen);return this._player},g.prototype.cancelFullScreen=function(){var a=o,f=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(a&&!this._player._options.enableMockFullscreen){try{var T=document[a.cancelFn]();T&&typeof T.catch=="function"&&T.catch(function(m){console.log(m)})}catch(m){console.log(m)}f._cancelFullScreenTimer=setTimeout(function(){f.isFullScreenChanged||(s.apply(f),f._player.trigger(y.Player.CancelFullScreen)),f._cancelFullScreenTimer=null},500)}else s.apply(f),this._player.trigger(y.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(y.Player.Play),this._player},g.prototype.getIsFullScreen=function(){return this.isFullScreen},g.prototype.dispose=function(){this._player=null,o&&h.off(document,o.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",d.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),s=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,d.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=g},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../base/event/eventtype":70,"../base/x5play":98}],126:[function(e,t,x){function g(m,v){var S;if(m)return m=new Date(m),S=(v=new Date(v)).valueOf()/1e3-m.valueOf()/1e3,{start:m,end:v,endDisplay:y.extractTime(v),totalTime:S}}function u(m,v){v&&(m.currentTimestamp=v,m.currentTime=y.convertToDate(v),m.currentTimeDisplay=y.extractTime(m.currentTime),m.liveShiftStart=m.liveTimeRange.start,m.liveShiftEnd=m.liveTimeRange.end,m.liveShiftStartDisplay=y.extractTime(m.liveShiftStart),m.liveShiftEndDisplay=y.extractTime(m.liveShiftEnd),m.availableLiveShiftTime=v-m.liveShiftStart.valueOf()/1e3,m.timestampStart=y.convertToTimestamp(m.liveShiftStart),m.timestampEnd,y.convertToTimestamp(m.liveShiftEnd))}function d(m){function v(){var w=m._options.source;this._originalPlayUrl=w,this._liveShiftUrl=m._options.liveTimeShiftUrl,this.liveTimeRange=g(m._options.liveStartTime,m._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=m,this._isLiveShiftPlaying=!1;var S=this;v.call(this),m.liveShiftSerivce={setLiveTimeRange:function(w,E){S.setLiveTimeRange(w,E)},queryLiveShift:function(w,E,_){S.queryLiveShift(w,E,_)},isLiveShiftPlaying:function(){return S._isLiveShiftPlaying}},m.on(T.Private.ChangeURL,function(){v.call(S)})}var h=e("../../lib/io"),y=e("../../lib/util"),o=e("../../lib/playerutil"),l=e("../../lang/index"),s=e("../flv/flvinjector"),a=e("../hls/hlsinjector"),f=e("../../lib/constants"),T=e("../base/event/eventtype");e("../../lib/url"),d.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},d.prototype.switchToLive=function(){this.seekTime=-1;var m=this._originalPlayUrl,v=this._player._options.liveShiftSource,S=this._player._options.source;o.isHls(S)&&o.isFlv(m)&&v&&o.isHls(v)&&(this._player._hls&&this._player._destroyHls(),S=this._player._superType,v=this._player._Type,this._player._options._autoplay=!0,s.inject(this._player,v,S,this._player._options,"",!0)),this._player._loadByUrlInner(m,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(T.Private.LiveShiftSwitchToLive)},d.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?y.parseTime(this.currentTimeDisplay):y.parseTime(this.liveShiftStartDisplay)+this.seekTime},d.prototype.getSourceUrl=function(m,v){var S=this._originalPlayUrl;return this.availableLiveShiftTime<m||(this._isLiveShiftPlaying=!0,m=parseInt(m),S=(S=this._switchLiveShiftPlayer(v))&&this._cleanUrl(S),v=parseInt(this.currentTimestamp)-m,(S=S.indexOf("?")==-1?S+"?lhs_start_unix_s_0="+v:S+"&lhs_start_unix_s_0="+v).indexOf("aliyunols=on")===-1&&(S+="&aliyunols=on"),S.indexOf("continue=on")===-1&&(S+="&continue=on")),S},d.prototype._cleanUrl=function(m){var v;return m.indexOf("?")===-1?m:(m=(m=(v=m.split("?"))[1])&&((m=m.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?m.replace("&",""):m))?v[0]+"?"+m:v[0]},d.prototype._switchLiveShiftPlayer=function(m){var v,S=this._originalPlayUrl,w=this._player._options.liveShiftSource,E=this._player._options.source;if(o.isHls(E))S=E;else if(o.isFlv(S)&&w&&o.isHls(w))return this._player._flv&&this._player._destroyFlv(),E=this._player._superType,v=this._player._Type,this._player._options._autoplay=!0,a.inject(this._player,v,E,this._player._options,"",!0),w;return S},d.prototype.getTimeline=function(m,v){var S;this._player.trigger(T.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(S=this).queryLiveShift(this._liveShiftUrl,function(w){w?(w=w).retCode==0?(u(S,w.content.current),m&&m()):v({Code:f.ErrorCode.ServerAPIError,Message:w.retCode+"|"+w.description+"|"+w.content}):console.log("获取直播时移数据失败")},function(w){if(v&&w){var E={};if(w){if(typeof w=="string"&&-1<w.indexOf("403 Forbidden"))E.Code=f.ErrorCode.AuthKeyExpired,E.Message="Query liveshift failed:"+l.get("Error_AuthKey_Text");else{var _,E=w;try{_=JSON.parse(w)}catch{}_&&(E.Code=f.ErrorCode.ServerAPIError,E.Message=_.retCode+"|"+_.description+"|"+_.content)}v(E)}}}):(u(this,new Date().valueOf()/1e3),m&&m())},d.prototype.start=function(m,v){function S(){w._loopHandler&&clearTimeout(w._loopHandler),w._loopHandler=setTimeout(function(){w.getTimeline(function(){},v),S()},m)}var w=this;w.getTimeline(function(E){w._localLiveTimeHandler||w.tickLocalLiveTime()},v),S()},d.prototype.tickLocalLiveTime=function(){var m=this;(function v(){m._localLiveTimeHandler=setTimeout(function(){m.currentTimestamp++,u(m,m.currentTimestamp),m._player.trigger(T.Private.LiveShiftQueryCompleted),v()},1e3)})()},d.prototype.setLiveTimeRange=function(m,v){m=m||this._player._options.liveStartTime,v=v||this._player._options.liveOverTime,this.liveTimeRange=g(m,v),u(this,this.currentTimestamp),this._player.trigger(T.Private.LiveShiftQueryCompleted)},d.prototype.queryLiveShift=function(m,v,S){h.get(m,function(w){var E;w?(E=JSON.parse(w)).retCode==0?v&&v(E):S&&S(E):S&&S(w)},function(w){S&&S(w)})},d.prototype.stop=function(m){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},d.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},t.exports=d},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/url":51,"../../lib/util":52,"../base/event/eventtype":70,"../flv/flvinjector":104,"../hls/hlsinjector":106}],127:[function(e,t,x){function g(y){function o(){var s=document.querySelector("#"+y.id()+" .prism-progress-marker");if(s){s.innerHTML="";var a=l._player.getDuration();if(0<a){for(var f=0;f<l.progressMarkers.length;f++){var T,m=l.progressMarkers[f];m.offset!==void 0&&m.offset!==""&&(m=document.createElement("div"),d.addClass(m,"prism-marker-dot"),T=l.progressMarkers[f].offset/a,m.style.left=100*T+"%",s.appendChild(m),T=function(S,w){return function(){l._player.trigger(u.Private.MarkerTextShow,{left:S,progressMarker:w})}}(T,l.progressMarkers[f]),h.on(m,"mouseover",T),h.on(m,"mouseout",function(S){l._player.trigger(u.Private.MarkerTextHide)}),h.on(m,"touchstart",T),h.on(m,"mousemove",function(S){S.preventDefault()}),h.on(m,"touchmove",function(S){S.preventDefault()}))}var v=document.querySelector("#"+l._player.id()+" .prism-progress-cursor");l._player.on(v,"click",function(S){for(var w=l._player.getCurrentTime(),E=0;E<l.progressMarkers.length;E++){var _,P=l.progressMarkers[E];P&&w-1<P.offset&&P.offset<w+1&&(_=P.offset/a*100+"%",l._player.trigger(u.Private.MarkerTextShow,{left:_,progressMarker:P}))}})}}}this.progressMarkers=[],this._player=y;var l=this;y.on(u.Private.ProgressMarkerLoaded,function(s){s=s.paramData,s&&0<s.length&&(l.progressMarkers=s)}),y.on(u.Private.ProgressMarkerChanged,function(s){s=s.paramData,s&&0<s.length&&(l.progressMarkers=s,o())}),y.on(u.Video.LoadedMetadata,o)}var u=e("../base/event/eventtype"),d=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),h=e("../../lib/event");e("../../lib/playerutil"),g.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},t.exports=g},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/hls/hlsparse":40,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],128:[function(e,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(f){for(var T=1;T<arguments.length;T++){var m,v=arguments[T];for(m in v)Object.prototype.hasOwnProperty.call(v,m)&&(f[m]=v[m])}return f}).apply(this,arguments)}function u(f){this.levels=[],this.drmUrl={},this._player=f;var T=this;f.on(d.Private.PlayInfoLoaded,function(m){for(var v=m.paramData.encryptUrlArr||[],S=[],w=0;w<v.length;w++){var E=v[w];E.encryptionType===s.VodEncryptionType["Widevine-FairPlay"]&&S.push(E)}T.drmUrl=S}),f.on(d.Player.LevelsLoaded,function(m){if(0<T.levels.length&&(T.levels=[]),(m=m.paramData)&&m.levels){for(var v,S=m.levels.length-1;-1<S;S--){var w,E=m.levels[S];E.url&&0<E.url.length&&E.attrs&&E.attrs.BANDWIDTH&&(w=E.url,o.isArray(w)&&(w=w[0]),w={Url:w=!f._hls&&f._options.isVBR&&f._options.isDrm?a.call(T,E):w,desc:Math.min(E.width,E.height),bitrate:E.bitrate,resolution:E.attrs.RESOLUTION,bandwidth:E.attrs.BANDWIDTH},T.levels.push(w))}f._options.definition==="AUTO"&&(f._urls=[],Object.assign(f._urls,this.levels)),T.levels.sort(function(_,P){return(_.bitrate||_.desc)-(P.bitrate||P.desc)}),T.levels=T.levels.map(function(_){return g({},_,{desc:_.desc+"p@"+parseInt(_.bitrate/1e3)+"k"})}),0<T.levels.length&&(v="",this._player._options.isVBR&&(v=h.get("Auto")),T.levels.push({Url:m.url,desc:v}),f.trigger(d.Private.SelectorUpdateList,{type:"quality",text:v}))}}),f.on(d.Video.LoadStart,function(){var m,v;f._options&&(m=f._options.source,v=f._options.isVBR,!f._hls)&&m&&l.isHls(m)&&(f._manuallySwitchDrmLevel?(f._manuallySwitchDrmLevel=!1,f.trigger(d.Private.SafariDrmLevelSwitch)):v&&T.loadLevels(m))})}var d=e("../base/event/eventtype"),h=e("../../lang/index"),y=e("../../lib/hls/hlsparse"),o=e("../../lib/object"),l=e("../../lib/playerutil"),s=e("../../lib/constants");function a(f){for(var T,m=this.drmUrl,v=0;v<this.drmUrl.length;v++)if(Number(f.height)===Number(m[v].height)){T=m[v].Url;break}return T}(u.prototype={loadLevels:function(f){var T=new y,m=this;T.load(f,function(v){var S;(S=v.subtitles)!=null&&S.forEach(function(w){T.loadMediaPlaylist({url:w.url},function(E){E=E.fragments[0],E&&(w.vttUrl=T.resolve(E.relurl,E.baseurl))},function(E){console.log("parse vtt url error: ",E)})}),m._player.trigger(d.Player.LevelsLoaded,v)})}}).dispose=function(){this._player=null},t.exports=u},{"../../lang/index":25,"../../lib/constants":30,"../../lib/hls/hlsparse":40,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],129:[function(e,t,x){function g(o){this._player=o,this.cues=[],this.baseUrl="";var l=this;o.on(y.Private.ChangeURL,function(){l.cues=[],l.baseUrl=""})}var u=e("../../lib/io"),d=e("../../lib/url"),h=e("../../lib/vtt/thumbnailvtt"),y=e("../base/event/eventtype");(g.prototype={get:function(o){var l,s,a=this;this.baseUrl=(l=o,(s=d.parseUrl(l))&&(s=s.segments)&&0<s.length&&(s=s[s.length-1],baseUrl=l.replace(s,"")),baseUrl),u.get(o,function(f){f&&h.parse(f,function(T){a.cues=T,a._player.trigger(y.Private.ThumbnailLoaded,T)})},function(f){console.log(f)})},findAvailableCue:function(o){for(var l=this.cues.length,s=0;s<l;s++){var a=this.cues[s];if(a.startTime<=o&&o<a.endTime)return a}return null},makeUrl:function(o){return o=o.indexOf("://")==-1?this.baseUrl+o:o}}).dispose=function(){this._player=null},t.exports=g},{"../../lib/io":42,"../../lib/url":51,"../../lib/vtt/thumbnailvtt":54,"../base/event/eventtype":70}],130:[function(e,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(P){for(var R=1;R<arguments.length;R++){var A,C=arguments[R];for(A in C)Object.prototype.hasOwnProperty.call(C,A)&&(P[A]=C[A])}return P}).apply(this,arguments)}var u=e("../base/player"),d=e("./splayerinjector"),h=e("../flv/flvinjector"),y=e("../hls/hlsinjector"),o=e("../../lib/playerutil"),l=e("../base/event/eventtype"),s=e("../../lib/constants"),a=e("../../lib/codec-probe"),f=e("../../lib/ua"),T=s.USER_EVENT_NAME,m=o.isH265Codec,v=o.isH266Codec,S=o.getVideoTrack,w={},E={codecCost:0,decoderCost:0},_=u.extend({init:function(P,R){var A,C=this,L=(this._options=R,o.isFlv(R.source)),V=o.isHls(R.source),I=this._extraMultiSources(),M={};function O(){L?(h.inject(this,_,u,R),R._native=!1):V&&!o.canPlayHls()&&(y.inject(this,_,u,R),R._native=!1),u.call(this,P,R),this._monitor&&this._monitor.updateH265ProbeInfo(g({},E,w)),j.call(this),w.codecTag&&d.reportH265PlayInfo.call(this,{renderType:"native",codecTag:w.codecTag})}function N(){R._native=!1,d.inject(this,_,u,R,w),u.call(this,P,R),this._monitor&&this._monitor.updateH265ProbeInfo(g({},E,w,{waitRenderType:!0})),j.call(this)}function j(){var Y,B,W=this,D=M,X=this[T];X&&(D=Object.assign({},M,X),Y=Object.keys(M),B=Object.keys(X),Y.forEach(function(Q){-1<B.indexOf(Q)&&(D[Q]=M[Q].concat(X[Q]))})),Object.keys(D).forEach(function(Q){D[Q].forEach(function(H){H.binded||u.prototype.on.call(W,Q,H)})})}M[l.Player.Ready]=[function(){C._setupSourceList(I),C.trigger(l.Private.SelectorGenerateList,{type:"quality"})}],R.from==="zhihu"||R.forceH265||R.forceH266?N.call(this):f.IS_ANDROID&&f.dingTalk()&&!L?O.call(this):(A=performance.now(),a(R.source,function(W){E.codecCost+=performance.now()-A;var B,W=S(W.tracks),D=(W||{}).codecTag||((D=(W||{}).codec)==null?void 0:D.split(".")[0]);w.codecTag=D,W&&m(D)?(B=performance.now(),L||V&&!o.canPlayHls()?(E.decoderCost+=performance.now()-B,N.call(C)):o.shouldUseBasePlayer({codecTag:D,url:R.source},function(X){E.decoderCost+=performance.now()-B,(X?O:N).call(C)})):(W&&v(D)?N:O).call(C)},function(Y){console.log("error in demuxer, fallback to basePlayer",Y),E.codecCost+=performance.now()-A,O.call(C),d.checkProtocol.call(C,R.source)}))}});t.exports=_},{"../../lib/codec-probe":28,"../../lib/constants":30,"../../lib/playerutil":47,"../../lib/ua":50,"../base/event/eventtype":70,"../base/player":93,"../flv/flvinjector":104,"../hls/hlsinjector":106,"./splayerinjector":131}],131:[function(e,t,x){function g(){return(g=Object.assign?Object.assign.bind():function(E){for(var _=1;_<arguments.length;_++){var P,R=arguments[_];for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&(E[P]=R[P])}return E}).apply(this,arguments)}var u=e("../../lib/io"),d=e("../base/event/eventtype"),h=e("../base/event/eventmanager"),y=(e("../../lib/event"),e("../../lib/util")),o=e("../../lib/dom"),l=e("../../lib/playerutil"),s=e("../../lib/constants"),a=e("../../lang/index"),f="splayerinjector.js";function T(E){var _=this._options,P=(S.call(this),(function(){l.isVideoTag(this.tag)&&(h.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}).call(this),Videox.Videox),R=_.splayerWasmDomain,R=(!R&&_.assetPrefix&&(R=_.assetPrefix+"/splayer"),new P(g({container:this._el,wasmDomain:R,progressive:!0,skipFrame:P.DiscardType.NONE,loop:_.rePlay,controls:!1,muted:!1,threads:_.h265Threads,simd:_.h265Simd,autoplay:_.autoplay||_._autoplay,live:_.isLive,poster:_.cover||void 0,src:_.source,trackOptions:{disable:!0},preload:_.preload?"auto":"none",timeout:1e3*_.waitingTimeout},_.splayerOptions||{}))),A=(_.debug&&(R.setLogLevel(P.LogLevel.LOG),R.setLogPrintLevel(P.LogLevel.LOG)),this._splayer=R,(this.tag=R).play),C=this;this.tag.play=function(){C._monitor&&C._monitor.reportStartPlay(),A.call(this)},(function(){var L,V=this,I=document.createElement("video");for(L in I)(function(M){V.tag[M]||M.indexOf("on")===0||typeof I[M]!="function"||(V.tag[M]=function(){console.warn("Function ["+M+"] is called on splayer, which should be a mistake."),I[M].apply(I,arguments)})})(L)}).call(this),(function(L){var V=this,I=(h.onAll(this),this._splayer);I.addEventListener("error",(function(M){var O,N,j,W=Videox.Videox,Y=(M||{}).detail,B=Number((Y||{}).code),W=W.ErrorCode;switch(this.traceLog(f,"splayer-error::"+B),B){case W.WASM_NOT_SUPPORTED:case W.CANVAS_NOT_SUPPORTED:case W.AUDIOCONTEXT_NOT_SUPPORTED:case W.WORKER_NOT_SUPPORTED:case W.WEBGL_NOT_SUPPORTED:O=s.ErrorCode.SplayerEnvCheckError,N=a.get("Splayer_Err_Env_Check")+" | "+m(Y);break;case W.DECODE:O=s.ErrorCode.SplayerDecodeError,N=a.get("Splayer_Err_Decode")+" | "+m(Y);break;case W.NETWORK:O=s.ErrorCode.NetworkError,N=a.get("Error_Network_Text")+" | "+m(Y);var D=(Y.origin||{}).response;D?(D=D.status)===404?(O=s.ErrorCode.NotFoundSourceURL,N=a.get("Error_Not_Found")+" | "+m(Y),j=a.get("Tip_Err_Not_found")):D===403&&(O=s.ErrorCode.AuthKeyExpired,N=a.get("Error_AuthKey_Text")+" | "+m(Y)):navigator.onLine&&(O=s.ErrorCode.RequestDataError,N=N+"，"+a.get("Maybe_Cors_Error"));break;case W.PARSER:O=s.ErrorCode.SplayerParserNotFound,N=a.get("Splayer_Err_Parser_Not_Found")+" | "+m(Y);break;default:O=s.ErrorCode.OtherError,N="(SP)"+a.get("Error_Play_Text")+" | "+m(Y)}if(j=j||a.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+a.get("Tip_Err_Splayer_Doc")+"</a>",!(O===s.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch{}B={error_code:O,error_msg:N,diagnosis_info:j},B.error_code!==null&&B.error_msg!==null&&(this.logError(B),this.trigger(d.Player.Error,B)),w.call(this,{splayer:!0})}}).bind(this)),I.addEventListener("decoderoverload",function(M){M=M.detail,delete M.shouldWarn,V.trigger(d.Player.H265DecoderOverload,M)}),I.addEventListener("loadedsupportinfo",function(O){var O=O.detail||{},N=O.detail||{},j=I.controller.options||{};I.renderType=O.renderer,w.call(V,{renderer:O.renderer,wasmThreads:N.wasmThreads&&j.threads,wasmThreadsOption:j.threads,simd:N.simd&&j.simd,simdOption:j.simd,codecTag:I.controller.videoTrack&&I.controller.videoTrack.codecTag||I.controller.videoTrack&&((O=I.controller.videoTrack.codec)==null?void 0:O.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(I.once("canplay",function(){I.paused&&V._autoplayFailedHandler()}),I.once("timeupdate",function(){V.trigger(d.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),I.on("playing",function(){V._monitor&&V._monitor.reportPlaying()}),I.on("timeupdate",function(){V._monitor&&V._monitor.reportPlaying()})}).call(this,E)}function m(P){var P=P=P===void 0?{}:P,_=P.code,P=P.message,R=Videox.Videox.ErrorCode,A="";return A=_?A+_+(": "+(P||R[_])):A}function v(E){return!y.contentProtocolMixed(E,"alwaysCheck")||((E={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=a.get("Request_Block_Text"),this.logError(E),this.trigger(d.Player.Error,E),!1)}function S(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function w(E){var _;E===void 0&&(E={}),!this._h265InfoReported&&(this._h265InfoReported=!0,_={0:"native",1:"mse",2:"wasm"},delete(E=g({codecTag:(this._probeInfo||{}).codecTag||E.codecTag,renderType:E.renderType||_[E.renderer]},E)).renderer,E.renderType!==_[2]&&(delete E.simd,delete E.simdOption,delete E.wasmThreads,delete E.wasmThreadsOption),this._splayerRenderType=E.renderType,_=E.codecTag)&&(l.isH265Codec(_)?this.trigger(d.Player.H265PlayInfo,E):l.isH266Codec(_)&&this.trigger(d.Player.H266PlayInfo,E))}t.exports.checkProtocol=v,t.exports.reportH265PlayInfo=w,t.exports.inject=function(E,_,P,R,A){E._Type=_,E._superType=P,E._superPt=P.prototype,E._disposed=!1,E._splayer=null,E._splayerLoaded=!1,E._probeInfo=A,E._splayerRenderType=null,_.prototype.initPlay=function(C){var L=this;this.trigger(d.Private.H5_Loading_Show),v.call(this,this._options.source)&&(this._splayerLoaded?T.call(this,C):(function(V,I){var M=this._options,O=M.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.7/dist/index.js";!M.splayerUrl&&M.assetPrefix&&(O=M.assetPrefix+"/splayer/index.js"),u.loadJS(O,V.bind(this),function(){I&&I()})}).call(this,function(){this._splayerLoaded=!0,T.call(this,C),L._executeReadyCallback()},function(){var V={mediaId:L._options.vid||"",mediaAuth:L._options.mediaAuth||"",error_code:s.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};L.trigger(d.Player.Error,V)}))},_.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},_.prototype.setPlayerSize=function(C,L){this._superPt.setPlayerSize.call(this,C,L),C=this._el.querySelector("canvas"),C&&(L=this._el.offsetWidth/this._el.offsetHeight,C.offsetWidth/C.offsetHeight<L?(C.style.height="100%",C.style.width="initial"):(C.style.width="100%",C.style.height="initial"))},_.prototype._setTransform=function(){var C=this._player.el(),L=this._splayerRenderType==="wasm",C=L?C.querySelector("canvas"):C.querySelector("video"),L=(this._transformProp||(this._transformProp=o.getTransformName(C)),L?"":" translate(-50%, -50%)");this._rotate&&(L+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?L+=" scaleY(-1)":this._image=="horizon"&&(L+=" scaleX(-1)")),C.style[this._transformProp]=L},_.prototype.dispose=function(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),_.prototype.replay=this._superPt.replay,_.prototype.setPlayerSize=this._superPt.setPlayerSize,_.prototype._setTransform=this._superPt._setTransform,_.prototype.initPlay=this._superPt.initPlay),S.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/event":35,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/util":52,"../base/event/eventmanager":69,"../base/event/eventtype":70}],132:[function(e,t,x){function g(_,P){var R,A=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(A)return(A=A.call(_)).next.bind(A);if(Array.isArray(_)||(A=function(C,L){var V;if(C)return typeof C=="string"?u(C,L):(V=(V=Object.prototype.toString.call(C).slice(8,-1))==="Object"&&C.constructor?C.constructor.name:V)==="Map"||V==="Set"?Array.from(C):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?u(C,L):void 0}(_))||P)return A&&(_=A),R=0,function(){return R>=_.length?{done:!0}:{done:!1,value:_[R++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(_,P){(P==null||P>_.length)&&(P=_.length);for(var R=0,A=new Array(P);R<P;R++)A[R]=_[R];return A}var d=typeof Promise>"u"?e("es6-promise").Promise:Promise,h=e("../../lib/io"),y=e("../../config"),o=e("../../lang/index"),l=e("../../lib/ua"),s=e("../base/event/eventtype"),a=e("../../lib/constants"),f=a.PLAYER_SCOPE,T=a.SW_MSG_EVT,m=a.DM_MSG_EVT,v=a.ErrorCode,S=e("./tsremuxer").TSRemuxer,w="swinjector.js";function E(_){_={mediaId:this._options.vid||"",error_code:_.code,error_msg:_.msg,diagnosis_info:_.info},this.trigger(s.Player.Error,_)}t.exports.inject=function(_,P,R,A,C){_.swPlayer=!0,_.firstBuild=!0,_.sw=null,_.tsDemuxerWorker=null,_.tsRemuxer=null,_.preloadError=!1,_.fetchHasResult=!1,_._initServiceWorker=new d(function(O){setTimeout(O,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(N){if(!N.length)return console.log("No serviceWorker registrations found."),O();for(var j,Y=[],B=g(N);!(j=B()).done;)(function(){var W=j.value,D=W.unregister().then(function(X){console.log(X?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(W.installing?"  .installing.scriptURL = "+W.installing.scriptURL+`
`:"")+(W.waiting?"  .waiting.scriptURL = "+W.waiting.scriptURL+`
`:"")+(W.active?"  .active.scriptURL = "+W.active.scriptURL+`
`:"")+"  .scope: "+W.scope+`
`)});Y.push(D)})();d.all(Y).then(O).catch(O)}).catch(function(N){console.log("clear sw error",N),O()}):O()}).then((function(O){var N=this;return new d(function(j){var Y=function(W){if(!W)return o.get("Error_SW_ScriptURL_Empty");if((W=String(W)).indexOf("https")!==0&&W.indexOf("localhost")===-1&&W.indexOf("127.0.0.1")===-1)return o.get("Error_SW_ScriptURL_Https");try{D=new URL(W)}catch(X){return o.get("Error_SW_ScriptURL_ILlegal","",{detail:X})}var W=location.href.split("/"),W=(W.pop(),W.join("/")),D=D.href.split("/"),D=(D.pop(),D.join("/"));if(W!==D)return o.get("Error_SW_ScriptURL_Scope","",{scope1:D,scope2:W})}(O.swScriptURL);if(Y)return N.preloadError=!0,E.call(N,{code:v.ModuleLoadError,msg:Y});"serviceWorker"in navigator?(navigator.serviceWorker.register(O.swScriptURL,{scope:"./"}).then(function(B){N.traceLog(w,"sw registered"),B=B.active||B.waiting||B.installing,B.postMessage({scope:f,name:T.SETUP}),N.sw=B,j()}).catch(function(B){N.preloadError=!0,E.call(N,{code:v.ModuleLoadError,msg:o.get("Error_SW_Register_Failed")+"("+B+")",info:o.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(B){B.target.controller.scriptURL!==O.swScriptURL&&E.call(N,{code:v.ModuleLoadError,msg:o.get("Error_SW_Conflict"),info:"controlled by "+B.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(B){var W;if((D=B.data)&&D.scope===f){var D=B.data.name;switch(console.log("[MESSAGE FROM SW]["+D+"]",function(H){var F;try{F=/[0-9]+\.ts/.exec(H)[0]}catch{}return F}((W=B.data.payload)==null?void 0:W.url),B.data.payload),D){case T.SETUP_ACK:N.traceLog(w,"sw ack");var X=(X=B.data.payload)==null?void 0:X.version;X!==y.h5Version&&(N.preloadError=!0,E.call(N,{code:v.ModuleLoadError,msg:o.get("Error_SW_Version_Not_Match","",{swVersion:X,playerVersion:y.h5Version})}));break;case T.ENC_SEGMENT:var Q=B.data.payload;N._getDemuxer.then(function(){N.tsDemuxerWorker&&N.tsDemuxerWorker.postMessage({name:m.DEMUX,payload:{buffer:Q.buffer,url:Q.url,playlistUrl:Q.playlistUrl}})});break;case T.ABORT_SEGMENT:N.tsDemuxerWorker&&N.tsDemuxerWorker.postMessage({name:m.FLUSH}),N.tsRemuxer&&N.tsRemuxer.flush()}}})):(N.preloadError=!0,Y=location.protocol==="http:"?o.get("Error_SW_Https_required"):o.get("UseChromeForVodEncription")+"(SW not found)",E.call(N,{code:v.EncrptyVideoNotSupport,msg:Y}))})}).call(_,A));var L,V,I=performance.now(),M=(_._getDemuxer=(L=A,new d(function(O,N){var j="aliplayer-hls2-demuxer-min.js",Y="https://"+y.domain+y.path+y.h5Version+"/hls/"+j;L.assetPrefix&&(Y=L.assetPrefix+"/hls/"+j),h.loadJS(Y,O,N)}).then(function(){_.traceLog(w,"got demuxer#"+parseInt(performance.now()-I)),window.AliDemuxerWorker&&(_.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,_.tsDemuxerWorker.postMessage({name:m.SETUP,payload:{key:C,debug:A.debug}}),_.tsDemuxerWorker.addEventListener("message",function(O){var N=O.data;switch(N.name){case m.RESULT:if(_.tsRemuxer)try{_.tsRemuxer.remux(N.payload.demuxResult)}catch(j){_.traceLog(w,"remux error: "+j.message+", "+j.stack+"}")}break;case m.DISPOSED:_.tsDemuxerWorker&&(_.tsDemuxerWorker.terminate(),_.tsDemuxerWorker=null);break;case m.ERROR:_.traceLog(w,"demuxer error:  "+N.payload.reason)}}),_.tsDemuxerWorker.addEventListener("error",function(O){_.traceLog(w,"demuxer uncaught error: "+O.message)}))}).catch(function(O){_.preloadError=!0,E.call(_,{code:v.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());_._getRemuxer=(V=A,new d(function(O,N){var j,Y="aliplayer-remuxer-min.js",B="https://"+y.domain+y.path+y.h5Version+"/hls/"+Y;V.assetPrefix&&(B=V.assetPrefix+"/hls/"+Y),l.IS_IOS&&Number(l.IOS_VERSION)<=14?(j="https://"+y.domain+y.path+y.h5Version+"/hls/aliplayer-remuxer-polyfill.js",V.assetPrefix&&(B=V.assetPrefix+"/hls/"+Y),h.loadJS(j,function(){h.loadJS(B,O,N)},N)):h.loadJS(B,O,N)}).then(function(){_.traceLog(w,"got remuxer#"+parseInt(performance.now()-M)),window.LibMux&&(_.tsRemuxer=new S({onResult:function(O){_.sw.postMessage({scope:f,name:T.DEC_SEGMENT,payload:{buffer:O.data.buffer,url:O.id}},[O.data.buffer])}}))}).catch(function(){_.preloadError=!0,E.call(_,{code:v.ModuleLoadError,msg:"ts-remuxer module load error"})})),P.prototype.initPlay=function(){var O=this;d.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){O.trigger(s.Private.H5_Loading_Show),h.get(A.source,function(N){var j;_.fetchHasResult=!0,O.preloadError||(N=function(X,B){var W,D=-1<B.indexOf("EXT-X-STREAM-INF"),X=(B=B.replace(/#EXT-X-KEY:.*\n?/g,""),X.match(/^(.*)\/[^\/]*$/));if(X)return W=X[1],X=D?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,B=B.replace(X,function(Q,H,F){return""+H+W+"/"+F+(-1<F.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")}(A.source,N),j="",j=l.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(N):(N=new Blob([N],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(N)),O.tag.src=j,O._initPlayBehavior(),O.firstBuild&&(O.firstBuild=!1,O._executeReadyCallback()))},function(N,j){if(console.log("fetch m3u8 error",N,j),O.traceLog(w,"fetch m3u8 error "+j+"-"+N),!_.fetchHasResult&&(_.fetchHasResult=!0,!O.preloadError)){var Y,B;switch(j){case 403:Y=v.AuthKeyExpired,B=o.get("Error_AuthKey_Text");break;case 404:Y=v.NotFoundSourceURL,B=o.get("Error_Not_Found");break;default:Y=v.RequestDataError,B=o.get("Error_Load_M3U8_Failed_Text")}E.call(O,{code:Y,msg:B})}})})},P.prototype.dispose=function(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:m.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var O=R.prototype;O&&(O.dispose.call(this),P.prototype.initPlay=O.initPlay),this.sw&&(this.sw.postMessage({scope:f,name:T.DISPOSE}),this.sw=null)}}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/ua":50,"../base/event/eventtype":70,"./tsremuxer":133,"es6-promise":8}],133:[function(e,t,x){t.exports.TSRemuxer=function(){function g(d){this.mux=null;var h=window.LibMux;console.log("LibMux ->",h),this.mux=new h({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(y){console.log("remux result -> ",y),d.onResult(y)}})}var u=g.prototype;return u.remux=function(d){this.mux.remuxTS({id:d.id,videoTrack:d.videoTrack,audioTrack:d.audioTrack})},u.flush=function(){this.mux.flush()},u.destroy=function(){this.mux.destroy()},g}()},{}],134:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function e(T){var m=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],m[T]=function(){}}for(var t=1;t!==void 0;){var x=3&t>>2;switch(3&t){case 0:switch(x){case 0:t=f?5:9;continue;case 1:f++,t=8;continue;case 2:t=f<s[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(x){case 0:$jsskein_array_103[2],t=window?10:6;continue;case 1:var g=s[$jsskein_array_102[7]](f),u=~(~(g&~d)&~(~g&d)),d=g;a+=$jsskein_array_104[10][$jsskein_array_103[9]](u),t=4;continue;case 2:g=$jsskein_array_103[8],d=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+g,t=5;continue}continue;case 2:switch(x){case 0:h[y]($jsskein_array_102[8],$jsskein_array_102[9],o,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],l,a),h[$jsskein_array_102[11]](e),t=6;continue;case 1:t=void 0;continue;case 2:var h=[],y=$jsskein_array_103[3];y+=$jsskein_array_103[4];var o=(o=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),l=$jsskein_array_102[4],s=(l=(l+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),a=$jsskein_array_103[6],d=$jsskein_array_103[2],f=$jsskein_array_104[0];t=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(e,t){for(var x=27;x!==void 0;){var g=7&x>>3;switch(7&x){case 0:switch(g){case 0:n5fg6f(t),x=28;continue;case 1:m++,x=2;continue;case 2:var u=$jsskein_array_104[38],d=$jsskein_array_102[26],h=$jsskein_array_103[2],y=$jsskein_array_102[12],x=18;continue;case 3:var o=$jsskein_array_103[28],l=$jsskein_array_104[1],s=$jsskein_array_103[2],a=$jsskein_array_103[2];x=33;continue;case 4:console[$jsskein_array_102[36]](d),x=28;continue}continue;case 1:switch(g){case 0:y++,x=18;continue;case 1:var v=$jsskein_array_102[32],f=(v=(v=(v=(v=(v+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34])+$jsskein_array_103[30],_=Aliplayer[v],$jsskein_array_103[31]),T=$jsskein_array_102[26],m=$jsskein_array_103[2];x=2;continue;case 2:var v=o[$jsskein_array_102[7]](a),S=~(~(v&~s)&~(~v&s)),s=v;l+=$jsskein_array_103[29][$jsskein_array_103[9]](S),x=10;continue;case 3:h=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],x=26;continue;case 4:x=a<o[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(g){case 0:x=m<f[$jsskein_array_104[25]]?36:34;continue;case 1:a++,x=33;continue;case 2:x=y<u[$jsskein_array_104[25]]?12:32;continue;case 3:var w=u[$jsskein_array_103[21]](y),E=~(~(w&~h)&~(~w&h));h=w,d+=$jsskein_array_104[10][$jsskein_array_102[2]](E),x=1;continue;case 4:x=(_=T!==_)?0:16;continue}continue;case 3:switch(g){case 0:var P=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);s=$jsskein_array_104[35]+P,x=17;continue;case 1:x=a?17:3;continue;case 2:return;case 3:var _=e[$jsskein_array_104[31]];x=(_=$jsskein_array_102[29]==_)?35:28;continue;case 4:var P=$jsskein_array_104[32],R=(P=(P=(P=(P+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),_=window[P],$jsskein_array_104[33]),A=_[(R+=$jsskein_array_103[25])+$jsskein_array_103[26]],C=$jsskein_array_103[27]===A;x=C?20:24;continue}continue;case 4:switch(g){case 0:C=l===A,x=20;continue;case 1:x=y?26:25;continue;case 2:x=(_=C)?19:9;continue;case 3:x=void 0;continue;case 4:var L=~(~(f[$jsskein_array_102[7]](m)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(f[$jsskein_array_103[21]](m)&f[$jsskein_array_103[21]](m))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));T+=$jsskein_array_104[10][$jsskein_array_102[2]](L),x=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["ŴīŏĪŜĨŇĨńķųĖŢćŤĐſč",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","ƛǺƘǴƑ",14,"fromCharCode","warn","error","dir",!0,"u","nab","˫˸˸˵˸",2,"st","ŎŃŗŌŁŊ",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","ΪΘί΁αΟί΁ΰ",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","ΥΥλδΧΨβΫ͸·δκίͿΊΫΨλέέΫθͷ͹ΑΫο",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","說\uD855褦᳋諹ۺ贯爣ﷺꇼ㞱磿ľ昷㒗潑縆▏瓧ᓀ",65])},{"../lib/devtools-detector":33}],135:[function(s,t,x){var a=s("../lib/oo"),g=s("../lib/data"),u=s("../lib/object"),d=s("../lib/dom"),h=s("../lib/event"),y=s("../lib/function"),o=s("../lib/layout"),l=(s("../lib/constants"),s("../lib/util"),s("../player/base/event/eventtype")),s=s("./component/util"),a=a.extend({init:function(f,T){var m=this,v=(this._player=f,this._eventState="",this._options=u.copy(T),this._el=this.createEl(),f.id);typeof f.id=="function"&&(v=f.id()),this._id=v+"_component_"+g.guid(),this._children=[],this._childIndex={},T.className&&this.addClass(T.className),this._player.on(l.Private.UiH5Ready,function(){m.renderUI(),m.syncUI(),m.bindEvent()})}});a.prototype.renderUI=function(){o.render(this.el(),this.options()),this.el().id=this.id()},a.prototype.syncUI=function(){},a.prototype.bindEvent=function(){},a.prototype.createEl=function(f,T){return d.createEl(f,T)},a.prototype.options=function(f){return f===void 0?this._options:this._options=u.merge(this._options,f)},a.prototype.el=function(){return this._el},a.prototype._contentEl,a.prototype.player=function(){return this._player},a.prototype.contentEl=function(){return this._contentEl||this._el},a.prototype._id,a.prototype.id=function(){return this._id},a.prototype.getId=function(){return this._id},a.prototype.addChild=function(f,T){var m;if(typeof f=="string"){if(!this._player.UI[f])return;m=new this._player.UI[f](this._player,T)}else m=f;return this._children.push(m),typeof m.id=="function"&&(this._childIndex[m.id()]=m),typeof m.el=="function"&&m.el()&&((T=m.el()).id=m.id(),this.contentEl().appendChild(T)),m},a.prototype.removeChild=function(f){if(f&&this._children){for(var T,m=!1,v=this._children.length-1;0<=v;v--)if(this._children[v]===f){m=!0,this._children.splice(v,1);break}m&&(this._childIndex[f.id]=null,T=f.el())&&T.parentNode===this.contentEl()&&this.contentEl().removeChild(f.el())}},a.prototype.initChildren=function(){var f,T,m=this,v=this.options().children;if(v)if(u.isArray(v))for(var S=0;S<v.length;S++)T=typeof(T=v[S])=="string"?(f=T,{}):(f=T.name,T),m.addChild(f,T);else u.each(v,function(w,E){E!==!1&&m.addChild(w,E)})},a.prototype.on=function(f,T){return h.on(this._el,f,y.bind(this,T)),this},a.prototype.off=function(f,T){return h.off(this._el,f,T),this},a.prototype.one=function(f,T){return h.one(this._el,f,y.bind(this,T)),this},a.prototype.trigger=function(f,T){if(this._el)return!T&&T!=0||(this._el.paramData=T),this._eventState=f,h.trigger(this._el,f),this},a.prototype.offAll=function(f){return h.off(this._el,f),this},a.prototype.addClass=function(f){return d.addClass(this._el,f),this},a.prototype.removeClass=function(f){return d.removeClass(this._el,f),this},a.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},a.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},a.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var f=this._children.length-1;0<=f;f--)this._children[f].destroy&&this._children[f].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),g.removeData(this._el),this._el=null},a.prototype.registerControlBarTooltip=s.registerTooltipEvent,t.exports=a},{"../lib/constants":30,"../lib/data":32,"../lib/dom":34,"../lib/event":35,"../lib/function":37,"../lib/layout":43,"../lib/object":44,"../lib/oo":45,"../lib/util":52,"../player/base/event/eventtype":70,"./component/util":165}],136:[function(o,t,x){var g=o("../component"),u=o("../../lib/dom"),d=o("../../lib/event"),h=o("../../player/base/event/eventtype"),y=o("../../player/base/plugin/status"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass("prism-big-play-btn")},createEl:function(){var l=g.prototype.createEl.call(this,"div");return l.innerHTML='<div class="outter"></div>',l},bindEvent:function(){var l=this,s=(this._player.on(h.Player.Play,function(){l.addClass("playing"),l.removeClass("pause"),l._hide()}),this._player.on(h.Player.Pause,function(){var a,f;l._player._switchSourcing||(l.removeClass("playing"),l.addClass("pause"),a=l._player._status,f=l._player._seeking,a==y.ended)||a==y.error||a==y.playing||f||l._show()}),document.querySelector("#"+l.id()+" .outter"));d.on(this.el(),"mouseover",function(){u.addClass(s,"big-playbtn-hover-animation")}),d.on(this.el(),"mouseout",function(){u.removeClass(s,"big-playbtn-hover-animation")}),this.on(h.Private.PlayClick,function(){l._player.paused()?l._player.play(!0):l._player.pause(!0)}),this._player.on(h.Private.Play_Btn_Show,function(){l._show()}),this._player.on(h.Private.Play_Btn_Hide,function(){l._hide()})},_show:function(){u.css(this.el(),"display","block")},_hide:function(){u.css(this.el(),"display","none")}});t.exports=o},{"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":97,"../component":135}],137:[function(o,t,x){var g=o("../component"),u=o("../../lib/dom"),d=o("./util"),h=o("../../lang/index"),y=o("../../player/base/event/eventtype"),o=g.extend({init:function(l,s){this.isOpened=!1,g.call(this,l,s),this.addClass("prism-cc-btn")},createEl:function(){return g.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this;this.on("click",function(){u.addClass(l._el,"disabled");var s="on",a="";l.isOpened?(l._player._ccService.close(),s="off"):a=l._player._ccService.open().label,l._player.trigger(y.Private.CCChanged,s),l._player.trigger(y.Private.CCStateChanged,{value:s,lang:a}),l.disabledHandler&&clearTimeout(l.disabledHandler),l.disabledHandler=setTimeout(function(){u.removeClass(l._el,"disabled")},1e3),l._player.trigger(y.Private.MarkerTextHide)}),this._player.on(y.Private.CCChanged,function(s){s=s.paramData,l.isOpened=s!="off"}),d.registerTooltipEvent.call(this,this.el(),function(){return l.isOpened?h.get("CloseSubtitle"):h.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});t.exports=o},{"../../lang/index":25,"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],138:[function(o,t,x){var g=o("../component"),u=o("../../player/base/event/eventtype"),d=o("../../lib/event"),h=o("../../lib/dom"),y=o("../../lib/ua"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var l=g.prototype.createEl.call(this);return l.innerHTML='<div class="prism-controlbar-bg"></div>',l},onEvent:function(){var l,s=this.player(),a=s.options(),f=this,T=(d.on(this._el,"mouseover",function(){var m=document.querySelector("#"+f.id()+" .prism-progress-cursor");h.css(m,"display","block")}),d.on(this._el,"mouseout",function(m){var v=document.querySelector("#"+f.id()+" .prism-progress-cursor");h.css(v,"display","none"),s.trigger(u.Private.ThumbnailHide)}),d.on(this._el,"click",function(m){s.trigger(u.Private.ControlBarClick,m)}),y.IS_IOS&&(d.on(this._el,"touchstart",function(){var m=document.querySelector("#"+f.id()+" .prism-progress-cursor");h.css(m,"display","block")}),d.on(this._player.tag,"touchstart",function(){var m=document.querySelector("#"+f.id()+" .prism-progress-cursor");h.css(m,"display","none"),s.trigger(u.Private.ThumbnailHide)})),this.timer=null,a.controlBarVisibility);(T=a.controlBarForOver==1?"hover":T)=="hover"?(f.hide(),l=function(){f._hideHandler&&clearTimeout(f._hideHandler),f._show(),s.fullscreenService.getIsFullScreen()&&f._hide()},s.on(u.Private.MouseOver,function(){l()}),d.on(this._player.tag,"click",function(m){m&&m.target==m.currentTarget&&l()}),d.on(this._player.tag,"touchstart",function(m){m&&m.target==m.currentTarget&&l()}),s.on(u.Private.MouseOut,function(){f._hideHandler=setTimeout(function(){f.hide(),s.trigger(u.Private.HideBar),s.trigger(u.Private.ThumbnailHide),s.trigger(u.Private.VolumeVisibilityChange,""),s.trigger(u.Private.SettingListHide)})})):T=="click"?(s.on(u.Private.Click,function(m){s._isError||(m.preventDefault(),m.stopPropagation(),f._show(),f._hide())}),s.on(u.Player.Ready,function(){f._hide()}),s.on(u.Private.TouchStart,function(){f._show()}),s.on(u.Private.TouchMove,function(){f._show()}),s.on(u.Private.TouchEnd,function(){f._hide()})):T=="never"?f._hide():f._show()},_show:function(){this.show(),this._player.trigger(u.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var l=this,s=this.player().options(),s=s.controlBarVisibility=="never"?0:s.showBarTime;this.timer=setTimeout(function(){l.hide(),l._player.trigger(u.Private.HideBar),l._player.trigger(u.Private.ThumbnailHide),l._player.trigger(u.Private.VolumeVisibilityChange,""),l._player.trigger(u.Private.SettingListHide)},s)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});t.exports=o},{"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../component":135}],139:[function(h,t,x){var g=h("../component"),u=h("../../lib/dom"),d=h("../../player/base/event/eventtype"),h=g.extend({init:function(y,o){g.call(this,y,o),this.addClass("prism-cover")},createEl:function(){var y=g.prototype.createEl.call(this,"div"),o=this.options().cover;return o?y.style.backgroundImage="url("+o+")":u.css(y,"display","none"),y},_hide:function(y){var o=document.querySelector("#"+this.id()+" .prism-cover");o&&u.css(o,"display","none")},_show:function(y){var o=document.querySelector("#"+this.id()+" .prism-cover");o&&u.css(o,"display","block")},bindEvent:function(){this._player.on(d.Private.Cover_Show,this._show),this._player.on(d.Private.Cover_Hide,this._hide)}});t.exports=h},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],140:[function(s,t,x){var g=s("../component"),u=s("../../lib/util"),d=s("../../lib/dom"),h=s("../../lib/event"),y=s("../../lib/ua"),o=s("../../lang/index"),l=s("../../player/base/event/eventtype"),s=(s("../../lib/playerutil"),g.extend({init:function(a,f){g.call(this,a,f),this.addClass("prism-ErrorMessage")},createEl:function(){var a=g.prototype.createEl.call(this,"div");return a.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+o.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+o.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+o.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",a},bindEvent:function(){var a=this,T=(a._player.on(l.Private.Error_Show,function(m){var v=null;a._player.getMonitorInfo&&(v=a._player.getMonitorInfo()),a._show(m,v)}),a._player.on(l.Private.Error_Hide,function(){a._hide()}),document.querySelector("#"+a.id()+" .prism-button-refresh")),f=(h.on(T,"click",function(){a._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),y.IS_MOBILE&&(T=document.querySelector("#"+a.id()+" .prism-detect-info"),d.addClass(T,"prism-width90")),document.querySelector("#"+a.id()+" .prism-error-detail")),T=document.querySelector("#"+this.id()+" .prism-button-orange");d.css(f,"display","none"),h.on(T,"click",function(){d.css(f,"display","block")})},_show:function(m,f){var m=m.paramData,T=(m.mediaId&&m.mediaId,m.mediaAuth&&m.mediaAuth,m.display_msg||m.error_msg),T=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=T,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=m.error_code,m.diagnosis_info),T=(T?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=T:(T=document.querySelector("#"+this.id()+" .prism-button-orange"),d.css(T,"display","none")),document.querySelector("#"+this.id()+" .vid")),T=(m.mediaId?(d.css(T,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=m.mediaId):d.css(T,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),m=(m.mediaAuth?(d.css(T,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=m.mediaAuth):d.css(T,"display","none"),m.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=m.uuid:(T=document.querySelector("#"+this.id()+" .uuid"),d.css(T,"display","none")),m.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=m.requestId:(T=document.querySelector("#"+this.id()+" .requestId"),d.css(T,"display","none")),m.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=m.serverRequestId:(T=document.querySelector("#"+this.id()+" .vodRequestId"),d.css(T,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=u.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),v=(d.css(m,"display","block"),this);v.playHideHandler&&clearTimeout(v.playHideHandler),v.playHideHandler=setTimeout(function(){v._player.trigger("play_btn_hide")})},_hide:function(){var a=document.querySelector("#"+this.id());d.css(a,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));t.exports=s},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],141:[function(o,t,x){var g=o("../component"),u=o("../../player/base/event/eventtype"),d=(o("../../lib/event"),o("../../lib/ua")),h=o("../../lang/index"),y=o("./util"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var l=this;this._player.on(u.Player.RequestFullScreen,function(){d.IS_IOS||l.addClass("fullscreen")}),this._player.on(u.Player.CancelFullScreen,function(){l.removeClass("fullscreen")}),y.registerTooltipEvent.call(this,this.el(),function(){return l._player.fullscreenService.getIsFullScreen()?h.get("ExistFullScreen"):h.get("Fullscreen")}),this.on("click",function(){l._player.fullscreenService.getIsFullScreen()?l._player.fullscreenService.cancelFullScreen():l._player.fullscreenService.requestFullScreen(),l._player.trigger(u.Private.MarkerTextHide)})}});t.exports=o},{"../../lang/index":25,"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],142:[function(y,t,x){var g=y("../component"),u=y("../../lib/dom"),d=y("../../player/base/event/eventtype"),h=y("../../lib/ua.js"),y=g.extend({init:function(o,l){g.call(this,o,l),this.addClass("prism-hide")},createEl:function(){var o=g.prototype.createEl.call(this,"div");return o.innerHTML=h.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',o},_loading_hide:function(o){var l=document.querySelector("#"+this.id()+" .prism-loading");l&&(u.removeClass(l,"prism-loading"),u.addClass(l,"prism-hide"))},_loading_show:function(o){var l=document.querySelector("#"+this.id()+" .prism-hide");l&&(u.removeClass(l,"prism-hide"),u.addClass(l,"prism-loading"))},bindEvent:function(){this._player.on(d.Private.H5_Loading_Show,this._loading_show),this._player.on(d.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=y},{"../../lib/dom":34,"../../lib/ua.js":50,"../../player/base/event/eventtype":70,"../component":135}],143:[function(h,t,x){var g=h("../component"),u=(h("../../lib/util"),h("../../lib/dom")),d=(h("../../lib/event"),h("../../lib/ua"),h("../../lang/index"),h("../../player/base/event/eventtype")),h=g.extend({init:function(y,o){g.call(this,y,o),this.addClass("prism-info-display")},createEl:function(){return g.prototype.createEl.call(this,"p")},bindEvent:function(){var y=this;y._player.on(d.Private.Info_Show,function(s){var l=document.querySelector("#"+y.id()),s=s.paramData;s&&(s.text!==void 0&&s.text?(l.innerHTML=s.text,s.duration!==void 0&&s.duration&&(y.handler&&clearTimeout(y.handler),y.handler=setTimeout(function(){u.css(l,"display","none")},s.duration)),s.align=="lb"?(u.addClass(l,"prism-info-left-bottom"),u.removeClass(l,"prism-info-top-center")):s.align=="tc"?(u.addClass(l,"prism-info-top-center"),u.removeClass(l,"prism-info-left-bottom")):(u.removeClass(l,"prism-info-left-bottom"),u.removeClass(l,"prism-info-top-center")),s.isBlack?u.addClass(l,"prism-info-black"):u.removeClass(l,"prism-info-black")):l.innerHTML=s,u.css(l,"display","block"))}),y._player.on(d.Private.Info_Hide,function(o){var l=document.querySelector("#"+y.id());u.css(l,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});t.exports=h},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],144:[function(d,t,x){var g=d("../component"),u=d("../../lang/index"),d=g.extend({init:function(h,y){g.call(this,h,y),this.addClass("prism-license-watermark")},createEl:function(){var h=g.prototype.createEl.call(this,"div");return h.innerHTML='<div class="no-authorization">'+u.get("License_No_Authorization")+'</div><a class="apply-button" target="_blank" href="https://help.aliyun.com/document_detail/434250.html">'+u.get("License_Click_To_Apply")+"</a>",h}});t.exports=d},{"../../lang/index":25,"../component":135}],145:[function(l,t,x){var g=l("../component"),u=l("./util"),d=(l("../../lib/util"),l("../../lib/dom")),h=l("../../lib/event"),y=l("../../lib/playerutil"),o=l("../../lang/index"),l=g.extend({init:function(s,a){g.call(this,s,a),this.addClass("prism-live-display")},createEl:function(){var s=g.prototype.createEl.call(this,"p");return s.innerText="LIVE",y.isLiveShift(this._player._options)&&d.addClass(s,"live-shift-display"),s},bindEvent:function(){var s=document.querySelector("#"+this.id()),a=this;y.isLiveShift(this._player._options)&&(h.on(s,"click",function(){a._player._liveshiftService.switchToLive()}),u.registerTooltipEvent.call(this,this.el(),o.get("SwitchToLive")))}});t.exports=l},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/playerutil":47,"../../lib/util":52,"../component":135,"./util":165}],146:[function(y,t,x){var g=y("../component"),u=(y("../../lib/dom"),y("../../lib/event"),y("../../player/base/event/eventtype")),d=y("../../player/base/plugin/status"),h=y("../../lib/ua.js"),y=g.extend({init:function(o,l){g.call(this,o,l),this.addClass("prism-animation")},bindEvent:function(){var o=this;this._player.on(u.Player.Play,function(){o._player._isManualPlay&&(o.removeClass("prism-pause-animation"),o.addClass("prism-play-animation"),h.IS_ANDROID_FIREFOX||o.removeClass("play-apply-animation"),o.playHandler&&clearTimeout(o.playHandler),o.playHandler=setTimeout(function(){h.IS_ANDROID_FIREFOX||o.addClass("play-apply-animation")}))}),this._player.on(u.Player.Pause,function(){var l=o._player._status;l!=d.ended&&l!=d.error&&o._player._isManualPause&&(o.removeClass("prism-play-animation"),o.addClass("prism-pause-animation"),h.IS_ANDROID_FIREFOX||o.removeClass("play-apply-animation"),o.pauseHandler&&clearTimeout(o.pauseHandler),o.pauseHandler=setTimeout(function(){h.IS_ANDROID_FIREFOX||o.addClass("play-apply-animation")}))})},disposeUI:function(){this.playHandler&&(clearTimeout(this.playHandler),this.playHandler=null),this.pauseHandler&&(clearTimeout(this.pauseHandler),this.pauseHandler=null)}});t.exports=y},{"../../lib/dom":34,"../../lib/event":35,"../../lib/ua.js":50,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":97,"../component":135}],147:[function(y,t,x){var g=y("../component"),u=y("../../player/base/event/eventtype"),d=y("./util"),h=y("../../lang/index"),y=g.extend({init:function(o,l){g.call(this,o,l),this.addClass("prism-play-btn")},bindEvent:function(){var o=this;this._player.on(u.Player.Play,function(){o.addClass("playing")}),this._player.on(u.Player.Pause,function(){o.removeClass("playing")}),this.on(u.Private.PlayClick,function(){var l;o._player.paused()?(l=o._player.getCurrentTime(),(o._player.getDuration()<=l||o._player._ended||o._player.exceedPreviewTime(l))&&!o._player._splayer&&o._player.seek(0),o._player.play(!0),o.addClass("playing")):(o._player.pause(!0),o.removeClass("playing")),o._player.trigger(u.Private.MarkerTextHide)}),d.registerTooltipEvent.call(this,this.el(),function(){return o._player.paused()?h.get("Play"):h.get("Pause")})}});t.exports=y},{"../../lang/index":25,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],148:[function(T,t,x){var g=T("../component"),u=T("../../lib/dom"),d=(T("../../lib/constants"),T("../../lib/event")),h=T("../../lib/ua"),y=T("../../lib/function"),o=T("../../lang/index"),l=T("../../config"),s=T("../../lib/util"),a=T("../../player/base/event/eventtype"),f=T("./util").debounce,T=g.extend({init:function(m,v){g.call(this,m,v),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),m.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var m=g.prototype.createEl.call(this);return m.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p>',m},bindEvent:function(){function m(_){v._progressDown=_}var v=this,S=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),w=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),E=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,E=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":l.domain?"https://"+l.domain+l.path+l.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",w.src=E,d.on(this.cursorNode,"mousedown",function(_){v._onMouseDown(_)}),d.on(this.cursorNode,"touchstart",function(_){v._onMouseDown(_)}),d.on(S,"mousemove",function(_){v._progressMove(_)}),d.on(S,"touchmove",function(_){v._progressMove(_)}),d.on(S,"mousedown",function(_){m(!0)}),d.on(S,"touchstart",function(_){m(!0)}),d.on(S,"mouseup",function(_){m(!1)}),d.on(S,"touchend",function(_){m(!1),v._moving&&h.IS_MOBILE&&(v._player.trigger(a.Private.EndStart,{toTime:v._lastSeekTime}),v._moving=!1)}),d.on(this._el,"click",function(_){v._onMouseClick(_)}),this._player.on(a.Private.HideProgress,function(_){v._hideProgress(_)}),this._player.on(a.Private.CancelHideProgress,function(_){v._cancelHideProgress(_)}),this._player.on(a.Private.HideBar,function(_){v._player._seeking=!1}),d.on(S,a.Private.MouseOver,function(_){v._onMouseOver(_)}),d.on(S,a.Private.MouseOut,function(_){v._onMouseOut(_)}),d.on(this.controlNode,a.Private.MouseLeave,function(_){v._offMouseUp()}),h.IS_PC?(w=f(function(){u.addClass(S,"prism-progress-hover"),u.addClass(v.cursorNode,"cursor-hover")},100),d.on(S,"mouseover",w),E=f(function(){u.removeClass(S,"prism-progress-hover"),u.removeClass(v.cursorNode,"cursor-hover"),v._progressDown=!1},100),d.on(S,"mouseout",E)):(u.addClass(S,"prism-progress-hover"),u.addClass(v.cursorNode,"cursor-hover")),this.bindTimeupdate=y.bind(this,this._onTimeupdate),this._player.on(a.Player.TimeUpdate,this.bindTimeupdate),h.IS_IPAD?this.interval=setInterval(function(){v._onProgress()},500):this._player.on(a.Video.Progress,function(){v._onProgress()}),this._player.on(a.Private.UpdateProgress,function(_){v._updateProgressBar(v.playedNode,_.paramData.targetTime)}),this._player.on(a.Private.UpdateCursorPosition,function(_){v._updateCursorPosition(_.paramData.targetTime)})},_progressMove:function(m){m.preventDefault();var v,S,w=this._getSeconds(m);w!=1/0&&(v=s.formatTime(w),S=this._getDistance(m),this.cursorNode)&&(this._player.trigger(a.Private.ThumbnailShow,{time:w,formatTime:v,left:S,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(m)},_hideProgress:function(m){d.off(this.cursorNode,"mousedown"),d.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(m){var v=this;d.on(this.cursorNode,"mousedown",function(S){v._onMouseDown(S)}),d.on(this.cursorNode,"touchstart",function(S){v._onMouseDown(S)})},_canSeekable:function(m){var v=!0;return v=typeof this._player.canSeekable=="function"?this._player.canSeekable(m):v},_onMouseOver:function(m){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(m){var v=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){v._player.trigger(a.Private.ThumbnailHide),v._mouseInProgress=!1})},_getSeconds:function(S){var S=this._getDistance(S),v=this.el().offsetWidth,S=this._player.getDuration()?S/v*this._player.getDuration():0;return S=(S=S<0?0:S)>this._player.getDuration()?this._player.getDuration():S},_getDistance:function(m){if(m.touches&&m.touches[0]){for(var v=this.el().offsetLeft,S=this.el();S.offsetParent;){var S=S.offsetParent,w=u.getTranslateX(S);v+=S.offsetLeft+w}S.tagName&&S.tagName.toLowerCase()==="body"&&(v+=document.getElementsByTagName("html")[0].offsetLeft);var E=(m.touches?m.touches[0]:m).pageX-v;return E=E<0?0:E}return E=m.offsetX,m.target===this.cursorNode||m.target.offsetParent===this.cursorNode?E+=this.cursorNode.offsetLeft:m.target!==this._el&&m.target.offsetParent!==this._el&&m.target.offsetParent===this.markerNode&&(E+=m.target.offsetLeft),E},_onMouseClick:function(m){var v=this,S=v._getSeconds(m);v._canSeekable(S)?(v._player.exceedPreviewTime(S)&&(S=v._player.getPreviewTime()),this._seekTime=S,v._updateProgressBar(this.playedNode,S),v._updateCursorPosition(S),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){v._player._seeking=!0,v._mouseDown&&!h.IS_MOBILE||(v._player.trigger(a.Private.SeekStart,{fromTime:v._player.getCurrentTime()}),v._player.trigger(a.Private.EndStart,{toTime:S})),v._player.seek(S),v._mouseDown=!1,v._mouseClickTimeHandle=null,v._inWaitingSeek=!1},0),this._inWaitingSeek=!0):v._player.trigger(a.Private.Info_Show,{text:o.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(S){var v=this,S=(S.preventDefault(),this._mouseDown=!0,h.IS_PC&&this._player.trigger(a.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),d.on(this.controlNode,"mousemove",function(w){v._onMouseMove(w)}),d.on(this.controlNode,"touchmove",function(w){v._onMouseMove(w)}),d.on(this.controlNode,"mouseup",function(w){v._onControlBarMouseUp(w)}),d.on(this.controlNode,"touchend",function(w){v._onControlBarMouseUp(w)}),v._getSeconds(S));v._canSeekable(S)?v._player.exceedPreviewTime(S)&&v._player.getPreviewTime():v._player.trigger(a.Private.Info_Show,{text:o.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(m){this._onMouseUpIntern(m)},_onControlBarMouseUp:function(m){this._onMouseUpIntern(m)},_onPlayerMouseUp:function(m){this._onMouseUpIntern(m)},_offMouseUp:function(){d.off(this.controlNode,"mousemove"),d.off(this.controlNode,"touchmove"),d.off(this.controlNode,"mouseup"),d.off(this.controlNode,"touchend")},_onMouseUpIntern:function(m){m.preventDefault(),this._offMouseUp(),m=this._getDistance(m)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(m)||this._player.seek(m),h.IS_PC&&this._player.trigger(a.Private.EndStart,{toTime:m}),this._autoHideThumbnail()},_onMouseMove:function(m){m.preventDefault(),!this._moving&&h.IS_MOBILE&&(this._player.trigger(a.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),m=this._getSeconds(m),this._player.exceedPreviewTime(m)&&(m=this._player.getPreviewTime()),this._player.seek(m),this._updateProgressBar(this.playedNode,m),this._updateCursorPosition(m),this._lastSeekTime=m},_onTimeupdate:function(m){var v=this._player._options.source,v=this._getUrlSuffix(v),S=!1;v==="mp4"&&(h.IS_MAC_SAFARI&&(S=!0),h.IS_IOS&&(S=!0),h.IS_IE11)&&(S=!0),v==="m3u8"&&h.IS_IE11&&(S=!0),this._player._options.mediaType=="audio"&&h.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._player._seeking&&!h.IS_EDGE||this._progressDown)&&!S||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(a.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(m){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(m,v){var S=this._player.getDuration();this._player._switchSourcing!=1&&S&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:v=this._seekTime),1<(v=v/S)&&(v=1),m)&&u.css(m,"width",100*v+"%")},_updateCursorPosition:function(m){var v,S,w,E=this._player.getDuration();this._player._switchSourcing!=1&&E&&(v=1,S=(this.cursorNode.offsetWidth||16)/2/(w=this._player.el().clientWidth),w!=0&&(v=1-S),w=(w=m/E-S)<0?0:w,this.cursorNode)&&(v<w?(u.css(this.cursorNode,"right","0px"),u.css(this.cursorNode,"left","auto")):(u.css(this.cursorNode,"right","auto"),u.css(this.cursorNode,"left",100*w+"%")))},_getUrlSuffix:function(m){return!m||typeof m!="string"?"":((m=(m.split("?")[0]||"").split("."))[m.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var m=this;h.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){m._moving||m._player.trigger(a.Private.ThumbnailHide)},2e3))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null)}});t.exports=T},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/event":35,"../../lib/function":37,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],149:[function(y,t,x){var g=y("../component"),u=(y("../../lib/util"),y("../../lib/dom")),d=y("../../lib/event"),h=y("../../player/base/event/eventtype"),y=g.extend({init:function(o,l){g.call(this,o,l),this.addClass("prism-marker-text")},createEl:function(){var o=g.prototype.createEl.call(this,"div");return o.innerHTML="<p></p>",o},bindEvent:function(){var o=this;o._player.on(h.Private.MarkerTextShow,function(l){var s=l.paramData,a=h.Player.MarkerDotOver;o._player.trigger(a,l.paramData),s.progressMarker.isCustomized?o._player.trigger(h.Private.LifeCycleChanged,{type:a,data:l.paramData}):(o._thumbnailShowHanlde&&(u.css(o.el(),"display","none"),clearTimeout(o._thumbnailShowHanlde)),o._thumbnailShowHanlde=setTimeout(function(){var f;document.querySelector("#"+o.id()+" p").innerText=s.progressMarker.text||"",s&&(u.css(o.el(),"display","block"),f=o._player.el().offsetWidth,left=f*s.left,width=o.el().offsetWidth,left+width>f?(u.css(o.el(),"right","0px"),u.css(o.el(),"left","auto")):(left=(left-=width/2)<0?0:left,u.css(o.el(),"right","auto"),u.css(o.el(),"left",left+"px")))},30))}),o._player.on(h.Private.MarkerTextHide,function(l){o._player.trigger(h.Player.MarkerDotOut),o._player.trigger(h.Private.LifeCycleChanged,{type:h.Player.MarkerDotOut,data:""}),o._thumbnailShowHanlde&&clearTimeout(o._thumbnailShowHanlde),u.css(o.el(),"display","none")}),d.on(o._player.tag,"click",function(l){l&&l.target==l.currentTarget&&o._player.trigger(h.Private.MarkerTextHide)}),d.on(o._player.tag,"touchstart",function(l){l&&l.target==l.currentTarget&&o._player.trigger(h.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});t.exports=y},{"../../lib/dom":34,"../../lib/event":35,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],150:[function(o,t,x){var g=o("./selector"),u=o("../../../lib/object"),d=(o("../../../lib/util"),o("../../../lib/cookie"),o("../../../lib/dom")),h=(o("../../../lib/event"),o("./util"),o("../../../lang/index")),y=o("../../../player/base/event/eventtype"),o=g.extend({init:function(l,s){this.Name=h.get("AudioTrack"),this.Type="audio",this.Tooltip=h.get("AudioTrack_Switch_To"),g.call(this,l,s)},bindEvent:function(){this.bindCommonEvent();var l=this,s=document.querySelector("#"+l.id()+" .selector-list");document.querySelector("#"+l.id()+" .header"),l._player.on(y.Private.ChangeURL,function(){l._hasGeneratedList=!1}),this._player.on(y.Player.AudioTrackSwitch,function(){d.addClass(s,"disabled")}),this._player.on(y.Player.AudioTrackSwitched,function(){d.removeClass(s,"disabled")}),l._player.on(y.Player.AudioTrackReady,function(a){!l._hasGeneratedList&&(l._clear(),a=a.paramData)&&(u.each(a,function(f,T){var m=d.createEl.call(l,"li",{key:f.value,text:f.text}),v=d.createEl.call(l,"span",{key:f.value,text:f.text});v.innerText=f.text,m.appendChild(v),s.appendChild(m)}),l._hasGeneratedList=!0)})},execute:function(l){this._player._audioTrackService.switch(l)}});t.exports=o},{"../../../lang/index":25,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],151:[function(o,t,x){var g=o("../../component"),u=(o("../../../lib/dom"),o("../../../player/base/event/eventtype")),d=o("./list"),h=o("../../../lang/index"),y=o("../util"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass(s.className||"prism-setting-btn"),this._settingList=new d(l,s),l.addChild(this._settingList,s)},createEl:function(){return g.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this;this.on("click",function(){l._settingList.isOpened?l._player.trigger(u.Private.SettingListHide):l._player.trigger(u.Private.SettingListShow),l._player.trigger(u.Private.SelectorHide),l._player.trigger(u.Private.MarkerTextHide),l._player.trigger(u.Private.VolumeVisibilityChange,"")}),y.registerTooltipEvent.call(this,this.el(),h.get("Setting"))}});t.exports=o},{"../../../lang/index":25,"../../../lib/dom":34,"../../../player/base/event/eventtype":70,"../../component":135,"../util":165,"./list":154}],152:[function(s,t,x){var g=s("./selector"),u=s("../../../lib/object"),d=s("../../../lib/dom"),h=(s("../../../lib/event"),s("./util"),s("../../../lib/cookie")),y=s("../../../lib/constants"),o=s("../../../lang/index"),l=s("../../../player/base/event/eventtype"),s=g.extend({init:function(a,f){this.Name=o.get("Subtitle"),this.Type="cc",this.Tooltip=o.get("CC_Switch_To"),g.call(this,a,f)},bindEvent:function(){this.bindCommonEvent();var a=this;this._player.on(l.Private.CCStateChanged,function(m){var T=m.paramData.value,m=m.paramData.lang,m=(T=="on"&&m?a._backCCText=m:T=="off"&&a._backCCText==""&&(a._backCCText=a._previousSelection.text),"Off");T=="on"&&(m=a._backCCText),a._player.trigger(l.Private.SelectorUpdateList,{type:"cc",text:m})})},generateList:function(a){var f=document.querySelector("#"+this.id()+" .selector-list"),T=this._player._ccService.tracks,m=this;u.each(T,function(v,S){var w=d.createEl.call(this,"li",{key:v.value,text:v.text}),E=d.createEl.call(this,"span",{key:v.value,text:v.text});v.text==a&&(d.addClass(w,"current"),m._previousSelection=w),E.innerText=v.text,w.appendChild(E),f.appendChild(w)})},execute:function(a){this._backCCText="",h.set(y.SelectedCC,a,365),this._player._ccService.switch(a)}});t.exports=s},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],153:[function(e,t,x){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./quality"),Audio:e("./audio")}},{"./audio":150,"./cc":152,"./quality":155,"./speed":157}],154:[function(a,t,x){var g=a("../../component"),u=a("../../../lib/dom"),d=a("../../../lib/ua"),h=a("../../../lib/event"),y=a("../../../player/base/event/eventtype"),o=a("./export"),l=a("./util"),s=a("../../../lang/index"),a=g.extend({init:function(f,T){for(var m in this.isOpened=!1,g.call(this,f,T),this.addClass(T.className||"prism-setting-list"),o)m=new o[m](f,T),f.addChild(m,T)},createEl:function(){var f=g.prototype.createEl.call(this,"div"),S="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",T=S.replace(/{type}/g,"speed").replace("{value}",s.get("Speed")),m=S.replace(/{type}/g,"cc").replace("{value}",s.get("Subtitle")),v=S.replace(/{type}/g,"audio").replace("{value}",s.get("AudioTrack")),S=S.replace(/{type}/g,"quality").replace("{value}",s.get("Quality"));return f.innerHTML=T+m+v+S,f},bindEvent:function(){function f(){m._player.trigger(y.Private.SettingListHide),m.isOpened=!1}function T(S){S&&S.text&&(document.querySelector("#"+m.id()+" .prism-setting-"+S.type+" .current-setting").innerText=S.text)}var m=this,v=(this._player.on(y.Private.SettingListShow,function(S){m.isOpened=!0,S=S.paramData,T(S),u.css(m.el(),"display","block")}),this._player.on(y.Private.UpdateToSettingList,function(S){S=S.paramData,T(S)}),this._player.on(y.Private.SelectorUpdateList,function(S){S=S.paramData,T(S),m._player.trigger(y.Private.SelectorValueChange,S)}),this._player.on(y.Private.SettingListHide,function(){m.isOpened=!1,u.css(m.el(),"display","none")}),h.on(this.el(),"click",function(w){m._player.trigger(y.Private.SettingListHide);var w=w.srcElement||w.target;(w=l.findItemElementForList(w))&&(w=w.getAttribute("type"),m._player.trigger(y.Private.SelectorShow,{type:w}))}),d.IS_MOBILE?"touchleave":"mouseleave");h.on(this.el(),v,function(){f()}),h.on(this._player.tag,"click",function(S){S&&S.target==S.currentTarget&&f()}),h.on(this._player.tag,"touchstart",function(S){S&&S.target==S.currentTarget&&f()}),this._player.on(y.Private.QualityChange,function(_){var w,E,_=_.paramData;_.levelSwitch&&(w=document.querySelector("#"+m.id()+" .prism-setting-quality .current-setting"),E=s.get("Auto"),_=_.desc,-1<w.innerText.indexOf(E))&&(_&&-1<_.indexOf("(")?E=E+"-"+_:E+=_?"("+_+")":"",w.innerText=E)})}});t.exports=a},{"../../../lang/index":25,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/ua":50,"../../../player/base/event/eventtype":70,"../../component":135,"./export":153,"./util":158}],155:[function(s,t,x){var g=s("./selector"),u=s("../../../lib/object"),d=(s("../../../lib/util"),s("../../../lib/cookie")),h=s("../../../lib/dom"),y=(s("../../../lib/event"),s("../../../lib/constants")),o=s("../../../lang/index"),l=s("../../../player/base/event/eventtype"),s=g.extend({init:function(a,f){this.Name=o.get("Quality"),this.Type="quality",this.Tooltip=o.get("Quality_Switch_To"),g.call(this,a,f),this._isMasterLevel=!1},showTip:function(a,f){this._player.trigger(l.Private.Info_Show,{text:a,duration:f,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var a=this,f=(this._player.on(l.Private.QualityChange,function(T){var m,v,S=0<a._player._urls.length?a._player._urls:a._player._qualityService.levels;(data=T.paramData).levelSwitch?(m=data.desc||data.bitrate,a._autoSWitchDesc=m,a._updateText(m)):0<a._player._currentPlayIndex&&(a._autoSWitchDesc="",v=S[(m=a._player._currentPlayIndex)-1].desc,S=S[m].desc,a.showTip(v+T.paramData+S,1e3),a._player.trigger(l.Private.SelectorValueChange,{type:a.Type,text:S}))}),document.querySelector("#"+a.id()+" .selector-list"));this._player.on(l.Player.LevelSwitch,function(){h.addClass(f,"disabled")}),this._player.on(l.Player.LevelSwitched,function(){h.removeClass(f,"disabled")})},generateList:function(a){var f,T=this._player._urls,m=this._player._currentPlayIndex,v=this._player._qualityService.levels,S=(0<v.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(m=(T=v).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<T.length&&(f=this,u.each(T,function(w,E){var _,P;(w.desc||w.bitrate)&&(_=h.createEl.call(this,"li",{key:w.Url,index:E,text:w.desc||w.bitrate}),P=h.createEl.call(this,"span",{key:w.Url,index:E,text:w.desc||w.bitrate}),E==m&&(h.addClass(_,"current"),f._previousSelection=_),P.innerText=w.desc||w.bitrate,_.appendChild(P),S.appendChild(_))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(a){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var f,T=this._player._qualityService.levels,m=0;m<T.length;m++)T[m].Url==a&&T[m].desc!=o.get("Auto")&&(f=T[m],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(a,f||{isAuto:!0}):(v=this._player.autoplay||this._player._status!="pause",this._player._loadByUrlInner(a,this._player.getCurrentTime(),v))}else{for(var v,S=this._player._urls.length,w=this._player._currentPlayIndex,E=-1,m=0;m<S;m++)if(this._player._urls[m].Url==a){E=this._player._currentPlayIndex=m,d.set(y.SelectedStreamLevel,this._player._urls[m].definition,365);break}w!=E&&-1<E&&(w=this._player.getCurrentTime(),v=this._player.autoplay||this._player._status!="pause",this._player.autoplay||w!=0||(v=!1),this._player._switchLevel&&!this._player._options.isLive?this._player._switchLevel(a):this._player._loadByUrlInner(a,w,v,!0))}var _=this;setTimeout(function(){_._player._switchSourcing=!1})},_updateText:function(a){var f=document.querySelector("#"+this.id()+" .selector-list .current"),T=document.querySelector("#"+this.id()+" .selector-list .current span"),m=o.get("Auto");T&&T.innerText&&-1<T.innerText.indexOf(m)&&(a&&-1<a.indexOf("(")?m=m+"-"+a:m+=a?"("+a+")":"",T.innerText=m,f)&&(f.text=m)},_resetAutoText:function(){for(var a=o.get("Auto"),f=document.querySelectorAll("#"+this.id()+" .selector-list li"),T=0;T<=f.length;T++){var m=f[T],v=m.querySelector("span");if(-1<v.innerText.indexOf(a)){v.innerText=a,m.text=a;break}}}});t.exports=s},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156}],156:[function(l,t,x){var g=l("../../component"),u=(l("../../../lib/object"),l("../../../lib/util"),l("../../../lib/ua")),d=(l("../../../lib/cookie"),l("../../../lib/dom")),h=l("../../../lib/event"),y=l("./util"),o=(l("../../../lang/index"),l("../../../player/base/event/eventtype")),l=g.extend({init:function(s,a){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",g.call(this,s,a),this.className=a.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var s=g.prototype.createEl.call(this,"div");return s.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',s},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var s=this,a=document.querySelector("#"+s.id()+" .selector-list"),m=document.querySelector("#"+s.id()+" .header");function f(){s._hasGeneratedList||(s._clear(),s.generateList(s._backupSelector),s._backupSelector="",s._hasGeneratedList=!0)}this._player.on(o.Private.ChangeURL,function(){s._hasGeneratedList=!1}),h.on(m,"click",function(){s._player.trigger(o.Private.SelectorHide),s._player.trigger(o.Private.SettingListShow,{type:s.Type,text:s._previousSelection?s._previousSelection.text:""})}),h.on(a,"click",function(S){var S=S.srcElement||S.target,w=S.key,E=S.text;s._player.traceLog("selector.js","selector::click#"+s.Name+"#"+s.Type+"#"+E+"#"+w),s._player.trigger(o.Player.SettingSelected,{name:s.Name,type:s.Type,text:E,key:w}),E!==void 0&&(s._previousSelection&&d.removeClass(s._previousSelection,"current"),s._previousSelection=y.findliElementForSelector(S),d.addClass(s._previousSelection,"current"),s.execute&&s.execute(w),S=s.Tooltip+"<span>"+E+"</span>",s._player.trigger(o.Private.Info_Show,{text:S,duration:3e3,align:"lb"}))}),s._player.on(o.Private.SelectorHide,function(){T()}),s._player.on(o.Private.SelectorValueChange,function(v){var S=v.paramData;if(S&&S.type==s.Type){var w=document.querySelectorAll("#"+s.id()+" .selector-list li");if(w){var E=w.length;E==0&&(s._backupSelector=S.text);for(var _=0;_<E;_++)if(w[_].text==S.text){s._previousSelection&&d.removeClass(s._previousSelection,"current"),d.addClass(w[_],"current"),s._previousSelection=w[_];break}}}}),s._player.on(o.Private.SettingListShow,function(){f()}),s._player.on(o.Private.SelectorGenerateList,function(w){var S=w.paramData&&w.paramData.type,w=w.paramData&&w.paramData.value;S===s.Type&&(s._hasGeneratedList=!1,w&&(s._backupSelector=w),f())}),s._player.on(o.Private.SelectorShow,function(v){(v=v.paramData).type==s.Type&&(v=document.querySelector("#"+s._player.id()+" .prism-"+v.type+"-selector"),s._hasGeneratedList||f(),d.css(v,"display","block"))});var T=function(){d.css(s.el(),"display","none"),s._player.trigger(o.Private.UpdateToSettingList,{type:s.Type,text:s._previousSelection?s._previousSelection.text:""})},m=u.IS_MOBILE?"touchleave":"mouseleave";h.on(this.el(),m,function(){T()}),h.on(this._player.tag,"click",function(v){v&&v.target==v.currentTarget&&T()}),h.on(this._player.tag,"touchstart",function(v){v&&v.target==v.currentTarget&&T()})},setSelected:function(s){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});t.exports=l},{"../../../lang/index":25,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/ua":50,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"../../component":135,"./util":158}],157:[function(l,t,x){var g=l("./selector"),u=l("../../../lib/object"),d=(l("../../../lib/util"),l("../../../lib/cookie"),l("../../../lib/dom")),h=(l("../../../lib/event"),l("./util"),l("../../../lib/constants")),y=l("../../../lang/index"),o=l("../../../player/base/event/eventtype"),l=g.extend({init:function(s,a){var f=this;this.Name=y.get("Speed"),this.Type="speed",this.Tooltip=y.get("Speed_Switch_To"),this.speedPreStore=1,g.call(this,s,a),this._player.on(o.Private.PlaybackRateChanged,function(T){var m=document.querySelector("#"+f.id()+" .selector-list");if(f._previousSelection){d.removeClass(f._previousSelection,"current");var v=m.children,S=!1;if(v&&v.length)for(var w=0;w<v.length;w++){var E=v.item(w);if(E&&E.tagName==="LI"&&E.key===T.paramData){f._previousSelection=E,S=!0;break}}d.addClass(f._previousSelection,"current"),S||console.log("UI Not Sync: No Such Speed '"+T.paramData+"' in SpeedLevels[]")}else f.speedPreStore=T.paramData})},generateList:function(){var s=document.querySelector("#"+this.id()+" .selector-list"),a=this._player._options.speedLevels,f=this.verifySpeedLevels(a)?a:h.SpeedLevels,T=this;u.each(f,function(m,v){var S=d.createEl.call(this,"li",{key:m.key,text:m.text}),w=d.createEl.call(this,"span",{key:m.key,text:m.text});w.innerText=m.text,(m.key==T.speedPreStore&&f.map(function(E){return E.key}).indexOf(T.speedPreStore)!==-1||m.key==1)&&(d.addClass(S,"current"),T._previousSelection=S),S.appendChild(w),s.appendChild(S)})},execute:function(s){this._player.setSpeed(s,!1)},verifySpeedLevels:function(s){var a=0;if(s&&s.length)try{s.forEach(function(f){typeof f.key=="number"&&f.key==f.key&&0<=f.key&&a++})}catch{return!1}return s&&a===s.length}});t.exports=l},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],158:[function(e,t,x){t.exports.findliElementForSelector=function(g){var u;return g&&g.tagName.toLowerCase()!="li"?(u=g.parentElement)&&u.tagName.toLowerCase()=="li"?u:null:g},t.exports.findliElementByKey=function(g,u){return document.querySelectors(g),null},t.exports.findItemElementForList=function(g){var u;return!g||-1<g.className.indexOf("prism-setting-item")||(u=g.parentElement)&&(g=t.exports.findItemElementForList(u)),g}},{}],159:[function(l,t,x){var g=l("../component"),u=l("../../lib/dom"),d=l("../../lib/util"),h=l("../../lang/index"),y=l("../../player/base/event/eventtype"),o=l("./util"),l=g.extend({init:function(a,f){g.call(this,a,f),this.addClass("prism-snapshot-btn")},createEl:function(){return g.prototype.createEl.call(this,"div")},bindEvent:function(){var a=this,f=this._player;f.on(y.Private.Snapshot_Hide,function(){u.css(a._el,"display","none")}),o.registerTooltipEvent.call(this,this.el(),h.get("Snapshot")),this.on("click",function(){a.trigger(y.Player.Snapshoting);var T=document.createElement("canvas"),_=f.tag,m=_.videoWidth,v=_.videoHeight,S=f._getSanpshotMatric(),w=(T.width=S.width||m,T.height=S.height||v,f.getCurrentTime()),E=T.getContext("2d"),P=(E.save(),f.getImage()),P=(P=="vertical"?(E.translate(0,T.height),E.scale(1,-1)):P=="horizon"&&(E.translate(T.width,0),E.scale(-1,1)),_),_=(f._splayer&&(P=f._splayer.renderType===2?f._el.querySelector("canvas"):f._el.querySelector("video")),E.drawImage(P,0,0,m,v),E.restore(),s(E,f.getOptions()),""),P="";try{_=T.toDataURL("image/jpeg",S.rate||1)}catch(R){P=R}m="",v="",_&&(E=(m=_).substr(m.indexOf(",")+1),v=d.toBinary(E)),a.trigger(y.Player.Snapshoted,{time:w,base64:m,binary:v,error:P})})}}),s=function(a,f){f=f.snapshotWatermark,f&&f.text&&(a.font=f.font,f.fillColor&&(a.fillStyle=f.fillColor,a.fillText(f.text,f.left,f.top)),f.strokeColor&&(a.strokeStyle=f.strokeColor,a.strokeText(f.text,f.left,f.top)),a.stroke())};t.exports=l},{"../../lang/index":25,"../../lib/dom":34,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],160:[function(u,t,x){var g=u("../component"),u=(u("../../lib/dom"),u("../../player/base/event/eventtype"),g.extend({init:function(d,h){g.call(this,d,h),this.addClass("prism-text-overlay")},createEl:function(){return g.prototype.createEl.call(this,"div")},_hide:function(d){},_show:function(d){},bindEvent:function(){}}));t.exports=u},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],161:[function(o,t,x){var g=o("../component"),u=(o("../../lib/util"),o("../../lib/dom")),d=o("../../lib/event"),h=(o("../../lib/ua"),o("../../lang/index"),o("../../player/base/event/eventtype")),y=o("./util"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass("prism-thumbnail")},createEl:function(){var l=g.prototype.createEl.call(this,"div");return l.innerHTML="<img></img><span></span>",l},bindEvent:function(){var l=this,s=(d.on(this._el,"mousemove",function(a){a.preventDefault()}),d.on(this._el,"touchmove",function(a){a.preventDefault()}),l._player.on(h.Private.ThumbnailLoaded,function(v){var f,T,m,v=v.paramData;v&&0<v.length&&(f=l._player._thumbnailService.makeUrl(v[0].text),l._player.log("THUMBNAILSTART",{tu:encodeURIComponent(f)}),T=new Date().getTime(),v[0].isBig?(u.css(l.el(),"background","url("+f+")"),u.css(l.el(),"width",v[0].w+"px"),u.css(l.el(),"height",v[0].h+"px"),l._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-T})):((m=document.querySelector("#"+l.id()+" img")).onload=function(){var S=m.width,w=m.height;u.css(l.el(),"width",S+"px"),u.css(l.el(),"height",w+"px"),l._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-T})},m.src=f))}),y.throttle(function(S){var f,T,m,S=S[0],v=document.querySelector("#"+l.id()+" span"),S=S.paramData;v.innerText=S.formatTime,S&&((f=l._player._thumbnailService.findAvailableCue(S.time))?f.isBig?(T=l._player._thumbnailService.makeUrl(f.text),u.css(l.el(),"background","url("+T+")"),f.w,f.h,m=-1*f.x+"px "+-1*f.y+"px",u.css(l.el(),"background-position",m)):(m=document.querySelector("#"+l.id()+" img"),T=l._player._thumbnailService.makeUrl(f.text),m.src!=T&&(m.src=T)):(u.css(l.el(),"border","none"),u.css(v,"left","0px")),u.css(l.el(),"display","block"),m=0,T=(f?l.el():v).offsetWidth,m=S.left+T>S.progressWidth?S.left-T:(m=S.left-T/2)<0?0:m,u.css(l.el(),"left",m+"px"))},30));l._player.on(h.Private.ThumbnailShow,s),l._player.on(h.Private.ThumbnailHide,function(a){u.css(l.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});t.exports=o},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],162:[function(h,t,x){var g=h("../component"),u=h("../../lib/util"),d=h("../../player/base/event/eventtype"),h=g.extend({init:function(y,o){g.call(this,y,o),this.addClass("prism-time-display")},createEl:function(){var y=g.prototype.createEl.call(this,"div");return y.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',y},bindEvent:function(){var y=this;this._player.on(d.Video.DurationChange,function(){var o=u.formatTime(y._player.getDisplayDuration());o?(document.querySelector("#"+y.id()+" .time-bound").style.display="inline",document.querySelector("#"+y.id()+" .duration").style.display="inline",document.querySelector("#"+y.id()+" .duration").innerText=o):(document.querySelector("#"+y.id()+" .duration").style.display="none",document.querySelector("#"+y.id()+" .time-bound").style.display="none")}),this._player.on(d.Video.TimeUpdate,function(){var o=y._player.getCurrentTime(),o=u.formatTime(o);document.querySelector("#"+y.id()+" .current-time")&&(o?(document.querySelector("#"+y.id()+" .current-time").style.display="inline",document.querySelector("#"+y.id()+" .current-time").innerText=o):document.querySelector("#"+y.id()+" .current-time").style.display="none")})}});t.exports=h},{"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],163:[function(h,t,x){var g=h("../component"),u=h("../../lib/dom"),d=h("../../player/base/event/eventtype"),h=g.extend({init:function(y,o){g.call(this,y,o),this.addClass("prism-tooltip")},createEl:function(){var y=g.prototype.createEl.call(this,"p");return y.innerText="提示信息",y},bindEvent:function(){var y=this;y._player.on(d.Private.TooltipShow,function(s){var l=document.querySelector("#"+y.id()),s=s.paramData,a=(l.innerText=s.text,u.css(l,"display","block"),l.offsetWidth),f=document.querySelector("#"+y._player.id()+" .prism-controlbar");f&&(f=f.offsetWidth,s.left+a>f?u.css(l,"left",f-a+"px"):u.css(l,"left",s.left-(a-s.width)/2+"px"))}),y._player.on(d.Private.TooltipHide,function(o){var l=document.querySelector("#"+y.id());u.css(l,"display","none")})}});t.exports=h},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],164:[function(o,t,x){var g=o("../component"),u=o("../../lib/dom"),d=o("../../lib/event"),h=o("../../lang/index"),y=o("../../player/base/event/eventtype"),o=g.extend({init:function(l,s){g.call(this,l,s),this.addClass("prism-unmute-btn")},createEl:function(){var l=g.prototype.createEl.call(this,"div");return l.innerText=h.get("Click_To_Unmute"),l},bindEvent:function(){var l=this;this._player.on(y.Private.MutedAutoplay,function(){var s;(s=l._player.getOptions().autoplayPolicy)!=null&&s.showUnmuteBtn&&l._show()}),d.on(this.el(),"click",function(){l._player.unMute(!0),l._hide()})},_show:function(){u.css(this.el(),"display","block")},_hide:function(){u.css(this.el(),"display","none")}});t.exports=o},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135}],165:[function(e,t,x){var g=e("../../lib/event"),u=e("../../player/base/event/eventtype");t.exports.registerTooltipEvent=function(d,h){function y(){o._controlbarTooltipHandler&&(clearTimeout(o._controlbarTooltipHandler),o._controlbarTooltipHandler=null)}var o=this;g.on(this.el(),"mouseover",function(l){y(),o._controlbarTooltipHandler=setTimeout(function(){o._player.trigger(u.Private.TooltipHide)},4e3);var s=o.el().offsetLeft,a=o.el().offsetWidth,f=h;typeof h=="function"&&(f=h.call(this)),o._player.trigger(u.Private.TooltipShow,{left:s,width:a,text:f})}),g.on(this.el(),"mouseout",function(){y(),o._player.trigger(u.Private.TooltipHide)})},t.exports.throttle=function(d,h){var y=Date.now();return function(){var o=arguments,l=Date.now();h<=l-y&&(d(o),y=l)}},t.exports.debounce=function(d,h){var y;return function(){var o=this,l=arguments;clearTimeout(y),y=setTimeout(function(){d.apply(o,l)},h)}}},{"../../lib/event":35,"../../player/base/event/eventtype":70}],166:[function(s,t,x){var g=s("../component"),u=s("../../lib/dom"),d=s("../../lib/event"),h=s("../../player/base/event/eventtype"),y=s("./util"),o=s("../../lang/index"),l=s("./volumecontrol"),s=g.extend({init:function(a,f){g.call(this,a,f),this.addClass("prism-volume");var T=new l(a,f);a.addChild(T,f),this.volumeControl=T},createEl:function(){var a=g.prototype.createEl.call(this,"div");return a.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',a},bindEvent:function(){var a=this,f=a._player,T=(this.icon=document.querySelector("#"+a.id()+"  .volume-icon"),y.registerTooltipEvent.call(this,this.el(),function(){return a._player.muted()||a._player.getVolume()==0?o.get("Muted"):o.get("Volume")}),d.on(this.icon,"click",function(v){var S;a.volumeControl._shown?f.muted()?f.unMute():f.mute():(S=a.el().offsetLeft,a._player.trigger(h.Private.SettingListHide),a._player.trigger(h.Private.SelectorHide),a._player.trigger(h.Private.VolumeVisibilityChange,S),a._player.trigger(h.Private.MarkerTextHide))}),document.querySelector("#"+a.id()+"  .long-horizontal")),m=document.querySelector("#"+a.id()+"  .short-horizontal");d.on(this.el(),"mouseover",function(){u.removeClass(T,"volume-hover-animation"),setTimeout(function(){u.addClass(T,"volume-hover-animation")}),setTimeout(function(){u.removeClass(T,"volume-hover-animation"),u.addClass(m,"volume-hover-animation"),setTimeout(function(){u.removeClass(m,"volume-hover-animation"),u.addClass(T,"volume-hover-animation")},300)},300)}),d.on(window,"resize",function(){var v;a.volumeControl._shown&&(v=a.el().offsetLeft,a._player.trigger(h.Private.VolumeUpdatePosition,v))})}});t.exports=s},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135,"./util":165,"./volumecontrol":167}],167:[function(y,t,x){var g=y("../component"),u=y("../../lib/dom"),d=y("../../lib/event"),h=y("../../player/base/event/eventtype"),y=(y("./util"),y("../../lang/index"),g.extend({init:function(o,l){g.call(this,o,l),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var o=g.prototype.createEl.call(this,"div");return o.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',o},bindEvent:function(){var o=this;this.icon=document.querySelector("#"+o._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+o.id()),this.volumnValue=document.querySelector("#"+o.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+o.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+o.id()+"  .volume-cursor"),this._player.on(h.Private.VolumeVisibilityChange,function(a){var s,a=a.paramData;!o._shown&&a?(s=o._player.getVolume(),o._setVolumnUI(s),u.css(o.control,"display","block"),a&&o._updatePosition(a),o._shown=!0):o._hide()}),this._player.on(h.Private.VolumeUpdatePosition,function(l){l=l.paramData,o._shown&&o._updatePosition(l)}),this._player.on(h.Private.ControlBarClick,function(l){u.hasClass(l.paramData.target,"prism-controlbar-bg")&&o._hide()}),d.on(this.volumnRange,"click",function(l){l=u.getPointerPosition(o.volumnRange,l).y,l<0||1<l||(o._setVolumnUI(l=1<(l=l<0?0:l)?1:l),o._setMuteUI(l),o._player.setVolume(l))}),d.on(this._player.tag,"click",function(l){l&&l.target==l.currentTarget&&o._hide()}),d.on(this._player.tag,"touchstart",function(l){l&&l.target==l.currentTarget&&o._hide()}),d.on(this.volumnCursor,"mousedown",function(l){o._onMouseDown(l)}),d.on(this.volumnCursor,"touchstart",function(l){o._onMouseDown(l)}),this._player.on(h.Private.VolumnChanged,function(l){l=l.paramData,-1<l&&o._setVolumnUI(l),o._setMuteUI(l)}),d.on(this.control,"mouseleave",function(){o._offEvent(),o._hide()}),d.on(this.control,"mouseover",function(){u.addClass(o.control,"hover")}),o._rangeBottom=o._getBottom()},_getBottom:function(){var o;return window.getComputedStyle?(o=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(o)):26},_onMouseDown:function(o){var l=this;o.preventDefault(),d.on(this.control,"mousemove",function(s){l._onMouseMove(s)}),d.on(this.control,"touchmove",function(s){l._onMouseMove(s)}),d.on(this._player.tag,"mouseup",function(s){l._onMouseUp(s)}),d.on(this._player.tag,"touchend",function(s){l._onMouseUp(s)}),d.on(this.control,"mouseup",function(s){l._onMouseUp(s)}),d.on(this.control,"touchend",function(s){l._onMouseUp(s)})},_onMouseUp:function(o){o.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(o=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(o),this._setMuteUI(o))},_onMouseMove:function(o){o.preventDefault(),o=u.getPointerPosition(this.volumnRange,o).y,o<0||1<o||this._setVolumnUI(o=1<(o=o<0?0:o)?1:o)},_getPosition:function(o){for(var l=this.volumnRange,s=0;l=l.offsetParent;)s+=l.offsetTop;var a=this.volumnRange.offsetHeight,f=this.volumnCursor.offsetHeight,T=(o.touches?o.touches[0]:o).pageY;return(a-((T=a<T-s?o.clientY:T)-s)+f)/this.volumnRange.offsetHeight},_offEvent:function(){d.off(this._player.tag,"mouseup"),d.off(this._player.tag,"touchend"),d.off(this.control,"mousemove"),d.off(this.control,"touchmove"),d.off(this.control,"mouseup"),d.off(this.control,"touchend")},_setMuteUI:function(o){isNaN(o)||(o==0||o==-1?u.addClass(this.icon,"mute"):u.removeClass(this.icon,"mute"))},_setVolumnUI:function(o){isNaN(o)||(u.css(this.volumnValue,"height",100*o+"%"),u.css(this.volumnCursor,"bottom",100*(o=o==1?.99:o)+"%"))},_hide:function(){u.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(o){u.css(this.control,"left",o-5+"px")}}));t.exports=y},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],168:[function(e,t,x){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),unmuteButton:e("./component/unmute-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":12,"../commonui/livetimedisplay":13,"./component/big-play-button":136,"./component/cc-button":137,"./component/controlbar":138,"./component/error-display":140,"./component/fullscreen-button":141,"./component/h5-loading":142,"./component/info-display":143,"./component/live-display":145,"./component/play-button":147,"./component/progress":148,"./component/setting/button":151,"./component/snapshot":159,"./component/thumbnail":161,"./component/time-display":162,"./component/tooltip":163,"./component/unmute-button":164,"./component/volume":166}]},{},[15])(15)})})(aliplayerMin);var aliplayerMinExports=aliplayerMin.exports;const Aliplayer$1=getDefaultExportFromCjs(aliplayerMinExports),_withScopeId=e=>(pushScopeId("data-v-d8fd3f4e"),e=e(),popScopeId(),e),_hoisted_1=_withScopeId(()=>createBaseVNode("header",null,[createBaseVNode("div",{class:"main-content"},[createBaseVNode("img",{class:"logo",src:_imports_0$1,alt:""})])],-1)),_hoisted_2={class:"main-content content-wrap"},_hoisted_3={class:"left-area"},_hoisted_4={class:"right-area"},_sfc_main=defineComponent({__name:"App",setup(e){const t=ref(null),x=ref(videoList[0]);onMounted(()=>{g(videoList[0].Source,videoList[0].CoverURL)});const g=(y,o)=>{t.value=new Aliplayer$1({id:"container",width:"100%",height:"485px",source:y,cover:o,from:"vuedemo",components:[{name:"StartADComponent",type:window.AliPlayerComponent.StartADComponent,args:["https://img.alicdn.com/tfs/TB1byi8afDH8KJjy1XcXXcpdXXa-1920-514.jpg","https://www.aliyun.com/product/vod",3]},{name:"MemoryPlayComponent",type:window.AliPlayerComponent.MemoryPlayComponent,args:[!1,h,d]}]},l=>{l.on("ended",()=>{let s=videoList.findIndex(a=>a.VideoId===x.value.VideoId);s===-1||s===videoList.length-1||u(videoList[s+1])})})},u=y=>{x.value=y,t.value.dispose(),g(y.Source,y.CoverURL)},d=function(y,o){localStorage.setItem(y,o)},h=function(y){return localStorage.getItem(y)};return(y,o)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1,createBaseVNode("main",null,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(ThePlayer,{playingVideo:x.value},null,8,["playingVideo"])]),createBaseVNode("div",_hoisted_4,[createVNode(VideoList,{onUpdate:u})])])])],64))}}),App=_export_sfc(_sfc_main,[["__scopeId","data-v-d8fd3f4e"]]);createApp(App).mount("#app");
